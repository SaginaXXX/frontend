const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index--7Y_mXRl.js","./ort-web.min-OS_AKbTQ.js"])))=>i.map(i=>d[i]);
function iL(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var sL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function yx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function oL(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var oT={exports:{}},Pp={},aT={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd=Symbol.for("react.element"),aL=Symbol.for("react.portal"),lL=Symbol.for("react.fragment"),cL=Symbol.for("react.strict_mode"),uL=Symbol.for("react.profiler"),dL=Symbol.for("react.provider"),hL=Symbol.for("react.context"),fL=Symbol.for("react.forward_ref"),pL=Symbol.for("react.suspense"),gL=Symbol.for("react.memo"),mL=Symbol.for("react.lazy"),V_=Symbol.iterator;function yL(t){return t===null||typeof t!="object"?null:(t=V_&&t[V_]||t["@@iterator"],typeof t=="function"?t:null)}var lT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cT=Object.assign,uT={};function Zl(t,e,r){this.props=t,this.context=e,this.refs=uT,this.updater=r||lT}Zl.prototype.isReactComponent={};Zl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dT(){}dT.prototype=Zl.prototype;function vx(t,e,r){this.props=t,this.context=e,this.refs=uT,this.updater=r||lT}var xx=vx.prototype=new dT;xx.constructor=vx;cT(xx,Zl.prototype);xx.isPureReactComponent=!0;var G_=Array.isArray,hT=Object.prototype.hasOwnProperty,bx={current:null},fT={key:!0,ref:!0,__self:!0,__source:!0};function pT(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hT.call(e,n)&&!fT.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:rd,type:t,key:s,ref:o,props:i,_owner:bx.current}}function vL(t,e){return{$$typeof:rd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _x(t){return typeof t=="object"&&t!==null&&t.$$typeof===rd}function xL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var W_=/\/+/g;function Gg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xL(""+t.key):e.toString(36)}function Rh(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rd:case aL:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Gg(o,0):n,G_(i)?(r="",t!=null&&(r=t.replace(W_,"$&/")+"/"),Rh(i,e,r,"",function(c){return c})):i!=null&&(_x(i)&&(i=vL(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(W_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",G_(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Gg(s,a);o+=Rh(s,e,r,l,i)}else if(l=yL(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Gg(s,a++),o+=Rh(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ed(t,e,r){if(t==null)return t;var n=[],i=0;return Rh(t,n,"","",function(s){return e.call(r,s,i++)}),n}function bL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ur={current:null},Mh={transition:null},_L={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:Mh,ReactCurrentOwner:bx};function gT(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Ed,forEach:function(t,e,r){Ed(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ed(t,function(){e++}),e},toArray:function(t){return Ed(t,function(e){return e})||[]},only:function(t){if(!_x(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Zl;Ce.Fragment=lL;Ce.Profiler=uL;Ce.PureComponent=vx;Ce.StrictMode=cL;Ce.Suspense=pL;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_L;Ce.act=gT;Ce.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=cT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hT.call(e,l)&&!fT.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:rd,type:t.type,key:i,ref:s,props:n,_owner:o}};Ce.createContext=function(t){return t={$$typeof:hL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dL,_context:t},t.Consumer=t};Ce.createElement=pT;Ce.createFactory=function(t){var e=pT.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:fL,render:t}};Ce.isValidElement=_x;Ce.lazy=function(t){return{$$typeof:mL,_payload:{_status:-1,_result:t},_init:bL}};Ce.memo=function(t,e){return{$$typeof:gL,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Mh.transition;Mh.transition={};try{t()}finally{Mh.transition=e}};Ce.unstable_act=gT;Ce.useCallback=function(t,e){return ur.current.useCallback(t,e)};Ce.useContext=function(t){return ur.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return ur.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return ur.current.useEffect(t,e)};Ce.useId=function(){return ur.current.useId()};Ce.useImperativeHandle=function(t,e,r){return ur.current.useImperativeHandle(t,e,r)};Ce.useInsertionEffect=function(t,e){return ur.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return ur.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return ur.current.useMemo(t,e)};Ce.useReducer=function(t,e,r){return ur.current.useReducer(t,e,r)};Ce.useRef=function(t){return ur.current.useRef(t)};Ce.useState=function(t){return ur.current.useState(t)};Ce.useSyncExternalStore=function(t,e,r){return ur.current.useSyncExternalStore(t,e,r)};Ce.useTransition=function(){return ur.current.useTransition()};Ce.version="18.3.1";aT.exports=Ce;var w=aT.exports;const cn=yx(w),H_=iL({__proto__:null,default:cn},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wL=w,SL=Symbol.for("react.element"),EL=Symbol.for("react.fragment"),CL=Object.prototype.hasOwnProperty,TL=wL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PL={key:!0,ref:!0,__self:!0,__source:!0};function mT(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)CL.call(e,n)&&!PL.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:SL,type:t,key:s,ref:o,props:i,_owner:TL.current}}Pp.Fragment=EL;Pp.jsx=mT;Pp.jsxs=mT;oT.exports=Pp;var b=oT.exports,yT={exports:{}},Xr={},vT={exports:{}},xT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,B){var A=L.length;L.push(B);e:for(;0<A;){var N=A-1>>>1,z=L[N];if(0<i(z,B))L[N]=B,L[A]=z,A=N;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var B=L[0],A=L.pop();if(A!==B){L[0]=A;e:for(var N=0,z=L.length,q=z>>>1;N<q;){var ue=2*(N+1)-1,xe=L[ue],we=ue+1,Me=L[we];if(0>i(xe,A))we<z&&0>i(Me,xe)?(L[N]=Me,L[we]=A,N=we):(L[N]=xe,L[ue]=A,N=ue);else if(we<z&&0>i(Me,A))L[N]=Me,L[we]=A,N=we;else break e}}return B}function i(L,B){var A=L.sortIndex-B.sortIndex;return A!==0?A:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(L){for(var B=r(c);B!==null;){if(B.callback===null)n(c);else if(B.startTime<=L)n(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=r(c)}}function _(L){if(g=!1,m(L),!p)if(r(l)!==null)p=!0,U(C);else{var B=r(c);B!==null&&F(_,B.startTime-L)}}function C(L,B){p=!1,g&&(g=!1,v(S),S=-1),f=!0;var A=h;try{for(m(B),d=r(l);d!==null&&(!(d.expirationTime>B)||L&&!M());){var N=d.callback;if(typeof N=="function"){d.callback=null,h=d.priorityLevel;var z=N(d.expirationTime<=B);B=t.unstable_now(),typeof z=="function"?d.callback=z:d===r(l)&&n(l),m(B)}else n(l);d=r(l)}if(d!==null)var q=!0;else{var ue=r(c);ue!==null&&F(_,ue.startTime-B),q=!1}return q}finally{d=null,h=A,f=!1}}var E=!1,T=null,S=-1,P=5,I=-1;function M(){return!(t.unstable_now()-I<P)}function k(){if(T!==null){var L=t.unstable_now();I=L;var B=!0;try{B=T(!0,L)}finally{B?R():(E=!1,T=null)}}else E=!1}var R;if(typeof y=="function")R=function(){y(k)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,V=O.port2;O.port1.onmessage=k,R=function(){V.postMessage(null)}}else R=function(){x(k,0)};function U(L){T=L,E||(E=!0,R())}function F(L,B){S=x(function(){L(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,U(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var A=h;h=B;try{return L()}finally{h=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var A=h;h=L;try{return B()}finally{h=A}},t.unstable_scheduleCallback=function(L,B,A){var N=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?N+A:N):A=N,L){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=A+z,L={id:u++,callback:B,priorityLevel:L,startTime:A,expirationTime:z,sortIndex:-1},A>N?(L.sortIndex=A,e(c,L),r(l)===null&&L===r(c)&&(g?(v(S),S=-1):g=!0,F(_,A-N))):(L.sortIndex=z,e(l,L),p||f||(p=!0,U(C))),L},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(L){var B=h;return function(){var A=h;h=B;try{return L.apply(this,arguments)}finally{h=A}}}})(xT);vT.exports=xT;var IL=vT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AL=w,Vr=IL;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bT=new Set,bu={};function aa(t,e){Ml(t,e),Ml(t+"Capture",e)}function Ml(t,e){for(bu[t]=e,t=0;t<e.length;t++)bT.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ny=Object.prototype.hasOwnProperty,kL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X_={},Y_={};function RL(t){return Ny.call(Y_,t)?!0:Ny.call(X_,t)?!1:kL.test(t)?Y_[t]=!0:(X_[t]=!0,!1)}function ML(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OL(t,e,r,n){if(e===null||typeof e>"u"||ML(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dr(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new dr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new dr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new dr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new dr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new dr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new dr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new dr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new dr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new dr(t,5,!1,t.toLowerCase(),null,!1,!1)});var wx=/[\-:]([a-z])/g;function Sx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wx,Sx);Gt[e]=new dr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wx,Sx);Gt[e]=new dr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wx,Sx);Gt[e]=new dr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new dr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new dr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ex(t,e,r,n){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OL(e,r,i,n)&&(r=null),n||i===null?RL(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ds=AL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),$a=Symbol.for("react.portal"),ja=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),By=Symbol.for("react.profiler"),_T=Symbol.for("react.provider"),wT=Symbol.for("react.context"),Tx=Symbol.for("react.forward_ref"),Uy=Symbol.for("react.suspense"),zy=Symbol.for("react.suspense_list"),Px=Symbol.for("react.memo"),Ss=Symbol.for("react.lazy"),ST=Symbol.for("react.offscreen"),q_=Symbol.iterator;function gc(t){return t===null||typeof t!="object"?null:(t=q_&&t[q_]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Wg;function Bc(t){if(Wg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Wg=e&&e[1]||""}return`
`+Wg+t}var Hg=!1;function Xg(t,e){if(!t||Hg)return"";Hg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Bc(t):""}function LL(t){switch(t.tag){case 5:return Bc(t.type);case 16:return Bc("Lazy");case 13:return Bc("Suspense");case 19:return Bc("SuspenseList");case 0:case 2:case 15:return t=Xg(t.type,!1),t;case 11:return t=Xg(t.type.render,!1),t;case 1:return t=Xg(t.type,!0),t;default:return""}}function $y(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ja:return"Fragment";case $a:return"Portal";case By:return"Profiler";case Cx:return"StrictMode";case Uy:return"Suspense";case zy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wT:return(t.displayName||"Context")+".Consumer";case _T:return(t._context.displayName||"Context")+".Provider";case Tx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Px:return e=t.displayName||null,e!==null?e:$y(t.type)||"Memo";case Ss:e=t._payload,t=t._init;try{return $y(t(e))}catch{}}return null}function DL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $y(e);case 8:return e===Cx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ET(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FL(t){var e=ET(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Td(t){t._valueTracker||(t._valueTracker=FL(t))}function CT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ET(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ff(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jy(t,e){var r=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function K_(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Gs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TT(t,e){e=e.checked,e!=null&&Ex(t,"checked",e,!1)}function Vy(t,e){TT(t,e);var r=Gs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gy(t,e.type,r):e.hasOwnProperty("defaultValue")&&Gy(t,e.type,Gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Z_(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Gy(t,e,r){(e!=="number"||ff(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Uc=Array.isArray;function al(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Gs(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Q_(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(G(92));if(Uc(r)){if(1<r.length)throw Error(G(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Gs(r)}}function PT(t,e){var r=Gs(e.value),n=Gs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function J_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pd,AT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pd=Pd||document.createElement("div"),Pd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _u(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NL=["Webkit","ms","Moz","O"];Object.keys(eu).forEach(function(t){NL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eu[e]=eu[t]})});function kT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||eu.hasOwnProperty(t)&&eu[t]?(""+e).trim():e+"px"}function RT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=kT(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var BL=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xy(t,e){if(e){if(BL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Yy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qy=null;function Ix(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ky=null,ll=null,cl=null;function ew(t){if(t=sd(t)){if(typeof Ky!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Mp(e),Ky(t.stateNode,t.type,e))}}function MT(t){ll?cl?cl.push(t):cl=[t]:ll=t}function OT(){if(ll){var t=ll,e=cl;if(cl=ll=null,ew(t),e)for(t=0;t<e.length;t++)ew(e[t])}}function LT(t,e){return t(e)}function DT(){}var Yg=!1;function FT(t,e,r){if(Yg)return t(e,r);Yg=!0;try{return LT(t,e,r)}finally{Yg=!1,(ll!==null||cl!==null)&&(DT(),OT())}}function wu(t,e){var r=t.stateNode;if(r===null)return null;var n=Mp(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(G(231,e,typeof r));return r}var Zy=!1;if(ts)try{var mc={};Object.defineProperty(mc,"passive",{get:function(){Zy=!0}}),window.addEventListener("test",mc,mc),window.removeEventListener("test",mc,mc)}catch{Zy=!1}function UL(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var tu=!1,pf=null,gf=!1,Qy=null,zL={onError:function(t){tu=!0,pf=t}};function $L(t,e,r,n,i,s,o,a,l){tu=!1,pf=null,UL.apply(zL,arguments)}function jL(t,e,r,n,i,s,o,a,l){if($L.apply(this,arguments),tu){if(tu){var c=pf;tu=!1,pf=null}else throw Error(G(198));gf||(gf=!0,Qy=c)}}function la(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function NT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tw(t){if(la(t)!==t)throw Error(G(188))}function VL(t){var e=t.alternate;if(!e){if(e=la(t),e===null)throw Error(G(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return tw(i),t;if(s===n)return tw(i),e;s=s.sibling}throw Error(G(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(r.alternate!==n)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?t:e}function BT(t){return t=VL(t),t!==null?UT(t):null}function UT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UT(t);if(e!==null)return e;t=t.sibling}return null}var zT=Vr.unstable_scheduleCallback,rw=Vr.unstable_cancelCallback,GL=Vr.unstable_shouldYield,WL=Vr.unstable_requestPaint,dt=Vr.unstable_now,HL=Vr.unstable_getCurrentPriorityLevel,Ax=Vr.unstable_ImmediatePriority,$T=Vr.unstable_UserBlockingPriority,mf=Vr.unstable_NormalPriority,XL=Vr.unstable_LowPriority,jT=Vr.unstable_IdlePriority,Ip=null,mi=null;function YL(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(Ip,t,void 0,(t.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:ZL,qL=Math.log,KL=Math.LN2;function ZL(t){return t>>>=0,t===0?32:31-(qL(t)/KL|0)|0}var Id=64,Ad=4194304;function zc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yf(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=zc(a):(s&=o,s!==0&&(n=zc(s)))}else o=r&~i,o!==0?n=zc(o):s!==0&&(n=zc(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Rn(e),i=1<<r,n|=t[r],e&=~i;return n}function QL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JL(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Rn(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=QL(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Jy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VT(){var t=Id;return Id<<=1,!(Id&4194240)&&(Id=64),t}function qg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function nd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rn(e),t[e]=r}function eD(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Rn(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function kx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Rn(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Fe=0;function GT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WT,Rx,HT,XT,YT,ev=!1,kd=[],Ds=null,Fs=null,Ns=null,Su=new Map,Eu=new Map,Ts=[],tD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nw(t,e){switch(t){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(e.pointerId)}}function yc(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sd(e),e!==null&&Rx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function rD(t,e,r,n,i){switch(e){case"focusin":return Ds=yc(Ds,t,e,r,n,i),!0;case"dragenter":return Fs=yc(Fs,t,e,r,n,i),!0;case"mouseover":return Ns=yc(Ns,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Su.set(s,yc(Su.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Eu.set(s,yc(Eu.get(s)||null,t,e,r,n,i)),!0}return!1}function qT(t){var e=Fo(t.target);if(e!==null){var r=la(e);if(r!==null){if(e=r.tag,e===13){if(e=NT(r),e!==null){t.blockedOn=e,YT(t.priority,function(){HT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=tv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);qy=n,r.target.dispatchEvent(n),qy=null}else return e=sd(r),e!==null&&Rx(e),t.blockedOn=r,!1;e.shift()}return!0}function iw(t,e,r){Oh(t)&&r.delete(e)}function nD(){ev=!1,Ds!==null&&Oh(Ds)&&(Ds=null),Fs!==null&&Oh(Fs)&&(Fs=null),Ns!==null&&Oh(Ns)&&(Ns=null),Su.forEach(iw),Eu.forEach(iw)}function vc(t,e){t.blockedOn===e&&(t.blockedOn=null,ev||(ev=!0,Vr.unstable_scheduleCallback(Vr.unstable_NormalPriority,nD)))}function Cu(t){function e(i){return vc(i,t)}if(0<kd.length){vc(kd[0],t);for(var r=1;r<kd.length;r++){var n=kd[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ds!==null&&vc(Ds,t),Fs!==null&&vc(Fs,t),Ns!==null&&vc(Ns,t),Su.forEach(e),Eu.forEach(e),r=0;r<Ts.length;r++)n=Ts[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ts.length&&(r=Ts[0],r.blockedOn===null);)qT(r),r.blockedOn===null&&Ts.shift()}var ul=ds.ReactCurrentBatchConfig,vf=!0;function iD(t,e,r,n){var i=Fe,s=ul.transition;ul.transition=null;try{Fe=1,Mx(t,e,r,n)}finally{Fe=i,ul.transition=s}}function sD(t,e,r,n){var i=Fe,s=ul.transition;ul.transition=null;try{Fe=4,Mx(t,e,r,n)}finally{Fe=i,ul.transition=s}}function Mx(t,e,r,n){if(vf){var i=tv(t,e,r,n);if(i===null)sm(t,e,n,xf,r),nw(t,n);else if(rD(i,t,e,r,n))n.stopPropagation();else if(nw(t,n),e&4&&-1<tD.indexOf(t)){for(;i!==null;){var s=sd(i);if(s!==null&&WT(s),s=tv(t,e,r,n),s===null&&sm(t,e,n,xf,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else sm(t,e,n,null,r)}}var xf=null;function tv(t,e,r,n){if(xf=null,t=Ix(n),t=Fo(t),t!==null)if(e=la(t),e===null)t=null;else if(r=e.tag,r===13){if(t=NT(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xf=t,null}function KT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HL()){case Ax:return 1;case $T:return 4;case mf:case XL:return 16;case jT:return 536870912;default:return 16}default:return 16}}var As=null,Ox=null,Lh=null;function ZT(){if(Lh)return Lh;var t,e=Ox,r=e.length,n,i="value"in As?As.value:As.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Lh=i.slice(t,1<n?1-n:void 0)}function Dh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rd(){return!0}function sw(){return!1}function Yr(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rd:sw,this.isPropagationStopped=sw,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rd)},persist:function(){},isPersistent:Rd}),e}var Ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lx=Yr(Ql),id=tt({},Ql,{view:0,detail:0}),oD=Yr(id),Kg,Zg,xc,Ap=tt({},id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xc&&(xc&&t.type==="mousemove"?(Kg=t.screenX-xc.screenX,Zg=t.screenY-xc.screenY):Zg=Kg=0,xc=t),Kg)},movementY:function(t){return"movementY"in t?t.movementY:Zg}}),ow=Yr(Ap),aD=tt({},Ap,{dataTransfer:0}),lD=Yr(aD),cD=tt({},id,{relatedTarget:0}),Qg=Yr(cD),uD=tt({},Ql,{animationName:0,elapsedTime:0,pseudoElement:0}),dD=Yr(uD),hD=tt({},Ql,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fD=Yr(hD),pD=tt({},Ql,{data:0}),aw=Yr(pD),gD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yD[t])?!!e[t]:!1}function Dx(){return vD}var xD=tt({},id,{key:function(t){if(t.key){var e=gD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dx,charCode:function(t){return t.type==="keypress"?Dh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bD=Yr(xD),_D=tt({},Ap,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lw=Yr(_D),wD=tt({},id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dx}),SD=Yr(wD),ED=tt({},Ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),CD=Yr(ED),TD=tt({},Ap,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PD=Yr(TD),ID=[9,13,27,32],Fx=ts&&"CompositionEvent"in window,ru=null;ts&&"documentMode"in document&&(ru=document.documentMode);var AD=ts&&"TextEvent"in window&&!ru,QT=ts&&(!Fx||ru&&8<ru&&11>=ru),cw=" ",uw=!1;function JT(t,e){switch(t){case"keyup":return ID.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Va=!1;function kD(t,e){switch(t){case"compositionend":return eP(e);case"keypress":return e.which!==32?null:(uw=!0,cw);case"textInput":return t=e.data,t===cw&&uw?null:t;default:return null}}function RD(t,e){if(Va)return t==="compositionend"||!Fx&&JT(t,e)?(t=ZT(),Lh=Ox=As=null,Va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QT&&e.locale!=="ko"?null:e.data;default:return null}}var MD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MD[t.type]:e==="textarea"}function tP(t,e,r,n){MT(n),e=bf(e,"onChange"),0<e.length&&(r=new Lx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var nu=null,Tu=null;function OD(t){hP(t,0)}function kp(t){var e=Ha(t);if(CT(e))return t}function LD(t,e){if(t==="change")return e}var rP=!1;if(ts){var Jg;if(ts){var em="oninput"in document;if(!em){var hw=document.createElement("div");hw.setAttribute("oninput","return;"),em=typeof hw.oninput=="function"}Jg=em}else Jg=!1;rP=Jg&&(!document.documentMode||9<document.documentMode)}function fw(){nu&&(nu.detachEvent("onpropertychange",nP),Tu=nu=null)}function nP(t){if(t.propertyName==="value"&&kp(Tu)){var e=[];tP(e,Tu,t,Ix(t)),FT(OD,e)}}function DD(t,e,r){t==="focusin"?(fw(),nu=e,Tu=r,nu.attachEvent("onpropertychange",nP)):t==="focusout"&&fw()}function FD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kp(Tu)}function ND(t,e){if(t==="click")return kp(e)}function BD(t,e){if(t==="input"||t==="change")return kp(e)}function UD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:UD;function Pu(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ny.call(e,i)||!Nn(t[i],e[i]))return!1}return!0}function pw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gw(t,e){var r=pw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pw(r)}}function iP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sP(){for(var t=window,e=ff();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ff(t.document)}return e}function Nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zD(t){var e=sP(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&iP(r.ownerDocument.documentElement,r)){if(n!==null&&Nx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=gw(r,s);var o=gw(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $D=ts&&"documentMode"in document&&11>=document.documentMode,Ga=null,rv=null,iu=null,nv=!1;function mw(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nv||Ga==null||Ga!==ff(n)||(n=Ga,"selectionStart"in n&&Nx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),iu&&Pu(iu,n)||(iu=n,n=bf(rv,"onSelect"),0<n.length&&(e=new Lx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ga)))}function Md(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Wa={animationend:Md("Animation","AnimationEnd"),animationiteration:Md("Animation","AnimationIteration"),animationstart:Md("Animation","AnimationStart"),transitionend:Md("Transition","TransitionEnd")},tm={},oP={};ts&&(oP=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function Rp(t){if(tm[t])return tm[t];if(!Wa[t])return t;var e=Wa[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in oP)return tm[t]=e[r];return t}var aP=Rp("animationend"),lP=Rp("animationiteration"),cP=Rp("animationstart"),uP=Rp("transitionend"),dP=new Map,yw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(t,e){dP.set(t,e),aa(e,[t])}for(var rm=0;rm<yw.length;rm++){var nm=yw[rm],jD=nm.toLowerCase(),VD=nm[0].toUpperCase()+nm.slice(1);Qs(jD,"on"+VD)}Qs(aP,"onAnimationEnd");Qs(lP,"onAnimationIteration");Qs(cP,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(uP,"onTransitionEnd");Ml("onMouseEnter",["mouseout","mouseover"]);Ml("onMouseLeave",["mouseout","mouseover"]);Ml("onPointerEnter",["pointerout","pointerover"]);Ml("onPointerLeave",["pointerout","pointerover"]);aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GD=new Set("cancel close invalid load scroll toggle".split(" ").concat($c));function vw(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,jL(n,e,void 0,t),t.currentTarget=null}function hP(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;vw(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;vw(i,a,c),s=l}}}if(gf)throw t=Qy,gf=!1,Qy=null,t}function We(t,e){var r=e[lv];r===void 0&&(r=e[lv]=new Set);var n=t+"__bubble";r.has(n)||(fP(e,t,2,!1),r.add(n))}function im(t,e,r){var n=0;e&&(n|=4),fP(r,t,n,e)}var Od="_reactListening"+Math.random().toString(36).slice(2);function Iu(t){if(!t[Od]){t[Od]=!0,bT.forEach(function(r){r!=="selectionchange"&&(GD.has(r)||im(r,!1,t),im(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Od]||(e[Od]=!0,im("selectionchange",!1,e))}}function fP(t,e,r,n){switch(KT(e)){case 1:var i=iD;break;case 4:i=sD;break;default:i=Mx}r=i.bind(null,e,r,t),i=void 0,!Zy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function sm(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Fo(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}FT(function(){var c=s,u=Ix(r),d=[];e:{var h=dP.get(t);if(h!==void 0){var f=Lx,p=t;switch(t){case"keypress":if(Dh(r)===0)break e;case"keydown":case"keyup":f=bD;break;case"focusin":p="focus",f=Qg;break;case"focusout":p="blur",f=Qg;break;case"beforeblur":case"afterblur":f=Qg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=ow;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=lD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=SD;break;case aP:case lP:case cP:f=dD;break;case uP:f=CD;break;case"scroll":f=oD;break;case"wheel":f=PD;break;case"copy":case"cut":case"paste":f=fD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=lw}var g=(e&4)!==0,x=!g&&t==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var y=c,m;y!==null;){m=y;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,v!==null&&(_=wu(y,v),_!=null&&g.push(Au(y,_,m)))),x)break;y=y.return}0<g.length&&(h=new f(h,p,null,r,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&r!==qy&&(p=r.relatedTarget||r.fromElement)&&(Fo(p)||p[rs]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=r.relatedTarget||r.toElement,f=c,p=p?Fo(p):null,p!==null&&(x=la(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=ow,_="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=lw,_="onPointerLeave",v="onPointerEnter",y="pointer"),x=f==null?h:Ha(f),m=p==null?h:Ha(p),h=new g(_,y+"leave",f,r,u),h.target=x,h.relatedTarget=m,_=null,Fo(u)===c&&(g=new g(v,y+"enter",p,r,u),g.target=m,g.relatedTarget=x,_=g),x=_,f&&p)t:{for(g=f,v=p,y=0,m=g;m;m=xa(m))y++;for(m=0,_=v;_;_=xa(_))m++;for(;0<y-m;)g=xa(g),y--;for(;0<m-y;)v=xa(v),m--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=xa(g),v=xa(v)}g=null}else g=null;f!==null&&xw(d,h,f,g,!1),p!==null&&x!==null&&xw(d,x,p,g,!0)}}e:{if(h=c?Ha(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=LD;else if(dw(h))if(rP)C=BD;else{C=FD;var E=DD}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=ND);if(C&&(C=C(t,c))){tP(d,C,r,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Gy(h,"number",h.value)}switch(E=c?Ha(c):window,t){case"focusin":(dw(E)||E.contentEditable==="true")&&(Ga=E,rv=c,iu=null);break;case"focusout":iu=rv=Ga=null;break;case"mousedown":nv=!0;break;case"contextmenu":case"mouseup":case"dragend":nv=!1,mw(d,r,u);break;case"selectionchange":if($D)break;case"keydown":case"keyup":mw(d,r,u)}var T;if(Fx)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Va?JT(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(QT&&r.locale!=="ko"&&(Va||S!=="onCompositionStart"?S==="onCompositionEnd"&&Va&&(T=ZT()):(As=u,Ox="value"in As?As.value:As.textContent,Va=!0)),E=bf(c,S),0<E.length&&(S=new aw(S,t,null,r,u),d.push({event:S,listeners:E}),T?S.data=T:(T=eP(r),T!==null&&(S.data=T)))),(T=AD?kD(t,r):RD(t,r))&&(c=bf(c,"onBeforeInput"),0<c.length&&(u=new aw("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=T))}hP(d,e)})}function Au(t,e,r){return{instance:t,listener:e,currentTarget:r}}function bf(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=wu(t,r),s!=null&&n.unshift(Au(t,s,i)),s=wu(t,e),s!=null&&n.push(Au(t,s,i))),t=t.return}return n}function xa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xw(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=wu(r,s),l!=null&&o.unshift(Au(r,l,a))):i||(l=wu(r,s),l!=null&&o.push(Au(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var WD=/\r\n?/g,HD=/\u0000|\uFFFD/g;function bw(t){return(typeof t=="string"?t:""+t).replace(WD,`
`).replace(HD,"")}function Ld(t,e,r){if(e=bw(e),bw(t)!==e&&r)throw Error(G(425))}function _f(){}var iv=null,sv=null;function ov(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var av=typeof setTimeout=="function"?setTimeout:void 0,XD=typeof clearTimeout=="function"?clearTimeout:void 0,_w=typeof Promise=="function"?Promise:void 0,YD=typeof queueMicrotask=="function"?queueMicrotask:typeof _w<"u"?function(t){return _w.resolve(null).then(t).catch(qD)}:av;function qD(t){setTimeout(function(){throw t})}function om(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Cu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Cu(e)}function Bs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ww(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),hi="__reactFiber$"+Jl,ku="__reactProps$"+Jl,rs="__reactContainer$"+Jl,lv="__reactEvents$"+Jl,KD="__reactListeners$"+Jl,ZD="__reactHandles$"+Jl;function Fo(t){var e=t[hi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[rs]||r[hi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ww(t);t!==null;){if(r=t[hi])return r;t=ww(t)}return e}t=r,r=t.parentNode}return null}function sd(t){return t=t[hi]||t[rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Mp(t){return t[ku]||null}var cv=[],Xa=-1;function Js(t){return{current:t}}function Xe(t){0>Xa||(t.current=cv[Xa],cv[Xa]=null,Xa--)}function Ge(t,e){Xa++,cv[Xa]=t.current,t.current=e}var Ws={},tr=Js(Ws),Tr=Js(!1),Xo=Ws;function Ol(t,e){var r=t.type.contextTypes;if(!r)return Ws;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pr(t){return t=t.childContextTypes,t!=null}function wf(){Xe(Tr),Xe(tr)}function Sw(t,e,r){if(tr.current!==Ws)throw Error(G(168));Ge(tr,e),Ge(Tr,r)}function pP(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(G(108,DL(t)||"Unknown",i));return tt({},r,n)}function Sf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ws,Xo=tr.current,Ge(tr,t),Ge(Tr,Tr.current),!0}function Ew(t,e,r){var n=t.stateNode;if(!n)throw Error(G(169));r?(t=pP(t,e,Xo),n.__reactInternalMemoizedMergedChildContext=t,Xe(Tr),Xe(tr),Ge(tr,t)):Xe(Tr),Ge(Tr,r)}var ji=null,Op=!1,am=!1;function gP(t){ji===null?ji=[t]:ji.push(t)}function QD(t){Op=!0,gP(t)}function eo(){if(!am&&ji!==null){am=!0;var t=0,e=Fe;try{var r=ji;for(Fe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ji=null,Op=!1}catch(i){throw ji!==null&&(ji=ji.slice(t+1)),zT(Ax,eo),i}finally{Fe=e,am=!1}}return null}var Ya=[],qa=0,Ef=null,Cf=0,Jr=[],en=0,Yo=null,Hi=1,Xi="";function wo(t,e){Ya[qa++]=Cf,Ya[qa++]=Ef,Ef=t,Cf=e}function mP(t,e,r){Jr[en++]=Hi,Jr[en++]=Xi,Jr[en++]=Yo,Yo=t;var n=Hi;t=Xi;var i=32-Rn(n)-1;n&=~(1<<i),r+=1;var s=32-Rn(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Hi=1<<32-Rn(e)+i|r<<i|n,Xi=s+t}else Hi=1<<s|r<<i|n,Xi=t}function Bx(t){t.return!==null&&(wo(t,1),mP(t,1,0))}function Ux(t){for(;t===Ef;)Ef=Ya[--qa],Ya[qa]=null,Cf=Ya[--qa],Ya[qa]=null;for(;t===Yo;)Yo=Jr[--en],Jr[en]=null,Xi=Jr[--en],Jr[en]=null,Hi=Jr[--en],Jr[en]=null}var zr=null,Ur=null,qe=!1,Tn=null;function yP(t,e){var r=nn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Cw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zr=t,Ur=Bs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zr=t,Ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Yo!==null?{id:Hi,overflow:Xi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=nn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,zr=t,Ur=null,!0):!1;default:return!1}}function uv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dv(t){if(qe){var e=Ur;if(e){var r=e;if(!Cw(t,e)){if(uv(t))throw Error(G(418));e=Bs(r.nextSibling);var n=zr;e&&Cw(t,e)?yP(n,r):(t.flags=t.flags&-4097|2,qe=!1,zr=t)}}else{if(uv(t))throw Error(G(418));t.flags=t.flags&-4097|2,qe=!1,zr=t}}}function Tw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zr=t}function Dd(t){if(t!==zr)return!1;if(!qe)return Tw(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ov(t.type,t.memoizedProps)),e&&(e=Ur)){if(uv(t))throw vP(),Error(G(418));for(;e;)yP(t,e),e=Bs(e.nextSibling)}if(Tw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ur=Bs(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ur=null}}else Ur=zr?Bs(t.stateNode.nextSibling):null;return!0}function vP(){for(var t=Ur;t;)t=Bs(t.nextSibling)}function Ll(){Ur=zr=null,qe=!1}function zx(t){Tn===null?Tn=[t]:Tn.push(t)}var JD=ds.ReactCurrentBatchConfig;function bc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var n=r.stateNode}if(!n)throw Error(G(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,t))}return t}function Fd(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pw(t){var e=t._init;return e(t._payload)}function xP(t){function e(v,y){if(t){var m=v.deletions;m===null?(v.deletions=[y],v.flags|=16):m.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=js(v,y),v.index=0,v.sibling=null,v}function s(v,y,m){return v.index=m,t?(m=v.alternate,m!==null?(m=m.index,m<y?(v.flags|=2,y):m):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,m,_){return y===null||y.tag!==6?(y=pm(m,v.mode,_),y.return=v,y):(y=i(y,m),y.return=v,y)}function l(v,y,m,_){var C=m.type;return C===ja?u(v,y,m.props.children,_,m.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ss&&Pw(C)===y.type)?(_=i(y,m.props),_.ref=bc(v,y,m),_.return=v,_):(_=jh(m.type,m.key,m.props,null,v.mode,_),_.ref=bc(v,y,m),_.return=v,_)}function c(v,y,m,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==m.containerInfo||y.stateNode.implementation!==m.implementation?(y=gm(m,v.mode,_),y.return=v,y):(y=i(y,m.children||[]),y.return=v,y)}function u(v,y,m,_,C){return y===null||y.tag!==7?(y=jo(m,v.mode,_,C),y.return=v,y):(y=i(y,m),y.return=v,y)}function d(v,y,m){if(typeof y=="string"&&y!==""||typeof y=="number")return y=pm(""+y,v.mode,m),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Cd:return m=jh(y.type,y.key,y.props,null,v.mode,m),m.ref=bc(v,null,y),m.return=v,m;case $a:return y=gm(y,v.mode,m),y.return=v,y;case Ss:var _=y._init;return d(v,_(y._payload),m)}if(Uc(y)||gc(y))return y=jo(y,v.mode,m,null),y.return=v,y;Fd(v,y)}return null}function h(v,y,m,_){var C=y!==null?y.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:a(v,y,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Cd:return m.key===C?l(v,y,m,_):null;case $a:return m.key===C?c(v,y,m,_):null;case Ss:return C=m._init,h(v,y,C(m._payload),_)}if(Uc(m)||gc(m))return C!==null?null:u(v,y,m,_,null);Fd(v,m)}return null}function f(v,y,m,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(m)||null,a(y,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Cd:return v=v.get(_.key===null?m:_.key)||null,l(y,v,_,C);case $a:return v=v.get(_.key===null?m:_.key)||null,c(y,v,_,C);case Ss:var E=_._init;return f(v,y,m,E(_._payload),C)}if(Uc(_)||gc(_))return v=v.get(m)||null,u(y,v,_,C,null);Fd(y,_)}return null}function p(v,y,m,_){for(var C=null,E=null,T=y,S=y=0,P=null;T!==null&&S<m.length;S++){T.index>S?(P=T,T=null):P=T.sibling;var I=h(v,T,m[S],_);if(I===null){T===null&&(T=P);break}t&&T&&I.alternate===null&&e(v,T),y=s(I,y,S),E===null?C=I:E.sibling=I,E=I,T=P}if(S===m.length)return r(v,T),qe&&wo(v,S),C;if(T===null){for(;S<m.length;S++)T=d(v,m[S],_),T!==null&&(y=s(T,y,S),E===null?C=T:E.sibling=T,E=T);return qe&&wo(v,S),C}for(T=n(v,T);S<m.length;S++)P=f(T,v,S,m[S],_),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?S:P.key),y=s(P,y,S),E===null?C=P:E.sibling=P,E=P);return t&&T.forEach(function(M){return e(v,M)}),qe&&wo(v,S),C}function g(v,y,m,_){var C=gc(m);if(typeof C!="function")throw Error(G(150));if(m=C.call(m),m==null)throw Error(G(151));for(var E=C=null,T=y,S=y=0,P=null,I=m.next();T!==null&&!I.done;S++,I=m.next()){T.index>S?(P=T,T=null):P=T.sibling;var M=h(v,T,I.value,_);if(M===null){T===null&&(T=P);break}t&&T&&M.alternate===null&&e(v,T),y=s(M,y,S),E===null?C=M:E.sibling=M,E=M,T=P}if(I.done)return r(v,T),qe&&wo(v,S),C;if(T===null){for(;!I.done;S++,I=m.next())I=d(v,I.value,_),I!==null&&(y=s(I,y,S),E===null?C=I:E.sibling=I,E=I);return qe&&wo(v,S),C}for(T=n(v,T);!I.done;S++,I=m.next())I=f(T,v,S,I.value,_),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?S:I.key),y=s(I,y,S),E===null?C=I:E.sibling=I,E=I);return t&&T.forEach(function(k){return e(v,k)}),qe&&wo(v,S),C}function x(v,y,m,_){if(typeof m=="object"&&m!==null&&m.type===ja&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Cd:e:{for(var C=m.key,E=y;E!==null;){if(E.key===C){if(C=m.type,C===ja){if(E.tag===7){r(v,E.sibling),y=i(E,m.props.children),y.return=v,v=y;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ss&&Pw(C)===E.type){r(v,E.sibling),y=i(E,m.props),y.ref=bc(v,E,m),y.return=v,v=y;break e}r(v,E);break}else e(v,E);E=E.sibling}m.type===ja?(y=jo(m.props.children,v.mode,_,m.key),y.return=v,v=y):(_=jh(m.type,m.key,m.props,null,v.mode,_),_.ref=bc(v,y,m),_.return=v,v=_)}return o(v);case $a:e:{for(E=m.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===m.containerInfo&&y.stateNode.implementation===m.implementation){r(v,y.sibling),y=i(y,m.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else e(v,y);y=y.sibling}y=gm(m,v.mode,_),y.return=v,v=y}return o(v);case Ss:return E=m._init,x(v,y,E(m._payload),_)}if(Uc(m))return p(v,y,m,_);if(gc(m))return g(v,y,m,_);Fd(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,y!==null&&y.tag===6?(r(v,y.sibling),y=i(y,m),y.return=v,v=y):(r(v,y),y=pm(m,v.mode,_),y.return=v,v=y),o(v)):r(v,y)}return x}var Dl=xP(!0),bP=xP(!1),Tf=Js(null),Pf=null,Ka=null,$x=null;function jx(){$x=Ka=Pf=null}function Vx(t){var e=Tf.current;Xe(Tf),t._currentValue=e}function hv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function dl(t,e){Pf=t,$x=Ka=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sr=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if($x!==t)if(t={context:t,memoizedValue:e,next:null},Ka===null){if(Pf===null)throw Error(G(308));Ka=t,Pf.dependencies={lanes:0,firstContext:t}}else Ka=Ka.next=t;return e}var No=null;function Gx(t){No===null?No=[t]:No.push(t)}function _P(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Gx(e)):(r.next=i.next,i.next=r),e.interleaved=r,ns(t,n)}function ns(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Es=!1;function Wx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Us(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Re&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,ns(t,r)}return i=n.interleaved,i===null?(e.next=e,Gx(n)):(e.next=i.next,i.next=e),n.interleaved=e,ns(t,r)}function Fh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,kx(t,r)}}function Iw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function If(t,e,r,n){var i=t.updateQueue;Es=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=r,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=tt({},d,h);break e;case 2:Es=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ko|=o,t.lanes=o,t.memoizedState=d}}function Aw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(G(191,i));i.call(n)}}}var od={},yi=Js(od),Ru=Js(od),Mu=Js(od);function Bo(t){if(t===od)throw Error(G(174));return t}function Hx(t,e){switch(Ge(Mu,e),Ge(Ru,t),Ge(yi,od),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hy(e,t)}Xe(yi),Ge(yi,e)}function Fl(){Xe(yi),Xe(Ru),Xe(Mu)}function SP(t){Bo(Mu.current);var e=Bo(yi.current),r=Hy(e,t.type);e!==r&&(Ge(Ru,t),Ge(yi,r))}function Xx(t){Ru.current===t&&(Xe(yi),Xe(Ru))}var Qe=Js(0);function Af(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lm=[];function Yx(){for(var t=0;t<lm.length;t++)lm[t]._workInProgressVersionPrimary=null;lm.length=0}var Nh=ds.ReactCurrentDispatcher,cm=ds.ReactCurrentBatchConfig,qo=0,et=null,_t=null,At=null,kf=!1,su=!1,Ou=0,eF=0;function Ht(){throw Error(G(321))}function qx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Nn(t[r],e[r]))return!1;return!0}function Kx(t,e,r,n,i,s){if(qo=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nh.current=t===null||t.memoizedState===null?iF:sF,t=r(n,i),su){s=0;do{if(su=!1,Ou=0,25<=s)throw Error(G(301));s+=1,At=_t=null,e.updateQueue=null,Nh.current=oF,t=r(n,i)}while(su)}if(Nh.current=Rf,e=_t!==null&&_t.next!==null,qo=0,At=_t=et=null,kf=!1,e)throw Error(G(300));return t}function Zx(){var t=Ou!==0;return Ou=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?et.memoizedState=At=t:At=At.next=t,At}function fn(){if(_t===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=At===null?et.memoizedState:At.next;if(e!==null)At=e,_t=t;else{if(t===null)throw Error(G(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},At===null?et.memoizedState=At=t:At=At.next=t}return At}function Lu(t,e){return typeof e=="function"?e(t):e}function um(t){var e=fn(),r=e.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=t;var n=_t,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((qo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,et.lanes|=u,Ko|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,Nn(n,e.memoizedState)||(Sr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,et.lanes|=s,Ko|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function dm(t){var e=fn(),r=e.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Nn(s,e.memoizedState)||(Sr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function EP(){}function CP(t,e){var r=et,n=fn(),i=e(),s=!Nn(n.memoizedState,i);if(s&&(n.memoizedState=i,Sr=!0),n=n.queue,Qx(IP.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||At!==null&&At.memoizedState.tag&1){if(r.flags|=2048,Du(9,PP.bind(null,r,n,i,e),void 0,null),Mt===null)throw Error(G(349));qo&30||TP(r,e,i)}return i}function TP(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function PP(t,e,r,n){e.value=r,e.getSnapshot=n,AP(e)&&kP(t)}function IP(t,e,r){return r(function(){AP(e)&&kP(t)})}function AP(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Nn(t,r)}catch{return!0}}function kP(t){var e=ns(t,1);e!==null&&Mn(e,t,1,-1)}function kw(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lu,lastRenderedState:t},e.queue=t,t=t.dispatch=nF.bind(null,et,t),[e.memoizedState,t]}function Du(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function RP(){return fn().memoizedState}function Bh(t,e,r,n){var i=ii();et.flags|=t,i.memoizedState=Du(1|e,r,void 0,n===void 0?null:n)}function Lp(t,e,r,n){var i=fn();n=n===void 0?null:n;var s=void 0;if(_t!==null){var o=_t.memoizedState;if(s=o.destroy,n!==null&&qx(n,o.deps)){i.memoizedState=Du(e,r,s,n);return}}et.flags|=t,i.memoizedState=Du(1|e,r,s,n)}function Rw(t,e){return Bh(8390656,8,t,e)}function Qx(t,e){return Lp(2048,8,t,e)}function MP(t,e){return Lp(4,2,t,e)}function OP(t,e){return Lp(4,4,t,e)}function LP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DP(t,e,r){return r=r!=null?r.concat([t]):null,Lp(4,4,LP.bind(null,e,t),r)}function Jx(){}function FP(t,e){var r=fn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&qx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function NP(t,e){var r=fn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&qx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function BP(t,e,r){return qo&21?(Nn(r,e)||(r=VT(),et.lanes|=r,Ko|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sr=!0),t.memoizedState=r)}function tF(t,e){var r=Fe;Fe=r!==0&&4>r?r:4,t(!0);var n=cm.transition;cm.transition={};try{t(!1),e()}finally{Fe=r,cm.transition=n}}function UP(){return fn().memoizedState}function rF(t,e,r){var n=$s(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},zP(t))$P(e,r);else if(r=_P(t,e,r,n),r!==null){var i=cr();Mn(r,t,n,i),jP(r,e,n)}}function nF(t,e,r){var n=$s(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(zP(t))$P(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Nn(a,o)){var l=e.interleaved;l===null?(i.next=i,Gx(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=_P(t,e,i,n),r!==null&&(i=cr(),Mn(r,t,n,i),jP(r,e,n))}}function zP(t){var e=t.alternate;return t===et||e!==null&&e===et}function $P(t,e){su=kf=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function jP(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,kx(t,r)}}var Rf={readContext:hn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},iF={readContext:hn,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:Rw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Bh(4194308,4,LP.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bh(4,2,t,e)},useMemo:function(t,e){var r=ii();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ii();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=rF.bind(null,et,t),[n.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:kw,useDebugValue:Jx,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=kw(!1),e=t[0];return t=tF.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=et,i=ii();if(qe){if(r===void 0)throw Error(G(407));r=r()}else{if(r=e(),Mt===null)throw Error(G(349));qo&30||TP(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Rw(IP.bind(null,n,s,t),[t]),n.flags|=2048,Du(9,PP.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=ii(),e=Mt.identifierPrefix;if(qe){var r=Xi,n=Hi;r=(n&~(1<<32-Rn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ou++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=eF++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sF={readContext:hn,useCallback:FP,useContext:hn,useEffect:Qx,useImperativeHandle:DP,useInsertionEffect:MP,useLayoutEffect:OP,useMemo:NP,useReducer:um,useRef:RP,useState:function(){return um(Lu)},useDebugValue:Jx,useDeferredValue:function(t){var e=fn();return BP(e,_t.memoizedState,t)},useTransition:function(){var t=um(Lu)[0],e=fn().memoizedState;return[t,e]},useMutableSource:EP,useSyncExternalStore:CP,useId:UP,unstable_isNewReconciler:!1},oF={readContext:hn,useCallback:FP,useContext:hn,useEffect:Qx,useImperativeHandle:DP,useInsertionEffect:MP,useLayoutEffect:OP,useMemo:NP,useReducer:dm,useRef:RP,useState:function(){return dm(Lu)},useDebugValue:Jx,useDeferredValue:function(t){var e=fn();return _t===null?e.memoizedState=t:BP(e,_t.memoizedState,t)},useTransition:function(){var t=dm(Lu)[0],e=fn().memoizedState;return[t,e]},useMutableSource:EP,useSyncExternalStore:CP,useId:UP,unstable_isNewReconciler:!1};function Sn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function fv(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:tt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Dp={isMounted:function(t){return(t=t._reactInternals)?la(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=cr(),i=$s(t),s=Qi(n,i);s.payload=e,r!=null&&(s.callback=r),e=Us(t,s,i),e!==null&&(Mn(e,t,i,n),Fh(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=cr(),i=$s(t),s=Qi(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Us(t,s,i),e!==null&&(Mn(e,t,i,n),Fh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=cr(),n=$s(t),i=Qi(r,n);i.tag=2,e!=null&&(i.callback=e),e=Us(t,i,n),e!==null&&(Mn(e,t,n,r),Fh(e,t,n))}};function Mw(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Pu(r,n)||!Pu(i,s):!0}function VP(t,e,r){var n=!1,i=Ws,s=e.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=Pr(e)?Xo:tr.current,n=e.contextTypes,s=(n=n!=null)?Ol(t,i):Ws),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dp,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ow(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Dp.enqueueReplaceState(e,e.state,null)}function pv(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Wx(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=Pr(e)?Xo:tr.current,i.context=Ol(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(fv(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Dp.enqueueReplaceState(i,i.state,null),If(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Nl(t,e){try{var r="",n=e;do r+=LL(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hm(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function gv(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var aF=typeof WeakMap=="function"?WeakMap:Map;function GP(t,e,r){r=Qi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Of||(Of=!0,Cv=n),gv(t,e)},r}function WP(t,e,r){r=Qi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){gv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){gv(t,e),typeof n!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Lw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new aF;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=_F.bind(null,t,e,r),e.then(t,t))}function Dw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fw(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Qi(-1,1),e.tag=2,Us(r,e,1))),r.lanes|=1),t)}var lF=ds.ReactCurrentOwner,Sr=!1;function or(t,e,r,n){e.child=t===null?bP(e,null,r,n):Dl(e,t.child,r,n)}function Nw(t,e,r,n,i){r=r.render;var s=e.ref;return dl(e,i),n=Kx(t,e,r,n,s,i),r=Zx(),t!==null&&!Sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,is(t,e,i)):(qe&&r&&Bx(e),e.flags|=1,or(t,e,n,i),e.child)}function Bw(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!ab(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,HP(t,e,s,n,i)):(t=jh(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Pu,r(o,n)&&t.ref===e.ref)return is(t,e,i)}return e.flags|=1,t=js(s,n),t.ref=e.ref,t.return=e,e.child=t}function HP(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Pu(s,n)&&t.ref===e.ref)if(Sr=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Sr=!0);else return e.lanes=t.lanes,is(t,e,i)}return mv(t,e,r,n,i)}function XP(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Qa,Lr),Lr|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge(Qa,Lr),Lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ge(Qa,Lr),Lr|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ge(Qa,Lr),Lr|=n;return or(t,e,i,r),e.child}function YP(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function mv(t,e,r,n,i){var s=Pr(r)?Xo:tr.current;return s=Ol(e,s),dl(e,i),r=Kx(t,e,r,n,s,i),n=Zx(),t!==null&&!Sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,is(t,e,i)):(qe&&n&&Bx(e),e.flags|=1,or(t,e,r,i),e.child)}function Uw(t,e,r,n,i){if(Pr(r)){var s=!0;Sf(e)}else s=!1;if(dl(e,i),e.stateNode===null)Uh(t,e),VP(e,r,n),pv(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=hn(c):(c=Pr(r)?Xo:tr.current,c=Ol(e,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&Ow(e,o,n,c),Es=!1;var h=e.memoizedState;o.state=h,If(e,n,o,i),l=e.memoizedState,a!==n||h!==l||Tr.current||Es?(typeof u=="function"&&(fv(e,r,u,n),l=e.memoizedState),(a=Es||Mw(e,r,a,n,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,wP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Sn(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=hn(l):(l=Pr(r)?Xo:tr.current,l=Ol(e,l));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Ow(e,o,n,l),Es=!1,h=e.memoizedState,o.state=h,If(e,n,o,i);var p=e.memoizedState;a!==d||h!==p||Tr.current||Es?(typeof f=="function"&&(fv(e,r,f,n),p=e.memoizedState),(c=Es||Mw(e,r,c,n,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return yv(t,e,r,n,s,i)}function yv(t,e,r,n,i,s){YP(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Ew(e,r,!1),is(t,e,s);n=e.stateNode,lF.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Dl(e,t.child,null,s),e.child=Dl(e,null,a,s)):or(t,e,a,s),e.memoizedState=n.state,i&&Ew(e,r,!0),e.child}function qP(t){var e=t.stateNode;e.pendingContext?Sw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sw(t,e.context,!1),Hx(t,e.containerInfo)}function zw(t,e,r,n,i){return Ll(),zx(i),e.flags|=256,or(t,e,r,n),e.child}var vv={dehydrated:null,treeContext:null,retryLane:0};function xv(t){return{baseLanes:t,cachePool:null,transitions:null}}function KP(t,e,r){var n=e.pendingProps,i=Qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ge(Qe,i&1),t===null)return dv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Bp(o,n,0,null),t=jo(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xv(r),e.memoizedState=vv,t):eb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return cF(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=js(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=js(a,s):(s=jo(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?xv(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=vv,n}return s=t.child,t=s.sibling,n=js(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function eb(t,e){return e=Bp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nd(t,e,r,n){return n!==null&&zx(n),Dl(e,t.child,null,r),t=eb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cF(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=hm(Error(G(422))),Nd(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Bp({mode:"visible",children:n.children},i,0,null),s=jo(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Dl(e,t.child,null,o),e.child.memoizedState=xv(o),e.memoizedState=vv,s);if(!(e.mode&1))return Nd(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(G(419)),n=hm(s,n,void 0),Nd(t,e,o,n)}if(a=(o&t.childLanes)!==0,Sr||a){if(n=Mt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ns(t,i),Mn(n,t,i,-1))}return ob(),n=hm(Error(G(421))),Nd(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wF.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ur=Bs(i.nextSibling),zr=e,qe=!0,Tn=null,t!==null&&(Jr[en++]=Hi,Jr[en++]=Xi,Jr[en++]=Yo,Hi=t.id,Xi=t.overflow,Yo=e),e=eb(e,n.children),e.flags|=4096,e)}function $w(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),hv(t.return,e,r)}function fm(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function ZP(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(or(t,e,n.children,r),n=Qe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$w(t,r,e);else if(t.tag===19)$w(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ge(Qe,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Af(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),fm(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Af(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}fm(e,!0,r,null,s);break;case"together":fm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function is(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ko|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,r=js(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=js(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function uF(t,e,r){switch(e.tag){case 3:qP(e),Ll();break;case 5:SP(e);break;case 1:Pr(e.type)&&Sf(e);break;case 4:Hx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ge(Tf,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ge(Qe,Qe.current&1),e.flags|=128,null):r&e.child.childLanes?KP(t,e,r):(Ge(Qe,Qe.current&1),t=is(t,e,r),t!==null?t.sibling:null);Ge(Qe,Qe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ZP(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(Qe,Qe.current),n)break;return null;case 22:case 23:return e.lanes=0,XP(t,e,r)}return is(t,e,r)}var QP,bv,JP,eI;QP=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bv=function(){};JP=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Bo(yi.current);var s=null;switch(r){case"input":i=jy(t,i),n=jy(t,n),s=[];break;case"select":i=tt({},i,{value:void 0}),n=tt({},n,{value:void 0}),s=[];break;case"textarea":i=Wy(t,i),n=Wy(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=_f)}Xy(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i?.[c],n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&We("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eI=function(t,e,r,n){r!==n&&(e.flags|=4)};function _c(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function dF(t,e,r){var n=e.pendingProps;switch(Ux(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return Pr(e.type)&&wf(),Xt(e),null;case 3:return n=e.stateNode,Fl(),Xe(Tr),Xe(tr),Yx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Dd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tn!==null&&(Iv(Tn),Tn=null))),bv(t,e),Xt(e),null;case 5:Xx(e);var i=Bo(Mu.current);if(r=e.type,t!==null&&e.stateNode!=null)JP(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(G(166));return Xt(e),null}if(t=Bo(yi.current),Dd(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[hi]=e,n[ku]=s,t=(e.mode&1)!==0,r){case"dialog":We("cancel",n),We("close",n);break;case"iframe":case"object":case"embed":We("load",n);break;case"video":case"audio":for(i=0;i<$c.length;i++)We($c[i],n);break;case"source":We("error",n);break;case"img":case"image":case"link":We("error",n),We("load",n);break;case"details":We("toggle",n);break;case"input":K_(n,s),We("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},We("invalid",n);break;case"textarea":Q_(n,s),We("invalid",n)}Xy(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ld(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ld(n.textContent,a,t),i=["children",""+a]):bu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&We("scroll",n)}switch(r){case"input":Td(n),Z_(n,s,!0);break;case"textarea":Td(n),J_(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=_f)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[hi]=e,t[ku]=n,QP(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yy(r,n),r){case"dialog":We("cancel",t),We("close",t),i=n;break;case"iframe":case"object":case"embed":We("load",t),i=n;break;case"video":case"audio":for(i=0;i<$c.length;i++)We($c[i],t);i=n;break;case"source":We("error",t),i=n;break;case"img":case"image":case"link":We("error",t),We("load",t),i=n;break;case"details":We("toggle",t),i=n;break;case"input":K_(t,n),i=jy(t,n),We("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=tt({},n,{value:void 0}),We("invalid",t);break;case"textarea":Q_(t,n),i=Wy(t,n),We("invalid",t);break;default:i=n}Xy(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AT(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&_u(t,l):typeof l=="number"&&_u(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&We("scroll",t):l!=null&&Ex(t,s,l,o))}switch(r){case"input":Td(t),Z_(t,n,!1);break;case"textarea":Td(t),J_(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Gs(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?al(t,!!n.multiple,s,!1):n.defaultValue!=null&&al(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=_f)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(t&&e.stateNode!=null)eI(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(G(166));if(r=Bo(Mu.current),Bo(yi.current),Dd(e)){if(n=e.stateNode,r=e.memoizedProps,n[hi]=e,(s=n.nodeValue!==r)&&(t=zr,t!==null))switch(t.tag){case 3:Ld(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ld(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[hi]=e,e.stateNode=n}return Xt(e),null;case 13:if(Xe(Qe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&Ur!==null&&e.mode&1&&!(e.flags&128))vP(),Ll(),e.flags|=98560,s=!1;else if(s=Dd(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[hi]=e}else Ll(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),s=!1}else Tn!==null&&(Iv(Tn),Tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?wt===0&&(wt=3):ob())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return Fl(),bv(t,e),t===null&&Iu(e.stateNode.containerInfo),Xt(e),null;case 10:return Vx(e.type._context),Xt(e),null;case 17:return Pr(e.type)&&wf(),Xt(e),null;case 19:if(Xe(Qe),s=e.memoizedState,s===null)return Xt(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)_c(s,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Af(t),o!==null){for(e.flags|=128,_c(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ge(Qe,Qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&dt()>Bl&&(e.flags|=128,n=!0,_c(s,!1),e.lanes=4194304)}else{if(!n)if(t=Af(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_c(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qe)return Xt(e),null}else 2*dt()-s.renderingStartTime>Bl&&r!==1073741824&&(e.flags|=128,n=!0,_c(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dt(),e.sibling=null,r=Qe.current,Ge(Qe,n?r&1|2:r&1),e):(Xt(e),null);case 22:case 23:return sb(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Lr&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function hF(t,e){switch(Ux(e),e.tag){case 1:return Pr(e.type)&&wf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fl(),Xe(Tr),Xe(tr),Yx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xx(e),null;case 13:if(Xe(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Ll()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(Qe),null;case 4:return Fl(),null;case 10:return Vx(e.type._context),null;case 22:case 23:return sb(),null;case 24:return null;default:return null}}var Bd=!1,Jt=!1,fF=typeof WeakSet=="function"?WeakSet:Set,te=null;function Za(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ot(t,e,n)}else r.current=null}function _v(t,e,r){try{r()}catch(n){ot(t,e,n)}}var jw=!1;function pF(t,e){if(iv=vf,t=sP(),Nx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===r&&++c===i&&(a=o),h===s&&++u===n&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(sv={focusedElem:t,selectionRange:r},vf=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,x=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Sn(e.type,g),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(_){ot(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return p=jw,jw=!1,p}function ou(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_v(e,r,s)}i=i.next}while(i!==n)}}function Fp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function wv(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function tI(t){var e=t.alternate;e!==null&&(t.alternate=null,tI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hi],delete e[ku],delete e[lv],delete e[KD],delete e[ZD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rI(t){return t.tag===5||t.tag===3||t.tag===4}function Vw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=_f));else if(n!==4&&(t=t.child,t!==null))for(Sv(t,e,r),t=t.sibling;t!==null;)Sv(t,e,r),t=t.sibling}function Ev(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ev(t,e,r),t=t.sibling;t!==null;)Ev(t,e,r),t=t.sibling}var Bt=null,Cn=!1;function ps(t,e,r){for(r=r.child;r!==null;)nI(t,e,r),r=r.sibling}function nI(t,e,r){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(Ip,r)}catch{}switch(r.tag){case 5:Jt||Za(r,e);case 6:var n=Bt,i=Cn;Bt=null,ps(t,e,r),Bt=n,Cn=i,Bt!==null&&(Cn?(t=Bt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Bt.removeChild(r.stateNode));break;case 18:Bt!==null&&(Cn?(t=Bt,r=r.stateNode,t.nodeType===8?om(t.parentNode,r):t.nodeType===1&&om(t,r),Cu(t)):om(Bt,r.stateNode));break;case 4:n=Bt,i=Cn,Bt=r.stateNode.containerInfo,Cn=!0,ps(t,e,r),Bt=n,Cn=i;break;case 0:case 11:case 14:case 15:if(!Jt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_v(r,e,o),i=i.next}while(i!==n)}ps(t,e,r);break;case 1:if(!Jt&&(Za(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ot(r,e,a)}ps(t,e,r);break;case 21:ps(t,e,r);break;case 22:r.mode&1?(Jt=(n=Jt)||r.memoizedState!==null,ps(t,e,r),Jt=n):ps(t,e,r);break;default:ps(t,e,r)}}function Gw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new fF),e.forEach(function(n){var i=SF.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function yn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,Cn=!1;break e;case 3:Bt=a.stateNode.containerInfo,Cn=!0;break e;case 4:Bt=a.stateNode.containerInfo,Cn=!0;break e}a=a.return}if(Bt===null)throw Error(G(160));nI(s,o,i),Bt=null,Cn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ot(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iI(e,t),e=e.sibling}function iI(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),Hn(t),n&4){try{ou(3,t,t.return),Fp(3,t)}catch(g){ot(t,t.return,g)}try{ou(5,t,t.return)}catch(g){ot(t,t.return,g)}}break;case 1:yn(e,t),Hn(t),n&512&&r!==null&&Za(r,r.return);break;case 5:if(yn(e,t),Hn(t),n&512&&r!==null&&Za(r,r.return),t.flags&32){var i=t.stateNode;try{_u(i,"")}catch(g){ot(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TT(i,s),Yy(a,o);var c=Yy(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?RT(i,d):u==="dangerouslySetInnerHTML"?AT(i,d):u==="children"?_u(i,d):Ex(i,u,d,c)}switch(a){case"input":Vy(i,s);break;case"textarea":PT(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?al(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?al(i,!!s.multiple,s.defaultValue,!0):al(i,!!s.multiple,s.multiple?[]:"",!1))}i[ku]=s}catch(g){ot(t,t.return,g)}}break;case 6:if(yn(e,t),Hn(t),n&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){ot(t,t.return,g)}}break;case 3:if(yn(e,t),Hn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Cu(e.containerInfo)}catch(g){ot(t,t.return,g)}break;case 4:yn(e,t),Hn(t);break;case 13:yn(e,t),Hn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nb=dt())),n&4&&Gw(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Jt=(c=Jt)||u,yn(e,t),Jt=c):yn(e,t),Hn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(te=t,u=t.child;u!==null;){for(d=te=u;te!==null;){switch(h=te,f=h.child,h.tag){case 0:case 11:case 14:case 15:ou(4,h,h.return);break;case 1:Za(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){ot(n,r,g)}}break;case 5:Za(h,h.return);break;case 22:if(h.memoizedState!==null){Hw(d);continue}}f!==null?(f.return=h,te=f):Hw(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kT("display",o))}catch(g){ot(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){ot(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yn(e,t),Hn(t),n&4&&Gw(t);break;case 21:break;default:yn(e,t),Hn(t)}}function Hn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(rI(r)){var n=r;break e}r=r.return}throw Error(G(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(_u(i,""),n.flags&=-33);var s=Vw(t);Ev(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Vw(t);Sv(t,a,o);break;default:throw Error(G(161))}}catch(l){ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gF(t,e,r){te=t,sI(t)}function sI(t,e,r){for(var n=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Bd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Jt;a=Bd;var c=Jt;if(Bd=o,(Jt=l)&&!c)for(te=i;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?Xw(i):l!==null?(l.return=o,te=l):Xw(i);for(;s!==null;)te=s,sI(s),s=s.sibling;te=i,Bd=a,Jt=c}Ww(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):Ww(t)}}function Ww(t){for(;te!==null;){var e=te;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||Fp(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Jt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Sn(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Aw(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Aw(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Cu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Jt||e.flags&512&&wv(e)}catch(h){ot(e,e.return,h)}}if(e===t){te=null;break}if(r=e.sibling,r!==null){r.return=e.return,te=r;break}te=e.return}}function Hw(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var r=e.sibling;if(r!==null){r.return=e.return,te=r;break}te=e.return}}function Xw(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Fp(4,e)}catch(l){ot(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ot(e,i,l)}}var s=e.return;try{wv(e)}catch(l){ot(e,s,l)}break;case 5:var o=e.return;try{wv(e)}catch(l){ot(e,o,l)}}}catch(l){ot(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var mF=Math.ceil,Mf=ds.ReactCurrentDispatcher,tb=ds.ReactCurrentOwner,un=ds.ReactCurrentBatchConfig,Re=0,Mt=null,yt=null,Vt=0,Lr=0,Qa=Js(0),wt=0,Fu=null,Ko=0,Np=0,rb=0,au=null,_r=null,nb=0,Bl=1/0,Ni=null,Of=!1,Cv=null,zs=null,Ud=!1,ks=null,Lf=0,lu=0,Tv=null,zh=-1,$h=0;function cr(){return Re&6?dt():zh!==-1?zh:zh=dt()}function $s(t){return t.mode&1?Re&2&&Vt!==0?Vt&-Vt:JD.transition!==null?($h===0&&($h=VT()),$h):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:KT(t.type)),t):1}function Mn(t,e,r,n){if(50<lu)throw lu=0,Tv=null,Error(G(185));nd(t,r,n),(!(Re&2)||t!==Mt)&&(t===Mt&&(!(Re&2)&&(Np|=r),wt===4&&Ps(t,Vt)),Ir(t,n),r===1&&Re===0&&!(e.mode&1)&&(Bl=dt()+500,Op&&eo()))}function Ir(t,e){var r=t.callbackNode;JL(t,e);var n=yf(t,t===Mt?Vt:0);if(n===0)r!==null&&rw(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&rw(r),e===1)t.tag===0?QD(Yw.bind(null,t)):gP(Yw.bind(null,t)),YD(function(){!(Re&6)&&eo()}),r=null;else{switch(GT(n)){case 1:r=Ax;break;case 4:r=$T;break;case 16:r=mf;break;case 536870912:r=jT;break;default:r=mf}r=fI(r,oI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function oI(t,e){if(zh=-1,$h=0,Re&6)throw Error(G(327));var r=t.callbackNode;if(hl()&&t.callbackNode!==r)return null;var n=yf(t,t===Mt?Vt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Df(t,n);else{e=n;var i=Re;Re|=2;var s=lI();(Mt!==t||Vt!==e)&&(Ni=null,Bl=dt()+500,$o(t,e));do try{xF();break}catch(a){aI(t,a)}while(!0);jx(),Mf.current=s,Re=i,yt!==null?e=0:(Mt=null,Vt=0,e=wt)}if(e!==0){if(e===2&&(i=Jy(t),i!==0&&(n=i,e=Pv(t,i))),e===1)throw r=Fu,$o(t,0),Ps(t,n),Ir(t,dt()),r;if(e===6)Ps(t,n);else{if(i=t.current.alternate,!(n&30)&&!yF(i)&&(e=Df(t,n),e===2&&(s=Jy(t),s!==0&&(n=s,e=Pv(t,s))),e===1))throw r=Fu,$o(t,0),Ps(t,n),Ir(t,dt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(G(345));case 2:So(t,_r,Ni);break;case 3:if(Ps(t,n),(n&130023424)===n&&(e=nb+500-dt(),10<e)){if(yf(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){cr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=av(So.bind(null,t,_r,Ni),e);break}So(t,_r,Ni);break;case 4:if(Ps(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Rn(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=dt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*mF(n/1960))-n,10<n){t.timeoutHandle=av(So.bind(null,t,_r,Ni),n);break}So(t,_r,Ni);break;case 5:So(t,_r,Ni);break;default:throw Error(G(329))}}}return Ir(t,dt()),t.callbackNode===r?oI.bind(null,t):null}function Pv(t,e){var r=au;return t.current.memoizedState.isDehydrated&&($o(t,e).flags|=256),t=Df(t,e),t!==2&&(e=_r,_r=r,e!==null&&Iv(e)),t}function Iv(t){_r===null?_r=t:_r.push.apply(_r,t)}function yF(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Nn(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ps(t,e){for(e&=~rb,e&=~Np,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Rn(e),n=1<<r;t[r]=-1,e&=~n}}function Yw(t){if(Re&6)throw Error(G(327));hl();var e=yf(t,0);if(!(e&1))return Ir(t,dt()),null;var r=Df(t,e);if(t.tag!==0&&r===2){var n=Jy(t);n!==0&&(e=n,r=Pv(t,n))}if(r===1)throw r=Fu,$o(t,0),Ps(t,e),Ir(t,dt()),r;if(r===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,So(t,_r,Ni),Ir(t,dt()),null}function ib(t,e){var r=Re;Re|=1;try{return t(e)}finally{Re=r,Re===0&&(Bl=dt()+500,Op&&eo())}}function Zo(t){ks!==null&&ks.tag===0&&!(Re&6)&&hl();var e=Re;Re|=1;var r=un.transition,n=Fe;try{if(un.transition=null,Fe=1,t)return t()}finally{Fe=n,un.transition=r,Re=e,!(Re&6)&&eo()}}function sb(){Lr=Qa.current,Xe(Qa)}function $o(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,XD(r)),yt!==null)for(r=yt.return;r!==null;){var n=r;switch(Ux(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wf();break;case 3:Fl(),Xe(Tr),Xe(tr),Yx();break;case 5:Xx(n);break;case 4:Fl();break;case 13:Xe(Qe);break;case 19:Xe(Qe);break;case 10:Vx(n.type._context);break;case 22:case 23:sb()}r=r.return}if(Mt=t,yt=t=js(t.current,null),Vt=Lr=e,wt=0,Fu=null,rb=Np=Ko=0,_r=au=null,No!==null){for(e=0;e<No.length;e++)if(r=No[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}No=null}return t}function aI(t,e){do{var r=yt;try{if(jx(),Nh.current=Rf,kf){for(var n=et.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}kf=!1}if(qo=0,At=_t=et=null,su=!1,Ou=0,tb.current=null,r===null||r.return===null){wt=1,Fu=e,yt=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=Vt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Dw(o);if(f!==null){f.flags&=-257,Fw(f,o,a,s,e),f.mode&1&&Lw(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){Lw(s,c,e),ob();break e}l=Error(G(426))}}else if(qe&&a.mode&1){var x=Dw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Fw(x,o,a,s,e),zx(Nl(l,a));break e}}s=l=Nl(l,a),wt!==4&&(wt=2),au===null?au=[s]:au.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=GP(s,l,e);Iw(s,v);break e;case 1:a=l;var y=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(zs===null||!zs.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=WP(s,a,e);Iw(s,_);break e}}s=s.return}while(s!==null)}uI(r)}catch(C){e=C,yt===r&&r!==null&&(yt=r=r.return);continue}break}while(!0)}function lI(){var t=Mf.current;return Mf.current=Rf,t===null?Rf:t}function ob(){(wt===0||wt===3||wt===2)&&(wt=4),Mt===null||!(Ko&268435455)&&!(Np&268435455)||Ps(Mt,Vt)}function Df(t,e){var r=Re;Re|=2;var n=lI();(Mt!==t||Vt!==e)&&(Ni=null,$o(t,e));do try{vF();break}catch(i){aI(t,i)}while(!0);if(jx(),Re=r,Mf.current=n,yt!==null)throw Error(G(261));return Mt=null,Vt=0,wt}function vF(){for(;yt!==null;)cI(yt)}function xF(){for(;yt!==null&&!GL();)cI(yt)}function cI(t){var e=hI(t.alternate,t,Lr);t.memoizedProps=t.pendingProps,e===null?uI(t):yt=e,tb.current=null}function uI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=hF(r,e),r!==null){r.flags&=32767,yt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,yt=null;return}}else if(r=dF(r,e,Lr),r!==null){yt=r;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);wt===0&&(wt=5)}function So(t,e,r){var n=Fe,i=un.transition;try{un.transition=null,Fe=1,bF(t,e,r,n)}finally{un.transition=i,Fe=n}return null}function bF(t,e,r,n){do hl();while(ks!==null);if(Re&6)throw Error(G(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(eD(t,s),t===Mt&&(yt=Mt=null,Vt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ud||(Ud=!0,fI(mf,function(){return hl(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=un.transition,un.transition=null;var o=Fe;Fe=1;var a=Re;Re|=4,tb.current=null,pF(t,r),iI(r,t),zD(sv),vf=!!iv,sv=iv=null,t.current=r,gF(r),WL(),Re=a,Fe=o,un.transition=s}else t.current=r;if(Ud&&(Ud=!1,ks=t,Lf=i),s=t.pendingLanes,s===0&&(zs=null),YL(r.stateNode),Ir(t,dt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Of)throw Of=!1,t=Cv,Cv=null,t;return Lf&1&&t.tag!==0&&hl(),s=t.pendingLanes,s&1?t===Tv?lu++:(lu=0,Tv=t):lu=0,eo(),null}function hl(){if(ks!==null){var t=GT(Lf),e=un.transition,r=Fe;try{if(un.transition=null,Fe=16>t?16:t,ks===null)var n=!1;else{if(t=ks,ks=null,Lf=0,Re&6)throw Error(G(331));var i=Re;for(Re|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var u=te;switch(u.tag){case 0:case 11:case 15:ou(8,u,s)}var d=u.child;if(d!==null)d.return=u,te=d;else for(;te!==null;){u=te;var h=u.sibling,f=u.return;if(tI(u),u===c){te=null;break}if(h!==null){h.return=f,te=h;break}te=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ou(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,te=v;break e}te=s.return}}var y=t.current;for(te=y;te!==null;){o=te;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,te=m;else e:for(o=y;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fp(9,a)}}catch(C){ot(a,a.return,C)}if(a===o){te=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,te=_;break e}te=a.return}}if(Re=i,eo(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(Ip,t)}catch{}n=!0}return n}finally{Fe=r,un.transition=e}}return!1}function qw(t,e,r){e=Nl(r,e),e=GP(t,e,1),t=Us(t,e,1),e=cr(),t!==null&&(nd(t,1,e),Ir(t,e))}function ot(t,e,r){if(t.tag===3)qw(t,t,r);else for(;e!==null;){if(e.tag===3){qw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zs===null||!zs.has(n))){t=Nl(r,t),t=WP(e,t,1),e=Us(e,t,1),t=cr(),e!==null&&(nd(e,1,t),Ir(e,t));break}}e=e.return}}function _F(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=cr(),t.pingedLanes|=t.suspendedLanes&r,Mt===t&&(Vt&r)===r&&(wt===4||wt===3&&(Vt&130023424)===Vt&&500>dt()-nb?$o(t,0):rb|=r),Ir(t,e)}function dI(t,e){e===0&&(t.mode&1?(e=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):e=1);var r=cr();t=ns(t,e),t!==null&&(nd(t,e,r),Ir(t,r))}function wF(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),dI(t,r)}function SF(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(G(314))}n!==null&&n.delete(e),dI(t,r)}var hI;hI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tr.current)Sr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Sr=!1,uF(t,e,r);Sr=!!(t.flags&131072)}else Sr=!1,qe&&e.flags&1048576&&mP(e,Cf,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Uh(t,e),t=e.pendingProps;var i=Ol(e,tr.current);dl(e,r),i=Kx(null,e,n,t,i,r);var s=Zx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pr(n)?(s=!0,Sf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wx(e),i.updater=Dp,e.stateNode=i,i._reactInternals=e,pv(e,n,t,r),e=yv(null,e,n,!0,s,r)):(e.tag=0,qe&&s&&Bx(e),or(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Uh(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=CF(n),t=Sn(n,t),i){case 0:e=mv(null,e,n,t,r);break e;case 1:e=Uw(null,e,n,t,r);break e;case 11:e=Nw(null,e,n,t,r);break e;case 14:e=Bw(null,e,n,Sn(n.type,t),r);break e}throw Error(G(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Sn(n,i),mv(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Sn(n,i),Uw(t,e,n,i,r);case 3:e:{if(qP(e),t===null)throw Error(G(387));n=e.pendingProps,s=e.memoizedState,i=s.element,wP(t,e),If(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Nl(Error(G(423)),e),e=zw(t,e,n,r,i);break e}else if(n!==i){i=Nl(Error(G(424)),e),e=zw(t,e,n,r,i);break e}else for(Ur=Bs(e.stateNode.containerInfo.firstChild),zr=e,qe=!0,Tn=null,r=bP(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ll(),n===i){e=is(t,e,r);break e}or(t,e,n,r)}e=e.child}return e;case 5:return SP(e),t===null&&dv(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ov(n,i)?o=null:s!==null&&ov(n,s)&&(e.flags|=32),YP(t,e),or(t,e,o,r),e.child;case 6:return t===null&&dv(e),null;case 13:return KP(t,e,r);case 4:return Hx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Dl(e,null,n,r):or(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Sn(n,i),Nw(t,e,n,i,r);case 7:return or(t,e,e.pendingProps,r),e.child;case 8:return or(t,e,e.pendingProps.children,r),e.child;case 12:return or(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ge(Tf,n._currentValue),n._currentValue=o,s!==null)if(Nn(s.value,o)){if(s.children===i.children&&!Tr.current){e=is(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Qi(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),hv(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),hv(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}or(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,dl(e,r),i=hn(i),n=n(i),e.flags|=1,or(t,e,n,r),e.child;case 14:return n=e.type,i=Sn(n,e.pendingProps),i=Sn(n.type,i),Bw(t,e,n,i,r);case 15:return HP(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Sn(n,i),Uh(t,e),e.tag=1,Pr(n)?(t=!0,Sf(e)):t=!1,dl(e,r),VP(e,n,i),pv(e,n,i,r),yv(null,e,n,!0,t,r);case 19:return ZP(t,e,r);case 22:return XP(t,e,r)}throw Error(G(156,e.tag))};function fI(t,e){return zT(t,e)}function EF(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,r,n){return new EF(t,e,r,n)}function ab(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CF(t){if(typeof t=="function")return ab(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tx)return 11;if(t===Px)return 14}return 2}function js(t,e){var r=t.alternate;return r===null?(r=nn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function jh(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")ab(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ja:return jo(r.children,i,s,e);case Cx:o=8,i|=8;break;case By:return t=nn(12,r,e,i|2),t.elementType=By,t.lanes=s,t;case Uy:return t=nn(13,r,e,i),t.elementType=Uy,t.lanes=s,t;case zy:return t=nn(19,r,e,i),t.elementType=zy,t.lanes=s,t;case ST:return Bp(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _T:o=10;break e;case wT:o=9;break e;case Tx:o=11;break e;case Px:o=14;break e;case Ss:o=16,n=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=nn(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function jo(t,e,r,n){return t=nn(7,t,n,e),t.lanes=r,t}function Bp(t,e,r,n){return t=nn(22,t,n,e),t.elementType=ST,t.lanes=r,t.stateNode={isHidden:!1},t}function pm(t,e,r){return t=nn(6,t,null,e),t.lanes=r,t}function gm(t,e,r){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TF(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qg(0),this.expirationTimes=qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qg(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lb(t,e,r,n,i,s,o,a,l){return t=new TF(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wx(s),t}function PF(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function pI(t){if(!t)return Ws;t=t._reactInternals;e:{if(la(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var r=t.type;if(Pr(r))return pP(t,r,e)}return e}function gI(t,e,r,n,i,s,o,a,l){return t=lb(r,n,!0,t,i,s,o,a,l),t.context=pI(null),r=t.current,n=cr(),i=$s(r),s=Qi(n,i),s.callback=e??null,Us(r,s,i),t.current.lanes=i,nd(t,i,n),Ir(t,n),t}function Up(t,e,r,n){var i=e.current,s=cr(),o=$s(i);return r=pI(r),e.context===null?e.context=r:e.pendingContext=r,e=Qi(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Us(i,e,o),t!==null&&(Mn(t,i,o,s),Fh(t,i,o)),o}function Ff(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function cb(t,e){Kw(t,e),(t=t.alternate)&&Kw(t,e)}var mI=typeof reportError=="function"?reportError:function(t){console.error(t)};function ub(t){this._internalRoot=t}zp.prototype.render=ub.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Up(t,e,null,null)};zp.prototype.unmount=ub.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zo(function(){Up(null,t,null,null)}),e[rs]=null}};function zp(t){this._internalRoot=t}zp.prototype.unstable_scheduleHydration=function(t){if(t){var e=XT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ts.length&&e!==0&&e<Ts[r].priority;r++);Ts.splice(r,0,t),r===0&&qT(t)}};function db(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zw(){}function IF(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Ff(o);s.call(c)}}var o=gI(e,n,t,0,null,!1,!1,"",Zw);return t._reactRootContainer=o,t[rs]=o.current,Iu(t.nodeType===8?t.parentNode:t),Zo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Ff(l);a.call(c)}}var l=lb(t,0,!1,null,null,!1,!1,"",Zw);return t._reactRootContainer=l,t[rs]=l.current,Iu(t.nodeType===8?t.parentNode:t),Zo(function(){Up(e,l,r,n)}),l}function jp(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ff(o);a.call(l)}}Up(e,o,t,i)}else o=IF(r,e,t,i,n);return Ff(o)}WT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=zc(e.pendingLanes);r!==0&&(kx(e,r|1),Ir(e,dt()),!(Re&6)&&(Bl=dt()+500,eo()))}break;case 13:Zo(function(){var n=ns(t,1);if(n!==null){var i=cr();Mn(n,t,1,i)}}),cb(t,1)}};Rx=function(t){if(t.tag===13){var e=ns(t,134217728);if(e!==null){var r=cr();Mn(e,t,134217728,r)}cb(t,134217728)}};HT=function(t){if(t.tag===13){var e=$s(t),r=ns(t,e);if(r!==null){var n=cr();Mn(r,t,e,n)}cb(t,e)}};XT=function(){return Fe};YT=function(t,e){var r=Fe;try{return Fe=t,e()}finally{Fe=r}};Ky=function(t,e,r){switch(e){case"input":if(Vy(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Mp(n);if(!i)throw Error(G(90));CT(n),Vy(n,i)}}}break;case"textarea":PT(t,r);break;case"select":e=r.value,e!=null&&al(t,!!r.multiple,e,!1)}};LT=ib;DT=Zo;var AF={usingClientEntryPoint:!1,Events:[sd,Ha,Mp,MT,OT,ib]},wc={findFiberByHostInstance:Fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kF={bundleType:wc.bundleType,version:wc.version,rendererPackageName:wc.rendererPackageName,rendererConfig:wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BT(t),t===null?null:t.stateNode},findFiberByHostInstance:wc.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{Ip=zd.inject(kF),mi=zd}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AF;Xr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!db(e))throw Error(G(200));return PF(t,e,null,r)};Xr.createRoot=function(t,e){if(!db(t))throw Error(G(299));var r=!1,n="",i=mI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lb(t,1,!1,null,null,r,!1,n,i),t[rs]=e.current,Iu(t.nodeType===8?t.parentNode:t),new ub(e)};Xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=BT(e),t=t===null?null:t.stateNode,t};Xr.flushSync=function(t){return Zo(t)};Xr.hydrate=function(t,e,r){if(!$p(e))throw Error(G(200));return jp(null,t,e,!0,r)};Xr.hydrateRoot=function(t,e,r){if(!db(t))throw Error(G(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=mI;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=gI(e,null,t,1,r??null,i,!1,s,o),t[rs]=e.current,Iu(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new zp(e)};Xr.render=function(t,e,r){if(!$p(e))throw Error(G(200));return jp(null,t,e,!1,r)};Xr.unmountComponentAtNode=function(t){if(!$p(t))throw Error(G(40));return t._reactRootContainer?(Zo(function(){jp(null,null,t,!1,function(){t._reactRootContainer=null,t[rs]=null})}),!0):!1};Xr.unstable_batchedUpdates=ib;Xr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!$p(r))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return jp(t,e,r,!1,n)};Xr.version="18.3.1-next-f1338f8080-20240426";function yI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yI)}catch(t){console.error(t)}}yI(),yT.exports=Xr;var vI=yT.exports,xI,Qw=vI;xI=Qw.createRoot,Qw.hydrateRoot;const Ar=(...t)=>t.filter(Boolean).map(e=>e.trim()).join(" ");function RF(t,e){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function fl(t={}){const{name:e,strict:r=!0,hookName:n="useContext",providerName:i="Provider",errorMessage:s,defaultValue:o}=t,a=w.createContext(o);a.displayName=e;function l(){const c=w.useContext(a);if(!c&&r){const u=new Error(s??RF(n,i));throw u.name="ContextError",Error.captureStackTrace?.(u,l),u}return c}return[a.Provider,l,a]}function MF(...t){return function(...r){t.forEach(n=>n?.(...r))}}const OF=(...t)=>t.map(e=>e?.trim?.()).filter(Boolean).join(" "),LF=/^on[A-Z]/;function Nu(...t){let e={};for(let r of t){for(let n in e){if(LF.test(n)&&typeof e[n]=="function"&&typeof r[n]=="function"){e[n]=MF(e[n],r[n]);continue}if(n==="className"||n==="class"){e[n]=OF(e[n],r[n]);continue}if(n==="style"){e[n]=Object.assign({},e[n]??{},r[n]??{});continue}e[n]=r[n]!==void 0?r[n]:e[n]}for(let n in r)e[n]===void 0&&(e[n]=r[n])}return e}const DF=Object.freeze({}),FF=Object.freeze({});function bI(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var NF=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,BF=bI(function(t){return NF.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function UF(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function zF(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var $F=function(){function t(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(zF(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=UF(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},t}(),Kt="-ms-",Nf="-moz-",Oe="-webkit-",_I="comm",hb="rule",fb="decl",jF="@import",wI="@keyframes",VF="@layer",GF=Math.abs,Vp=String.fromCharCode,WF=Object.assign;function HF(t,e){return $t(t,0)^45?(((e<<2^$t(t,0))<<2^$t(t,1))<<2^$t(t,2))<<2^$t(t,3):0}function SI(t){return t.trim()}function XF(t,e){return(t=e.exec(t))?t[0]:t}function Le(t,e,r){return t.replace(e,r)}function Av(t,e){return t.indexOf(e)}function $t(t,e){return t.charCodeAt(e)|0}function Bu(t,e,r){return t.slice(e,r)}function li(t){return t.length}function pb(t){return t.length}function $d(t,e){return e.push(t),t}function YF(t,e){return t.map(e).join("")}var Gp=1,Ul=1,EI=0,kr=0,mt=0,ec="";function Wp(t,e,r,n,i,s,o){return{value:t,root:e,parent:r,type:n,props:i,children:s,line:Gp,column:Ul,length:o,return:""}}function Sc(t,e){return WF(Wp("",null,null,"",null,null,0),t,{length:-t.length},e)}function qF(){return mt}function KF(){return mt=kr>0?$t(ec,--kr):0,Ul--,mt===10&&(Ul=1,Gp--),mt}function $r(){return mt=kr<EI?$t(ec,kr++):0,Ul++,mt===10&&(Ul=1,Gp++),mt}function vi(){return $t(ec,kr)}function Vh(){return kr}function ad(t,e){return Bu(ec,t,e)}function Uu(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CI(t){return Gp=Ul=1,EI=li(ec=t),kr=0,[]}function TI(t){return ec="",t}function Gh(t){return SI(ad(kr-1,kv(t===91?t+2:t===40?t+1:t)))}function ZF(t){for(;(mt=vi())&&mt<33;)$r();return Uu(t)>2||Uu(mt)>3?"":" "}function QF(t,e){for(;--e&&$r()&&!(mt<48||mt>102||mt>57&&mt<65||mt>70&&mt<97););return ad(t,Vh()+(e<6&&vi()==32&&$r()==32))}function kv(t){for(;$r();)switch(mt){case t:return kr;case 34:case 39:t!==34&&t!==39&&kv(mt);break;case 40:t===41&&kv(t);break;case 92:$r();break}return kr}function JF(t,e){for(;$r()&&t+mt!==57;)if(t+mt===84&&vi()===47)break;return"/*"+ad(e,kr-1)+"*"+Vp(t===47?t:$r())}function eN(t){for(;!Uu(vi());)$r();return ad(t,kr)}function tN(t){return TI(Wh("",null,null,null,[""],t=CI(t),0,[0],t))}function Wh(t,e,r,n,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,g=1,x=1,v=1,y=0,m="",_=i,C=s,E=n,T=m;x;)switch(p=y,y=$r()){case 40:if(p!=108&&$t(T,d-1)==58){Av(T+=Le(Gh(y),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:T+=Gh(y);break;case 9:case 10:case 13:case 32:T+=ZF(p);break;case 92:T+=QF(Vh()-1,7);continue;case 47:switch(vi()){case 42:case 47:$d(rN(JF($r(),Vh()),e,r),l);break;default:T+="/"}break;case 123*g:a[c++]=li(T)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:x=0;case 59+u:v==-1&&(T=Le(T,/\f/g,"")),f>0&&li(T)-d&&$d(f>32?eS(T+";",n,r,d-1):eS(Le(T," ","")+";",n,r,d-2),l);break;case 59:T+=";";default:if($d(E=Jw(T,e,r,c,u,i,a,m,_=[],C=[],d),s),y===123)if(u===0)Wh(T,e,E,E,_,s,d,a,C);else switch(h===99&&$t(T,3)===110?100:h){case 100:case 108:case 109:case 115:Wh(t,E,E,n&&$d(Jw(t,E,E,0,0,i,a,m,i,_=[],d),C),i,C,d,a,n?_:C);break;default:Wh(T,E,E,E,[""],C,0,a,C)}}c=u=f=0,g=v=1,m=T="",d=o;break;case 58:d=1+li(T),f=p;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&KF()==125)continue}switch(T+=Vp(y),y*g){case 38:v=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(li(T)-1)*v,v=1;break;case 64:vi()===45&&(T+=Gh($r())),h=vi(),u=d=li(m=T+=eN(Vh())),y++;break;case 45:p===45&&li(T)==2&&(g=0)}}return s}function Jw(t,e,r,n,i,s,o,a,l,c,u){for(var d=i-1,h=i===0?s:[""],f=pb(h),p=0,g=0,x=0;p<n;++p)for(var v=0,y=Bu(t,d+1,d=GF(g=o[p])),m=t;v<f;++v)(m=SI(g>0?h[v]+" "+y:Le(y,/&\f/g,h[v])))&&(l[x++]=m);return Wp(t,e,r,i===0?hb:a,l,c,u)}function rN(t,e,r){return Wp(t,e,r,_I,Vp(qF()),Bu(t,2,-2),0)}function eS(t,e,r,n){return Wp(t,e,r,fb,Bu(t,0,n),Bu(t,n+1,-1),n)}function pl(t,e){for(var r="",n=pb(t),i=0;i<n;i++)r+=e(t[i],i,t,e)||"";return r}function nN(t,e,r,n){switch(t.type){case VF:if(t.children.length)break;case jF:case fb:return t.return=t.return||t.value;case _I:return"";case wI:return t.return=t.value+"{"+pl(t.children,n)+"}";case hb:t.value=t.props.join(",")}return li(r=pl(t.children,n))?t.return=t.value+"{"+r+"}":""}function iN(t){var e=pb(t);return function(r,n,i,s){for(var o="",a=0;a<e;a++)o+=t[a](r,n,i,s)||"";return o}}function sN(t){return function(e){e.root||(e=e.return)&&t(e)}}var oN=function(e,r,n){for(var i=0,s=0;i=s,s=vi(),i===38&&s===12&&(r[n]=1),!Uu(s);)$r();return ad(e,kr)},aN=function(e,r){var n=-1,i=44;do switch(Uu(i)){case 0:i===38&&vi()===12&&(r[n]=1),e[n]+=oN(kr-1,r,n);break;case 2:e[n]+=Gh(i);break;case 4:if(i===44){e[++n]=vi()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=Vp(i)}while(i=$r());return e},lN=function(e,r){return TI(aN(CI(e),r))},tS=new WeakMap,cN=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!tS.get(n))&&!i){tS.set(e,!0);for(var s=[],o=lN(r,s),a=n.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},uN=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function PI(t,e){switch(HF(t,e)){case 5103:return Oe+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Oe+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Oe+t+Nf+t+Kt+t+t;case 6828:case 4268:return Oe+t+Kt+t+t;case 6165:return Oe+t+Kt+"flex-"+t+t;case 5187:return Oe+t+Le(t,/(\w+).+(:[^]+)/,Oe+"box-$1$2"+Kt+"flex-$1$2")+t;case 5443:return Oe+t+Kt+"flex-item-"+Le(t,/flex-|-self/,"")+t;case 4675:return Oe+t+Kt+"flex-line-pack"+Le(t,/align-content|flex-|-self/,"")+t;case 5548:return Oe+t+Kt+Le(t,"shrink","negative")+t;case 5292:return Oe+t+Kt+Le(t,"basis","preferred-size")+t;case 6060:return Oe+"box-"+Le(t,"-grow","")+Oe+t+Kt+Le(t,"grow","positive")+t;case 4554:return Oe+Le(t,/([^-])(transform)/g,"$1"+Oe+"$2")+t;case 6187:return Le(Le(Le(t,/(zoom-|grab)/,Oe+"$1"),/(image-set)/,Oe+"$1"),t,"")+t;case 5495:case 3959:return Le(t,/(image-set\([^]*)/,Oe+"$1$`$1");case 4968:return Le(Le(t,/(.+:)(flex-)?(.*)/,Oe+"box-pack:$3"+Kt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Oe+t+t;case 4095:case 3583:case 4068:case 2532:return Le(t,/(.+)-inline(.+)/,Oe+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(li(t)-1-e>6)switch($t(t,e+1)){case 109:if($t(t,e+4)!==45)break;case 102:return Le(t,/(.+:)(.+)-([^]+)/,"$1"+Oe+"$2-$3$1"+Nf+($t(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Av(t,"stretch")?PI(Le(t,"stretch","fill-available"),e)+t:t}break;case 4949:if($t(t,e+1)!==115)break;case 6444:switch($t(t,li(t)-3-(~Av(t,"!important")&&10))){case 107:return Le(t,":",":"+Oe)+t;case 101:return Le(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Oe+($t(t,14)===45?"inline-":"")+"box$3$1"+Oe+"$2$3$1"+Kt+"$2box$3")+t}break;case 5936:switch($t(t,e+11)){case 114:return Oe+t+Kt+Le(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Oe+t+Kt+Le(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Oe+t+Kt+Le(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Oe+t+Kt+t+t}return t}var dN=function(e,r,n,i){if(e.length>-1&&!e.return)switch(e.type){case fb:e.return=PI(e.value,e.length);break;case wI:return pl([Sc(e,{value:Le(e.value,"@","@"+Oe)})],i);case hb:if(e.length)return YF(e.props,function(s){switch(XF(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pl([Sc(e,{props:[Le(s,/:(read-\w+)/,":"+Nf+"$1")]})],i);case"::placeholder":return pl([Sc(e,{props:[Le(s,/:(plac\w+)/,":"+Oe+"input-$1")]}),Sc(e,{props:[Le(s,/:(plac\w+)/,":"+Nf+"$1")]}),Sc(e,{props:[Le(s,/:(plac\w+)/,Kt+"input-$1")]})],i)}return""})}},hN=[dN],fN=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var x=g.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||hN,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var x=g.getAttribute("data-emotion").split(" "),v=1;v<x.length;v++)s[x[v]]=!0;a.push(g)});var l,c=[cN,uN];{var u,d=[nN,sN(function(g){u.insert(g)})],h=iN(c.concat(i,d)),f=function(x){return pl(tN(x),h)};l=function(x,v,y,m){u=y,f(x?x+"{"+v.styles+"}":v.styles),m&&(p.inserted[v.name]=!0)}}var p={key:r,sheet:new $F({key:r,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},II={exports:{}},Be={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=typeof Symbol=="function"&&Symbol.for,gb=Dt?Symbol.for("react.element"):60103,mb=Dt?Symbol.for("react.portal"):60106,Hp=Dt?Symbol.for("react.fragment"):60107,Xp=Dt?Symbol.for("react.strict_mode"):60108,Yp=Dt?Symbol.for("react.profiler"):60114,qp=Dt?Symbol.for("react.provider"):60109,Kp=Dt?Symbol.for("react.context"):60110,yb=Dt?Symbol.for("react.async_mode"):60111,Zp=Dt?Symbol.for("react.concurrent_mode"):60111,Qp=Dt?Symbol.for("react.forward_ref"):60112,Jp=Dt?Symbol.for("react.suspense"):60113,pN=Dt?Symbol.for("react.suspense_list"):60120,eg=Dt?Symbol.for("react.memo"):60115,tg=Dt?Symbol.for("react.lazy"):60116,gN=Dt?Symbol.for("react.block"):60121,mN=Dt?Symbol.for("react.fundamental"):60117,yN=Dt?Symbol.for("react.responder"):60118,vN=Dt?Symbol.for("react.scope"):60119;function qr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case gb:switch(t=t.type,t){case yb:case Zp:case Hp:case Yp:case Xp:case Jp:return t;default:switch(t=t&&t.$$typeof,t){case Kp:case Qp:case tg:case eg:case qp:return t;default:return e}}case mb:return e}}}function AI(t){return qr(t)===Zp}Be.AsyncMode=yb;Be.ConcurrentMode=Zp;Be.ContextConsumer=Kp;Be.ContextProvider=qp;Be.Element=gb;Be.ForwardRef=Qp;Be.Fragment=Hp;Be.Lazy=tg;Be.Memo=eg;Be.Portal=mb;Be.Profiler=Yp;Be.StrictMode=Xp;Be.Suspense=Jp;Be.isAsyncMode=function(t){return AI(t)||qr(t)===yb};Be.isConcurrentMode=AI;Be.isContextConsumer=function(t){return qr(t)===Kp};Be.isContextProvider=function(t){return qr(t)===qp};Be.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===gb};Be.isForwardRef=function(t){return qr(t)===Qp};Be.isFragment=function(t){return qr(t)===Hp};Be.isLazy=function(t){return qr(t)===tg};Be.isMemo=function(t){return qr(t)===eg};Be.isPortal=function(t){return qr(t)===mb};Be.isProfiler=function(t){return qr(t)===Yp};Be.isStrictMode=function(t){return qr(t)===Xp};Be.isSuspense=function(t){return qr(t)===Jp};Be.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Hp||t===Zp||t===Yp||t===Xp||t===Jp||t===pN||typeof t=="object"&&t!==null&&(t.$$typeof===tg||t.$$typeof===eg||t.$$typeof===qp||t.$$typeof===Kp||t.$$typeof===Qp||t.$$typeof===mN||t.$$typeof===yN||t.$$typeof===vN||t.$$typeof===gN)};Be.typeOf=qr;II.exports=Be;var xN=II.exports,kI=xN,bN={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_N={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},RI={};RI[kI.ForwardRef]=bN;RI[kI.Memo]=_N;var wN=!0;function MI(t,e,r){var n="";return r.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(n+=i+" ")}),n}var vb=function(e,r,n){var i=e.key+"-"+r.name;(n===!1||wN===!1)&&e.registered[i]===void 0&&(e.registered[i]=r.styles)},xb=function(e,r,n){vb(e,r,n);var i=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var s=r;do e.insert(r===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function SN(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var EN={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},CN=/[A-Z]|^ms/g,TN=/_EMO_([^_]+?)_([^]*?)_EMO_/g,OI=function(e){return e.charCodeAt(1)===45},rS=function(e){return e!=null&&typeof e!="boolean"},mm=bI(function(t){return OI(t)?t:t.replace(CN,"-$&").toLowerCase()}),nS=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(TN,function(n,i,s){return ci={name:i,styles:s,next:ci},i})}return EN[e]!==1&&!OI(e)&&typeof r=="number"&&r!==0?r+"px":r};function zu(t,e,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return ci={name:i.name,styles:i.styles,next:ci},i.name;var s=r;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)ci={name:o.name,styles:o.styles,next:ci},o=o.next;var a=s.styles+";";return a}return PN(t,e,r)}case"function":{if(t!==void 0){var l=ci,c=r(t);return ci=l,zu(t,e,c)}break}}var u=r;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function PN(t,e,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=zu(t,e,r[i])+";";else for(var s in r){var o=r[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?n+=s+"{"+e[a]+"}":rS(a)&&(n+=mm(s)+":"+nS(s,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)rS(o[l])&&(n+=mm(s)+":"+nS(s,o[l])+";");else{var c=zu(t,e,o);switch(s){case"animation":case"animationName":{n+=mm(s)+":"+c+";";break}default:n+=s+"{"+c+"}"}}}return n}var iS=/label:\s*([^\s;{]+)\s*(;|$)/g,ci;function bb(t,e,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,i="";ci=void 0;var s=t[0];if(s==null||s.raw===void 0)n=!1,i+=zu(r,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=zu(r,e,t[a]),n){var l=s;i+=l[a]}iS.lastIndex=0;for(var c="",u;(u=iS.exec(i))!==null;)c+="-"+u[1];var d=SN(i)+c;return{name:d,styles:i,next:ci}}var IN=function(e){return e()},LI=H_.useInsertionEffect?H_.useInsertionEffect:!1,DI=LI||IN,sS=LI||w.useLayoutEffect,FI=w.createContext(typeof HTMLElement<"u"?fN({key:"css"}):null);FI.Provider;var _b=function(e){return w.forwardRef(function(r,n){var i=w.useContext(FI);return e(r,i,n)})},wb=w.createContext({}),Sb={}.hasOwnProperty,Rv="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",AN=function(e,r){var n={};for(var i in r)Sb.call(r,i)&&(n[i]=r[i]);return n[Rv]=e,n},kN=function(e){var r=e.cache,n=e.serialized,i=e.isStringTag;return vb(r,n,i),DI(function(){return xb(r,n,i)}),null},RN=_b(function(t,e,r){var n=t.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=t[Rv],s=[n],o="";typeof t.className=="string"?o=MI(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=bb(s,void 0,w.useContext(wb));o+=e.key+"-"+a.name;var l={};for(var c in t)Sb.call(t,c)&&c!=="css"&&c!==Rv&&(l[c]=t[c]);return l.className=o,r&&(l.ref=r),w.createElement(w.Fragment,null,w.createElement(kN,{cache:e,serialized:a,isStringTag:typeof i=="string"}),w.createElement(i,l))}),MN=RN,ON=function(e,r){var n=arguments;if(r==null||!Sb.call(r,"css"))return w.createElement.apply(void 0,n);var i=n.length,s=new Array(i);s[0]=MN,s[1]=AN(e,r);for(var o=2;o<i;o++)s[o]=n[o];return w.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(ON);var oS=_b(function(t,e){var r=t.styles,n=bb([r],void 0,w.useContext(wb)),i=w.useRef();return sS(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+n.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),sS(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(n.next!==void 0&&xb(e,n.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",n,o,!1)},[e,n.name]),null});function LN(t,e){if(t!=null){if(typeof t=="function"){t(e);return}try{t.current=e}catch{throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}}}function DN(...t){return e=>{t.forEach(r=>{LN(r,e)})}}function ld(t){const e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function FN(t){return t.default||t}const wr=t=>t!=null&&typeof t=="object"&&!Array.isArray(t),Si=t=>typeof t=="string",NI=t=>typeof t=="function";function NN(t){const e=w.version;return!Si(e)||e.startsWith("18.")?t?.ref:t?.props?.ref}const[BN,rg]=fl({name:"ChakraContext",strict:!0,providerName:"<ChakraProvider />"});function UN(t){const{value:e,children:r}=t;return b.jsxs(BN,{value:e,children:[!e._config.disableLayers&&b.jsx(oS,{styles:e.layers.atRule}),b.jsx(oS,{styles:e._global}),r]})}const gl=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n=Object.keys(r),i=o=>{const a={};for(let l=0;l<o.length;l++){const c=o[l];r[c]&&(Object.defineProperty(a,c,r[c]),delete r[c])}return a},s=o=>i(Array.isArray(o)?o:n.filter(o));return[e].map(s).concat(i(n))},zN=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function $N(t){return typeof t=="string"&&zN.has(t)}function jN(t,e,r){const{css:n,isValidProperty:i}=rg(),{children:s,...o}=t,a=w.useMemo(()=>{const[h,f]=gl(o,y=>r(y,e.variantKeys)),[p,g]=gl(f,e.variantKeys),[x,v]=gl(g,i);return{forwardedProps:h,variantProps:p,styleProps:x,elementProps:v}},[e.variantKeys,r,o,i]),{css:l,...c}=a.styleProps,u=w.useMemo(()=>{const h={...a.variantProps};return e.variantKeys.includes("colorPalette")||(h.colorPalette=o.colorPalette),e.variantKeys.includes("orientation")||(h.orientation=o.orientation),e(h)},[e,a.variantProps,o.colorPalette,o.orientation]);return{styles:w.useMemo(()=>n(u,...VN(l),c),[n,u,l,c]),props:{...a.forwardedProps,...a.elementProps,children:s}}}const VN=t=>(Array.isArray(t)?t:[t]).filter(Boolean).flat(),GN=FN(BF),WN=GN,HN=t=>t!=="theme",XN=(t,e,r)=>{let n;if(e){const i=e.shouldForwardProp;n=t.__emotion_forwardProp&&i?s=>t.__emotion_forwardProp(s)&&i(s):i}return typeof n!="function"&&r&&(n=t.__emotion_forwardProp),n};let YN=typeof document<"u";const aS=({cache:t,serialized:e,isStringTag:r})=>{vb(t,e,r);const n=DI(()=>xb(t,e,r));if(!YN&&n!==void 0){let i=e.name,s=e.next;for(;s!==void 0;)i=Ar(i,s.name),s=s.next;return b.jsx("style",{"data-emotion":Ar(t.key,i),dangerouslySetInnerHTML:{__html:n},nonce:t.sheet.nonce})}return null},qN=(t,e={},r={})=>{const n=t.__emotion_real===t,i=n&&t.__emotion_base||t;let s,o;r!==void 0&&(s=r.label,o=r.target);let a=[];const l=_b((c,u,d)=>{const{cva:h,isValidProperty:f}=rg(),p=e.__cva__?e:h(e),g=ZN(t.__emotion_cva,p),x=O=>(V,U)=>O.includes(V)?!0:!U?.includes(V)&&!f(V);!r.shouldForwardProp&&r.forwardProps&&(r.shouldForwardProp=x(r.forwardProps));const v=(O,V)=>{const U=typeof t=="string"&&t.charCodeAt(0)>96?WN:HN,F=!V?.includes(O)&&!f(O);return U(O)&&F},y=XN(t,r,n)||v,m=w.useMemo(()=>Object.assign({},r.defaultProps,ld(c)),[c]),{props:_,styles:C}=jN(m,g,y);let E="",T=[C],S=_;if(_.theme==null){S={};for(let O in _)S[O]=_[O];S.theme=w.useContext(wb)}typeof _.className=="string"?E=MI(u.registered,T,_.className):_.className!=null&&(E=Ar(E,_.className));const P=bb(a.concat(T),u.registered,S);E=Ar(E,`${u.key}-${P.name}`),o!==void 0&&(E=Ar(E,o));const I=!y("as");let M=I&&_.as||i,k={};for(let O in _)if(!(I&&O==="as")){if($N(O)){const V=O.replace("html","").toLowerCase();k[V]=_[O];continue}y(O)&&(k[O]=_[O])}k.className=E.trim(),k.ref=d;const R=r.forwardAsChild||r.forwardProps?.includes("asChild");if(_.asChild&&!R){const O=w.Children.only(_.children);M=O.type,k.children=null,Reflect.deleteProperty(k,"asChild"),k=Nu(k,O.props),k.ref=DN(d,NN(O))}return k.as&&R?(k.as=void 0,b.jsxs(w.Fragment,{children:[b.jsx(aS,{cache:u,serialized:P,isStringTag:typeof M=="string"}),b.jsx(M,{asChild:!0,...k,children:b.jsx(_.as,{children:k.children})})]})):b.jsxs(w.Fragment,{children:[b.jsx(aS,{cache:u,serialized:P,isStringTag:typeof M=="string"}),b.jsx(M,{...k})]})});return l.displayName=s!==void 0?s:`chakra(${typeof i=="string"?i:i.displayName||i.name||"Component"})`,l.__emotion_real=l,l.__emotion_base=i,l.__emotion_forwardProp=r.shouldForwardProp,l.__emotion_cva=e,Object.defineProperty(l,"toString",{value(){return`.${o}`}}),l},ym=qN.bind(),vm=new Map,KN=new Proxy(ym,{apply(t,e,r){return ym(...r)},get(t,e){return vm.has(e)||vm.set(e,ym(e)),vm.get(e)}}),Ye=KN,ZN=(t,e)=>t&&!e?t:!t&&e?e:t.merge(e);function QN(t){const{key:e,recipe:r}=t,n=rg();return w.useMemo(()=>{const i=r||(e!=null?n.getRecipe(e):{});return n.cva(structuredClone(i))},[e,r,n])}const JN=t=>t.charAt(0).toUpperCase()+t.slice(1);function ca(t){const{key:e,recipe:r}=t,n=JN(e||r.className||"Component"),[i,s]=fl({strict:!1,name:`${n}PropsContext`,providerName:`${n}PropsContext`});function o(c){const{unstyled:u,...d}=c,h=QN({key:e,recipe:d.recipe||r}),[f,p]=h.splitVariantProps(d);return{styles:u?DF:h(f),className:h.className,props:p}}const a=(c,u)=>{const d=Ye(c,{},u),h=w.forwardRef((f,p)=>{const g=Nu(s(),f),{styles:x,className:v,props:y}=o(g);return b.jsx(d,{...y,ref:p,css:[x,g.css],className:Ar(v,g.className)})});return h.displayName=c.displayName||c.name,h};function l(){return i}return{withContext:a,PropsProvider:i,withPropsProvider:l,usePropsContext:s,useRecipeResult:o}}const eB=w.forwardRef(function(e,r){const{templateAreas:n,column:i,row:s,autoFlow:o,autoRows:a,templateRows:l,autoColumns:c,templateColumns:u,inline:d,...h}=e;return b.jsx(Ye.div,{...h,ref:r,css:[{display:d?"inline-grid":"grid",gridTemplateAreas:n,gridAutoColumns:c,gridColumn:i,gridRow:s,gridAutoFlow:o,gridAutoRows:a,gridTemplateRows:l,gridTemplateColumns:u},e.css]})});var lS=t=>Math.max(0,Math.min(1,t)),tB=(t,e)=>t.map((r,n)=>t[(Math.max(e,0)+n)%t.length]),xm=(...t)=>e=>t.reduce((r,n)=>n(r),e),jd=()=>{},ng=t=>typeof t=="object"&&t!==null,BI=2147483647,Q=t=>t?"":void 0,Bf=t=>t?"true":void 0,rB=1,nB=9,iB=11,Wt=t=>ng(t)&&t.nodeType===rB&&typeof t.nodeName=="string",UI=t=>ng(t)&&t.nodeType===nB,sB=t=>ng(t)&&t===t.window,zI=t=>Wt(t)?t.localName||"":"#document";function oB(t){return["html","body","#document"].includes(zI(t))}var aB=t=>ng(t)&&t.nodeType!==void 0,$u=t=>aB(t)&&t.nodeType===iB&&"host"in t,lB=t=>Wt(t)&&t.localName==="input",cB=t=>!!t?.matches("a[href]"),uB=t=>Wt(t)?t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0:!1,dB=/(textarea|select)/;function hB(t){if(t==null||!Wt(t))return!1;try{return lB(t)&&t.selectionStart!=null||dB.test(t.localName)||t.isContentEditable||t.getAttribute("contenteditable")==="true"||t.getAttribute("contenteditable")===""}catch{return!1}}function Qo(t,e){if(!t||!e||!Wt(t)||!Wt(e))return!1;const r=e.getRootNode?.();if(t===e||t.contains(e))return!0;if(r&&$u(r)){let n=e;for(;n;){if(t===n)return!0;n=n.parentNode||n.host}}return!1}function zn(t){return UI(t)?t:sB(t)?t.document:t?.ownerDocument??document}function fB(t){return zn(t).documentElement}function Lt(t){return $u(t)?Lt(t.host):UI(t)?t.defaultView??window:Wt(t)?t.ownerDocument?.defaultView??window:window}function pB(t){let e=t.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}function gB(t){if(zI(t)==="html")return t;const e=t.assignedSlot||t.parentNode||$u(t)&&t.host||fB(t);return $u(e)?e.host:e}var bm=new WeakMap;function mB(t){return bm.has(t)||bm.set(t,Lt(t).getComputedStyle(t)),bm.get(t)}var Eb=()=>typeof document<"u";function yB(){return navigator.userAgentData?.platform??navigator.platform}function vB(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(({brand:e,version:r})=>`${e}/${r}`).join(" "):navigator.userAgent}var $I=t=>Eb()&&t.test(yB()),xB=t=>Eb()&&t.test(vB()),bB=t=>Eb()&&t.test(navigator.vendor),jI=()=>$I(/^Mac/),Cb=()=>wB()&&bB(/apple/i),_B=()=>xB(/firefox\//i),wB=()=>$I(/mac|iphone|ipad|ipod/i);function SB(t){return t.composedPath?.()??t.nativeEvent?.composedPath?.()}function Ei(t){return SB(t)?.[0]??t.target}var VI=t=>Qo(t.currentTarget,Ei(t));function Tb(t){return PB(t).isComposing}var cS=t=>t.button===0,EB=t=>t.button===2||jI()&&t.ctrlKey&&t.button===0,uS=t=>t.ctrlKey||t.altKey||t.metaKey,CB=t=>"touches"in t&&t.touches.length>0,TB={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},dS={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function Mv(t,e={}){const{dir:r="ltr",orientation:n="horizontal"}=e;let i=t.key;return i=TB[i]??i,r==="rtl"&&n==="horizontal"&&i in dS&&(i=dS[i]),i}function PB(t){return t.nativeEvent??t}var IB=new Set(["PageUp","PageDown"]),AB=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);function kB(t){return t.ctrlKey||t.metaKey?.1:IB.has(t.key)||t.shiftKey&&AB.has(t.key)?10:1}function GI(t,e="client"){const r=CB(t)?t.touches[0]||t.changedTouches[0]:t;return{x:r[`${e}X`],y:r[`${e}Y`]}}var ct=(t,e,r,n)=>{const i=typeof t=="function"?t():t;return i?.addEventListener(e,r,n),()=>{i?.removeEventListener(e,r,n)}};function WI(t,e){const{type:r="HTMLInputElement",property:n="value"}=e,i=Lt(t)[r].prototype;return Object.getOwnPropertyDescriptor(i,n)??{}}function RB(t){if(t.localName==="input")return"HTMLInputElement";if(t.localName==="textarea")return"HTMLTextAreaElement";if(t.localName==="select")return"HTMLSelectElement"}function Pb(t,e,r="value"){const n=RB(t);n&&WI(t,{type:n,property:r}).set?.call(t,e),t.setAttribute(r,e)}function MB(t,e){WI(t,{type:"HTMLInputElement",property:"checked"}).set?.call(t,e),e?t.setAttribute("checked",""):t.removeAttribute("checked")}function HI(t,e){const{value:r,bubbles:n=!0}=e;if(!t)return;const i=Lt(t);t instanceof i.HTMLInputElement&&(Pb(t,`${r}`),t.dispatchEvent(new i.Event("input",{bubbles:n})))}function OB(t,e){const{checked:r,bubbles:n=!0}=e;if(!t)return;const i=Lt(t);t instanceof i.HTMLInputElement&&(MB(t,r),t.dispatchEvent(new i.Event("click",{bubbles:n})))}function LB(t){return DB(t)?t.form:t.closest("form")}function DB(t){return t.matches("textarea, input, select, button")}function FB(t,e){if(!t)return;const r=LB(t),n=i=>{i.defaultPrevented||e()};return r?.addEventListener("reset",n,{passive:!0}),()=>r?.removeEventListener("reset",n)}function NB(t,e){const r=t?.closest("fieldset");if(!r)return;e(r.disabled);const n=Lt(r),i=new n.MutationObserver(()=>e(r.disabled));return i.observe(r,{attributes:!0,attributeFilter:["disabled"]}),()=>i.disconnect()}function Ib(t,e){if(!t)return;const{onFieldsetDisabledChange:r,onFormReset:n}=e,i=[FB(t,n),NB(t,r)];return()=>i.forEach(s=>s?.())}var XI=t=>Wt(t)&&t.tagName==="IFRAME",BB=t=>parseInt(t.getAttribute("tabindex")||"0",10)<0,Ab="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",kb=(t,e=!1)=>{if(!t)return[];const r=Array.from(t.querySelectorAll(Ab));(e==!0||e=="if-empty"&&r.length===0)&&Wt(t)&&ju(t)&&r.unshift(t);const i=r.filter(ju);return i.forEach((s,o)=>{if(XI(s)&&s.contentDocument){const a=s.contentDocument.body;i.splice(o,1,...kb(a))}}),i};function ju(t){return!t||t.closest("[inert]")?!1:t.matches(Ab)&&uB(t)}function Rb(t,e){if(!t)return[];const n=Array.from(t.querySelectorAll(Ab)).filter(UB);return n.forEach((i,s)=>{if(XI(i)&&i.contentDocument){const o=i.contentDocument.body,a=Rb(o);n.splice(s,1,...a)}}),n.length,n}function UB(t){return t!=null&&t.tabIndex>0?!0:ju(t)&&!BB(t)}function zB(t,e){const r=Rb(t,e),n=r[0]||null,i=r[r.length-1]||null;return[n,i]}function $B(t){const{root:e,getInitialEl:r,filter:n,enabled:i=!0}=t;if(!i)return;let s=null;if(s||(s=typeof r=="function"?r():r),s||(s=e?.querySelector("[data-autofocus],[autofocus]")),!s){const o=Rb(e);s=n?o.filter(n)[0]:o[0]}return s||e||void 0}function jB(t){const e=t.currentTarget;if(!e)return!1;const[r,n]=zB(e),i=e.ownerDocument||document;return!(i.activeElement===r&&t.shiftKey||i.activeElement===n&&!t.shiftKey||!r&&!n)}function hS(t){const e=new Set;function r(n){const i=globalThis.requestAnimationFrame(n);e.add(()=>globalThis.cancelAnimationFrame(i))}return r(()=>r(t)),function(){e.forEach(i=>i())}}function at(t){const e=globalThis.requestAnimationFrame(t);return()=>{globalThis.cancelAnimationFrame(e)}}function VB(t,e,r){const n=at(()=>{t.removeEventListener(e,i,!0),r()}),i=()=>{n(),r()};return t.addEventListener(e,i,{once:!0,capture:!0}),n}function GB(t,e){if(!t)return;const{attributes:r,callback:n}=e,i=t.ownerDocument.defaultView||window,s=new i.MutationObserver(o=>{for(const a of o)a.type==="attributes"&&a.attributeName&&r.includes(a.attributeName)&&n(a)});return s.observe(t,{attributes:!0,attributeFilter:r}),()=>s.disconnect()}function YI(t,e){const{defer:r}=e,n=r?at:s=>s(),i=[];return i.push(n(()=>{const s=typeof t=="function"?t():t;i.push(GB(s,e))})),()=>{i.forEach(s=>s?.())}}function WB(t){const e=()=>t.click();_B()?VB(t,"keyup",e):queueMicrotask(e)}function Uf(t){const e=gB(t);return oB(e)?zn(e).body:Wt(e)&&Mb(e)?e:Uf(e)}function qI(t,e=[]){const r=Uf(t),n=r===t.ownerDocument.body,i=Lt(r);return n?e.concat(i,i.visualViewport||[],Mb(r)?r:[]):e.concat(r,qI(r,[]))}var HB=/auto|scroll|overlay|hidden|clip/;function Mb(t){const e=Lt(t),{overflow:r,overflowX:n,overflowY:i,display:s}=e.getComputedStyle(t);return HB.test(r+i+n)&&!["inline","contents"].includes(s)}function XB(t){return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}function YB(t,e){const{rootEl:r,...n}=e;!t||!r||!Mb(r)||!XB(r)||t.scrollIntoView(n)}function Ov(t,e){const{left:r,top:n,width:i,height:s}=e.getBoundingClientRect(),o={x:t.x-r,y:t.y-n},a={x:lS(o.x/i),y:lS(o.y/s)};function l(c={}){const{dir:u="ltr",orientation:d="horizontal",inverted:h}=c,f=typeof h=="object"?h.x:h,p=typeof h=="object"?h.y:h;return d==="horizontal"?u==="rtl"||f?1-a.x:a.x:p?1-a.y:a.y}return{offset:o,percent:a,getPercentValue:l}}function qB(t,e){const r=t.body,n="pointerLockElement"in t||"mozPointerLockElement"in t,i=()=>!!t.pointerLockElement;function s(){}function o(l){i(),console.error("PointerLock error occurred:",l),t.exitPointerLock()}if(!n)return;try{r.requestPointerLock()}catch{}const a=[ct(t,"pointerlockchange",s,!1),ct(t,"pointerlockerror",o,!1)];return()=>{a.forEach(l=>l()),t.exitPointerLock()}}function KB(t){const{pointerNode:e,keyboardNode:r=e,onPress:n,onPressStart:i,onPressEnd:s,isValidKey:o=m=>m.key==="Enter"}=t;if(!e)return jd;const a=Lt(e),l=zn(e);let c=jd,u=jd,d=jd;const h=m=>({point:GI(m),event:m});function f(m){i?.(h(m))}function p(m){s?.(h(m))}const x=ct(e,"pointerdown",m=>{u();const C=ct(a,"pointerup",T=>{const S=Ei(T);Qo(e,S)?n?.(h(T)):s?.(h(T))},{passive:!n}),E=ct(a,"pointercancel",p,{passive:!s});u=xm(C,E),l.activeElement===r&&m.pointerType==="mouse"&&m.preventDefault(),f(m)},{passive:!i}),v=ct(r,"focus",y);c=xm(x,v);function y(){const m=T=>{if(!o(T))return;const S=I=>{if(!o(I))return;const M=new a.PointerEvent("pointerup"),k=h(M);n?.(k),s?.(k)};u(),u=ct(r,"keyup",S);const P=new a.PointerEvent("pointerdown");f(P)},_=()=>{const T=new a.PointerEvent("pointercancel");p(T)},C=ct(r,"keydown",m),E=ct(r,"blur",_);d=xm(C,E)}return()=>{c(),u(),d()}}function An(t,e){return Array.from(t?.querySelectorAll(e)??[])}function ZB(t,e){return t?.querySelector(e)??null}var Ob=t=>t.id;function KI(t,e,r=Ob){return t.find(n=>r(n)===e)}function Lb(t,e,r=Ob){const n=KI(t,e,r);return n?t.indexOf(n):-1}function Db(t,e,r=!0){let n=Lb(t,e);return n=r?(n+1)%t.length:Math.min(n+1,t.length-1),t[n]}function Fb(t,e,r=!0){let n=Lb(t,e);return n===-1?r?t[t.length-1]:null:(n=r?(n-1+t.length)%t.length:Math.max(0,n-1),t[n])}function nt(t){const e={getRootNode:r=>r.getRootNode?.()??document,getDoc:r=>zn(e.getRootNode(r)),getWin:r=>e.getDoc(r).defaultView??window,getActiveElement:r=>pB(e.getRootNode(r)),isActiveElement:(r,n)=>n===e.getActiveElement(r),getById:(r,n)=>e.getRootNode(r).getElementById(n),setValue:(r,n)=>{r==null||n==null||Pb(r,n.toString())}};return{...e,...t}}var QB=t=>t.split("").map(e=>{const r=e.charCodeAt(0);return r>0&&r<128?e:r>=128&&r<=255?`/x${r.toString(16)}`.replace("/","\\"):""}).join("").trim(),JB=t=>QB(t.dataset?.valuetext??t.textContent??""),e3=(t,e)=>t.trim().toLowerCase().startsWith(e.toLowerCase());function t3(t,e,r,n=Ob){const i=r?Lb(t,r,n):-1;let s=r?tB(t,i):t;return e.length===1&&(s=s.filter(a=>n(a)!==r)),s.find(a=>e3(JB(a),e))}var _m=new WeakMap;function r3(t,e,r){_m.has(t)||_m.set(t,new Map);const n=_m.get(t),i=n.get(e);if(!i)return n.set(e,r()),()=>{n.get(e)?.(),n.delete(e)};const s=r(),o=()=>{s(),i(),n.delete(e)};return n.set(e,o),()=>{n.get(e)===o&&(s(),n.set(e,i))}}function n3(t,e){return t?r3(t,"style",()=>{const n=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=n}}):()=>{}}function i3(t,e){const{state:r,activeId:n,key:i,timeout:s=350,itemToId:o}=e,a=r.keysSoFar+i,c=a.length>1&&Array.from(a).every(p=>p===a[0])?a[0]:a;let u=t.slice();const d=t3(u,c,n,o);function h(){clearTimeout(r.timer),r.timer=-1}function f(p){r.keysSoFar=p,h(),p!==""&&(r.timer=+setTimeout(()=>{f(""),h()},s))}return f(a),d}var zf=Object.assign(i3,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:s3});function s3(t){return t.key.length===1&&!t.ctrlKey&&!t.metaKey}var ZI={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"},o3=1e3/60;function a3(t,e){const r=t();if(Wt(r)&&r.isConnected)return e(r),()=>{};{const n=setInterval(()=>{const i=t();Wt(i)&&i.isConnected&&(e(i),clearInterval(n))},o3);return()=>clearInterval(n)}}function l3(t,e){const r=[];return t?.forEach(n=>{const i=a3(n,e);r.push(i)}),()=>{r.forEach(n=>n())}}function c3(t,e){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function hr(t={}){const{name:e,strict:r=!0,hookName:n="useContext",providerName:i="Provider",errorMessage:s,defaultValue:o}=t,a=w.createContext(o);a.displayName=e;function l(){const c=w.useContext(a);if(!c&&r){const u=new Error(s??c3(n,i));throw u.name="ContextError",Error.captureStackTrace?.(u,l),u}return c}return[a.Provider,l,a]}const[tte,cd]=hr({name:"LocaleContext",hookName:"useLocaleContext",providerName:"<LocaleProvider />",strict:!1,defaultValue:{dir:"ltr",locale:"en-US"}});function u3(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function ud(...t){return e=>{for(const r of t)u3(r,e)}}const d3=Symbol(),Nb=Symbol(),jc="a",QI="f",fS="p",JI="c",eA="t",tA="h",Hh="w",rA="o",nA="k";let h3=(t,e)=>new Proxy(t,e);const Lv=Object.getPrototypeOf,Dv=new WeakMap,iA=t=>t&&(Dv.has(t)?Dv.get(t):Lv(t)===Object.prototype||Lv(t)===Array.prototype),pS=t=>typeof t=="object"&&t!==null,f3=t=>Object.values(Object.getOwnPropertyDescriptors(t)).some(e=>!e.configurable&&!e.writable),p3=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(r=>{r.configurable=!0}),Object.create(Lv(t),e)},g3=(t,e)=>{const r={[QI]:e};let n=!1;const i=(a,l)=>{if(!n){let c=r[jc].get(t);if(c||(c={},r[jc].set(t,c)),a===Hh)c[Hh]=!0;else{let u=c[a];u||(u=new Set,c[a]=u),u.add(l)}}},s=()=>{n=!0,r[jc].delete(t)},o={get(a,l){return l===Nb?t:(i(nA,l),oA(Reflect.get(a,l),r[jc],r[JI],r[eA]))},has(a,l){return l===d3?(s(),!0):(i(tA,l),Reflect.has(a,l))},getOwnPropertyDescriptor(a,l){return i(rA,l),Reflect.getOwnPropertyDescriptor(a,l)},ownKeys(a){return i(Hh),Reflect.ownKeys(a)}};return e&&(o.set=o.deleteProperty=()=>!1),[o,r]},sA=t=>t[Nb]||t,oA=(t,e,r,n)=>{if(!iA(t))return t;let i=n&&n.get(t);if(!i){const l=sA(t);f3(l)?i=[l,p3(l)]:i=[l],n?.set(t,i)}const[s,o]=i;let a=r&&r.get(s);return(!a||a[1][QI]!==!!o)&&(a=g3(s,!!o),a[1][fS]=h3(o||s,a[0]),r&&r.set(s,a)),a[1][jc]=e,a[1][JI]=r,a[1][eA]=n,a[1][fS]},m3=(t,e)=>{const r=Reflect.ownKeys(t),n=Reflect.ownKeys(e);return r.length!==n.length||r.some((i,s)=>i!==n[s])},aA=(t,e,r,n,i=Object.is)=>{if(i(t,e))return!1;if(!pS(t)||!pS(e))return!0;const s=r.get(sA(t));if(!s)return!0;if(n){if(n.get(t)===e)return!1;n.set(t,e)}let o=null;for(const a of s[tA]||[])if(o=Reflect.has(t,a)!==Reflect.has(e,a),o)return o;if(s[Hh]===!0){if(o=m3(t,e),o)return o}else for(const a of s[rA]||[]){const l=!!Reflect.getOwnPropertyDescriptor(t,a),c=!!Reflect.getOwnPropertyDescriptor(e,a);if(o=l!==c,o)return o}for(const a of s[nA]||[])if(o=aA(t[a],e[a],r,n,i),o)return o;if(o===null)throw new Error("invalid used");return o},y3=t=>iA(t)&&t[Nb]||null,gS=(t,e=!0)=>{Dv.set(t,e)};function v3(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis}function Bb(t,e){const r=v3();return r?(r[t]||(r[t]=e()),r[t]):e()}var cu=Bb("__zag__refSet",()=>new WeakSet),x3=t=>typeof t=="object"&&t!==null&&"$$typeof"in t&&"props"in t,b3=t=>typeof t=="object"&&t!==null&&"__v_isVNode"in t,_3=t=>typeof t=="object"&&t!==null&&"nodeType"in t&&typeof t.nodeName=="string",w3=t=>x3(t)||b3(t)||_3(t),Fv=t=>t!==null&&typeof t=="object",Nv=t=>Fv(t)&&!cu.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!w3(t)&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise);function mS(t,e,r){typeof r.value=="object"&&!Nv(r.value)&&(r.value=Uo(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||e==="__proto__"?Object.defineProperty(t,e,r):t[e]=r.value}function Uo(t){if(typeof t!="object")return t;var e=0,r,n,i,s=Object.prototype.toString.call(t);if(s==="[object Object]"?i=Object.create(Object.getPrototypeOf(t)||null):s==="[object Array]"?i=Array(t.length):s==="[object Set]"?(i=new Set,t.forEach(function(o){i.add(Uo(o))})):s==="[object Map]"?(i=new Map,t.forEach(function(o,a){i.set(Uo(a),Uo(o))})):s==="[object Date]"?i=new Date(+t):s==="[object RegExp]"?i=new RegExp(t.source,t.flags):s==="[object DataView]"?i=new t.constructor(Uo(t.buffer)):s==="[object ArrayBuffer]"?i=t.slice(0):s==="[object Blob]"?i=t.slice():s.slice(-6)==="Array]"&&(i=new t.constructor(t)),i){for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)mS(i,n[e],Object.getOwnPropertyDescriptor(t,n[e]));for(e=0,n=Object.getOwnPropertyNames(t);e<n.length;e++)Object.hasOwnProperty.call(i,r=n[e])&&i[r]===t[r]||mS(i,r,Object.getOwnPropertyDescriptor(t,r))}return i||t}var Oo=Bb("__zag__proxyStateMap",()=>new WeakMap),S3=(t=Object.is,e=(a,l)=>new Proxy(a,l),r=new WeakMap,n=(a,l)=>{const c=r.get(a);if(c?.[0]===l)return c[1];const u=Array.isArray(a)?[]:Object.create(Object.getPrototypeOf(a));return gS(u,!0),r.set(a,[l,u]),Reflect.ownKeys(a).forEach(d=>{const h=Reflect.get(a,d);cu.has(h)?(gS(h,!1),u[d]=h):Oo.has(h)?u[d]=Rs(h):u[d]=h}),Object.freeze(u)},i=new WeakMap,s=[1,1],o=a=>{if(!Fv(a))throw new Error("object required");const l=i.get(a);if(l)return l;let c=s[0];const u=new Set,d=(T,S=++s[0])=>{c!==S&&(c=S,u.forEach(P=>P(T,S)))};let h=s[1];const f=(T=++s[1])=>(h!==T&&!u.size&&(h=T,g.forEach(([S])=>{const P=S[1](T);P>c&&(c=P)})),c),p=T=>(S,P)=>{const I=[...S];I[1]=[T,...I[1]],d(I,P)},g=new Map,x=(T,S)=>{if(u.size){const P=S[3](p(T));g.set(T,[S,P])}else g.set(T,[S])},v=T=>{const S=g.get(T);S&&(g.delete(T),S[1]?.())},y=T=>(u.add(T),u.size===1&&g.forEach(([P,I],M)=>{const k=P[3](p(M));g.set(M,[P,k])}),()=>{u.delete(T),u.size===0&&g.forEach(([P,I],M)=>{I&&(I(),g.set(M,[P]))})}),m=Array.isArray(a)?[]:Object.create(Object.getPrototypeOf(a)),C=e(m,{deleteProperty(T,S){const P=Reflect.get(T,S);v(S);const I=Reflect.deleteProperty(T,S);return I&&d(["delete",[S],P]),I},set(T,S,P,I){const M=Reflect.has(T,S),k=Reflect.get(T,S,I);if(M&&(t(k,P)||i.has(P)&&t(k,i.get(P))))return!0;v(S),Fv(P)&&(P=y3(P)||P);let R=P;if(!Object.getOwnPropertyDescriptor(T,S)?.set){!Oo.has(P)&&Nv(P)&&(R=ig(P));const O=!cu.has(R)&&Oo.get(R);O&&x(S,O)}return Reflect.set(T,S,R,I),d(["set",[S],P,k]),!0}});i.set(a,C);const E=[m,f,n,y];return Oo.set(C,E),Reflect.ownKeys(a).forEach(T=>{const S=Object.getOwnPropertyDescriptor(a,T);S.get||S.set?Object.defineProperty(m,T,S):C[T]=a[T]}),C})=>[o,Oo,cu,t,e,Nv,r,n,i,s],[E3]=S3();function ig(t={}){return E3(t)}function Vu(t,e,r){const n=Oo.get(t);let i;const s=[],o=n[3];let a=!1;const c=o(u=>{if(s.push(u),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,c()}}function Rs(t){const e=Oo.get(t),[r,n,i]=e;return i(r,n())}function Ci(t){return cu.add(t),t}function C3(t,e){Object.keys(e).forEach(i=>{if(Object.getOwnPropertyDescriptor(t,i))throw new Error("object property already defined");const s=e[i],{get:o,set:a}=typeof s=="function"?{get:s}:s,l={};l.get=()=>o(Rs(n)),a&&(l.set=c=>a(n,c)),Object.defineProperty(t,i,l)});const n=ig(t);return n}var Ub=t=>t[0],zb=t=>t[t.length-1],T3=(t,e)=>t.indexOf(e)!==-1,P3=(t,...e)=>t.concat(e),I3=(t,...e)=>t.filter(r=>!e.includes(r)),A3=(t,e)=>T3(t,e)?I3(t,e):P3(t,e);function k3(t){for(;t.length>0;)t.pop();return t}var yS=t=>t?.constructor.name==="Array",R3=(t,e)=>{if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!dn(t[r],e[r]))return!1;return!0},dn=(t,e)=>{if(Object.is(t,e))return!0;if(t==null&&e!=null||t!=null&&e==null)return!1;if(typeof t?.isEqual=="function"&&typeof e?.isEqual=="function")return t.isEqual(e);if(typeof t=="function"&&typeof e=="function")return t.toString()===e.toString();if(yS(t)&&yS(e))return R3(Array.from(t),Array.from(e));if(typeof t!="object"||typeof e!="object")return!1;const r=Object.keys(e??Object.create(null)),n=r.length;for(let i=0;i<n;i++)if(!Reflect.has(t,r[i]))return!1;for(let i=0;i<n;i++){const s=r[i];if(!dn(t[s],e[s]))return!1}return!0},ml=(t,...e)=>(typeof t=="function"?t(...e):t)??void 0,Vi=t=>t,lA=()=>{},$f=(...t)=>(...e)=>{t.forEach(function(r){r?.(...e)})},Bv=(()=>{let t=0;return()=>(t++,t.toString(36))})(),jf=t=>Array.isArray(t),cA=t=>t!=null&&typeof t=="object",Vo=t=>cA(t)&&!jf(t),M3=t=>typeof t=="number"&&!Number.isNaN(t),Br=t=>typeof t=="string",zl=t=>typeof t=="function",O3=t=>t==null,uu=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),L3=t=>Object.prototype.toString.call(t),uA=Function.prototype.toString,D3=uA.call(Object),F3=t=>{if(!cA(t)||L3(t)!="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const r=uu(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&uA.call(r)==D3},{floor:N3,abs:rte,round:dA,min:B3,max:U3,pow:nte,sign:ite}=Math,z3=t=>Number.isNaN(t),ss=t=>z3(t)?0:t,$3=(t,e)=>(t%e+e)%e,j3=(t,e)=>ss(t)>=e,V3=(t,e)=>ss(t)<=e,G3=(t,e,r)=>ss(t)>=e&&ss(t)<=r,W3=(t,e,r)=>dA((ss(t)-e)/r)*r+e,Vc=(t,e,r)=>B3(U3(ss(t),e),r),H3=(t,e,r)=>(ss(t)-e)/(r-e),X3=(t,e,r,n)=>Vc(W3(t*(r-e)+e,e,n),e,r),du=(t,e)=>typeof e=="number"?N3(t*e+.5)/e:dA(t),Uv=(t,e)=>{const[r,n]=t,[i,s]=e;return o=>r===n||i===s?i:i+(s-i)/(n-r)*(o-r)},vS=t=>{if(!Number.isFinite(t))return 0;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r+=1;return r},hA=(t,e,r)=>{let n=e==="+"?t+r:t-r;if(t%1!==0||r%1!==0){const i=10**Math.max(vS(t),vS(r));t=Math.round(t*i),r=Math.round(r*i),n=e==="+"?t+r:t-r,n/=i}return n},Y3=(t,e)=>hA(ss(t),"+",e),q3=(t,e)=>hA(ss(t),"-",e);function pn(t){if(!K3(t)||t===void 0)return t;const e=Reflect.ownKeys(t).filter(n=>typeof n=="string"),r={};for(const n of e){const i=t[n];i!==void 0&&(r[n]=pn(i))}return r}var K3=t=>t&&typeof t=="object"&&t.constructor===Object;function yl(...t){t.length===1?t[0]:t[1],t.length===2&&t[0]}function Xh(...t){t.length===1?t[0]:t[1],t.length===2&&t[0]}var Z3=Object.defineProperty,Q3=(t,e,r)=>e in t?Z3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ie=(t,e,r)=>Q3(t,typeof e!="symbol"?e+"":e,r);function fA(t,...e){for(const r of e){const n=pn(r);for(const i in n)F3(r[i])?(t[i]||(t[i]={}),fA(t[i],r[i])):t[i]=r[i]}return t}function vn(t){return Br(t)?{type:t}:t}function xs(t){return t?jf(t)?t.slice():[t]:[]}function pA(t){return Vo(t)&&t.predicate!=null}var gA=()=>!0;function sg(t,e,r,n){return i=>Br(i)?!!t[i]?.(e,r,n):zl(i)?i(e,r,n):i.predicate(t)(e,r,n)}function J3(...t){return{predicate:e=>(r,n,i)=>t.map(sg(e,r,n,i)).some(Boolean)}}function e5(...t){return{predicate:e=>(r,n,i)=>t.map(sg(e,r,n,i)).every(Boolean)}}function t5(t){return{predicate:e=>(r,n,i)=>!sg(e,r,n,i)(t)}}function r5(...t){return(e,r,n)=>n.state.matches(...t)}var tc={or:J3,and:e5,not:t5,stateIn:r5};function n5(t){return{predicate:e=>(r,n,i)=>t.find(s=>{const o=s.guard??gA;return sg(e,r,n,i)(o)})?.actions}}function mA(t,e){return t=t??gA,(r,n,i)=>{if(Br(t)){const s=e[t];return zl(s)?s(r,n,i):s}return pA(t)?t.predicate(e)(r,n,i):t?.(r,n,i)}}function wm(t,e){return(r,n,i)=>pA(t)?t.predicate(e)(r,n,i):t}function i5(t){const e=t.computed??Vi({}),r=t.context??Vi({}),n=t.initial?t.states?.[t.initial]?.tags:[],i=ig({value:t.initial??"",previousValue:"",event:Vi({}),previousEvent:Vi({}),context:C3(r,e),done:!1,tags:n??[],hasTag(s){return this.tags.includes(s)},matches(...s){return s.includes(this.value)},can(s){return Vi(this).nextEvents.includes(s)},get nextEvents(){const s=t.states?.[this.value]?.on??{},o=t?.on??{};return Object.keys({...s,...o})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return Vi(i)}function Ec(t,e){return(r,n)=>{if(M3(t))return t;if(zl(t))return t(r,n);if(Br(t)){const i=Number.parseFloat(t);if(!Number.isNaN(i))return i;if(e){const s=e?.[t];return Xh(s==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${t}\`. It doesn't exist in \`options.delays\``),zl(s)?s(r,n):s}}}}function s5(t){return Br(t)?{target:t}:t}function o5(t,e){return(r,n,i)=>xs(t).map(s5).find(s=>mA(s.guard,e)(r,n,i)??s.target??s.actions)}var yA=class{constructor(t,e){ie(this,"status","Not Started"),ie(this,"state"),ie(this,"initialState"),ie(this,"initialContext"),ie(this,"id"),ie(this,"type","machine"),ie(this,"activityEvents",new Map),ie(this,"delayedEvents",new Map),ie(this,"stateListeners",new Set),ie(this,"doneListeners",new Set),ie(this,"contextWatchers",new Set),ie(this,"removeStateListener",lA),ie(this,"parent"),ie(this,"children",new Map),ie(this,"guardMap"),ie(this,"actionMap"),ie(this,"delayMap"),ie(this,"activityMap"),ie(this,"sync"),ie(this,"options"),ie(this,"config"),ie(this,"_created",()=>{if(!this.config.created)return;const r=vn("machine.created");this.executeActions(this.config.created,r)}),ie(this,"start",r=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=Vu(this.state,()=>{this.stateListeners.forEach(l=>{l(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(vn("machine.start"),xs(this.config.activities),"machine.start"),this.executeActions(this.config.entry,vn("machine.start"));const n=vn("machine.init"),i=Vo(r)?r.value:r,s=Vo(r)?r.context:void 0;s&&this.setContext(s);const o={target:i??this.config.initial},a=this.getNextStateInfo(o,n);return this.initialState=a,this.performStateChangeEffects(this.state.value,a,n),this}),ie(this,"setupContextWatchers",()=>{const{watch:r}=this.config;if(!r)return;let n=Rs(this.state.context);const i=Vu(this.state.context,()=>{const s=Rs(this.state.context);for(const[o,a]of Object.entries(r))(this.options.compareFns?.[o]??Object.is)(n[o],s[o])||this.executeActions(a,this.state.event);n=s});this.contextWatchers.add(i)}),ie(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,vn("machine.stop")),this.executeActions(this.config.exit,vn("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),ie(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),ie(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(r=>r()),this.contextWatchers.clear()}),ie(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(r=>{r.forEach(n=>n())}),this.delayedEvents.clear()}),ie(this,"stopActivities",r=>{r?(this.activityEvents.get(r)?.forEach(n=>n()),this.activityEvents.get(r)?.clear(),this.activityEvents.delete(r)):(this.activityEvents.forEach(n=>{n.forEach(i=>i()),n.clear()}),this.activityEvents.clear())}),ie(this,"sendChild",(r,n)=>{const i=vn(r),s=ml(n,this.contextSnapshot),o=this.children.get(s);o||Xh(`[@zag-js/core] Cannot send '${i.type}' event to unknown child`),o.send(i)}),ie(this,"stopChild",r=>{this.children.has(r)||Xh(`[@zag-js/core > stop-child] Cannot stop unknown child ${r}`),this.children.get(r).stop(),this.children.delete(r)}),ie(this,"removeChild",r=>{this.children.delete(r)}),ie(this,"stopChildren",()=>{this.children.forEach(r=>r.stop()),this.children.clear()}),ie(this,"setParent",r=>{this.parent=r}),ie(this,"spawn",(r,n)=>{const i=ml(r);return n&&(i.id=n),i.type="machine.actor",i.setParent(this),this.children.set(i.id,Vi(i)),i.onDone(()=>{this.removeChild(i.id)}).start(),Vi(Ci(i))}),ie(this,"stopActivity",r=>{if(!this.state.value)return;const n=this.activityEvents.get(this.state.value);n?.get(r)?.(),n?.delete(r)}),ie(this,"addActivityCleanup",(r,n,i)=>{r&&(this.activityEvents.has(r)?this.activityEvents.get(r)?.set(n,i):this.activityEvents.set(r,new Map([[n,i]])))}),ie(this,"setState",r=>{this.state.previousValue=this.state.value,this.state.value=r;const n=this.getStateNode(r);r==null?k3(this.state.tags):this.state.tags=xs(n?.tags)}),ie(this,"setContext",r=>{r&&fA(this.state.context,pn(r))}),ie(this,"setOptions",r=>{const n=pn(r);this.actionMap={...this.actionMap,...n.actions},this.delayMap={...this.delayMap,...n.delays},this.activityMap={...this.activityMap,...n.activities},this.guardMap={...this.guardMap,...n.guards}}),ie(this,"getStateNode",r=>{if(r)return this.config.states?.[r]}),ie(this,"getNextStateInfo",(r,n)=>{const i=this.determineTransition(r,n),s=!i?.target,o=i?.target??this.state.value,a=this.state.value!==o,l=this.getStateNode(o),u={reenter:!s&&!a&&!i?.internal,transition:i,stateNode:l,target:o,changed:a};return this.log("NextState:",`[${n.type}]`,this.state.value,"---->",u.target),u}),ie(this,"getAfterActions",(r,n)=>{let i;const s=this.state.value;return{entry:()=>{i=globalThis.setTimeout(()=>{const o=this.getNextStateInfo(r,this.state.event);this.performStateChangeEffects(s,o,this.state.event)},n)},exit:()=>{globalThis.clearTimeout(i)}}}),ie(this,"getDelayedEventActions",r=>{const n=this.getStateNode(r),i=this.state.event;if(!n||!n.after)return;const s=[],o=[];if(jf(n.after)){const a=this.determineTransition(n.after,i);if(!a)return;if(!uu(a,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(a)}`);const c=Ec(a.delay,this.delayMap)(this.contextSnapshot,i),u=this.getAfterActions(a,c);return s.push(u.entry),o.push(u.exit),{entries:s,exits:o}}if(Vo(n.after))for(const a in n.after){const l=n.after[a],u=Ec(a,this.delayMap)(this.contextSnapshot,i),d=this.getAfterActions(l,u);s.push(d.entry),o.push(d.exit)}return{entries:s,exits:o}}),ie(this,"executeActions",(r,n)=>{const i=wm(r,this.guardMap)(this.contextSnapshot,n,this.guardMeta);for(const s of xs(i)){const o=Br(s)?this.actionMap?.[s]:s;yl(Br(s)&&!o,`[@zag-js/core > execute-actions] No implementation found for action: \`${s}\``),o?.(this.state.context,n,this.meta)}}),ie(this,"executeActivities",(r,n,i)=>{for(const s of n){const o=Br(s)?this.activityMap?.[s]:s;if(!o){yl(`[@zag-js/core > execute-activity] No implementation found for activity: \`${s}\``);continue}const a=o(this.state.context,r,this.meta);if(a){const l=Br(s)?s:s.name||Bv();this.addActivityCleanup(i??this.state.value,l,a)}}}),ie(this,"createEveryActivities",(r,n)=>{if(r)if(jf(r)){const i=xs(r).find(l=>{const c=l.delay,d=Ec(c,this.delayMap)(this.contextSnapshot,this.state.event);return mA(l.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??d!=null});if(!i)return;const o=Ec(i.delay,this.delayMap)(this.contextSnapshot,this.state.event);n(()=>{const l=globalThis.setInterval(()=>{this.executeActions(i.actions,this.state.event)},o);return()=>{globalThis.clearInterval(l)}})}else for(const i in r){const s=r?.[i],a=Ec(i,this.delayMap)(this.contextSnapshot,this.state.event);n(()=>{const c=globalThis.setInterval(()=>{this.executeActions(s,this.state.event)},a);return()=>{globalThis.clearInterval(c)}})}}),ie(this,"setEvent",r=>{this.state.previousEvent=this.state.event,this.state.event=Ci(vn(r))}),ie(this,"performExitEffects",(r,n)=>{const i=this.state.value;if(i==="")return;const s=r?this.getStateNode(r):void 0;this.stopActivities(i);const o=wm(s?.exit,this.guardMap)(this.contextSnapshot,n,this.guardMeta),a=xs(o),l=this.delayedEvents.get(i);l&&a.push(...l),this.executeActions(a,n),this.delayedEvents.delete(i)}),ie(this,"performEntryEffects",(r,n)=>{const i=this.getStateNode(r),s=xs(i?.activities);this.createEveryActivities(i?.every,c=>{s.unshift(c)}),s.length>0&&this.executeActivities(n,s);const o=wm(i?.entry,this.guardMap)(this.contextSnapshot,n,this.guardMeta),a=xs(o),l=this.getDelayedEventActions(r);i?.after&&l&&(this.delayedEvents.set(r,l?.exits),a.push(...l.entries)),this.executeActions(a,n),i?.type==="final"&&(this.state.done=!0,this.doneListeners.forEach(c=>{c(this.stateSnapshot)}),this.stop())}),ie(this,"performTransitionEffects",(r,n)=>{const i=this.determineTransition(r,n);this.executeActions(i?.actions,n)}),ie(this,"performStateChangeEffects",(r,n,i)=>{this.setEvent(i);const s=n.changed||n.reenter;s&&this.performExitEffects(r,i),this.performTransitionEffects(n.transition,i),this.setState(n.target),s&&this.performEntryEffects(n.target,i)}),ie(this,"determineTransition",(r,n)=>o5(r,this.guardMap)?.(this.contextSnapshot,n,this.guardMeta)),ie(this,"sendParent",r=>{this.parent||Xh("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const n=vn(r);this.parent?.send(n)}),ie(this,"log",(...r)=>{}),ie(this,"send",r=>{const n=vn(r);this.transition(this.state.value,n)}),ie(this,"transition",(r,n)=>{const i=Br(r)?this.getStateNode(r):r?.stateNode,s=vn(n);if(!i&&!this.config.on){const l=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${r}, \`event\`: ${s.type}`;yl(l);return}const o=i?.on?.[s.type]??this.config.on?.[s.type],a=this.getNextStateInfo(o,s);return this.performStateChangeEffects(this.state.value,a,s),a.stateNode}),ie(this,"subscribe",r=>(this.stateListeners.add(r),this.status==="Running"&&r(this.stateSnapshot),()=>{this.stateListeners.delete(r)})),ie(this,"onDone",r=>(this.doneListeners.add(r),this)),ie(this,"onTransition",r=>(this.stateListeners.add(r),this.status==="Running"&&r(this.stateSnapshot),this)),this.config=Uo(t),this.options=Uo(e??{}),this.id=this.config.id??`machine-${Bv()}`,this.guardMap=this.options?.guards??{},this.actionMap=this.options?.actions??{},this.delayMap=this.options?.delays??{},this.activityMap=this.options?.activities??{},this.sync=this.options?.sync??!1,this.state=i5(this.config),this.initialContext=Rs(this.state.context)}get stateSnapshot(){return Vi(Rs(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const t=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return t.stateSnapshot},get initialContext(){return t.initialContext},get initialState(){return t.initialState?.target??""}}}get meta(){return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:this.initialState?.target??"",getState:()=>this.stateSnapshot,getAction:t=>this.actionMap[t],getGuard:t=>this.guardMap[t]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}getHydrationState(){const t=this.getState();return{value:t.value,tags:t.tags}}},to=(t,e)=>new yA(t,e),a5=t=>t instanceof yA||t?.type==="machine",l5=(...t)=>t.map(e=>e?.trim?.()).filter(Boolean).join(" "),c5=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,xS=t=>{const e={};let r;for(;r=c5.exec(t);)e[r[1]]=r[2];return e},u5=(t,e)=>{if(Br(t)){if(Br(e))return`${t};${e}`;t=xS(t)}else Br(e)&&(e=xS(e));return Object.assign({},t??{},e??{})};function ae(...t){let e={};for(let r of t){for(let n in e){if(n.startsWith("on")&&typeof e[n]=="function"&&typeof r[n]=="function"){e[n]=$f(r[n],e[n]);continue}if(n==="className"||n==="class"){e[n]=l5(e[n],r[n]);continue}if(n==="style"){e[n]=u5(e[n],r[n]);continue}e[n]=r[n]!==void 0?r[n]:e[n]}for(let n in r)e[n]===void 0&&(e[n]=r[n])}return e}function d5(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const Sm=t=>{const e=w.memo(w.forwardRef((r,n)=>{const{asChild:i,children:s,...o}=r;if(!i)return w.createElement(t,{...o,ref:n},s);const a=w.Children.only(s);if(!w.isValidElement(a))return null;const l=d5(a);return w.cloneElement(a,{...ae(o,a.props),ref:n?ud(n,l):l})}));return e.displayName=t.displayName||t.name,e},h5=()=>{const t=new Map;return new Proxy(Sm,{apply(e,r,n){return Sm(n[0])},get(e,r){const n=r;return t.has(n)||t.set(n,Sm(n)),t.get(n)}})},pe=h5(),fr=()=>(t,e)=>e.reduce((r,n)=>{const[i,s]=r,o=n;return s[o]!==void 0&&(i[o]=s[o]),delete s[o],[i,s]},[{},{...t}]),og=t=>fr()(t,["immediate","lazyMount","onExitComplete","present","unmountOnExit"]);function f5(t){return new Proxy({},{get(){return t}})}var Ae=()=>t=>Array.from(new Set(t));function p5(t,e,r){const n=t.matches("mounted","unmountSuspended");return{skip:!t.context.initial&&n,present:n,setNode(i){i&&e({type:"NODE.SET",node:i})},unmount(){e({type:"UNMOUNT"})}}}function g5(t){return to({initial:t.present?"mounted":"unmounted",context:{node:null,styles:null,unmountAnimationName:null,prevAnimationName:null,present:!1,initial:!1,...t},exit:["clearInitial","cleanupNode"],watch:{present:["setInitial","syncPresence"]},on:{"NODE.SET":{actions:["setNode","setStyles"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]},"UNMOUNT.SUSPEND":"unmountSuspended"}},unmountSuspended:{activities:["trackAnimationEvents"],after:{ANIMATION_DURATION:{target:"unmounted",actions:["invokeOnExitComplete"]}},on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]}}},unmounted:{entry:["clearPrevAnimationName"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}}},{delays:{ANIMATION_DURATION(e){return bS(e.styles?.animationDuration)+bS(e.styles?.animationDelay)+m5}},actions:{setInitial(e){e.initial=!0},clearInitial(e){e.initial=!1},cleanupNode(e){e.node=null,e.styles=null},invokeOnExitComplete(e){e.onExitComplete?.()},setNode(e,r){e.node=Ci(r.node)},setStyles(e,r){const n=r.node.ownerDocument.defaultView||window;e.styles=Ci(n.getComputedStyle(r.node))},syncPresence(e,r,{send:n}){if(e.present){n({type:"MOUNT",src:"presence.changed"});return}if(!e.present&&e.node?.ownerDocument.visibilityState==="hidden"){n({type:"UNMOUNT",src:"visibilitychange"});return}const i=Vd(e.styles);(e.immediate?queueMicrotask:requestAnimationFrame)(()=>{e.unmountAnimationName=i,i==="none"||i===e.prevAnimationName||e.styles?.display==="none"||e.styles?.animationDuration==="0s"?n({type:"UNMOUNT",src:"presence.changed"}):n({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName(e){(e.immediate?queueMicrotask:requestAnimationFrame)(()=>{e.prevAnimationName=Vd(e.styles)})},clearPrevAnimationName(e){e.prevAnimationName=null}},activities:{trackAnimationEvents(e,r,{send:n}){const i=e.node;if(!i)return;const s=a=>{(a.composedPath?.()?.[0]??a.target)===i&&(e.prevAnimationName=Vd(e.styles))},o=a=>{const l=Vd(e.styles);(a.composedPath?.()?.[0]??a.target)===i&&l===e.unmountAnimationName&&n({type:"UNMOUNT",src:"animationend"})};return i.addEventListener("animationstart",s),i.addEventListener("animationcancel",o),i.addEventListener("animationend",o),()=>{i.removeEventListener("animationstart",s),i.removeEventListener("animationcancel",o),i.removeEventListener("animationend",o)}}}})}function Vd(t){return t?.animationName||"none"}function bS(t){return parseFloat(t||"0")*1e3}var m5=16.667;Ae()(["onExitComplete","present","immediate"]);var ro=f5(t=>t),_S=t=>t?.constructor.name==="Array",y5=(t,e)=>{if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!$b(t[r],e[r]))return!1;return!0},$b=(t,e)=>{if(Object.is(t,e))return!0;if(t==null&&e!=null||t!=null&&e==null)return!1;if(typeof t?.isEqual=="function"&&typeof e?.isEqual=="function")return t.isEqual(e);if(typeof t=="function"&&typeof e=="function")return t.toString()===e.toString();if(_S(t)&&_S(e))return y5(Array.from(t),Array.from(e));if(typeof t!="object"||typeof e!="object")return!1;const r=Object.keys(e??Object.create(null)),n=r.length;for(let i=0;i<n;i++)if(!Reflect.has(t,r[i]))return!1;for(let i=0;i<n;i++){const s=r[i];if(!$b(t[s],e[s]))return!1}return!0},v5=Function.prototype.toString;v5.call(Object);function vA(t){if(!x5(t)||t===void 0)return t;const e=Reflect.ownKeys(t).filter(n=>typeof n=="string"),r={};for(const n of e){const i=t[n];i!==void 0&&(r[n]=vA(i))}return r}var x5=t=>t&&typeof t=="object"&&t.constructor===Object;function b5(t,e){const r=w.useRef(!1),n=w.useRef(!1);w.useEffect(()=>{if(r.current&&n.current)return t();n.current=!0},e),w.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])}var _5=Bb("__zag__targetCache",()=>new WeakMap);function xA(t,e){const{actions:r,context:n,sync:i}=e??{},s=w.useRef(void 0),o=w.useRef(void 0),a=w.useSyncExternalStore(w.useCallback(d=>Vu(t.state,d,i),[i]),()=>{const d=Rs(t.state);try{if(s.current&&o.current&&!aA(s.current,d,o.current,new WeakMap))return s.current}catch{}return d},()=>Rs(t.state));t.setOptions({actions:r});const l=w.useMemo(()=>vA(n??{}),[n]);b5(()=>{const d=Object.entries(l),h=t.contextSnapshot??{};d.map(([g,x])=>({key:g,curr:x,prev:h[g],equal:$b(h[g],x)})).every(({equal:g})=>g)||t.setContext(l)},[l]);const c=new WeakMap;w.useEffect(()=>{s.current=a,o.current=c});const u=w.useMemo(()=>new WeakMap,[]);return oA(a,c,u,_5)}function w5(t){return[xA(t),t.send]}function S5(t){const e=w.useRef(void 0);return e.current||(e.current={v:t()}),e.current.v}var E5=typeof document<"u"?w.useLayoutEffect:w.useEffect;function C5(t,e){const{state:r,context:n}=e??{},i=S5(()=>{const o=typeof t=="function"?t():t;return n&&o.setContext(n),o._created(),o}),s=w.useRef(void 0);return E5(()=>{const o=r??s.current;return i.start(o),()=>{i.stop()}},[]),i}function ua(t,e){const r=C5(t,e);return[xA(r,e),r.send,r]}function On(t,e={}){const{sync:r=!1}=e,n=T5(t);return w.useCallback((...i)=>r?queueMicrotask(()=>n.current?.(...i)):n.current?.(...i),[r,n])}function T5(t){const e=w.useRef(t);return e.current=t,e}const dd=t=>{const{lazyMount:e,unmountOnExit:r,present:n,...i}=t,s=w.useRef(!1),o={...i,present:n,onExitComplete:On(t.onExitComplete)},[a,l]=ua(g5(o),{context:o}),c=p5(a,l);c.present&&(s.current=!0);const u=!c.present&&!s.current&&e||r&&!c.present&&s.current,d=()=>({"data-state":n?"open":"closed",hidden:!c.present});return{ref:c.setNode,getPresenceProps:d,present:c.present,unmounted:u}},[hd,ag]=hr({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"}),P5=(t,e)=>{if(!t||typeof t!="string")return{invalid:!0,value:t};const[r,n]=t.split("/");if(!r||!n||r==="currentBg")return{invalid:!0,value:r};const i=e(`colors.${r}`),s=e.raw(`opacity.${n}`)?.value;if(!s&&isNaN(Number(n)))return{invalid:!0,value:r};const o=s?Number(s)*100+"%":`${n}%`,a=i??r;return{invalid:!1,color:a,value:`color-mix(in srgb, ${a} ${o}, transparent)`}},je=t=>(e,r)=>{const n=r.utils.colorMix(e);if(n.invalid)return{[t]:e};const i="--mix-"+t;return{[i]:n.value,[t]:`var(${i}, ${n.color})`}};function zv(t){if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(r=>zv(r));const e=Object.create(Object.getPrototypeOf(t));for(const r of Object.keys(t))e[r]=zv(t[r]);return e}function $v(t,e){if(e==null)return t;for(const r of Object.keys(e))if(!(e[r]===void 0||r==="__proto__"))if(!wr(t[r])&&wr(e[r]))Object.assign(t,{[r]:e[r]});else if(t[r]&&wr(e[r]))$v(t[r],e[r]);else if(Array.isArray(e[r])&&Array.isArray(t[r])){let n=0;for(;n<e[r].length;n++)wr(t[r][n])&&wr(e[r][n])?$v(t[r][n],e[r][n]):t[r][n]=e[r][n]}else Object.assign(t,{[r]:e[r]});return t}function rc(t,...e){for(const r of e)$v(t,r);return t}const I5=t=>t,Et=t=>t,ve=t=>t,A5=t=>t,k5=t=>t,bA=t=>t,R5=t=>t,M5=t=>t,O5=t=>t;function _A(){const t=e=>e;return new Proxy(t,{get(){return t}})}const vt=_A(),jb=_A(),wA=t=>t,SA=(...t)=>rc({},...t.map(zv)),L5=/[^a-zA-Z0-9_\u0081-\uffff-]/g;function D5(t){return`${t}`.replace(L5,e=>`\\${e}`)}const F5=/[A-Z]/g;function N5(t){return t.replace(F5,e=>`-${e.toLowerCase()}`)}function EA(t,e={}){const{fallback:r="",prefix:n=""}=e,i=N5(["-",n,D5(t)].filter(Boolean).join("-"));return{var:i,ref:`var(${i}${r?`, ${r}`:""})`}}const B5=t=>/^var\(--.+\)$/.test(t),Ct=(t,e)=>e!=null?`${t}(${e})`:e,uo=t=>{if(B5(t)||t==null)return t;const e=typeof t=="string"&&!t.endsWith("deg");return typeof t=="number"||e?`${t}deg`:t},wS=t=>({values:["outside","inside","mixed","none"],transform(e,{token:r}){const n=r("colors.colorPalette.focusRing");return{inside:{"--focus-ring-color":n,[t]:{outlineOffset:"0px",outlineWidth:"var(--focus-ring-width, 1px)",outlineColor:"var(--focus-ring-color)",outlineStyle:"var(--focus-ring-style, solid)",borderColor:"var(--focus-ring-color)"}},outside:{"--focus-ring-color":n,[t]:{outlineWidth:"var(--focus-ring-width, 2px)",outlineOffset:"var(--focus-ring-offset, 2px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"var(--focus-ring-color)"}},mixed:{"--focus-ring-color":n,[t]:{outlineWidth:"var(--focus-ring-width, 3px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"color-mix(in srgb, var(--focus-ring-color), transparent 60%)",borderColor:"var(--focus-ring-color)"}},none:{"--focus-ring-color":n,[t]:{outline:"none"}}}[e]??{}}}),U5=je("borderColor"),Li=t=>({transition:t,transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"}),z5=I5({hover:["@media (hover: hover)","&:is(:hover, [data-hover]):not(:disabled, [data-disabled])"],active:"&:is(:active, [data-active]):not(:disabled, [data-disabled], [data-state=open])",focus:"&:is(:focus, [data-focus])",focusWithin:"&:is(:focus-within, [data-focus-within])",focusVisible:"&:is(:focus-visible, [data-focus-visible])",disabled:"&:is(:disabled, [disabled], [data-disabled], [aria-disabled=true])",visited:"&:visited",target:"&:target",readOnly:"&:is([data-readonly], [aria-readonly=true], [readonly])",readWrite:"&:read-write",empty:"&:is(:empty, [data-empty])",checked:"&:is(:checked, [data-checked], [aria-checked=true], [data-state=checked])",enabled:"&:enabled",expanded:"&:is([aria-expanded=true], [data-expanded], [data-state=expanded])",highlighted:"&[data-highlighted]",complete:"&[data-complete]",incomplete:"&[data-incomplete]",dragging:"&[data-dragging]",before:"&::before",after:"&::after",firstLetter:"&::first-letter",firstLine:"&::first-line",marker:"&::marker",selection:"&::selection",file:"&::file-selector-button",backdrop:"&::backdrop",first:"&:first-of-type",last:"&:last-of-type",notFirst:"&:not(:first-of-type)",notLast:"&:not(:last-of-type)",only:"&:only-child",even:"&:nth-of-type(even)",odd:"&:nth-of-type(odd)",peerFocus:".peer:is(:focus, [data-focus]) ~ &",peerHover:".peer:is(:hover, [data-hover]):not(:disabled, [data-disabled]) ~ &",peerActive:".peer:is(:active, [data-active]):not(:disabled, [data-disabled]) ~ &",peerFocusWithin:".peer:focus-within ~ &",peerFocusVisible:".peer:is(:focus-visible, [data-focus-visible]) ~ &",peerDisabled:".peer:is(:disabled, [disabled], [data-disabled]) ~ &",peerChecked:".peer:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) ~ &",peerInvalid:".peer:is(:invalid, [data-invalid], [aria-invalid=true]) ~ &",peerExpanded:".peer:is([aria-expanded=true], [data-expanded], [data-state=expanded]) ~ &",peerPlaceholderShown:".peer:placeholder-shown ~ &",groupFocus:".group:is(:focus, [data-focus]) &",groupHover:".group:is(:hover, [data-hover]):not(:disabled, [data-disabled]) &",groupActive:".group:is(:active, [data-active]):not(:disabled, [data-disabled]) &",groupFocusWithin:".group:focus-within &",groupFocusVisible:".group:is(:focus-visible, [data-focus-visible]) &",groupDisabled:".group:is(:disabled, [disabled], [data-disabled]) &",groupChecked:".group:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) &",groupExpanded:".group:is([aria-expanded=true], [data-expanded], [data-state=expanded]) &",groupInvalid:".group:invalid &",indeterminate:"&:is(:indeterminate, [data-indeterminate], [aria-checked=mixed], [data-state=indeterminate])",required:"&:is([data-required], [aria-required=true])",valid:"&:is([data-valid], [data-state=valid])",invalid:"&:is([data-invalid], [aria-invalid=true], [data-state=invalid])",autofill:"&:autofill",inRange:"&:is(:in-range, [data-in-range])",outOfRange:"&:is(:out-of-range, [data-outside-range])",placeholder:"&::placeholder, &[data-placeholder]",placeholderShown:"&:is(:placeholder-shown, [data-placeholder-shown])",pressed:"&:is([aria-pressed=true], [data-pressed])",selected:"&:is([aria-selected=true], [data-selected])",grabbed:"&:is([aria-grabbed=true], [data-grabbed])",underValue:"&[data-state=under-value]",overValue:"&[data-state=over-value]",atValue:"&[data-state=at-value]",default:"&:default",optional:"&:optional",open:"&:is([open], [data-open], [data-state=open])",closed:"&:is([closed], [data-closed], [data-state=closed])",fullscreen:"&is(:fullscreen, [data-fullscreen])",loading:"&:is([data-loading], [aria-busy=true])",hidden:"&:is([hidden], [data-hidden])",current:"&[data-current]",currentPage:"&[aria-current=page]",currentStep:"&[aria-current=step]",today:"&[data-today]",unavailable:"&[data-unavailable]",rangeStart:"&[data-range-start]",rangeEnd:"&[data-range-end]",now:"&[data-now]",topmost:"&[data-topmost]",motionReduce:"@media (prefers-reduced-motion: reduce)",motionSafe:"@media (prefers-reduced-motion: no-preference)",print:"@media print",landscape:"@media (orientation: landscape)",portrait:"@media (orientation: portrait)",dark:".dark &, .dark .chakra-theme:not(.light) &",light:":root &, .light &",osDark:"@media (prefers-color-scheme: dark)",osLight:"@media (prefers-color-scheme: light)",highContrast:"@media (forced-colors: active)",lessContrast:"@media (prefers-contrast: less)",moreContrast:"@media (prefers-contrast: more)",ltr:"[dir=ltr] &",rtl:"[dir=rtl] &",scrollbar:"&::-webkit-scrollbar",scrollbarThumb:"&::-webkit-scrollbar-thumb",scrollbarTrack:"&::-webkit-scrollbar-track",horizontal:"&[data-orientation=horizontal]",vertical:"&[data-orientation=vertical]",icon:"& :where(svg)",starting:"@starting-style"}),Ja=EA("bg-currentcolor"),SS=t=>t===Ja.ref||t==="currentBg",$e=t=>({...t("colors"),currentBg:Ja}),$5=wA({conditions:z5,utilities:{background:{values:$e,shorthand:["bg"],transform(t,e){if(SS(e.raw))return{background:Ja.ref};const r=je("background")(t,e);return{...r,[Ja.var]:r?.background}}},backgroundColor:{values:$e,shorthand:["bgColor"],transform(t,e){if(SS(e.raw))return{backgroundColor:Ja.ref};const r=je("backgroundColor")(t,e);return{...r,[Ja.var]:r?.backgroundColor}}},backgroundSize:{shorthand:["bgSize"]},backgroundPosition:{shorthand:["bgPos"]},backgroundRepeat:{shorthand:["bgRepeat"]},backgroundAttachment:{shorthand:["bgAttachment"]},backgroundClip:{shorthand:["bgClip"],values:["text"],transform(t){return t==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t}}},backgroundGradient:{shorthand:["bgGradient"],values(t){return{...t("gradients"),"to-t":"linear-gradient(to top, var(--gradient))","to-tr":"linear-gradient(to top right, var(--gradient))","to-r":"linear-gradient(to right, var(--gradient))","to-br":"linear-gradient(to bottom right, var(--gradient))","to-b":"linear-gradient(to bottom, var(--gradient))","to-bl":"linear-gradient(to bottom left, var(--gradient))","to-l":"linear-gradient(to left, var(--gradient))","to-tl":"linear-gradient(to top left, var(--gradient))"}},transform(t){return{"--gradient-stops":"var(--gradient-from), var(--gradient-to)","--gradient":"var(--gradient-via-stops, var(--gradient-stops))",backgroundImage:t}}},gradientFrom:{values:$e,transform:je("--gradient-from")},gradientTo:{values:$e,transform:je("--gradient-to")},gradientVia:{values:$e,transform(t,e){return{...je("--gradient-via")(t,e),"--gradient-via-stops":"var(--gradient-from), var(--gradient-via), var(--gradient-to)"}}},backgroundImage:{values:"gradients",shorthand:["bgImg","bgImage"]},border:{values:"borders"},borderTop:{values:"borders"},borderLeft:{values:"borders"},borderBlockStart:{values:"borders"},borderRight:{values:"borders"},borderInlineEnd:{values:"borders"},borderBottom:{values:"borders"},borderBlockEnd:{values:"borders"},borderInlineStart:{values:"borders",shorthand:["borderStart"]},borderInline:{values:"borders",shorthand:["borderX"]},borderBlock:{values:"borders",shorthand:["borderY"]},borderColor:{values:$e,transform:je("borderColor")},borderTopColor:{values:$e,transform:je("borderTopColor")},borderBlockStartColor:{values:$e,transform:je("borderBlockStartColor")},borderBottomColor:{values:$e,transform:je("borderBottomColor")},borderBlockEndColor:{values:$e,transform:je("borderBlockEndColor")},borderLeftColor:{values:$e,transform:je("borderLeftColor")},borderInlineStartColor:{values:$e,shorthand:["borderStartColor"],transform:je("borderInlineStartColor")},borderRightColor:{values:$e,transform:je("borderRightColor")},borderInlineEndColor:{values:$e,shorthand:["borderEndColor"],transform:je("borderInlineEndColor")},borderStyle:{values:"borderStyles"},borderTopStyle:{values:"borderStyles"},borderBlockStartStyle:{values:"borderStyles"},borderBottomStyle:{values:"borderStyles"},borderBlockEndStyle:{values:"borderStyles"},borderInlineStartStyle:{values:"borderStyles",shorthand:["borderStartStyle"]},borderInlineEndStyle:{values:"borderStyles",shorthand:["borderEndStyle"]},borderLeftStyle:{values:"borderStyles"},borderRightStyle:{values:"borderStyles"},borderRadius:{values:"radii",shorthand:["rounded"]},borderTopLeftRadius:{values:"radii",shorthand:["roundedTopLeft"]},borderStartStartRadius:{values:"radii",shorthand:["roundedStartStart","borderTopStartRadius"]},borderEndStartRadius:{values:"radii",shorthand:["roundedEndStart","borderBottomStartRadius"]},borderTopRightRadius:{values:"radii",shorthand:["roundedTopRight"]},borderStartEndRadius:{values:"radii",shorthand:["roundedStartEnd","borderTopEndRadius"]},borderEndEndRadius:{values:"radii",shorthand:["roundedEndEnd","borderBottomEndRadius"]},borderBottomLeftRadius:{values:"radii",shorthand:["roundedBottomLeft"]},borderBottomRightRadius:{values:"radii",shorthand:["roundedBottomRight"]},borderInlineStartRadius:{values:"radii",property:"borderRadius",shorthand:["roundedStart","borderStartRadius"],transform:t=>({borderStartStartRadius:t,borderEndStartRadius:t})},borderInlineEndRadius:{values:"radii",property:"borderRadius",shorthand:["roundedEnd","borderEndRadius"],transform:t=>({borderStartEndRadius:t,borderEndEndRadius:t})},borderTopRadius:{values:"radii",property:"borderRadius",shorthand:["roundedTop"],transform:t=>({borderTopLeftRadius:t,borderTopRightRadius:t})},borderBottomRadius:{values:"radii",property:"borderRadius",shorthand:["roundedBottom"],transform:t=>({borderBottomLeftRadius:t,borderBottomRightRadius:t})},borderLeftRadius:{values:"radii",property:"borderRadius",shorthand:["roundedLeft"],transform:t=>({borderTopLeftRadius:t,borderBottomLeftRadius:t})},borderRightRadius:{values:"radii",property:"borderRadius",shorthand:["roundedRight"],transform:t=>({borderTopRightRadius:t,borderBottomRightRadius:t})},borderWidth:{values:"borderWidths"},borderBlockStartWidth:{values:"borderWidths"},borderTopWidth:{values:"borderWidths"},borderBottomWidth:{values:"borderWidths"},borderBlockEndWidth:{values:"borderWidths"},borderRightWidth:{values:"borderWidths"},borderInlineWidth:{values:"borderWidths",shorthand:["borderXWidth"]},borderInlineStartWidth:{values:"borderWidths",shorthand:["borderStartWidth"]},borderInlineEndWidth:{values:"borderWidths",shorthand:["borderEndWidth"]},borderLeftWidth:{values:"borderWidths"},borderBlockWidth:{values:"borderWidths",shorthand:["borderYWidth"]},color:{values:$e,transform:je("color")},fill:{values:$e,transform:je("fill")},stroke:{values:$e,transform:je("stroke")},accentColor:{values:$e,transform:je("accentColor")},divideX:{values:{type:"string"},transform(t){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderInlineStartWidth:t,borderInlineEndWidth:"0px"}}}},divideY:{values:{type:"string"},transform(t){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderTopWidth:t,borderBottomWidth:"0px"}}}},divideColor:{values:$e,transform(t,e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":U5(t,e)}}},divideStyle:{property:"borderStyle",transform(t){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderStyle:t}}}},boxShadow:{values:"shadows",shorthand:["shadow"]},boxShadowColor:{values:$e,transform:je("--shadow-color"),shorthand:["shadowColor"]},mixBlendMode:{shorthand:["blendMode"]},backgroundBlendMode:{shorthand:["bgBlendMode"]},opacity:{values:"opacity"},filter:{transform(t){return t!=="auto"?{filter:t}:{filter:"var(--blur) var(--brightness) var(--contrast) var(--grayscale) var(--hue-rotate) var(--invert) var(--saturate) var(--sepia) var(--drop-shadow)"}}},blur:{values:"blurs",transform:t=>({"--blur":Ct("blur",t)})},brightness:{transform:t=>({"--brightness":Ct("brightness",t)})},contrast:{transform:t=>({"--contrast":Ct("contrast",t)})},grayscale:{transform:t=>({"--grayscale":Ct("grayscale",t)})},hueRotate:{transform:t=>({"--hue-rotate":Ct("hue-rotate",uo(t))})},invert:{transform:t=>({"--invert":Ct("invert",t)})},saturate:{transform:t=>({"--saturate":Ct("saturate",t)})},sepia:{transform:t=>({"--sepia":Ct("sepia",t)})},dropShadow:{transform:t=>({"--drop-shadow":Ct("drop-shadow",t)})},backdropFilter:{transform(t){return t!=="auto"?{backdropFilter:t}:{backdropFilter:"var(--backdrop-blur) var(--backdrop-brightness) var(--backdrop-contrast) var(--backdrop-grayscale) var(--backdrop-hue-rotate) var(--backdrop-invert) var(--backdrop-opacity) var(--backdrop-saturate) var(--backdrop-sepia)"}}},backdropBlur:{values:"blurs",transform:t=>({"--backdrop-blur":Ct("blur",t)})},backdropBrightness:{transform:t=>({"--backdrop-brightness":Ct("brightness",t)})},backdropContrast:{transform:t=>({"--backdrop-contrast":Ct("contrast",t)})},backdropGrayscale:{transform:t=>({"--backdrop-grayscale":Ct("grayscale",t)})},backdropHueRotate:{transform:t=>({"--backdrop-hue-rotate":Ct("hue-rotate",uo(t))})},backdropInvert:{transform:t=>({"--backdrop-invert":Ct("invert",t)})},backdropOpacity:{transform:t=>({"--backdrop-opacity":Ct("opacity",t)})},backdropSaturate:{transform:t=>({"--backdrop-saturate":Ct("saturate",t)})},backdropSepia:{transform:t=>({"--backdrop-sepia":Ct("sepia",t)})},flexBasis:{values:"sizes"},gap:{values:"spacing"},rowGap:{values:"spacing",shorthand:["gapY"]},columnGap:{values:"spacing",shorthand:["gapX"]},flexDirection:{shorthand:["flexDir"]},gridGap:{values:"spacing"},gridColumnGap:{values:"spacing"},gridRowGap:{values:"spacing"},outlineColor:{values:$e,transform:je("outlineColor")},focusRing:wS("&:is(:focus, [data-focus])"),focusVisibleRing:wS("&:is(:focus-visible, [data-focus-visible])"),focusRingColor:{values:$e,transform:je("--focus-ring-color")},focusRingOffset:{values:"spacing",transform:t=>({"--focus-ring-offset":t})},focusRingWidth:{values:"borderWidths",property:"outlineWidth",transform:t=>({"--focus-ring-width":t})},focusRingStyle:{values:"borderStyles",property:"outlineStyle",transform:t=>({"--focus-ring-style":t})},aspectRatio:{values:"aspectRatios"},width:{values:"sizes",shorthand:["w"]},inlineSize:{values:"sizes"},height:{values:"sizes",shorthand:["h"]},blockSize:{values:"sizes"},boxSize:{values:"sizes",property:"width",transform:t=>({width:t,height:t})},minWidth:{values:"sizes",shorthand:["minW"]},minInlineSize:{values:"sizes"},minHeight:{values:"sizes",shorthand:["minH"]},minBlockSize:{values:"sizes"},maxWidth:{values:"sizes",shorthand:["maxW"]},maxInlineSize:{values:"sizes"},maxHeight:{values:"sizes",shorthand:["maxH"]},maxBlockSize:{values:"sizes"},hideFrom:{values:"breakpoints",transform:(t,{raw:e,token:r})=>({[r.raw(`breakpoints.${e}`)?`@breakpoint ${e}`:`@media screen and (min-width: ${t})`]:{display:"none"}})},hideBelow:{values:"breakpoints",transform(t,{raw:e,token:r}){return{[r.raw(`breakpoints.${e}`)?`@breakpoint ${e}Down`:`@media screen and (max-width: ${t})`]:{display:"none"}}}},overscrollBehavior:{shorthand:["overscroll"]},overscrollBehaviorX:{shorthand:["overscrollX"]},overscrollBehaviorY:{shorthand:["overscrollY"]},scrollbar:{values:["visible","hidden"],transform(t){switch(t){case"visible":return{msOverflowStyle:"auto",scrollbarWidth:"auto","&::-webkit-scrollbar":{display:"block"}};case"hidden":return{msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};default:return{}}}},scrollbarColor:{values:$e,transform:je("scrollbarColor")},scrollbarGutter:{values:"spacing"},scrollbarWidth:{values:"sizes"},scrollMargin:{values:"spacing"},scrollMarginTop:{values:"spacing"},scrollMarginBottom:{values:"spacing"},scrollMarginLeft:{values:"spacing"},scrollMarginRight:{values:"spacing"},scrollMarginX:{values:"spacing",transform:t=>({scrollMarginLeft:t,scrollMarginRight:t})},scrollMarginY:{values:"spacing",transform:t=>({scrollMarginTop:t,scrollMarginBottom:t})},scrollPadding:{values:"spacing"},scrollPaddingTop:{values:"spacing"},scrollPaddingBottom:{values:"spacing"},scrollPaddingLeft:{values:"spacing"},scrollPaddingRight:{values:"spacing"},scrollPaddingInline:{values:"spacing",shorthand:["scrollPaddingX"]},scrollPaddingBlock:{values:"spacing",shorthand:["scrollPaddingY"]},scrollSnapType:{values:{none:"none",x:"x var(--scroll-snap-strictness)",y:"y var(--scroll-snap-strictness)",both:"both var(--scroll-snap-strictness)"}},scrollSnapStrictness:{values:["mandatory","proximity"],transform:t=>({"--scroll-snap-strictness":t})},scrollSnapMargin:{values:"spacing"},scrollSnapMarginTop:{values:"spacing"},scrollSnapMarginBottom:{values:"spacing"},scrollSnapMarginLeft:{values:"spacing"},scrollSnapMarginRight:{values:"spacing"},listStylePosition:{shorthand:["listStylePos"]},listStyleImage:{shorthand:["listStyleImg"]},position:{shorthand:["pos"]},zIndex:{values:"zIndex"},inset:{values:"spacing"},insetInline:{values:"spacing",shorthand:["insetX"]},insetBlock:{values:"spacing",shorthand:["insetY"]},top:{values:"spacing"},insetBlockStart:{values:"spacing"},bottom:{values:"spacing"},insetBlockEnd:{values:"spacing"},left:{values:"spacing"},right:{values:"spacing"},insetInlineStart:{values:"spacing",shorthand:["insetStart"]},insetInlineEnd:{values:"spacing",shorthand:["insetEnd"]},ring:{transform(t){return{"--ring-offset-shadow":"var(--ring-inset) 0 0 0 var(--ring-offset-width) var(--ring-offset-color)","--ring-shadow":"var(--ring-inset) 0 0 0 calc(var(--ring-width) + var(--ring-offset-width)) var(--ring-color)","--ring-width":t,boxShadow:"var(--ring-offset-shadow), var(--ring-shadow), var(--shadow, 0 0 #0000)"}}},ringColor:{values:$e,transform:je("--ring-color")},ringOffset:{transform:t=>({"--ring-offset-width":t})},ringOffsetColor:{values:$e,transform:je("--ring-offset-color")},ringInset:{transform:t=>({"--ring-inset":t})},margin:{values:"spacing",shorthand:["m"]},marginTop:{values:"spacing",shorthand:["mt"]},marginBlockStart:{values:"spacing",shorthand:["mt"]},marginRight:{values:"spacing",shorthand:["mr"]},marginBottom:{values:"spacing",shorthand:["mb"]},marginBlockEnd:{values:"spacing"},marginLeft:{values:"spacing",shorthand:["ml"]},marginInlineStart:{values:"spacing",shorthand:["ms","marginStart"]},marginInlineEnd:{values:"spacing",shorthand:["me","marginEnd"]},marginInline:{values:"spacing",shorthand:["mx","marginX"]},marginBlock:{values:"spacing",shorthand:["my","marginY"]},padding:{values:"spacing",shorthand:["p"]},paddingTop:{values:"spacing",shorthand:["pt"]},paddingRight:{values:"spacing",shorthand:["pr"]},paddingBottom:{values:"spacing",shorthand:["pb"]},paddingBlockStart:{values:"spacing"},paddingBlockEnd:{values:"spacing"},paddingLeft:{values:"spacing",shorthand:["pl"]},paddingInlineStart:{values:"spacing",shorthand:["ps","paddingStart"]},paddingInlineEnd:{values:"spacing",shorthand:["pe","paddingEnd"]},paddingInline:{values:"spacing",shorthand:["px","paddingX"]},paddingBlock:{values:"spacing",shorthand:["py","paddingY"]},textDecoration:{shorthand:["textDecor"]},textDecorationColor:{values:$e,transform:je("textDecorationColor")},textShadow:{values:"shadows"},transform:{transform:t=>{let e=t;return t==="auto"&&(e="translateX(var(--translate-x, 0)) translateY(var(--translate-y, 0)) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),t==="auto-gpu"&&(e="translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),{transform:e}}},skewX:{transform:t=>({"--skew-x":uo(t)})},skewY:{transform:t=>({"--skew-y":uo(t)})},scaleX:{transform:t=>({"--scale-x":t})},scaleY:{transform:t=>({"--scale-y":t})},scale:{transform(t){return t!=="auto"?{scale:t}:{scale:"var(--scale-x, 1) var(--scale-y, 1)"}}},spaceXReverse:{values:{type:"boolean"},transform(t){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":t?"1":void 0}}}},spaceX:{property:"marginInlineStart",values:"spacing",transform:t=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":"0",marginInlineStart:`calc(${t} * calc(1 - var(--space-x-reverse)))`,marginInlineEnd:`calc(${t} * var(--space-x-reverse))`}})},spaceYReverse:{values:{type:"boolean"},transform(t){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":t?"1":void 0}}}},spaceY:{property:"marginTop",values:"spacing",transform:t=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":"0",marginTop:`calc(${t} * calc(1 - var(--space-y-reverse)))`,marginBottom:`calc(${t} * var(--space-y-reverse))`}})},rotate:{transform(t){return t!=="auto"?{rotate:uo(t)}:{rotate:"var(--rotate-x, 0) var(--rotate-y, 0) var(--rotate-z, 0)"}}},rotateX:{transform(t){return{"--rotate-x":uo(t)}}},rotateY:{transform(t){return{"--rotate-y":uo(t)}}},translate:{transform(t){return t!=="auto"?{translate:t}:{translate:"var(--translate-x) var(--translate-y)"}}},translateX:{values:"spacing",transform:t=>({"--translate-x":t})},translateY:{values:"spacing",transform:t=>({"--translate-y":t})},transition:{values:["all","common","colors","opacity","position","backgrounds","size","shadow","transform"],transform(t){switch(t){case"all":return Li("all");case"position":return Li("left, right, top, bottom, inset-inline, inset-block");case"colors":return Li("color, background-color, border-color, text-decoration-color, fill, stroke");case"opacity":return Li("opacity");case"shadow":return Li("box-shadow");case"transform":return Li("transform");case"size":return Li("width, height");case"backgrounds":return Li("background, background-color, background-image, background-position");case"common":return Li("color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter");default:return{transition:t}}}},transitionDuration:{values:"durations"},transitionProperty:{values:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, translate, transform",colors:"background-color, border-color, color, fill, stroke",size:"width, height",position:"left, right, top, bottom, inset-inline, inset-block",background:"background, background-color, background-image, background-position"}},transitionTimingFunction:{values:"easings"},animation:{values:"animations"},animationDuration:{values:"durations"},animationDelay:{values:"durations"},animationTimingFunction:{values:"easings"},fontFamily:{values:"fonts"},fontSize:{values:"fontSizes"},fontWeight:{values:"fontWeights"},lineHeight:{values:"lineHeights"},letterSpacing:{values:"letterSpacings"},textIndent:{values:"spacing"},truncate:{values:{type:"boolean"},transform(t){return t===!0?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{}}},lineClamp:{transform(t){return t==="none"?{WebkitLineClamp:"unset"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:t,WebkitBoxOrient:"vertical",textWrap:"wrap"}}},srOnly:{values:{type:"boolean"},transform(t){return j5[t]||{}}},debug:{values:{type:"boolean"},transform(t){return t?{outline:"1px solid blue !important","& > *":{outline:"1px solid red !important"}}:{}}},caretColor:{values:$e,transform:je("caretColor")},cursor:{values:"cursor"}}}),j5={true:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},false:{position:"static",width:"auto",height:"auto",padding:"0",margin:"0",overflow:"visible",clip:"auto",whiteSpace:"normal"}};var V5="",G5=V5.split(","),W5="WebkitAppearance,WebkitBorderBefore,WebkitBorderBeforeColor,WebkitBorderBeforeStyle,WebkitBorderBeforeWidth,WebkitBoxReflect,WebkitLineClamp,WebkitMask,WebkitMaskAttachment,WebkitMaskClip,WebkitMaskComposite,WebkitMaskImage,WebkitMaskOrigin,WebkitMaskPosition,WebkitMaskPositionX,WebkitMaskPositionY,WebkitMaskRepeat,WebkitMaskRepeatX,WebkitMaskRepeatY,WebkitMaskSize,WebkitOverflowScrolling,WebkitTapHighlightColor,WebkitTextFillColor,WebkitTextStroke,WebkitTextStrokeColor,WebkitTextStrokeWidth,WebkitTouchCallout,WebkitUserModify,accentColor,alignContent,alignItems,alignSelf,alignTracks,all,animation,animationComposition,animationDelay,animationDirection,animationDuration,animationFillMode,animationIterationCount,animationName,animationPlayState,animationRange,animationRangeEnd,animationRangeStart,animationTimingFunction,animationTimeline,appearance,aspectRatio,azimuth,backdropFilter,backfaceVisibility,background,backgroundAttachment,backgroundBlendMode,backgroundClip,backgroundColor,backgroundImage,backgroundOrigin,backgroundPosition,backgroundPositionX,backgroundPositionY,backgroundRepeat,backgroundSize,blockSize,border,borderBlock,borderBlockColor,borderBlockStyle,borderBlockWidth,borderBlockEnd,borderBlockEndColor,borderBlockEndStyle,borderBlockEndWidth,borderBlockStart,borderBlockStartColor,borderBlockStartStyle,borderBlockStartWidth,borderBottom,borderBottomColor,borderBottomLeftRadius,borderBottomRightRadius,borderBottomStyle,borderBottomWidth,borderCollapse,borderColor,borderEndEndRadius,borderEndStartRadius,borderImage,borderImageOutset,borderImageRepeat,borderImageSlice,borderImageSource,borderImageWidth,borderInline,borderInlineEnd,borderInlineColor,borderInlineStyle,borderInlineWidth,borderInlineEndColor,borderInlineEndStyle,borderInlineEndWidth,borderInlineStart,borderInlineStartColor,borderInlineStartStyle,borderInlineStartWidth,borderLeft,borderLeftColor,borderLeftStyle,borderLeftWidth,borderRadius,borderRight,borderRightColor,borderRightStyle,borderRightWidth,borderSpacing,borderStartEndRadius,borderStartStartRadius,borderStyle,borderTop,borderTopColor,borderTopLeftRadius,borderTopRightRadius,borderTopStyle,borderTopWidth,borderWidth,bottom,boxAlign,boxDecorationBreak,boxDirection,boxFlex,boxFlexGroup,boxLines,boxOrdinalGroup,boxOrient,boxPack,boxShadow,boxSizing,breakAfter,breakBefore,breakInside,captionSide,caret,caretColor,caretShape,clear,clip,clipPath,color,colorScheme,columnCount,columnFill,columnGap,columnRule,columnRuleColor,columnRuleStyle,columnRuleWidth,columnSpan,columnWidth,columns,contain,containIntrinsicSize,containIntrinsicBlockSize,containIntrinsicHeight,containIntrinsicInlineSize,containIntrinsicWidth,container,containerName,containerType,content,contentVisibility,counterIncrement,counterReset,counterSet,cursor,direction,display,emptyCells,filter,flex,flexBasis,flexDirection,flexFlow,flexGrow,flexShrink,flexWrap,float,font,fontFamily,fontFeatureSettings,fontKerning,fontLanguageOverride,fontOpticalSizing,fontPalette,fontVariationSettings,fontSize,fontSizeAdjust,fontSmooth,fontStretch,fontStyle,fontSynthesis,fontSynthesisPosition,fontSynthesisSmallCaps,fontSynthesisStyle,fontSynthesisWeight,fontVariant,fontVariantAlternates,fontVariantCaps,fontVariantEastAsian,fontVariantEmoji,fontVariantLigatures,fontVariantNumeric,fontVariantPosition,fontWeight,forcedColorAdjust,gap,grid,gridArea,gridAutoColumns,gridAutoFlow,gridAutoRows,gridColumn,gridColumnEnd,gridColumnGap,gridColumnStart,gridGap,gridRow,gridRowEnd,gridRowGap,gridRowStart,gridTemplate,gridTemplateAreas,gridTemplateColumns,gridTemplateRows,hangingPunctuation,height,hyphenateCharacter,hyphenateLimitChars,hyphens,imageOrientation,imageRendering,imageResolution,imeMode,initialLetter,initialLetterAlign,inlineSize,inputSecurity,inset,insetBlock,insetBlockEnd,insetBlockStart,insetInline,insetInlineEnd,insetInlineStart,isolation,justifyContent,justifyItems,justifySelf,justifyTracks,left,letterSpacing,lineBreak,lineClamp,lineHeight,lineHeightStep,listStyle,listStyleImage,listStylePosition,listStyleType,margin,marginBlock,marginBlockEnd,marginBlockStart,marginBottom,marginInline,marginInlineEnd,marginInlineStart,marginLeft,marginRight,marginTop,marginTrim,mask,maskBorder,maskBorderMode,maskBorderOutset,maskBorderRepeat,maskBorderSlice,maskBorderSource,maskBorderWidth,maskClip,maskComposite,maskImage,maskMode,maskOrigin,maskPosition,maskRepeat,maskSize,maskType,masonryAutoFlow,mathDepth,mathShift,mathStyle,maxBlockSize,maxHeight,maxInlineSize,maxLines,maxWidth,minBlockSize,minHeight,minInlineSize,minWidth,mixBlendMode,objectFit,objectPosition,offset,offsetAnchor,offsetDistance,offsetPath,offsetPosition,offsetRotate,opacity,order,orphans,outline,outlineColor,outlineOffset,outlineStyle,outlineWidth,overflow,overflowAnchor,overflowBlock,overflowClipBox,overflowClipMargin,overflowInline,overflowWrap,overflowX,overflowY,overlay,overscrollBehavior,overscrollBehaviorBlock,overscrollBehaviorInline,overscrollBehaviorX,overscrollBehaviorY,padding,paddingBlock,paddingBlockEnd,paddingBlockStart,paddingBottom,paddingInline,paddingInlineEnd,paddingInlineStart,paddingLeft,paddingRight,paddingTop,page,pageBreakAfter,pageBreakBefore,pageBreakInside,paintOrder,perspective,perspectiveOrigin,placeContent,placeItems,placeSelf,pointerEvents,position,printColorAdjust,quotes,resize,right,rotate,rowGap,rubyAlign,rubyMerge,rubyPosition,scale,scrollbarColor,scrollbarGutter,scrollbarWidth,scrollBehavior,scrollMargin,scrollMarginBlock,scrollMarginBlockStart,scrollMarginBlockEnd,scrollMarginBottom,scrollMarginInline,scrollMarginInlineStart,scrollMarginInlineEnd,scrollMarginLeft,scrollMarginRight,scrollMarginTop,scrollPadding,scrollPaddingBlock,scrollPaddingBlockStart,scrollPaddingBlockEnd,scrollPaddingBottom,scrollPaddingInline,scrollPaddingInlineStart,scrollPaddingInlineEnd,scrollPaddingLeft,scrollPaddingRight,scrollPaddingTop,scrollSnapAlign,scrollSnapCoordinate,scrollSnapDestination,scrollSnapPointsX,scrollSnapPointsY,scrollSnapStop,scrollSnapType,scrollSnapTypeX,scrollSnapTypeY,scrollTimeline,scrollTimelineAxis,scrollTimelineName,shapeImageThreshold,shapeMargin,shapeOutside,tabSize,tableLayout,textAlign,textAlignLast,textCombineUpright,textDecoration,textDecorationColor,textDecorationLine,textDecorationSkip,textDecorationSkipInk,textDecorationStyle,textDecorationThickness,textEmphasis,textEmphasisColor,textEmphasisPosition,textEmphasisStyle,textIndent,textJustify,textOrientation,textOverflow,textRendering,textShadow,textSizeAdjust,textTransform,textUnderlineOffset,textUnderlinePosition,textWrap,timelineScope,top,touchAction,transform,transformBox,transformOrigin,transformStyle,transition,transitionBehavior,transitionDelay,transitionDuration,transitionProperty,transitionTimingFunction,translate,unicodeBidi,userSelect,verticalAlign,viewTimeline,viewTimelineAxis,viewTimelineInset,viewTimelineName,viewTransitionName,visibility,whiteSpace,whiteSpaceCollapse,widows,width,willChange,wordBreak,wordSpacing,wordWrap,writingMode,zIndex,zoom,alignmentBaseline,baselineShift,clipRule,colorInterpolation,colorRendering,dominantBaseline,fill,fillOpacity,fillRule,floodColor,floodOpacity,glyphOrientationVertical,lightingColor,marker,markerEnd,markerMid,markerStart,shapeRendering,stopColor,stopOpacity,stroke,strokeDasharray,strokeDashoffset,strokeLinecap,strokeLinejoin,strokeMiterlimit,strokeOpacity,strokeWidth,textAnchor,vectorEffect",H5=W5.split(",").concat(G5),X5=new Map(H5.map(t=>[t,!0]));function Y5(t){const e=Object.create(null);return r=>(e[r]===void 0&&(e[r]=t(r)),e[r])}var q5=/&|@/,K5=Y5(t=>X5.has(t)||t.startsWith("--")||q5.test(t));const Z5=t=>t!=null;function os(t,e,r={}){const{stop:n,getKey:i}=r;function s(o,a=[]){if(wr(o)||Array.isArray(o)){const l={};for(const[c,u]of Object.entries(o)){const d=i?.(c,u)??c,h=[...a,d];if(n?.(o,h))return e(o,a);const f=s(u,h);Z5(f)&&(l[d]=f)}return l}return e(o,a)}return s(t)}function CA(t,e){return Array.isArray(t)?t.map(r=>e(r)):wr(t)?os(t,r=>e(r)):t!=null?e(t):t}function Q5(t,e){const r={};return os(t,(n,i)=>{n&&(r[i.join(".")]=n.value)},{stop:e}),r}const kn=t=>{const e=Object.create(null);function r(...n){const i=JSON.stringify(n);return e[i]===void 0&&(e[i]=t(...n)),e[i]}return r},TA=16,Vf="px",Vb="em",hu="rem";function PA(t=""){const e=new RegExp(String.raw`-?\d+(?:\.\d+|\d*)`),r=new RegExp(`${Vf}|${Vb}|${hu}`);return t.match(new RegExp(`${e.source}(${r.source})`))?.[1]}function IA(t=""){if(typeof t=="number")return`${t}px`;const e=PA(t);if(!e||e===Vf)return t;if(e===Vb||e===hu)return`${parseFloat(t)*TA}${Vf}`}function AA(t=""){const e=PA(t);if(!e||e===hu)return t;if(e===Vb)return`${parseFloat(t)}${hu}`;if(e===Vf)return`${parseFloat(t)/TA}${hu}`}const J5=t=>t.charAt(0).toUpperCase()+t.slice(1);function e4(t){const e=t4(t),r=Object.fromEntries(e);function n(h){return r[h]}function i(h){return ba(n(h))}function s(){const h=Object.keys(r),f=r4(h),p=h.flatMap(g=>{const x=n(g),v=[`${g}Down`,ba({max:Yh(x.min)})],y=[g,ba({min:x.min})],m=[`${g}Only`,i(g)];return[y,m,v]}).filter(([,g])=>g!=="").concat(f.map(([g,x])=>{const v=n(g),y=n(x);return[`${g}To${J5(x)}`,ba({min:v.min,max:Yh(y.min)})]}));return Object.fromEntries(p)}function o(){const h=s();return Object.fromEntries(Object.entries(h))}const a=o(),l=h=>a[h];function c(){return["base",...Object.keys(r)]}function u(h){return ba({min:n(h).min})}function d(h){return ba({max:Yh(n(h).min)})}return{values:Object.values(r),only:i,keys:c,conditions:a,getCondition:l,up:u,down:d}}function Yh(t){const e=parseFloat(IA(t)??"")-.04;return AA(`${e}px`)}function t4(t){return Object.entries(t).sort(([,r],[,n])=>parseInt(r,10)<parseInt(n,10)?-1:1).map(([r,n],i,s)=>{let o=null;return i<=s.length-1&&(o=s[i+1]?.[1]),o!=null&&(o=Yh(o)),[r,{name:r,min:AA(n),max:o}]})}function r4(t){const e=[];return t.forEach((r,n)=>{let i=n;i++;let s=t[i];for(;s;)e.push([r,s]),i++,s=t[i]}),e}function ba({min:t,max:e}){return t==null&&e==null?"":["@media screen",t&&`(min-width: ${t})`,e&&`(max-width: ${e})`].filter(Boolean).join(" and ")}const n4=(t,e)=>Object.fromEntries(Object.entries(t).map(([r,n])=>e(r,n))),i4=t=>{const{breakpoints:e,conditions:r={}}=t,n=n4(r,(u,d)=>[`_${u}`,d]),i=Object.assign({},n,e.conditions);function s(){return Object.keys(i)}function o(u){return s().includes(u)||/^@|&|&$/.test(u)||u.startsWith("_")}function a(u){return u.filter(d=>d!=="base").sort((d,h)=>{const f=o(d),p=o(h);return f&&!p?1:!f&&p?-1:0})}function l(u){return u.startsWith("@breakpoint")?e.getCondition(u.replace("@breakpoint ","")):u}function c(u){return Reflect.get(i,u)||u}return{keys:s,sort:a,has:o,resolve:c,breakpoints:e.keys(),expandAtRule:l}},kA=t=>({minMax:new RegExp(`(!?\\(\\s*min(-device-)?-${t})(.|
)+\\(\\s*max(-device)?-${t}`,"i"),min:new RegExp(`\\(\\s*min(-device)?-${t}`,"i"),maxMin:new RegExp(`(!?\\(\\s*max(-device)?-${t})(.|
)+\\(\\s*min(-device)?-${t}`,"i"),max:new RegExp(`\\(\\s*max(-device)?-${t}`,"i")}),s4=kA("width"),o4=kA("height"),RA=t=>({isMin:AS(t.minMax,t.maxMin,t.min),isMax:AS(t.maxMin,t.minMax,t.max)}),{isMin:jv,isMax:ES}=RA(s4),{isMin:Vv,isMax:CS}=RA(o4),TS=/print/i,PS=/^print$/i,a4=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/,l4=/(\d)/,Gc=Number.MAX_VALUE,c4={ch:8.8984375,em:16,rem:16,ex:8.296875,px:1};function IS(t){const e=a4.exec(t)||(jv(t)||Vv(t)?l4.exec(t):null);if(!e)return Gc;if(e[0]==="0")return 0;const r=parseFloat(e[1]),n=e[2];return r*(c4[n]||1)}function AS(t,e,r){return n=>t.test(n)||!e.test(n)&&r.test(n)}function u4(t,e){const r=TS.test(t),n=PS.test(t),i=TS.test(e),s=PS.test(e);return r&&i?!n&&s?1:n&&!s?-1:t.localeCompare(e):r?1:i?-1:null}const d4=kn((t,e)=>{const r=u4(t,e);if(r!==null)return r;const n=jv(t)||Vv(t),i=ES(t)||CS(t),s=jv(e)||Vv(e),o=ES(e)||CS(e);if(n&&o)return-1;if(i&&s)return 1;const a=IS(t),l=IS(e);return a===Gc&&l===Gc?t.localeCompare(e):a===Gc?1:l===Gc?-1:a!==l?a>l?i?-1:1:i?1:-1:t.localeCompare(e)});function kS(t){return t.sort(([e],[r])=>d4(e,r))}function MA(t){const e=[],r=[],n={};for(const[o,a]of Object.entries(t))o.startsWith("@media")?e.push([o,a]):o.startsWith("@container")?r.push([o,a]):wr(a)?n[o]=MA(a):n[o]=a;const i=kS(e),s=kS(r);return{...n,...Object.fromEntries(i),...Object.fromEntries(s)}}const OA=/\s*!(important)?/i,h4=t=>Si(t)?OA.test(t):!1,f4=t=>Si(t)?t.replace(OA,"").trim():t;function LA(t){const{transform:e,conditions:r,normalize:n}=t,i=m4(t);return kn((...s)=>{const o=i(...s),a=n(o),l=Object.create(null);return os(a,(c,u)=>{const d=h4(c);if(c==null)return;const[h,...f]=r.sort(u).map(r.resolve);d&&(c=f4(c));let p=e(h,c)??Object.create(null);p=os(p,g=>Si(g)&&d?`${g} !important`:g,{getKey:g=>r.expandAtRule(g)}),p4(l,f.flat(),p)}),MA(l)})}function p4(t,e,r){let n=t;for(const i of e)i&&(n[i]||(n[i]=Object.create(null)),n=n[i]);rc(n,r)}function g4(...t){return t.filter(e=>wr(e)&&Object.keys(ld(e)).length>0)}function m4(t){function e(r){const n=g4(...r);return n.length===1?n:n.map(i=>t.normalize(i))}return kn((...r)=>rc({},...e(r)))}function DA(t,e=[]){const r=Object.assign({},t);for(const n of e)n in r&&delete r[n];return r}const y4=(...t)=>{const e=t.filter(Boolean);return Array.from(new Set(e))},FA=t=>({base:{},variants:{},defaultVariants:{},compoundVariants:[],...t});function v4(t){const{css:e,conditions:r,normalize:n,layers:i}=t;function s(a={}){const{base:l,variants:c,defaultVariants:u,compoundVariants:d}=FA(a),h=LA({conditions:r,normalize:n,transform(y,m){return c[y]?.[m]}}),f=(y={})=>{const m=n({...u,...ld(y)});let _={...l};rc(_,h(m));const C=o(d,m);return i.wrap("recipes",e(_,C))},p=Object.keys(c),g=y=>{const m=DA(y,["recipe"]),[_,C]=gl(m,p);return p.includes("colorPalette")||(_.colorPalette=y.colorPalette||u.colorPalette),p.includes("orientation")&&(C.orientation=y.orientation),[_,C]},x=Object.fromEntries(Object.entries(c).map(([y,m])=>[y,Object.keys(m)]));return Object.assign(y=>e(f(y)),{className:a.className,__cva__:!0,variantMap:x,variantKeys:p,raw:f,config:a,splitVariantProps:g,merge(y){return s(x4(t)(this,y))}})}function o(a,l){let c={};return a.forEach(u=>{Object.entries(u).every(([h,f])=>h==="css"?!0:(Array.isArray(f)?f:[f]).some(g=>l[h]===g))&&(c=e(c,u.css))}),c}return s}function x4(t){const{css:e}=t;return function(n,i){const s=FA(i.config),o=y4(n.variantKeys,Object.keys(i.variants)),a=e(n.base,s.base),l=Object.fromEntries(o.map(h=>[h,e(n.config.variants[h],s.variants[h])])),c=rc(n.config.defaultVariants,s.defaultVariants),u=[...n.compoundVariants,...s.compoundVariants];return{className:Ar(n.className,i.className),base:a,variants:l,defaultVariants:c,compoundVariants:u}}}const b4={reset:"reset",base:"base",tokens:"tokens",recipes:"recipes"},RS={reset:0,base:1,tokens:2,recipes:3};function _4(t){const e=t.layers??b4,n=Object.values(e).sort((i,s)=>RS[i]-RS[s]);return{names:n,atRule:`@layer ${n.join(", ")};`,wrap(i,s){return t.disableLayers?s:{[`@layer ${e[i]}`]:s}}}}function w4(t){const{utility:e,normalize:r}=t,{hasShorthand:n,resolveShorthand:i}=e;return function(s){return os(s,r,{stop:o=>Array.isArray(o),getKey:n?i:void 0})}}function S4(t){const{preflight:e}=t;if(!e)return{};const{scope:r="",level:n="parent"}=wr(e)?e:{};let i="";r&&n==="parent"?i=`${r} `:r&&n==="element"&&(i=`&${r}`);const s={"*":{margin:"0px",padding:"0px",font:"inherit",wordWrap:"break-word",WebkitTapHighlightColor:"transparent"},"*, *::before, *::after, *::backdrop":{boxSizing:"border-box",borderWidth:"0px",borderStyle:"solid",borderColor:"var(--global-color-border, currentColor)"},hr:{height:"0px",color:"inherit",borderTopWidth:"1px"},body:{minHeight:"100dvh",position:"relative"},img:{borderStyle:"none"},"img, svg, video, canvas, audio, iframe, embed, object":{display:"block",verticalAlign:"middle"},iframe:{border:"none"},"img, video":{maxWidth:"100%",height:"auto"},"p, h1, h2, h3, h4, h5, h6":{overflowWrap:"break-word"},"ol, ul":{listStyle:"none"},"code, kbd, pre, samp":{fontSize:"1em"},"button, [type='button'], [type='reset'], [type='submit']":{WebkitAppearance:"button",backgroundColor:"transparent",backgroundImage:"none"},"button, input, optgroup, select, textarea":{color:"inherit"},"button, select":{textTransform:"none"},table:{textIndent:"0px",borderColor:"inherit",borderCollapse:"collapse"},"*::placeholder":{opacity:"unset",color:"#9ca3af",userSelect:"none"},textarea:{resize:"vertical"},summary:{display:"list-item"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sub:{bottom:"-0.25em"},sup:{top:"-0.5em"},dialog:{padding:"0px"},a:{color:"inherit",textDecoration:"inherit"},"abbr:where([title])":{textDecoration:"underline dotted"},"b, strong":{fontWeight:"bolder"},"code, kbd, samp, pre":{fontSize:"1em","--font-mono-fallback":"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New'",fontFamily:"var(--global-font-mono, var(--font-mono-fallback))"},'input[type="text"], input[type="email"], input[type="search"], input[type="password"]':{WebkitAppearance:"none",MozAppearance:"none"},"input[type='search']":{WebkitAppearance:"textfield",outlineOffset:"-2px"},"::-webkit-search-decoration, ::-webkit-search-cancel-button":{WebkitAppearance:"none"},"::-webkit-file-upload-button":{WebkitAppearance:"button",font:"inherit"},'input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button':{height:"auto"},"input[type='number']":{MozAppearance:"textfield"},":-moz-ui-invalid":{boxShadow:"none"},":-moz-focusring":{outline:"auto"},"[hidden]:where(:not([hidden='until-found']))":{display:"none !important"}},o={[r||"html"]:{lineHeight:1.5,"--font-fallback":"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",WebkitTextSizeAdjust:"100%",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",touchAction:"manipulation",MozTabSize:"4",tabSize:"4",fontFamily:"var(--global-font-body, var(--font-fallback))"}};if(n==="element"){const a=Object.entries(s).reduce((l,[c,u])=>(l[c]={[i]:u},l),{});Object.assign(o,a)}else i?o[i]=s:Object.assign(o,s);return o}function E4(t){const{conditions:e,isValidProperty:r}=t;return function(i){return os(i,s=>s,{getKey:(s,o)=>wr(o)&&!e.has(s)&&!r(s)?C4(s).map(a=>"&"+a).join(", "):s})}}function C4(t){const e=[];let r=0,n="",i=!1;for(let s=0;s<t.length;s++){const o=t[s];if(o==="\\"&&!i){i=!0,n+=o;continue}if(i){i=!1,n+=o;continue}o==="("?r++:o===")"&&r--,o===","&&r===0?(e.push(n.trim()),n=""):n+=o}return n&&e.push(n.trim()),e}const T4=(t={})=>{const e=i=>({base:t.base?.[i]??{},variants:{},defaultVariants:t.defaultVariants??{},compoundVariants:t.compoundVariants?P4(t.compoundVariants,i):[]}),n=(t.slots??[]).map(i=>[i,e(i)]);for(const[i,s]of Object.entries(t.variants??{}))for(const[o,a]of Object.entries(s))n.forEach(([l,c])=>{var u;(u=c.variants)[i]??(u[i]={}),c.variants[i][o]=a[l]??{}});return Object.fromEntries(n)},P4=(t,e)=>t.filter(r=>r.css[e]).map(r=>({...r,css:r.css[e]}));function I4(t){const{cva:e}=t;return function(n={}){const i=Object.entries(T4(n)).map(([d,h])=>[d,e(h)]);function s(d){const h=i.map(([f,p])=>[f,p(d)]);return Object.fromEntries(h)}const o=n.variants??{},a=Object.keys(o);function l(d){const h=DA(d,["recipe"]),[f,p]=gl(h,a);return a.includes("colorPalette")||(f.colorPalette=d.colorPalette||n.defaultVariants?.colorPalette),a.includes("orientation")&&(p.orientation=d.orientation),[f,p]}const c=Object.fromEntries(Object.entries(o).map(([d,h])=>[d,Object.keys(h)]));let u={};return n.className&&(u=Object.fromEntries(n.slots.map(d=>[d,`${n.className}__${d}`]))),Object.assign(s,{variantMap:c,variantKeys:a,splitVariantProps:l,classNameMap:u})}}const A4=()=>t=>Array.from(new Set(t)),k4=/([\0-\x1f\x7f]|^-?\d)|^-$|^-|[^\x80-\uFFFF\w-]/g,R4=function(t,e){return e?t==="\0"?"":t==="-"&&t.length===1?"\\-":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16):"\\"+t},NA=t=>(t+"").replace(k4,R4),BA=(t,e)=>{let r="",n=0,i="char",s="",o="";const a=[];for(;n<t.length;){const l=t[n];if(l==="{"){const u=t.indexOf("}",n);if(u===-1)break;const d=t.slice(n+1,u),h=e(d);r+=h??d,n=u+1;continue}if(i==="token"&&l===","){t[n]===""&&n++,i="fallback",a.push(i);const u=e(s);u?.endsWith(")")&&(r+=u.slice(0,-1)),s="",o="";continue}if(i==="fallback"&&o+l===", var("){const h=M4(t.slice(n+1))+n+1,f=t.slice(n+1,h);if(h===-1)break;r+=", var("+f+")",n=h+1,i=a.pop()??i,o="";continue}if(i==="token"||i==="fallback"){if(n++,l===")"){i=a.pop()??i??"char",o+=l;const u=s&&(e(s)??NA(s));if(o){if(o=o.slice(1).trim(),!o.startsWith("token(")&&o.endsWith(")")&&(o=o.slice(0,-1)),o.includes("token(")){const h=BA(o,e);h&&(o=h.slice(0,-1))}else if(o){const h=e(o);h&&(o=h)}}const d=r.at(-1);o?d?.trim()?r+=u.slice(0,-1)+(", "+o+")"):r+=o:r+=u||")",s="",o="",i="char";continue}i==="token"&&(s+=l),i==="fallback"&&(o+=l);continue}const c=t.indexOf("token(",n);if(c!==-1){const u=c+6;r+=t.slice(n,c),n=u,i="token",a.push(i);continue}r+=l,n++}return r},M4=t=>{let e=0;const r=["("];for(;e<t.length;){const n=t[e];if(n==="(")r.push(n);else if(n===")"&&(r.pop(),r.length===0))return e;e++}return e};function UA(t){const e={};return t.forEach((r,n)=>{r instanceof Map?e[n]=Object.fromEntries(r):e[n]=r}),e}const zA=/({([^}]*)})/g,O4=/[{}]/g,L4=/\w+\.\w+/,$A=t=>{if(!Si(t))return[];const e=t.match(zA);return e?e.map(r=>r.replace(O4,"")).map(r=>r.trim()):[]},D4=t=>zA.test(t);function jA(t){if(!t.extensions?.references)return t.extensions?.cssVar?.ref??t.value;const e=t.extensions.references??{};return t.value=Object.keys(e).reduce((r,n)=>{const i=e[n];if(i.extensions.conditions)return r;const s=jA(i);return r.replace(`{${n}}`,s)},t.value),delete t.extensions.references,t.value}function VA(t){return wr(t)&&t.reference?t.reference:String(t)}const lg=(t,...e)=>e.map(VA).join(` ${t} `).replace(/calc/g,""),MS=(...t)=>`calc(${lg("+",...t)})`,OS=(...t)=>`calc(${lg("-",...t)})`,Gv=(...t)=>`calc(${lg("*",...t)})`,LS=(...t)=>`calc(${lg("/",...t)})`,DS=t=>{const e=VA(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:Gv(e,-1)},Ra=Object.assign(t=>({add:(...e)=>Ra(MS(t,...e)),subtract:(...e)=>Ra(OS(t,...e)),multiply:(...e)=>Ra(Gv(t,...e)),divide:(...e)=>Ra(LS(t,...e)),negate:()=>Ra(DS(t)),toString:()=>t.toString()}),{add:MS,subtract:OS,multiply:Gv,divide:LS,negate:DS}),F4={enforce:"pre",transform(t){const{prefix:e,allTokens:r,formatCssVar:n,formatTokenName:i,registerToken:s}=t;r.filter(({extensions:a})=>a.category==="spacing").forEach(a=>{const l=a.path.slice(),c=n(l,e);if(Si(a.value)&&a.value==="0rem")return;const u=structuredClone(a);Object.assign(u.extensions,{negative:!0,prop:`-${a.extensions.prop}`,originalPath:l}),u.value=Ra.negate(c.ref);const d=u.path[u.path.length-1];d!=null&&(u.path[u.path.length-1]=`-${d}`),u.path&&(u.name=i(u.path)),s(u)})}},N4=new Set(["spacing","sizes","borderWidths","fontSizes","radii"]),B4={enforce:"post",transform(t){t.allTokens.filter(r=>N4.has(r.extensions.category)&&!r.extensions.negative).forEach(r=>{Object.assign(r.extensions,{pixelValue:IA(r.value)})})}},U4={enforce:"post",transform(t){const{allTokens:e,registerToken:r,formatTokenName:n}=t,i=e.filter(({extensions:a})=>a.category==="colors"),s=new Map,o=new Map;i.forEach(a=>{const{colorPalette:l}=a.extensions;l&&(l.keys.forEach(c=>{s.set(n(c),c)}),l.roots.forEach(c=>{const u=n(c),d=o.get(u)||[];if(d.push(a),o.set(u,d),a.extensions.default&&c.length===1){const h=l.keys[0]?.filter(Boolean);if(!h.length)return;const f=c.concat(h);s.set(n(f),[])}}))}),s.forEach(a=>{const l=["colors","colorPalette",...a].filter(Boolean),c=n(l),u=n(l.slice(1));r({name:c,value:c,originalValue:c,path:l,extensions:{condition:"base",originalPath:l,category:"colors",prop:u,virtual:!0}},"pre")})}},z4={enforce:"post",transform(t){t.allTokens=t.allTokens.filter(e=>e.value!=="")}},$4=[F4,U4,B4,z4],j4={type:"extensions",enforce:"pre",name:"tokens/css-var",transform(t,e){const{prefix:r,formatCssVar:n}=e,{negative:i,originalPath:s}=t.extensions,o=i?s:t.path;return{cssVar:n(o.filter(Boolean),r)}}},V4={enforce:"post",type:"value",name:"tokens/conditionals",transform(t,e){const{prefix:r,formatCssVar:n}=e,i=$A(t.value);return i.length&&i.forEach(s=>{const o=n(s.split("."),r);t.value=t.value.replace(`{${o.ref}}`,o)}),t.value}},G4={type:"extensions",enforce:"pre",name:"tokens/colors/colorPalette",match(t){return t.extensions.category==="colors"&&!t.extensions.virtual},transform(t,e){let r=t.path.slice();if(r.pop(),r.shift(),r.length===0){const a=[...t.path];a.shift(),r=a}if(r.length===0)return{};const n=r.reduce((a,l,c,u)=>{const d=u.slice(0,c+1);return a.push(d),a},[]),i=r[0],s=e.formatTokenName(r),o=t.path.slice(t.path.indexOf(i)+1).reduce((a,l,c,u)=>(a.push(u.slice(c)),a),[]);return o.length===0&&o.push([""]),{colorPalette:{value:s,roots:n,keys:o}}}},W4=[j4,V4,G4],FS=t=>wr(t)&&Object.prototype.hasOwnProperty.call(t,"value");function H4(t){return t?{breakpoints:CA(t,e=>({value:e})),sizes:Object.fromEntries(Object.entries(t).map(([e,r])=>[`breakpoint-${e}`,{value:r}]))}:{breakpoints:{},sizes:{}}}function X4(t){const{prefix:e="",tokens:r={},semanticTokens:n={},breakpoints:i={}}=t,s=$=>$.join("."),o=($,j)=>EA($.join("-"),{prefix:j}),a=[],l=new Map,c=new Map,u=new Map,d=new Map,h=new Map,f=new Map,p=new Map,g=new Map,x=[];function v($,j){a.push($),l.set($.name,$),j&&g.forEach(le=>{le.enforce===j&&A(le,$)})}const y=H4(i),m=ld({...r,breakpoints:y.breakpoints,sizes:{...r.sizes,...y.sizes}});function _(){os(m,($,j)=>{const le=j.includes("DEFAULT");j=NS(j);const X=j[0],oe=s(j),he=Si($)?{value:$}:$,Ue={value:he.value,originalValue:he.value,name:oe,path:j,extensions:{condition:"base",originalPath:j,category:X,prop:s(j.slice(1))}};le&&(Ue.extensions.default=!0),v(Ue)},{stop:FS}),os(n,($,j)=>{const le=j.includes("DEFAULT");j=GA(NS(j));const X=j[0],oe=s(j),he=Si($.value)?{value:{base:$.value}}:$,Ue={value:he.value.base||"",originalValue:he.value.base||"",name:oe,path:j,extensions:{originalPath:j,category:X,conditions:he.value,condition:"base",prop:s(j.slice(1))}};le&&(Ue.extensions.default=!0),v(Ue)},{stop:FS})}function C($){return l.get($)}function E($){const{condition:j}=$.extensions;j&&(c.has(j)||c.set(j,new Set),c.get(j).add($))}function T($){const{category:j,prop:le}=$.extensions;j&&(p.has(j)||p.set(j,new Map),p.get(j).set(le,$))}function S($){const{condition:j,negative:le,virtual:X,cssVar:oe}=$.extensions;le||X||!j||!oe||(u.has(j)||u.set(j,new Map),u.get(j).set(oe.var,$.value))}function P($){const{category:j,prop:le,cssVar:X,negative:oe}=$.extensions;if(!j)return;f.has(j)||f.set(j,new Map);const he=oe?$.extensions.conditions?$.originalValue:$.value:X.ref;f.get(j).set(le,he),h.set([j,le].join("."),he)}function I($){const{colorPalette:j,virtual:le,default:X}=$.extensions;!j||le||j.roots.forEach(oe=>{const he=s(oe);d.has(he)||d.set(he,new Map);const Ue=q4([...$.path],[...oe]),ht=s(Ue),nr=C(ht);if(!nr||!nr.extensions.cssVar)return;const{var:Mi}=nr.extensions.cssVar;if(d.get(he).set(Mi,$.extensions.cssVar.ref),X&&oe.length===1){const Gn=s(["colors","colorPalette"]),va=C(Gn);if(!va)return;const wd=s($.path),fc=C(wd);if(!fc)return;const pc=j.keys[0]?.filter(Boolean);if(!pc.length)return;const Oi=s(oe.concat(pc));d.has(Oi)||d.set(Oi,new Map),d.get(Oi).set(va.extensions.cssVar.var,fc.extensions.cssVar.ref)}})}let M={};function k(){a.forEach($=>{E($),T($),S($),P($),I($)}),M=UA(f)}const R=($,j)=>{if(!$||typeof $!="string")return{invalid:!0,value:$};const[le,X]=$.split("/");if(!le||!X)return{invalid:!0,value:le};const oe=j(le),he=C(`opacity.${X}`)?.value;if(!he&&isNaN(Number(X)))return{invalid:!0,value:le};const Ue=he?Number(he)*100+"%":`${X}%`,ht=oe??le;return{invalid:!1,color:ht,value:`color-mix(in srgb, ${ht} ${Ue}, transparent)`}},O=kn(($,j)=>h.get($)??j),V=kn($=>M[$]||null),U=kn($=>BA($,j=>{if(!j)return;if(j.includes("/")){const X=R(j,oe=>O(oe));if(X.invalid)throw new Error("Invalid color mix at "+j+": "+X.value);return X.value}const le=O(j);return le||(L4.test(j)?NA(j):j)})),F={prefix:e,allTokens:a,tokenMap:l,registerToken:v,getByName:C,formatTokenName:s,formatCssVar:o,flatMap:h,cssVarMap:u,categoryMap:p,colorPaletteMap:d,getVar:O,getCategoryValues:V,expandReferenceInValue:U};function L(...$){$.forEach(j=>{g.set(j.name,j)})}function B(...$){x.push(...$)}function A($,j){if(j.extensions.references||NI($.match)&&!$.match(j))return;const X=(oe=>$.transform(oe,F))(j);switch(!0){case $.type==="extensions":Object.assign(j.extensions,X);break;case $.type==="value":j.value=X;break;default:j[$.type]=X;break}}function N($){x.forEach(j=>{j.enforce===$&&j.transform(F)})}function z($){g.forEach(j=>{j.enforce===$&&a.forEach(le=>{A(j,le)})})}function q(){a.forEach($=>{const j=Y4($);!j||j.length===0||j.forEach(le=>{v(le)})})}function ue($){return $A($).map(le=>C(le)).filter(Boolean)}function xe(){a.forEach($=>{if(!D4($.value))return;const j=ue($.value);$.extensions.references=j.reduce((le,X)=>(le[X.name]=X,le),{})})}function we(){a.forEach($=>{jA($)})}function Me(){N("pre"),z("pre"),q(),xe(),we(),N("post"),z("post"),k()}return _(),L(...W4),B(...$4),Me(),F}function NS(t){return t[0]==="DEFAULT"?t:t.filter(e=>e!=="DEFAULT")}function GA(t){return t.filter(e=>e!=="base")}function Y4(t){if(!t.extensions.conditions)return;const{conditions:e}=t.extensions,r=[];return os(e,(n,i)=>{const s=GA(i);if(!s.length)return;const o=structuredClone(t);o.value=n,o.extensions.condition=s.join(":"),r.push(o)}),r}function q4(t,e){const r=t.findIndex((n,i)=>e.every((s,o)=>t[i+o]===s));return r===-1||(t.splice(r,e.length),t.splice(r,0,"colorPalette")),t}A4()(["aspectRatios","zIndex","opacity","colors","fonts","fontSizes","fontWeights","lineHeights","letterSpacings","sizes","shadows","spacing","radii","cursor","borders","borderWidths","borderStyles","durations","easings","animations","blurs","gradients","breakpoints","assets"]);function K4(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,r]))}function Z4(t){const e=K4(t.config),r=t.tokens,n=new Map,i=new Map;function s(S,P){e[S]=P,o(S,P)}const o=(S,P)=>{const I=g(P);I&&(i.set(S,I),d(S,P))},a=()=>{for(const[S,P]of Object.entries(e))P&&o(S,P)},l=()=>{for(const[S,P]of Object.entries(e)){const{shorthand:I}=P??{};if(!I)continue;(Array.isArray(I)?I:[I]).forEach(k=>n.set(k,S))}},c=()=>{const S=UA(r.colorPaletteMap);s("colorPalette",{values:Object.keys(S),transform:kn(P=>S[P])})},u=new Map,d=(S,P)=>{if(!P)return;const I=g(P,k=>`type:Tokens["${k}"]`);if(typeof I=="object"&&I.type){u.set(S,new Set([`type:${I.type}`]));return}if(I){const k=new Set(Object.keys(I));u.set(S,k)}const M=u.get(S)??new Set;P.property&&u.set(S,M.add(`CssProperties["${P.property}"]`))},h=()=>{for(const[S,P]of Object.entries(e))P&&d(S,P)},f=(S,P)=>{const I=u.get(S)??new Set;u.set(S,new Set([...I,...P]))},p=()=>{const S=new Map;for(const[P,I]of u.entries()){if(I.size===0){S.set(P,["string"]);continue}const M=Array.from(I).map(k=>k.startsWith("CssProperties")?k:k.startsWith("type:")?k.replace("type:",""):JSON.stringify(k));S.set(P,M)}return S},g=(S,P)=>{const{values:I}=S,M=k=>{const R=P?.(k);return R?{[R]:R}:void 0};return Si(I)?M?.(I)??r.getCategoryValues(I)??{}:Array.isArray(I)?I.reduce((k,R)=>(k[R]=R,k),{}):NI(I)?I(P?M:r.getCategoryValues):I},x=kn((S,P)=>({[S]:S.startsWith("--")?r.getVar(P,P):P})),v=Object.assign(r.getVar,{raw:S=>r.getByName(S)}),y=kn((S,P)=>{const I=C(S);Si(P)&&!P.includes("_EMO_")&&(P=r.expandReferenceInValue(P));const M=e[I];if(!M)return x(I,P);const k=i.get(I)?.[P];if(!M.transform)return x(S,k??P);const R=O=>P5(O,v);return M.transform(k??P,{raw:P,token:v,utils:{colorMix:R}})});function m(){l(),c(),a(),h()}m();const _=n.size>0,C=kn(S=>n.get(S)??S);return{keys:()=>[...Array.from(n.keys()),...Object.keys(e)],hasShorthand:_,transform:y,shorthands:n,resolveShorthand:C,register:s,getTypes:p,addPropertyType:f}}function Q4(...t){const e=SA(...t),{theme:r={},utilities:n={},globalCss:i={},cssVarsRoot:s=":where(:root, :host)",cssVarsPrefix:o="chakra",preflight:a}=e,l=_4(e),c=X4({breakpoints:r.breakpoints,tokens:r.tokens,semanticTokens:r.semanticTokens,prefix:o}),u=e4(r.breakpoints??{}),d=i4({conditions:e.conditions??{},breakpoints:u}),h=Z4({config:n,tokens:c});function f(){const{textStyles:L,layerStyles:B,animationStyles:A}=r,N=ld({textStyle:L,layerStyle:B,animationStyle:A});for(const[z,q]of Object.entries(N)){const ue=Q5(q??{},xe=>wr(xe)&&"value"in xe);h.register(z,{values:Object.keys(ue),transform(xe){return m(ue[xe])}})}}f(),h.addPropertyType("animationName",Object.keys(r.keyframes??{}));const p=new Set(["css",...h.keys(),...d.keys()]),g=kn(L=>p.has(L)||K5(L)),x=L=>Array.isArray(L)?L.reduce((B,A,N)=>{const z=d.breakpoints[N];return A!=null&&(B[z]=A),B},{}):L,v=w4({utility:h,normalize:x}),y=E4({conditions:d,isValidProperty:g}),m=LA({transform:h.transform,conditions:d,normalize:v}),_=v4({css:m,conditions:d,normalize:v,layers:l}),C=I4({cva:_});function E(){const L={};for(const[B,A]of c.cssVarMap.entries()){const N=Object.fromEntries(A);if(Object.keys(N).length===0)continue;const z=B==="base"?s:d.resolve(B),q=m(y({[z]:N}));rc(L,q)}return l.wrap("tokens",L)}function T(){const L=Object.fromEntries(Object.entries(r.keyframes??{}).map(([A,N])=>[`@keyframes ${A}`,N])),B=Object.assign({},L,m(y(i)));return l.wrap("base",B)}function S(L){return gl(L,g)}function P(){const L=S4({preflight:a});return l.wrap("reset",L)}const I=J4(c),M=(L,B)=>I.get(L)?.value||B;M.var=(L,B)=>I.get(L)?.variable||B;function k(L,B){return r.recipes?.[L]??B}function R(L,B){return r.slotRecipes?.[L]??B}function O(L){return Object.hasOwnProperty.call(r.recipes??{},L)}function V(L){return Object.hasOwnProperty.call(r.slotRecipes??{},L)}function U(L){return O(L)||V(L)}const F=[P(),T(),E()];return{$$chakra:!0,_config:e,_global:F,breakpoints:u,tokens:c,conditions:d,utility:h,token:M,properties:p,layers:l,isValidProperty:g,splitCssProps:S,normalizeValue:x,getTokenCss:E,getGlobalCss:T,getPreflightCss:P,css:m,cva:_,sva:C,getRecipe:k,getSlotRecipe:R,hasRecipe:U,isRecipe:O,isSlotRecipe:V}}function J4(t){const e=new Map;return t.allTokens.forEach(r=>{const{cssVar:n,virtual:i,conditions:s}=r.extensions,o=s||i?n.ref:r.value;e.set(r.name,{value:o,variable:n.ref})}),e}const eU={sm:"480px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},Em="var(--chakra-empty,/*!*/ /*!*/)",tU=k5({"*":{fontFeatureSettings:'"cv11"',"--ring-inset":Em,"--ring-offset-width":"0px","--ring-offset-color":"#fff","--ring-color":"rgba(66, 153, 225, 0.6)","--ring-offset-shadow":"0 0 #0000","--ring-shadow":"0 0 #0000",...Object.fromEntries(["brightness","contrast","grayscale","hue-rotate","invert","saturate","sepia","drop-shadow"].map(t=>[`--${t}`,Em])),...Object.fromEntries(["blur","brightness","contrast","grayscale","hue-rotate","invert","opacity","saturate","sepia"].map(t=>[`--backdrop-${t}`,Em])),"--global-font-mono":"fonts.mono","--global-font-body":"fonts.body","--global-color-border":"colors.border"},html:{color:"fg",bg:"bg",lineHeight:"1.5",colorPalette:"gray"},"*::placeholder":{color:"fg.muted/80"},"*::selection":{bg:"colorPalette.muted/80"}}),rU=O5({"fill.muted":{value:{background:"colorPalette.muted",color:"colorPalette.fg"}},"fill.subtle":{value:{background:"colorPalette.subtle",color:"colorPalette.fg"}},"fill.surface":{value:{background:"colorPalette.subtle",color:"colorPalette.fg",boxShadow:"0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.muted"}},"fill.solid":{value:{background:"colorPalette.solid",color:"colorPalette.contrast"}},"outline.subtle":{value:{color:"colorPalette.fg",boxShadow:"inset 0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.subtle"}},"outline.solid":{value:{borderWidth:"1px",borderColor:"colorPalette.solid",color:"colorPalette.fg"}},"indicator.bottom":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",bottom:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.top":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",top:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.start":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineStart:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.end":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineEnd:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},disabled:{value:{opacity:"0.5",cursor:"not-allowed"}},none:{value:{}}}),nU=M5({"slide-fade-in":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-from-bottom, fade-in"},"&[data-placement^=bottom]":{animationName:"slide-from-top, fade-in"},"&[data-placement^=left]":{animationName:"slide-from-right, fade-in"},"&[data-placement^=right]":{animationName:"slide-from-left, fade-in"}}},"slide-fade-out":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-to-bottom, fade-out"},"&[data-placement^=bottom]":{animationName:"slide-to-top, fade-out"},"&[data-placement^=left]":{animationName:"slide-to-right, fade-out"},"&[data-placement^=right]":{animationName:"slide-to-left, fade-out"}}},"scale-fade-in":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-in, fade-in"}},"scale-fade-out":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-out, fade-out"}}}),Gb=Et({className:"chakra-badge",base:{display:"inline-flex",alignItems:"center",borderRadius:"l2",gap:"1",fontWeight:"medium",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap",userSelect:"none"},variants:{variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg"},outline:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},plain:{color:"colorPalette.fg"}},size:{xs:{textStyle:"2xs",px:"1",minH:"4"},sm:{textStyle:"xs",px:"1.5",minH:"5"},md:{textStyle:"sm",px:"2",minH:"6"},lg:{textStyle:"sm",px:"2.5",minH:"7"}}},defaultVariants:{variant:"subtle",size:"sm"}}),iU=Et({className:"chakra-button",base:{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",borderRadius:"l2",whiteSpace:"nowrap",verticalAlign:"middle",borderWidth:"1px",borderColor:"transparent",cursor:"button",flexShrink:"0",outline:"0",lineHeight:"1.2",isolation:"isolate",fontWeight:"medium",transitionProperty:"common",transitionDuration:"moderate",focusVisibleRing:"outside",_disabled:{layerStyle:"disabled"},_icon:{flexShrink:"0"}},variants:{size:{"2xs":{h:"6",minW:"6",textStyle:"xs",px:"2",gap:"1",_icon:{width:"3.5",height:"3.5"}},xs:{h:"8",minW:"8",textStyle:"xs",px:"2.5",gap:"1",_icon:{width:"4",height:"4"}},sm:{h:"9",minW:"9",px:"3.5",textStyle:"sm",gap:"2",_icon:{width:"4",height:"4"}},md:{h:"10",minW:"10",textStyle:"sm",px:"4",gap:"2",_icon:{width:"5",height:"5"}},lg:{h:"11",minW:"11",textStyle:"md",px:"5",gap:"3",_icon:{width:"5",height:"5"}},xl:{h:"12",minW:"12",textStyle:"md",px:"5",gap:"2.5",_icon:{width:"5",height:"5"}},"2xl":{h:"16",minW:"16",textStyle:"lg",px:"7",gap:"3",_icon:{width:"6",height:"6"}}},variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast",_hover:{bg:"colorPalette.solid/90"},_expanded:{bg:"colorPalette.solid/90"}},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},outline:{borderWidth:"1px",borderColor:"colorPalette.muted",color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},ghost:{color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},plain:{color:"colorPalette.fg"}}},defaultVariants:{size:"md",variant:"solid"}}),Ut=Et({className:"chakra-checkmark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"l1",focusVisibleRing:"outside",_icon:{boxSize:"full"},_invalid:{colorPalette:"red",borderColor:"border.error"},_disabled:{opacity:"0.5"}},variants:{size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5",p:"0.5"},lg:{boxSize:"6",p:"0.5"}},variant:{solid:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},outline:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg",borderColor:"colorPalette.solid"}},subtle:{bg:"colorPalette.muted",borderColor:"colorPalette.muted","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},plain:{"&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},inverted:{borderColor:"border",color:"colorPalette.fg","&:is([data-state=checked], [data-state=indeterminate])":{borderColor:"colorPalette.solid"}}}},defaultVariants:{variant:"solid",size:"md"}}),{variants:sU,defaultVariants:oU}=Gb,aU=Et({className:"chakra-code",base:{fontFamily:"mono",alignItems:"center",display:"inline-flex",borderRadius:"l2"},variants:sU,defaultVariants:oU}),WA=Et({className:"color-swatch",base:{boxSize:"var(--swatch-size)",shadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.1)","--checker-size":"8px","--checker-bg":"colors.bg","--checker-fg":"colors.bg.emphasized",background:"linear-gradient(var(--color), var(--color)), repeating-conic-gradient(var(--checker-fg) 0%, var(--checker-fg) 25%, var(--checker-bg) 0%, var(--checker-bg) 50%) 0% 50% / var(--checker-size) var(--checker-size) !important",display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},variants:{size:{"2xs":{"--swatch-size":"sizes.3.5"},xs:{"--swatch-size":"sizes.4"},sm:{"--swatch-size":"sizes.4.5"},md:{"--swatch-size":"sizes.5"},lg:{"--swatch-size":"sizes.6"},xl:{"--swatch-size":"sizes.7"},"2xl":{"--swatch-size":"sizes.8"},inherit:{"--swatch-size":"inherit"},full:{"--swatch-size":"100%"}},shape:{square:{borderRadius:"none"},circle:{borderRadius:"full"},rounded:{borderRadius:"l1"}}},defaultVariants:{size:"md",shape:"rounded"}}),lU=Et({className:"chakra-container",base:{position:"relative",maxWidth:"8xl",w:"100%",mx:"auto",px:{base:"4",md:"6",lg:"8"}},variants:{centerContent:{true:{display:"flex",flexDirection:"column",alignItems:"center"}},fluid:{true:{maxWidth:"full"}}}}),cU=Et({className:"chakra-heading",base:{fontFamily:"heading",fontWeight:"semibold"},variants:{size:{xs:{textStyle:"xs"},sm:{textStyle:"sm"},md:{textStyle:"md"},lg:{textStyle:"lg"},xl:{textStyle:"xl"},"2xl":{textStyle:"2xl"},"3xl":{textStyle:"3xl"},"4xl":{textStyle:"4xl"},"5xl":{textStyle:"5xl"},"6xl":{textStyle:"6xl"},"7xl":{textStyle:"7xl"}}},defaultVariants:{size:"xl"}}),uU=Et({className:"chakra-icon",base:{display:"inline-block",lineHeight:"1em",flexShrink:"0",color:"currentcolor",verticalAlign:"middle"},variants:{size:{inherit:{},xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"},xl:{boxSize:"7"},"2xl":{boxSize:"8"}}},defaultVariants:{size:"inherit"}}),ft=Et({className:"chakra-input",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},height:"var(--input-height)",minW:"var(--input-height)","--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{"2xs":{textStyle:"xs",px:"2","--input-height":"sizes.7"},xs:{textStyle:"xs",px:"2","--input-height":"sizes.8"},sm:{textStyle:"sm",px:"2.5","--input-height":"sizes.9"},md:{textStyle:"sm",px:"3","--input-height":"sizes.10"},lg:{textStyle:"md",px:"4","--input-height":"sizes.11"},xl:{textStyle:"md",px:"4.5","--input-height":"sizes.12"},"2xl":{textStyle:"lg",px:"5","--input-height":"sizes.16"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),dU=Et({className:"chakra-input-addon",base:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap",alignSelf:"stretch",borderRadius:"l2"},variants:{size:ft.variants.size,variant:{outline:{borderWidth:"1px",borderColor:"border",bg:"bg.muted"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.emphasized"},flushed:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}},defaultVariants:{size:"md",variant:"outline"}}),hU=Et({className:"chakra-kbd",base:{display:"inline-flex",alignItems:"center",fontWeight:"medium",fontFamily:"mono",flexShrink:"0",whiteSpace:"nowrap",wordSpacing:"-0.5em",userSelect:"none",px:"1",borderRadius:"l2"},variants:{variant:{raised:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderWidth:"1px",borderBottomWidth:"2px",borderColor:"colorPalette.muted"},outline:{borderWidth:"1px",color:"colorPalette.fg"},subtle:{bg:"colorPalette.muted",color:"colorPalette.fg"},plain:{color:"colorPalette.fg"}},size:{sm:{textStyle:"xs",height:"4.5"},md:{textStyle:"sm",height:"5"},lg:{textStyle:"md",height:"6"}}},defaultVariants:{size:"md",variant:"raised"}}),fU=Et({className:"chakra-link",base:{display:"inline-flex",alignItems:"center",outline:"none",gap:"1.5",cursor:"pointer",borderRadius:"l1",focusRing:"outside"},variants:{variant:{underline:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"},plain:{color:"colorPalette.fg",_hover:{textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"}}}},defaultVariants:{variant:"plain"}}),pU=Et({className:"chakra-mark",base:{bg:"transparent",color:"inherit",whiteSpace:"nowrap"},variants:{variant:{subtle:{bg:"colorPalette.subtle",color:"inherit"},solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},text:{fontWeight:"medium"},plain:{}}}}),zt=Et({className:"chakra-radiomark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,verticalAlign:"top",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"full",cursor:"radio",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing",outlineOffset:"2px"},_invalid:{colorPalette:"red",borderColor:"red.500"},_disabled:{opacity:"0.5",cursor:"disabled"},"& .dot":{height:"100%",width:"100%",borderRadius:"full",bg:"currentColor",scale:"0.4"}},variants:{variant:{solid:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},subtle:{borderWidth:"1px",bg:"colorPalette.muted",borderColor:"colorPalette.muted",color:"transparent",_checked:{color:"colorPalette.fg"}},outline:{borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.fg",borderColor:"colorPalette.solid"},"& .dot":{scale:"0.6"}},inverted:{bg:"bg",borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.solid",borderColor:"currentcolor"}}},size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"}}},defaultVariants:{variant:"solid",size:"md"}}),gU=Et({className:"chakra-separator",base:{display:"block",borderColor:"border"},variants:{variant:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"},dotted:{borderStyle:"dotted"}},orientation:{vertical:{borderInlineStartWidth:"var(--separator-thickness)"},horizontal:{borderTopWidth:"var(--separator-thickness)"}},size:{xs:{"--separator-thickness":"0.5px"},sm:{"--separator-thickness":"1px"},md:{"--separator-thickness":"2px"},lg:{"--separator-thickness":"3px"}}},defaultVariants:{size:"sm",variant:"solid",orientation:"horizontal"}}),mU=Et({className:"chakra-skeleton",base:{},variants:{loading:{true:{borderRadius:"l2",boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none",flexShrink:"0","&::before, &::after, *":{visibility:"hidden"}},false:{background:"unset",animation:"fade-in var(--fade-duration, 0.1s) ease-out !important"}},variant:{pulse:{background:"bg.emphasized",animation:"pulse",animationDuration:"var(--duration, 1.2s)"},shine:{"--animate-from":"200%","--animate-to":"-200%","--start-color":"colors.bg.muted","--end-color":"colors.bg.emphasized",backgroundImage:"linear-gradient(270deg,var(--start-color),var(--end-color),var(--end-color),var(--start-color))",backgroundSize:"400% 100%",animation:"bg-position var(--duration, 5s) ease-in-out infinite"},none:{animation:"none"}}},defaultVariants:{variant:"pulse",loading:!0}}),yU=Et({className:"chakra-skip-nav",base:{display:"inline-flex",bg:"bg.panel",padding:"2.5",borderRadius:"l2",fontWeight:"semibold",focusVisibleRing:"outside",textStyle:"sm",userSelect:"none",border:"0",height:"1px",width:"1px",margin:"-1px",outline:"0",overflow:"hidden",position:"absolute",clip:"rect(0 0 0 0)",_focusVisible:{clip:"auto",width:"auto",height:"auto",position:"fixed",top:"6",insetStart:"6"}}}),vU=Et({className:"chakra-spinner",base:{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderWidth:"2px",borderRadius:"full",width:"var(--spinner-size)",height:"var(--spinner-size)",animation:"spin",animationDuration:"slowest","--spinner-track-color":"transparent",borderBottomColor:"var(--spinner-track-color)",borderInlineStartColor:"var(--spinner-track-color)"},variants:{size:{inherit:{"--spinner-size":"1em"},xs:{"--spinner-size":"sizes.3"},sm:{"--spinner-size":"sizes.4"},md:{"--spinner-size":"sizes.5"},lg:{"--spinner-size":"sizes.8"},xl:{"--spinner-size":"sizes.10"}}},defaultVariants:{size:"md"}}),xU=Et({className:"chakra-textarea",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},"--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{xs:{textStyle:"xs",px:"2",py:"1.5",scrollPaddingBottom:"1.5"},sm:{textStyle:"sm",px:"2.5",py:"2",scrollPaddingBottom:"2"},md:{textStyle:"sm",px:"3",py:"2",scrollPaddingBottom:"2"},lg:{textStyle:"md",px:"4",py:"3",scrollPaddingBottom:"3"},xl:{textStyle:"md",px:"4.5",py:"3.5",scrollPaddingBottom:"3.5"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),bU={badge:Gb,button:iU,code:aU,container:lU,heading:cU,input:ft,inputAddon:dU,kbd:hU,link:fU,mark:pU,separator:gU,skeleton:mU,skipNavLink:yU,spinner:vU,textarea:xU,icon:uU,checkmark:Ut,radiomark:zt,colorSwatch:WA},_U=jb.colors({bg:{DEFAULT:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},emphasized:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},inverted:{value:{_light:"{colors.black}",_dark:"{colors.white}"}},panel:{value:{_light:"{colors.white}",_dark:"{colors.gray.950}"}},error:{value:{_light:"{colors.red.50}",_dark:"{colors.red.950}"}},warning:{value:{_light:"{colors.orange.50}",_dark:"{colors.orange.950}"}},success:{value:{_light:"{colors.green.50}",_dark:"{colors.green.950}"}},info:{value:{_light:"{colors.blue.50}",_dark:"{colors.blue.950}"}}},fg:{DEFAULT:{value:{_light:"{colors.black}",_dark:"{colors.gray.50}"}},muted:{value:{_light:"{colors.gray.600}",_dark:"{colors.gray.400}"}},subtle:{value:{_light:"{colors.gray.400}",_dark:"{colors.gray.500}"}},inverted:{value:{_light:"{colors.gray.50}",_dark:"{colors.black}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.300}"}},success:{value:{_light:"{colors.green.600}",_dark:"{colors.green.300}"}},info:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.300}"}}},border:{DEFAULT:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},inverted:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.500}",_dark:"{colors.orange.400}"}},success:{value:{_light:"{colors.green.500}",_dark:"{colors.green.400}"}},info:{value:{_light:"{colors.blue.500}",_dark:"{colors.blue.400}"}}},gray:{contrast:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},fg:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},subtle:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},muted:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},solid:{value:{_light:"{colors.gray.900}",_dark:"{colors.white}"}},focusRing:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}}},red:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.red.700}",_dark:"{colors.red.300}"}},subtle:{value:{_light:"{colors.red.100}",_dark:"{colors.red.900}"}},muted:{value:{_light:"{colors.red.200}",_dark:"{colors.red.800}"}},emphasized:{value:{_light:"{colors.red.300}",_dark:"{colors.red.700}"}},solid:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}},focusRing:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}}},orange:{contrast:{value:{_light:"white",_dark:"black"}},fg:{value:{_light:"{colors.orange.700}",_dark:"{colors.orange.300}"}},subtle:{value:{_light:"{colors.orange.100}",_dark:"{colors.orange.900}"}},muted:{value:{_light:"{colors.orange.200}",_dark:"{colors.orange.800}"}},emphasized:{value:{_light:"{colors.orange.300}",_dark:"{colors.orange.700}"}},solid:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}},focusRing:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}}},green:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.green.700}",_dark:"{colors.green.300}"}},subtle:{value:{_light:"{colors.green.100}",_dark:"{colors.green.900}"}},muted:{value:{_light:"{colors.green.200}",_dark:"{colors.green.800}"}},emphasized:{value:{_light:"{colors.green.300}",_dark:"{colors.green.700}"}},solid:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}},focusRing:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}}},blue:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.blue.700}",_dark:"{colors.blue.300}"}},subtle:{value:{_light:"{colors.blue.100}",_dark:"{colors.blue.900}"}},muted:{value:{_light:"{colors.blue.200}",_dark:"{colors.blue.800}"}},emphasized:{value:{_light:"{colors.blue.300}",_dark:"{colors.blue.700}"}},solid:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}},focusRing:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}}},yellow:{contrast:{value:{_light:"black",_dark:"black"}},fg:{value:{_light:"{colors.yellow.800}",_dark:"{colors.yellow.300}"}},subtle:{value:{_light:"{colors.yellow.100}",_dark:"{colors.yellow.900}"}},muted:{value:{_light:"{colors.yellow.200}",_dark:"{colors.yellow.800}"}},emphasized:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.700}"}},solid:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}},focusRing:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}}},teal:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.teal.700}",_dark:"{colors.teal.300}"}},subtle:{value:{_light:"{colors.teal.100}",_dark:"{colors.teal.900}"}},muted:{value:{_light:"{colors.teal.200}",_dark:"{colors.teal.800}"}},emphasized:{value:{_light:"{colors.teal.300}",_dark:"{colors.teal.700}"}},solid:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}},focusRing:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}}},purple:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.purple.700}",_dark:"{colors.purple.300}"}},subtle:{value:{_light:"{colors.purple.100}",_dark:"{colors.purple.900}"}},muted:{value:{_light:"{colors.purple.200}",_dark:"{colors.purple.800}"}},emphasized:{value:{_light:"{colors.purple.300}",_dark:"{colors.purple.700}"}},solid:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}},focusRing:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}}},pink:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.pink.700}",_dark:"{colors.pink.300}"}},subtle:{value:{_light:"{colors.pink.100}",_dark:"{colors.pink.900}"}},muted:{value:{_light:"{colors.pink.200}",_dark:"{colors.pink.800}"}},emphasized:{value:{_light:"{colors.pink.300}",_dark:"{colors.pink.700}"}},solid:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}},focusRing:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}}},cyan:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.cyan.700}",_dark:"{colors.cyan.300}"}},subtle:{value:{_light:"{colors.cyan.100}",_dark:"{colors.cyan.900}"}},muted:{value:{_light:"{colors.cyan.200}",_dark:"{colors.cyan.800}"}},emphasized:{value:{_light:"{colors.cyan.300}",_dark:"{colors.cyan.700}"}},solid:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}},focusRing:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}}}}),wU=jb.radii({l1:{value:"{radii.xs}"},l2:{value:"{radii.sm}"},l3:{value:"{radii.md}"}}),SU=jb.shadows({xs:{value:{_light:"0px 1px 2px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/20}",_dark:"0px 1px 1px {black/64}, 0px 0px 1px inset {colors.gray.300/20}"}},sm:{value:{_light:"0px 2px 4px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 2px 4px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},md:{value:{_light:"0px 4px 8px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 4px 8px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},lg:{value:{_light:"0px 8px 16px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 8px 16px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},xl:{value:{_light:"0px 16px 24px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 16px 24px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},"2xl":{value:{_light:"0px 24px 40px {colors.gray.900/16}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 24px 40px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},inner:{value:{_light:"inset 0 2px 4px 0 {black/5}",_dark:"inset 0 2px 4px 0 black"}},inset:{value:{_light:"inset 0 0 0 1px {black/5}",_dark:"inset 0 0 0 1px {colors.gray.300/5}"}}});var me=(t,e=[])=>({parts:(...r)=>{if(EU(e))return me(t,r);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...r)=>me(t,[...e,...r]),rename:r=>me(r,e),keys:()=>e,build:()=>[...new Set(e)].reduce((r,n)=>Object.assign(r,{[n]:{selector:[`&[data-scope="${_a(t)}"][data-part="${_a(n)}"]`,`& [data-scope="${_a(t)}"][data-part="${_a(n)}"]`].join(", "),attrs:{"data-scope":_a(t),"data-part":_a(n)}}}),{})}),_a=t=>t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),EU=t=>t.length===0,HA=me("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator");HA.build();var Xn=nt({getRootId:t=>t.ids?.root??`accordion:${t.id}`,getItemId:(t,e)=>t.ids?.item?.(e)??`accordion:${t.id}:item:${e}`,getItemContentId:(t,e)=>t.ids?.itemContent?.(e)??`accordion:${t.id}:content:${e}`,getItemTriggerId:(t,e)=>t.ids?.itemTrigger?.(e)??`accordion:${t.id}:trigger:${e}`,getRootEl:t=>Xn.getById(t,Xn.getRootId(t)),getTriggerEls:t=>{const r=`[aria-controls][data-ownedby='${CSS.escape(Xn.getRootId(t))}']:not([disabled])`;return An(Xn.getRootEl(t),r)},getFirstTriggerEl:t=>Ub(Xn.getTriggerEls(t)),getLastTriggerEl:t=>zb(Xn.getTriggerEls(t)),getNextTriggerEl:(t,e)=>Db(Xn.getTriggerEls(t),Xn.getItemTriggerId(t,e)),getPrevTriggerEl:(t,e)=>Fb(Xn.getTriggerEls(t),Xn.getItemTriggerId(t,e))});Ae()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value"]);Ae()(["value","disabled"]);var XA=me("collapsible").parts("root","trigger","content");XA.build();var wa=nt({getRootId:t=>t.ids?.root??`collapsible:${t.id}`,getContentId:t=>t.ids?.content??`collapsible:${t.id}:content`,getTriggerId:t=>t.ids?.trigger??`collapsible:${t.id}:trigger`,getRootEl:t=>wa.getById(t,wa.getRootId(t)),getContentEl:t=>wa.getById(t,wa.getContentId(t)),getTriggerEl:t=>wa.getById(t,wa.getTriggerId(t))});Ae()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","open.controlled","open"]);const[ste,nc]=hr({name:"EnvironmentContext",hookName:"useEnvironmentContext",providerName:"<EnvironmentProvider />",strict:!1,defaultValue:{getRootNode:()=>document,getDocument:()=>document,getWindow:()=>window}}),CU=["top","right","bottom","left"],Hs=Math.min,Fr=Math.max,Gf=Math.round,Gd=Math.floor,xi=t=>({x:t,y:t}),TU={left:"right",right:"left",bottom:"top",top:"bottom"},PU={start:"end",end:"start"};function Wv(t,e,r){return Fr(t,Hs(e,r))}function as(t,e){return typeof t=="function"?t(e):t}function ls(t){return t.split("-")[0]}function ic(t){return t.split("-")[1]}function Wb(t){return t==="x"?"y":"x"}function Hb(t){return t==="y"?"height":"width"}function Xs(t){return["top","bottom"].includes(ls(t))?"y":"x"}function Xb(t){return Wb(Xs(t))}function IU(t,e,r){r===void 0&&(r=!1);const n=ic(t),i=Xb(t),s=Hb(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Wf(o)),[o,Wf(o)]}function AU(t){const e=Wf(t);return[Hv(t),e,Hv(e)]}function Hv(t){return t.replace(/start|end/g,e=>PU[e])}function kU(t,e,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?s:o;default:return[]}}function RU(t,e,r,n){const i=ic(t);let s=kU(ls(t),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Hv)))),s}function Wf(t){return t.replace(/left|right|bottom|top/g,e=>TU[e])}function MU(t){return{top:0,right:0,bottom:0,left:0,...t}}function YA(t){return typeof t!="number"?MU(t):{top:t,right:t,bottom:t,left:t}}function Hf(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function BS(t,e,r){let{reference:n,floating:i}=t;const s=Xs(e),o=Xb(e),a=Hb(o),l=ls(e),c=s==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(ic(e)){case"start":f[o]-=h*(r&&c?-1:1);break;case"end":f[o]+=h*(r&&c?-1:1);break}return f}const OU=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=BS(c,n,l),h=n,f={},p=0;for(let g=0;g<a.length;g++){const{name:x,fn:v}=a[g],{x:y,y:m,data:_,reset:C}=await v({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=y??u,d=m??d,f={...f,[x]:{...f[x],..._}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(c=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):C.rects),{x:u,y:d}=BS(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function Gu(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=as(e,t),p=YA(f),x=a[h?d==="floating"?"reference":"floating":d],v=Hf(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(x)))==null||r?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,m=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(m))?await(s.getScale==null?void 0:s.getScale(m))||{x:1,y:1}:{x:1,y:1},C=Hf(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:m,strategy:l}):y);return{top:(v.top-C.top+p.top)/_.y,bottom:(C.bottom-v.bottom+p.bottom)/_.y,left:(v.left-C.left+p.left)/_.x,right:(C.right-v.right+p.right)/_.x}}const LU=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=as(t,e)||{};if(c==null)return{};const d=YA(u),h={x:r,y:n},f=Xb(i),p=Hb(f),g=await o.getDimensions(c),x=f==="y",v=x?"top":"left",y=x?"bottom":"right",m=x?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[f]-h[f]-s.floating[p],C=h[f]-s.reference[f],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=E?E[m]:0;(!T||!await(o.isElement==null?void 0:o.isElement(E)))&&(T=a.floating[m]||s.floating[p]);const S=_/2-C/2,P=T/2-g[p]/2-1,I=Hs(d[v],P),M=Hs(d[y],P),k=I,R=T-g[p]-M,O=T/2-g[p]/2+S,V=Wv(k,O,R),U=!l.arrow&&ic(i)!=null&&O!==V&&s.reference[p]/2-(O<k?I:M)-g[p]/2<0,F=U?O<k?O-k:O-R:0;return{[f]:h[f]+F,data:{[f]:V,centerOffset:O-V-F,...U&&{alignmentOffset:F}},reset:U}}}),DU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...x}=as(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const v=ls(i),y=Xs(a),m=ls(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=h||(m||!g?[Wf(a)]:AU(a)),E=p!=="none";!h&&E&&C.push(...RU(a,g,p,_));const T=[a,...C],S=await Gu(e,x),P=[];let I=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&P.push(S[v]),d){const O=IU(i,o,_);P.push(S[O[0]],S[O[1]])}if(I=[...I,{placement:i,overflows:P}],!P.every(O=>O<=0)){var M,k;const O=(((M=s.flip)==null?void 0:M.index)||0)+1,V=T[O];if(V)return{data:{index:O,overflows:I},reset:{placement:V}};let U=(k=I.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:k.placement;if(!U)switch(f){case"bestFit":{var R;const F=(R=I.filter(L=>{if(E){const B=Xs(L.placement);return B===y||B==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(B=>B>0).reduce((B,A)=>B+A,0)]).sort((L,B)=>L[1]-B[1])[0])==null?void 0:R[0];F&&(U=F);break}case"initialPlacement":U=a;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function US(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function zS(t){return CU.some(e=>t[e]>=0)}const FU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=as(t,e);switch(n){case"referenceHidden":{const s=await Gu(e,{...i,elementContext:"reference"}),o=US(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:zS(o)}}}case"escaped":{const s=await Gu(e,{...i,altBoundary:!0}),o=US(s,r.floating);return{data:{escapedOffsets:o,escaped:zS(o)}}}default:return{}}}}};async function NU(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=ls(r),a=ic(r),l=Xs(r)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=as(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const BU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await NU(e,t);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},UU=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:v,y}=x;return{x:v,y}}},...l}=as(t,e),c={x:r,y:n},u=await Gu(e,l),d=Xs(ls(i)),h=Wb(d);let f=c[h],p=c[d];if(s){const x=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=f+u[x],m=f-u[v];f=Wv(y,f,m)}if(o){const x=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+u[x],m=p-u[v];p=Wv(y,p,m)}const g=a.fn({...e,[h]:f,[d]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:s,[d]:o}}}}}},zU=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=as(t,e),u={x:r,y:n},d=Xs(i),h=Wb(d);let f=u[h],p=u[d];const g=as(a,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const m=h==="y"?"height":"width",_=s.reference[h]-s.floating[m]+x.mainAxis,C=s.reference[h]+s.reference[m]-x.mainAxis;f<_?f=_:f>C&&(f=C)}if(c){var v,y;const m=h==="y"?"width":"height",_=["top","left"].includes(ls(i)),C=s.reference[d]-s.floating[m]+(_&&((v=o.offset)==null?void 0:v[d])||0)+(_?0:x.crossAxis),E=s.reference[d]+s.reference[m]+(_?0:((y=o.offset)==null?void 0:y[d])||0)-(_?x.crossAxis:0);p<C?p=C:p>E&&(p=E)}return{[h]:f,[d]:p}}}},$U=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=as(t,e),u=await Gu(e,c),d=ls(i),h=ic(i),f=Xs(i)==="y",{width:p,height:g}=s.floating;let x,v;d==="top"||d==="bottom"?(x=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,x=h==="end"?"top":"bottom");const y=g-u.top-u.bottom,m=p-u.left-u.right,_=Hs(g-u[x],y),C=Hs(p-u[v],m),E=!e.middlewareData.shift;let T=_,S=C;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(S=m),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=y),E&&!h){const I=Fr(u.left,0),M=Fr(u.right,0),k=Fr(u.top,0),R=Fr(u.bottom,0);f?S=p-2*(I!==0||M!==0?I+M:Fr(u.left,u.right)):T=g-2*(k!==0||R!==0?k+R:Fr(u.top,u.bottom))}await l({...e,availableWidth:S,availableHeight:T});const P=await o.getDimensions(a.floating);return p!==P.width||g!==P.height?{reset:{rects:!0}}:{}}}};function cg(){return typeof window<"u"}function sc(t){return qA(t)?(t.nodeName||"").toLowerCase():"#document"}function jr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ii(t){var e;return(e=(qA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function qA(t){return cg()?t instanceof Node||t instanceof jr(t).Node:!1}function Bn(t){return cg()?t instanceof Element||t instanceof jr(t).Element:!1}function Ti(t){return cg()?t instanceof HTMLElement||t instanceof jr(t).HTMLElement:!1}function $S(t){return!cg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof jr(t).ShadowRoot}function fd(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Un(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function jU(t){return["table","td","th"].includes(sc(t))}function ug(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Yb(t){const e=qb(),r=Bn(t)?Un(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function VU(t){let e=Ys(t);for(;Ti(e)&&!$l(e);){if(Yb(e))return e;if(ug(e))return null;e=Ys(e)}return null}function qb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $l(t){return["html","body","#document"].includes(sc(t))}function Un(t){return jr(t).getComputedStyle(t)}function dg(t){return Bn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ys(t){if(sc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||$S(t)&&t.host||Ii(t);return $S(e)?e.host:e}function KA(t){const e=Ys(t);return $l(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ti(e)&&fd(e)?e:KA(e)}function Wu(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=KA(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),o=jr(i);if(s){const a=Xv(o);return e.concat(o,o.visualViewport||[],fd(i)?i:[],a&&r?Wu(a):[])}return e.concat(i,Wu(i,[],r))}function Xv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ZA(t){const e=Un(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ti(t),s=i?t.offsetWidth:r,o=i?t.offsetHeight:n,a=Gf(r)!==s||Gf(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function Kb(t){return Bn(t)?t:t.contextElement}function vl(t){const e=Kb(t);if(!Ti(e))return xi(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=ZA(e);let o=(s?Gf(r.width):r.width)/n,a=(s?Gf(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const GU=xi(0);function QA(t){const e=jr(t);return!qb()||!e.visualViewport?GU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function WU(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==jr(t)?!1:e}function Jo(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=Kb(t);let o=xi(1);e&&(n?Bn(n)&&(o=vl(n)):o=vl(t));const a=WU(s,r,n)?QA(s):xi(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=jr(s),f=n&&Bn(n)?jr(n):n;let p=h,g=Xv(p);for(;g&&n&&f!==p;){const x=vl(g),v=g.getBoundingClientRect(),y=Un(g),m=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*x.x,_=v.top+(g.clientTop+parseFloat(y.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=m,c+=_,p=jr(g),g=Xv(p)}}return Hf({width:u,height:d,x:l,y:c})}function Zb(t,e){const r=dg(t).scrollLeft;return e?e.left+r:Jo(Ii(t)).left+r}function JA(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:Zb(t,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function HU(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",o=Ii(n),a=e?ug(e.floating):!1;if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=xi(1);const u=xi(0),d=Ti(n);if((d||!d&&!s)&&((sc(n)!=="body"||fd(o))&&(l=dg(n)),Ti(n))){const f=Jo(n);c=vl(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const h=o&&!d&&!s?JA(o,l,!0):xi(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:r.y*c.y-l.scrollTop*c.y+u.y+h.y}}function XU(t){return Array.from(t.getClientRects())}function YU(t){const e=Ii(t),r=dg(t),n=t.ownerDocument.body,i=Fr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Fr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Zb(t);const a=-r.scrollTop;return Un(n).direction==="rtl"&&(o+=Fr(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function qU(t,e){const r=jr(t),n=Ii(t),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=qb();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function KU(t,e){const r=Jo(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=Ti(t)?vl(t):xi(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function jS(t,e,r){let n;if(e==="viewport")n=qU(t,r);else if(e==="document")n=YU(Ii(t));else if(Bn(e))n=KU(e,r);else{const i=QA(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Hf(n)}function ek(t,e){const r=Ys(t);return r===e||!Bn(r)||$l(r)?!1:Un(r).position==="fixed"||ek(r,e)}function ZU(t,e){const r=e.get(t);if(r)return r;let n=Wu(t,[],!1).filter(a=>Bn(a)&&sc(a)!=="body"),i=null;const s=Un(t).position==="fixed";let o=s?Ys(t):t;for(;Bn(o)&&!$l(o);){const a=Un(o),l=Yb(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||fd(o)&&!l&&ek(t,o))?n=n.filter(u=>u!==o):i=a,o=Ys(o)}return e.set(t,n),n}function QU(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?ug(e)?[]:ZU(e,this._c):[].concat(r),n],a=o[0],l=o.reduce((c,u)=>{const d=jS(e,u,i);return c.top=Fr(d.top,c.top),c.right=Hs(d.right,c.right),c.bottom=Hs(d.bottom,c.bottom),c.left=Fr(d.left,c.left),c},jS(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function JU(t){const{width:e,height:r}=ZA(t);return{width:e,height:r}}function ez(t,e,r){const n=Ti(e),i=Ii(e),s=r==="fixed",o=Jo(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=xi(0);if(n||!n&&!s)if((sc(e)!=="body"||fd(i))&&(a=dg(e)),n){const h=Jo(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=Zb(i));const c=i&&!n&&!s?JA(i,a):xi(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function Cm(t){return Un(t).position==="static"}function VS(t,e){if(!Ti(t)||Un(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ii(t)===r&&(r=r.ownerDocument.body),r}function tk(t,e){const r=jr(t);if(ug(t))return r;if(!Ti(t)){let i=Ys(t);for(;i&&!$l(i);){if(Bn(i)&&!Cm(i))return i;i=Ys(i)}return r}let n=VS(t,e);for(;n&&jU(n)&&Cm(n);)n=VS(n,e);return n&&$l(n)&&Cm(n)&&!Yb(n)?r:n||VU(t)||r}const tz=async function(t){const e=this.getOffsetParent||tk,r=this.getDimensions,n=await r(t.floating);return{reference:ez(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function rz(t){return Un(t).direction==="rtl"}const nz={convertOffsetParentRelativeRectToViewportRelativeRect:HU,getDocumentElement:Ii,getClippingRect:QU,getOffsetParent:tk,getElementRects:tz,getClientRects:XU,getDimensions:JU,getScale:vl,isElement:Bn,isRTL:rz};function iz(t,e){let r=null,n;const i=Ii(t);function s(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const f=Gd(u),p=Gd(i.clientWidth-(c+d)),g=Gd(i.clientHeight-(u+h)),x=Gd(c),y={rootMargin:-f+"px "+-p+"px "+-g+"px "+-x+"px",threshold:Fr(0,Hs(1,l))||1};let m=!0;function _(C){const E=C[0].intersectionRatio;if(E!==l){if(!m)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}m=!1}try{r=new IntersectionObserver(_,{...y,root:i.ownerDocument})}catch{r=new IntersectionObserver(_,y)}r.observe(t)}return o(!0),s}function sz(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Kb(t),u=i||s?[...c?Wu(c):[],...Wu(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",r,{passive:!0}),s&&v.addEventListener("resize",r)});const d=c&&a?iz(c,r):null;let h=-1,f=null;o&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var m;(m=f)==null||m.observe(e)})),r()}),c&&!l&&f.observe(c),f.observe(e));let p,g=l?Jo(t):null;l&&x();function x(){const v=Jo(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&r(),g=v,p=requestAnimationFrame(x)}return r(),()=>{var v;u.forEach(y=>{i&&y.removeEventListener("scroll",r),s&&y.removeEventListener("resize",r)}),d?.(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const oz=BU,az=UU,lz=DU,cz=$U,uz=FU,dz=LU,hz=zU,fz=(t,e,r)=>{const n=new Map,i={platform:nz,...r},s={...i.platform,_c:n};return OU(t,e,{...i,platform:s})};function GS(t=0,e=0,r=0,n=0){if(typeof DOMRect=="function")return new DOMRect(t,e,r,n);const i={x:t,y:e,width:r,height:n,top:e,right:t+r,bottom:e+n,left:t};return{...i,toJSON:()=>i}}function pz(t){if(!t)return GS();const{x:e,y:r,width:n,height:i}=t;return GS(e,r,n,i)}function gz(t,e){return{contextElement:Wt(t)?t:void 0,getBoundingClientRect:()=>{const r=t,n=e?.(r);return n||!r?pz(n):r.getBoundingClientRect()}}}var Cc=t=>({variable:t,reference:`var(${t})`}),Bi={arrowSize:Cc("--arrow-size"),arrowSizeHalf:Cc("--arrow-size-half"),arrowBg:Cc("--arrow-background"),transformOrigin:Cc("--transform-origin"),arrowOffset:Cc("--arrow-offset")},mz=t=>({top:"bottom center","top-start":t?`${t.x}px bottom`:"left bottom","top-end":t?`${t.x}px bottom`:"right bottom",bottom:"top center","bottom-start":t?`${t.x}px top`:"top left","bottom-end":t?`${t.x}px top`:"top right",left:"right center","left-start":t?`right ${t.y}px`:"right top","left-end":t?`right ${t.y}px`:"right bottom",right:"left center","right-start":t?`left ${t.y}px`:"left top","right-end":t?`left ${t.y}px`:"left bottom"}),yz={name:"transformOrigin",fn({placement:t,elements:e,middlewareData:r}){const{arrow:n}=r,i=mz(n)[t],{floating:s}=e;return s.style.setProperty(Bi.transformOrigin.variable,i),{data:{transformOrigin:i}}}},vz={name:"rects",fn({rects:t}){return{data:t}}},xz=t=>{if(t)return{name:"shiftArrow",fn({placement:e,middlewareData:r}){if(!r.arrow)return{};const{x:n,y:i}=r.arrow,s=e.split("-")[0];return Object.assign(t.style,{left:n!=null?`${n}px`:"",top:i!=null?`${i}px`:"",[s]:`calc(100% + ${Bi.arrowOffset.reference})`}),{}}}};function bz(t){const[e,r]=t.split("-");return{side:e,align:r,hasAlign:r!=null}}var _z={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function WS(t,e){const r=t.devicePixelRatio||1;return Math.round(e*r)/r}function rk(t){return ml(t.boundary)}function wz(t,e){if(t)return dz({element:t,padding:e.arrowPadding})}function Sz(t,e){if(!O3(e.offset??e.gutter))return oz(({placement:r})=>{const n=(t?.clientHeight||0)/2,i=e.offset?.mainAxis??e.gutter,s=typeof i=="number"?i+n:i??n,{hasAlign:o}=bz(r),a=o?void 0:e.shift,l=e.offset?.crossAxis??a;return pn({crossAxis:l,mainAxis:s,alignmentAxis:e.shift})})}function Ez(t){if(t.flip)return lz({boundary:rk(t),padding:t.overflowPadding,fallbackPlacements:t.flip===!0?void 0:t.flip})}function Cz(t){if(!(!t.slide&&!t.overlap))return az({boundary:rk(t),mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding,limiter:hz()})}function Tz(t){return cz({padding:t.overflowPadding,apply({elements:e,rects:r,availableHeight:n,availableWidth:i}){const s=e.floating,o=Math.round(r.reference.width);i=Math.floor(i),n=Math.floor(n),s.style.setProperty("--reference-width",`${o}px`),s.style.setProperty("--available-width",`${i}px`),s.style.setProperty("--available-height",`${n}px`)}})}function Pz(t){if(t.hideWhenDetached)return uz({strategy:"referenceHidden",boundary:t.boundary?.()??"clippingAncestors"})}function Iz(t){return t?t===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:t:{}}function Az(t,e,r={}){const n=gz(t,r.getAnchorRect);if(!e||!n)return;const i=Object.assign({},_z,r),s=e.querySelector("[data-part=arrow]"),o=[Sz(s,i),Ez(i),Cz(i),wz(s,i),xz(s),yz,Tz(i),Pz(i),vz],{placement:a,strategy:l,onComplete:c,onPositioned:u}=i,d=async()=>{if(!n||!e)return;const g=await fz(n,e,{placement:a,middleware:o,strategy:l});c?.(g),u?.({placed:!0});const x=Lt(e),v=WS(x,g.x),y=WS(x,g.y);e.style.setProperty("--x",`${v}px`),e.style.setProperty("--y",`${y}px`),i.hideWhenDetached&&(g.middlewareData.hide?.referenceHidden?(e.style.setProperty("visibility","hidden"),e.style.setProperty("pointer-events","none")):(e.style.removeProperty("visibility"),e.style.removeProperty("pointer-events")));const m=e.firstElementChild;if(m){const _=mB(m);e.style.setProperty("--z-index",_.zIndex)}},h=async()=>{r.updatePosition?(await r.updatePosition({updatePosition:d}),u?.({placed:!0})):await d()},f=Iz(i.listeners),p=i.listeners?sz(n,e,h,f):lA;return h(),()=>{p?.(),u?.({placed:!1})}}function Xf(t,e,r={}){const{defer:n,...i}=r,s=n?at:a=>a(),o=[];return o.push(s(()=>{const a=typeof t=="function"?t():t,l=typeof e=="function"?e():e;o.push(Az(a,l,i))})),()=>{o.forEach(a=>a?.())}}var kz={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function nk(t={}){const{placement:e,sameWidth:r,fitViewport:n,strategy:i="absolute"}=t;return{arrow:{position:"absolute",width:Bi.arrowSize.reference,height:Bi.arrowSize.reference,[Bi.arrowSizeHalf.variable]:`calc(${Bi.arrowSize.reference} / 2)`,[Bi.arrowOffset.variable]:`calc(${Bi.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:e?kz[e.split("-")[0]]:void 0,background:Bi.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:i,isolation:"isolate",minWidth:r?void 0:"max-content",width:r?"var(--reference-width)":void 0,maxWidth:n?"var(--available-width)":void 0,maxHeight:n?"var(--available-height)":void 0,top:"0px",left:"0px",transform:e?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}function Rz(t){const e={each(r){for(let n=0;n<t.frames?.length;n+=1){const i=t.frames[n];i&&r(i)}},addEventListener(r,n,i){return e.each(s=>{try{s.document.addEventListener(r,n,i)}catch{}}),()=>{try{e.removeEventListener(r,n,i)}catch{}}},removeEventListener(r,n,i){e.each(s=>{try{s.document.removeEventListener(r,n,i)}catch{}})}};return e}function Mz(t){const e=t.frameElement!=null?t.parent:null;return{addEventListener:(r,n,i)=>{try{e?.addEventListener(r,n,i)}catch{}return()=>{try{e?.removeEventListener(r,n,i)}catch{}}},removeEventListener:(r,n,i)=>{try{e?.removeEventListener(r,n,i)}catch{}}}}var HS="pointerdown.outside",XS="focus.outside";function Oz(t){for(const e of t)if(Wt(e)&&ju(e))return!0;return!1}var ik=t=>"clientY"in t;function Lz(t,e){if(!ik(e)||!t)return!1;const r=t.getBoundingClientRect();return r.width===0||r.height===0?!1:r.top<=e.clientY&&e.clientY<=r.top+r.height&&r.left<=e.clientX&&e.clientX<=r.left+r.width}function Dz(t,e){return t.y<=e.y&&e.y<=t.y+t.height&&t.x<=e.x&&e.x<=t.x+t.width}function YS(t,e){if(!e||!ik(t))return!1;const r=e.scrollHeight>e.clientHeight,n=r&&t.clientX>e.offsetLeft+e.clientWidth,i=e.scrollWidth>e.clientWidth,s=i&&t.clientY>e.offsetTop+e.clientHeight,o={x:e.offsetLeft,y:e.offsetTop,width:e.clientWidth+(r?16:0),height:e.clientHeight+(i?16:0)},a={x:t.clientX,y:t.clientY};return Dz(o,a)?n||s:!1}function Fz(t,e){const{exclude:r,onFocusOutside:n,onPointerDownOutside:i,onInteractOutside:s,defer:o}=e;if(!t)return;const a=zn(t),l=Lt(t),c=Rz(l),u=Mz(l);function d(v){const y=Ei(v);if(!Wt(y)||!y.isConnected||Qo(t,y)||Lz(t,v))return!1;const m=a.querySelector(`[aria-controls="${t.id}"]`);if(m){const C=Uf(m);if(YS(v,C))return!1}const _=Uf(t);return YS(v,_)?!1:!r?.(y)}const h=new Set;function f(v){function y(){const m=o?at:C=>C(),_=v.composedPath?.()??[v.target];m(()=>{if(!(!t||!d(v))){if(i||s){const C=$f(i,s);t.addEventListener(HS,C,{once:!0})}qS(t,HS,{bubbles:!1,cancelable:!0,detail:{originalEvent:v,contextmenu:EB(v),focusable:Oz(_)}})}})}v.pointerType==="touch"?(h.forEach(m=>m()),h.add(ct(a,"click",y,{once:!0})),h.add(u.addEventListener("click",y,{once:!0})),h.add(c.addEventListener("click",y,{once:!0}))):y()}const p=new Set,g=setTimeout(()=>{p.add(ct(a,"pointerdown",f,!0)),p.add(u.addEventListener("pointerdown",f,!0)),p.add(c.addEventListener("pointerdown",f,!0))},0);function x(v){(o?at:m=>m())(()=>{if(!(!t||!d(v))){if(n||s){const m=$f(n,s);t.addEventListener(XS,m,{once:!0})}qS(t,XS,{bubbles:!1,cancelable:!0,detail:{originalEvent:v,contextmenu:!1,focusable:ju(Ei(v))}})}})}return p.add(ct(a,"focusin",x,!0)),p.add(u.addEventListener("focusin",x,!0)),p.add(c.addEventListener("focusin",x,!0)),()=>{clearTimeout(g),h.forEach(v=>v()),p.forEach(v=>v())}}function Nz(t,e){const{defer:r}=e,n=r?at:s=>s(),i=[];return i.push(n(()=>{const s=typeof t=="function"?t():t;i.push(Fz(s,e))})),()=>{i.forEach(s=>s?.())}}function qS(t,e,r){const n=t.ownerDocument.defaultView||window,i=new n.CustomEvent(e,r);return t.dispatchEvent(i)}function Bz(t,e){const r=n=>{n.key==="Escape"&&(n.isComposing||e?.(n))};return ct(zn(t),"keydown",r,{capture:!0})}var Dr={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(t=>t.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(t){const e=this.indexOf(t),r=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return e<r},isTopMost(t){return this.layers[this.count()-1]?.node===t},getNestedLayers(t){return Array.from(this.layers).slice(this.indexOf(t)+1)},isInNestedLayer(t,e){return this.getNestedLayers(t).some(r=>Qo(r.node,e))},isInBranch(t){return Array.from(this.branches).some(e=>Qo(e,t))},add(t){const e=this.layers.push(t);t.node.style.setProperty("--layer-index",`${e}`)},addBranch(t){this.branches.push(t)},remove(t){const e=this.indexOf(t);e<0||(e<this.count()-1&&this.getNestedLayers(t).forEach(n=>n.dismiss()),this.layers.splice(e,1),t.style.removeProperty("--layer-index"))},removeBranch(t){const e=this.branches.indexOf(t);e>=0&&this.branches.splice(e,1)},indexOf(t){return this.layers.findIndex(e=>e.node===t)},dismiss(t){this.layers[this.indexOf(t)]?.dismiss()},clear(){this.remove(this.layers[0].node)}},KS;function ZS(){Dr.layers.forEach(({node:t})=>{t.style.pointerEvents=Dr.isBelowPointerBlockingLayer(t)?"none":"auto"})}function Uz(t){t.style.pointerEvents=""}function zz(t,e){const r=zn(t),n=[];if(Dr.hasPointerBlockingLayer()&&!r.body.hasAttribute("data-inert")&&(KS=document.body.style.pointerEvents,queueMicrotask(()=>{r.body.style.pointerEvents="none",r.body.setAttribute("data-inert","")})),e){const i=l3(e,s=>{n.push(n3(s,{pointerEvents:"auto"}))});n.push(i)}return()=>{Dr.hasPointerBlockingLayer()||(queueMicrotask(()=>{r.body.style.pointerEvents=KS,r.body.removeAttribute("data-inert"),r.body.style.length===0&&r.body.removeAttribute("style")}),n.forEach(i=>i()))}}function $z(t,e){if(!t){yl("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:r,pointerBlocking:n,exclude:i,debug:s}=e,o={dismiss:r,node:t,pointerBlocking:n};Dr.add(o),ZS();function a(h){const f=Ei(h.detail.originalEvent);Dr.isBelowPointerBlockingLayer(t)||Dr.isInBranch(f)||(e.onPointerDownOutside?.(h),e.onInteractOutside?.(h),!h.defaultPrevented&&(s&&console.log("onPointerDownOutside:",h.detail.originalEvent),r?.()))}function l(h){const f=Ei(h.detail.originalEvent);Dr.isInBranch(f)||(e.onFocusOutside?.(h),e.onInteractOutside?.(h),!h.defaultPrevented&&(s&&console.log("onFocusOutside:",h.detail.originalEvent),r?.()))}function c(h){Dr.isTopMost(t)&&(e.onEscapeKeyDown?.(h),!h.defaultPrevented&&r&&(h.preventDefault(),r()))}function u(h){if(!t)return!1;const f=typeof i=="function"?i():i,p=Array.isArray(f)?f:[f],g=e.persistentElements?.map(x=>x()).filter(Wt);return g&&p.push(...g),p.some(x=>Qo(x,h))||Dr.isInNestedLayer(t,h)}const d=[n?zz(t,e.persistentElements):void 0,Bz(t,c),Nz(t,{exclude:u,onFocusOutside:l,onPointerDownOutside:a,defer:e.defer})];return()=>{Dr.remove(t),ZS(),Uz(t),d.forEach(h=>h?.())}}function jz(t,e){const{defer:r}=e,n=r?at:s=>s(),i=[];return i.push(n(()=>{const s=zl(t)?t():t;i.push($z(s,e))})),()=>{n(()=>{i.forEach(s=>s?.())})}}function Vz(t,e={}){const{defer:r}=e,n=r?at:s=>s(),i=[];return i.push(n(()=>{const s=zl(t)?t():t;if(!s){yl("[@zag-js/dismissable] branch node is `null` or `undefined`");return}Dr.addBranch(s),i.push(()=>{Dr.removeBranch(s)})})),()=>{n(()=>{i.forEach(s=>s?.())})}}var sk=me("color-picker",["root","label","control","trigger","positioner","content","area","areaThumb","valueText","areaBackground","channelSlider","channelSliderLabel","channelSliderTrack","channelSliderThumb","channelSliderValueText","channelInput","transparencyGrid","swatchGroup","swatchTrigger","swatchIndicator","swatch","eyeDropperTrigger","formatTrigger","formatSelect"]);sk.build();var Ve=nt({getRootId:t=>t.ids?.root??`color-picker:${t.id}`,getLabelId:t=>t.ids?.label??`color-picker:${t.id}:label`,getHiddenInputId:t=>t.ids?.hiddenInput??`color-picker:${t.id}:hidden-input`,getControlId:t=>t.ids?.control??`color-picker:${t.id}:control`,getTriggerId:t=>t.ids?.trigger??`color-picker:${t.id}:trigger`,getContentId:t=>t.ids?.content??`color-picker:${t.id}:content`,getPositionerId:t=>t.ids?.positioner??`color-picker:${t.id}:positioner`,getFormatSelectId:t=>t.ids?.formatSelect??`color-picker:${t.id}:format-select`,getAreaId:t=>t.ids?.area??`color-picker:${t.id}:area`,getAreaGradientId:t=>t.ids?.areaGradient??`color-picker:${t.id}:area-gradient`,getAreaThumbId:t=>t.ids?.areaThumb??`color-picker:${t.id}:area-thumb`,getChannelSliderTrackId:(t,e)=>t.ids?.channelSliderTrack?.(e)??`color-picker:${t.id}:slider-track:${e}`,getChannelSliderThumbId:(t,e)=>t.ids?.channelSliderThumb?.(e)??`color-picker:${t.id}:slider-thumb:${e}`,getContentEl:t=>Ve.getById(t,Ve.getContentId(t)),getAreaThumbEl:t=>Ve.getById(t,Ve.getAreaThumbId(t)),getChannelSliderThumbEl:(t,e)=>Ve.getById(t,Ve.getChannelSliderThumbId(t,e)),getChannelInputEl:(t,e)=>{const r=`input[data-channel="${e}"]`;return[...An(Ve.getContentEl(t),r),...An(Ve.getControlEl(t),r)]},getFormatSelectEl:t=>Ve.getById(t,Ve.getFormatSelectId(t)),getHiddenInputEl:t=>Ve.getById(t,Ve.getHiddenInputId(t)),getAreaEl:t=>Ve.getById(t,Ve.getAreaId(t)),getAreaValueFromPoint(t,e){const r=Ve.getAreaEl(t);if(!r)return;const{percent:n}=Ov(e,r);return n},getControlEl:t=>Ve.getById(t,Ve.getControlId(t)),getTriggerEl:t=>Ve.getById(t,Ve.getTriggerId(t)),getPositionerEl:t=>Ve.getById(t,Ve.getPositionerId(t)),getChannelSliderTrackEl:(t,e)=>Ve.getById(t,Ve.getChannelSliderTrackId(t,e)),getChannelSliderValueFromPoint(t,e,r){const n=Ve.getChannelSliderTrackEl(t,r);if(!n)return;const{percent:i}=Ov(e,n);return i},getChannelInputEls:t=>[...An(Ve.getContentEl(t),"input[data-channel]"),...An(Ve.getControlEl(t),"input[data-channel]")]});const[ok,Gz]=hr({name:"RenderStrategyContext",hookName:"useRenderStrategyContext",providerName:"<RenderStrategyPropsProvider />"}),ak=t=>fr()(t,["lazyMount","unmountOnExit"]);var Qb=me("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger");Qb.build();var gr=nt({getPositionerId:t=>t.ids?.positioner??`dialog:${t.id}:positioner`,getBackdropId:t=>t.ids?.backdrop??`dialog:${t.id}:backdrop`,getContentId:t=>t.ids?.content??`dialog:${t.id}:content`,getTriggerId:t=>t.ids?.trigger??`dialog:${t.id}:trigger`,getTitleId:t=>t.ids?.title??`dialog:${t.id}:title`,getDescriptionId:t=>t.ids?.description??`dialog:${t.id}:description`,getCloseTriggerId:t=>t.ids?.closeTrigger??`dialog:${t.id}:close`,getContentEl:t=>gr.getById(t,gr.getContentId(t)),getPositionerEl:t=>gr.getById(t,gr.getPositionerId(t)),getBackdropEl:t=>gr.getById(t,gr.getBackdropId(t)),getTriggerEl:t=>gr.getById(t,gr.getTriggerId(t)),getTitleEl:t=>gr.getById(t,gr.getTitleId(t)),getDescriptionEl:t=>gr.getById(t,gr.getDescriptionId(t)),getCloseTriggerEl:t=>gr.getById(t,gr.getCloseTriggerId(t))});Ae()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);const[Wz,$n]=hr({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1});var lk=me("editable").parts("root","area","label","preview","input","editTrigger","submitTrigger","cancelTrigger","control");lk.build();var Yn=nt({getRootId:t=>t.ids?.root??`editable:${t.id}`,getAreaId:t=>t.ids?.area??`editable:${t.id}:area`,getLabelId:t=>t.ids?.label??`editable:${t.id}:label`,getPreviewId:t=>t.ids?.preview??`editable:${t.id}:preview`,getInputId:t=>t.ids?.input??`editable:${t.id}:input`,getControlId:t=>t.ids?.control??`editable:${t.id}:control`,getSubmitTriggerId:t=>t.ids?.submitTrigger??`editable:${t.id}:submit`,getCancelTriggerId:t=>t.ids?.cancelTrigger??`editable:${t.id}:cancel`,getEditTriggerId:t=>t.ids?.editTrigger??`editable:${t.id}:edit`,getInputEl:t=>Yn.getById(t,Yn.getInputId(t)),getPreviewEl:t=>Yn.getById(t,Yn.getPreviewId(t)),getSubmitTriggerEl:t=>Yn.getById(t,Yn.getSubmitTriggerId(t)),getCancelTriggerEl:t=>Yn.getById(t,Yn.getCancelTriggerId(t)),getEditTriggerEl:t=>Yn.getById(t,Yn.getEditTriggerId(t))});Ae()(["activationMode","autoResize","dir","disabled","finalFocusEl","form","getRootNode","id","ids","invalid","maxLength","name","onEditChange","onFocusOutside","onInteractOutside","onPointerDownOutside","onValueChange","onValueCommit","onValueRevert","placeholder","readOnly","required","selectOnFocus","edit","edit.controlled","submitMode","translations","value"]);const ck=w.forwardRef((t,e)=>{const r=$n(),n=ae(r.getErrorTextProps(),t);return r?.invalid?b.jsx(pe.span,{...n,ref:e}):null});ck.displayName="FieldErrorText";const uk=w.forwardRef((t,e)=>{const r=$n(),n=ae(r?.getHelperTextProps(),t);return b.jsx(pe.span,{...n,ref:e})});uk.displayName="FieldHelperText";const dk=w.forwardRef((t,e)=>{const r=$n(),n=ae(r?.getInputProps(),t);return b.jsx(pe.input,{...n,ref:e})});dk.displayName="FieldInput";const hk=w.forwardRef((t,e)=>{const r=$n(),n=ae(r?.getLabelProps(),t);return b.jsx(pe.label,{...n,ref:e})});hk.displayName="FieldLabel";const Hz=typeof window<"u"?w.useLayoutEffect:w.useEffect,[ote,Xz]=hr({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),fk=me("field").parts("root","errorText","helperText","input","label","select","textarea","requiredIndicator"),gs=fk.build(),Yz=t=>{const e=Xz(),{ids:r,disabled:n=!!e?.disabled,invalid:i=!1,readOnly:s=!1,required:o=!1}=t,a=w.useRef(!1),l=w.useRef(!1),c=t.id??w.useId(),u=w.useRef(null),d=r?.control??`field::${c}`,h=r?.errorText??`field::${c}::error-text`,f=r?.helperText??`field::${c}::helper-text`,p=r?.label??`field::${c}::label`;Hz(()=>{const P=u.current;if(!P)return;const I=Lt(P),M=I.document,k=()=>{a.current=!!M.getElementById(h),l.current=!!M.getElementById(f)};k();const R=new I.MutationObserver(k);return R.observe(P,{childList:!0,subtree:!0}),()=>R.disconnect()},[h,f]);const g=w.useMemo(()=>{const P=[];return a.current&&i&&P.push(h),l.current&&P.push(f),P.join(" ")||void 0},[i,h,f]),x=w.useMemo(()=>()=>({...gs.root.attrs,id:d,ref:u,role:"group","data-disabled":Q(n),"data-invalid":Q(i),"data-readonly":Q(s)}),[n,i,s,d]),v=w.useMemo(()=>()=>({...gs.label.attrs,id:p,"data-disabled":Q(n),"data-invalid":Q(i),"data-readonly":Q(s),htmlFor:c}),[n,i,s,c,p]),y=w.useMemo(()=>()=>({"aria-describedby":g,"aria-invalid":Bf(i),"data-invalid":Q(i),"data-required":Q(o),"data-readonly":Q(s),id:c,required:o,disabled:n,readOnly:s}),[g,i,o,s,c,n]),m=w.useMemo(()=>()=>({...y(),...gs.input.attrs}),[y]),_=w.useMemo(()=>()=>({...y(),...gs.textarea.attrs}),[y]),C=w.useMemo(()=>()=>({...y(),...gs.select.attrs}),[y]),E=w.useMemo(()=>()=>({id:f,...gs.helperText.attrs}),[f]),T=w.useMemo(()=>()=>({id:h,...gs.errorText.attrs,"aria-live":"polite"}),[h]),S=w.useMemo(()=>()=>({"aria-hidden":!0,...gs.requiredIndicator.attrs}),[]);return{ariaDescribedby:g,ids:{root:d,control:c,label:p,errorText:h,helperText:f},refs:{rootRef:u},disabled:n,invalid:i,readOnly:s,required:o,getLabelProps:v,getRootProps:x,getInputProps:m,getTextareaProps:_,getSelectProps:C,getHelperTextProps:E,getErrorTextProps:T,getRequiredIndicatorProps:S}},pk=w.forwardRef((t,e)=>{const[r,n]=fr()(t,["id","ids","disabled","invalid","readOnly","required"]),i=Yz(r),s=ae(i.getRootProps(),n);return b.jsx(Wz,{value:i,children:b.jsx(pe.div,{...s,ref:ud(e,i.refs.rootRef)})})});pk.displayName="FieldRoot";const gk=me("fieldset").parts("root","errorText","helperText","legend");gk.build();var mk=me("file-upload").parts("root","dropzone","item","itemDeleteTrigger","itemGroup","itemName","itemPreview","itemPreviewImage","itemSizeText","label","trigger","clearTrigger");mk.build();var Sa=nt({getRootId:t=>t.ids?.root??`file:${t.id}`,getDropzoneId:t=>t.ids?.dropzone??`file:${t.id}:dropzone`,getHiddenInputId:t=>t.ids?.hiddenInput??`file:${t.id}:input`,getTriggerId:t=>t.ids?.trigger??`file:${t.id}:trigger`,getLabelId:t=>t.ids?.label??`file:${t.id}:label`,getItemId:(t,e)=>t.ids?.item?.(e)??`file:${t.id}:item:${e}`,getItemNameId:(t,e)=>t.ids?.itemName?.(e)??`file:${t.id}:item-name:${e}`,getItemSizeTextId:(t,e)=>t.ids?.itemSizeText?.(e)??`file:${t.id}:item-size:${e}`,getItemPreviewId:(t,e)=>t.ids?.itemPreview?.(e)??`file:${t.id}:item-preview:${e}`,getRootEl:t=>Sa.getById(t,Sa.getRootId(t)),getHiddenInputEl:t=>Sa.getById(t,Sa.getHiddenInputId(t)),getDropzoneEl:t=>Sa.getById(t,Sa.getDropzoneId(t))});Ae()(["accept","allowDrop","capture","dir","directory","disabled","getRootNode","id","ids","locale","maxFiles","maxFileSize","minFileSize","name","invalid","onFileAccept","onFileReject","onFileChange","preventDocumentDrop","required","translations","validate"]);Ae()(["file"]);var yk=me("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem");yk.build();var Yt=nt({getTriggerId:t=>t.ids?.trigger??`menu:${t.id}:trigger`,getContextTriggerId:t=>t.ids?.contextTrigger??`menu:${t.id}:ctx-trigger`,getContentId:t=>t.ids?.content??`menu:${t.id}:content`,getArrowId:t=>t.ids?.arrow??`menu:${t.id}:arrow`,getPositionerId:t=>t.ids?.positioner??`menu:${t.id}:popper`,getGroupId:(t,e)=>t.ids?.group?.(e)??`menu:${t.id}:group:${e}`,getGroupLabelId:(t,e)=>t.ids?.groupLabel?.(e)??`menu:${t.id}:group-label:${e}`,getContentEl:t=>Yt.getById(t,Yt.getContentId(t)),getPositionerEl:t=>Yt.getById(t,Yt.getPositionerId(t)),getTriggerEl:t=>Yt.getById(t,Yt.getTriggerId(t)),getHighlightedItemEl:t=>t.highlightedValue?Yt.getById(t,t.highlightedValue):null,getArrowEl:t=>Yt.getById(t,Yt.getArrowId(t)),getElements:t=>{const r=`[role^="menuitem"][data-ownedby=${CSS.escape(Yt.getContentId(t))}]:not([data-disabled])`;return An(Yt.getContentEl(t),r)},getFirstEl:t=>Ub(Yt.getElements(t)),getLastEl:t=>zb(Yt.getElements(t)),getNextEl:(t,e)=>Db(Yt.getElements(t),t.highlightedValue,e??t.loopFocus),getPrevEl:(t,e)=>Fb(Yt.getElements(t),t.highlightedValue,e??t.loopFocus),getElemByKey:(t,e)=>zf(Yt.getElements(t),{state:t.typeaheadState,key:e,activeId:t.highlightedValue}),isTargetDisabled:t=>Wt(t)&&(t.dataset.disabled===""||t.hasAttribute("disabled")),isTriggerItem:t=>!!t?.getAttribute("role")?.startsWith("menuitem")&&!!t?.hasAttribute("aria-controls"),getOptionFromItemEl(t){return{id:t.id,name:t.dataset.name,value:t.dataset.value,valueText:t.dataset.valueText,type:t.dataset.type}}});Ae()(["anchorPoint","aria-label","closeOnSelect","composite","dir","getRootNode","highlightedValue","id","ids","loopFocus","navigate","onEscapeKeyDown","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","open.controlled","open","positioning","typeahead"]);Ae()(["closeOnSelect","disabled","value","valueText"]);Ae()(["htmlFor"]);Ae()(["id"]);Ae()(["disabled","valueText","closeOnSelect","type","value","checked","onCheckedChange"]);var vk=me("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger");vk.build();var mr=nt({getAnchorId:t=>t.ids?.anchor??`popover:${t.id}:anchor`,getTriggerId:t=>t.ids?.trigger??`popover:${t.id}:trigger`,getContentId:t=>t.ids?.content??`popover:${t.id}:content`,getPositionerId:t=>t.ids?.positioner??`popover:${t.id}:popper`,getArrowId:t=>t.ids?.arrow??`popover:${t.id}:arrow`,getTitleId:t=>t.ids?.title??`popover:${t.id}:title`,getDescriptionId:t=>t.ids?.description??`popover:${t.id}:desc`,getCloseTriggerId:t=>t.ids?.closeTrigger??`popover:${t.id}:close`,getAnchorEl:t=>mr.getById(t,mr.getAnchorId(t)),getTriggerEl:t=>mr.getById(t,mr.getTriggerId(t)),getContentEl:t=>mr.getById(t,mr.getContentId(t)),getPositionerEl:t=>mr.getById(t,mr.getPositionerId(t)),getTitleEl:t=>mr.getById(t,mr.getTitleId(t)),getDescriptionEl:t=>mr.getById(t,mr.getDescriptionId(t)),getFocusableEls:t=>kb(mr.getContentEl(t)),getFirstFocusableEl:t=>mr.getFocusableEls(t)[0]});Ae()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]);function qz(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function Kz(t){return!(t.metaKey||!jI()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}var Zz=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Qz(t,e,r){const n=r?Ei(r):null,i=Lt(n);return t=t||n instanceof i.HTMLInputElement&&!Zz.has(n?.type)||n instanceof i.HTMLTextAreaElement||n instanceof i.HTMLElement&&n.isContentEditable,!(t&&e==="keyboard"&&r instanceof i.KeyboardEvent&&!Reflect.has(Jz,r.key))}var da=null,Yv=new Set,fu=new Map,ea=!1,qv=!1,Jz={Tab:!0,Escape:!0};function hg(t,e){for(let r of Yv)r(t,e)}function Yf(t){ea=!0,Kz(t)&&(da="keyboard",hg("keyboard",t))}function tn(t){da="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(ea=!0,hg("pointer",t))}function xk(t){qz(t)&&(ea=!0,da="virtual")}function bk(t){const e=Ei(t);e===Lt(e)||e===zn(e)||(!ea&&!qv&&(da="virtual",hg("virtual",t)),ea=!1,qv=!1)}function _k(){ea=!1,qv=!0}function e$(t){if(typeof window>"u"||fu.get(Lt(t)))return;const e=Lt(t),r=zn(t);let n=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){da="virtual",hg("virtual",null),ea=!0,n.apply(this,arguments)},r.addEventListener("keydown",Yf,!0),r.addEventListener("keyup",Yf,!0),r.addEventListener("click",xk,!0),e.addEventListener("focus",bk,!0),e.addEventListener("blur",_k,!1),typeof e.PointerEvent<"u"?(r.addEventListener("pointerdown",tn,!0),r.addEventListener("pointermove",tn,!0),r.addEventListener("pointerup",tn,!0)):(r.addEventListener("mousedown",tn,!0),r.addEventListener("mousemove",tn,!0),r.addEventListener("mouseup",tn,!0)),e.addEventListener("beforeunload",()=>{t$(t)},{once:!0}),fu.set(e,{focus:n})}var t$=(t,e)=>{const r=Lt(t),n=zn(t);fu.has(r)&&(r.HTMLElement.prototype.focus=fu.get(r).focus,n.removeEventListener("keydown",Yf,!0),n.removeEventListener("keyup",Yf,!0),n.removeEventListener("click",xk,!0),r.removeEventListener("focus",bk,!0),r.removeEventListener("blur",_k,!1),typeof r.PointerEvent<"u"?(n.removeEventListener("pointerdown",tn,!0),n.removeEventListener("pointermove",tn,!0),n.removeEventListener("pointerup",tn,!0)):(n.removeEventListener("mousedown",tn,!0),n.removeEventListener("mousemove",tn,!0),n.removeEventListener("mouseup",tn,!0)),fu.delete(r))};function qf(){return da==="keyboard"}function wk(t={}){const{isTextInput:e,autoFocus:r,onChange:n,root:i}=t;e$(i),n?.({isFocusVisible:r||qf(),modality:da});const s=(o,a)=>{Qz(!!e,o,a)&&n?.({isFocusVisible:qf(),modality:o})};return Yv.add(s),()=>{Yv.delete(s)}}var Kv,Eo=new Map,r$=t=>t.getBoundingClientRect();function n$(t,e){const{scope:r="rect",getRect:n=r$,onChange:i}=e,s=i$({scope:r,getRect:n}),o=Eo.get(t);return o?(o.callbacks.push(i),i(n(t))):(Eo.set(t,{rect:{},callbacks:[i]}),Eo.size===1&&(Kv=requestAnimationFrame(s))),function(){const l=Eo.get(t);if(!l)return;const c=l.callbacks.indexOf(i);c>-1&&l.callbacks.splice(c,1),l.callbacks.length===0&&(Eo.delete(t),Eo.size===0&&cancelAnimationFrame(Kv))}}function i$(t){const{scope:e,getRect:r}=t,n=o$(e);return function i(){const s=[];Eo.forEach((o,a)=>{const l=r(a);n(o.rect,l)||(o.rect=l,s.push(o))}),s.forEach(o=>{o.callbacks.forEach(a=>a(o.rect))}),Kv=requestAnimationFrame(i)}}var Sk=(t,e)=>t.width===e.width&&t.height===e.height,Ek=(t,e)=>t.top===e.top&&t.left===e.left,s$=(t,e)=>Sk(t,e)&&Ek(t,e);function o$(t){return t==="size"?Sk:t==="position"?Ek:s$}var Jb=me("radio-group").parts("root","label","item","itemText","itemControl","indicator");Jb.build();var qt=nt({getRootId:t=>t.ids?.root??`radio-group:${t.id}`,getLabelId:t=>t.ids?.label??`radio-group:${t.id}:label`,getItemId:(t,e)=>t.ids?.item?.(e)??`radio-group:${t.id}:radio:${e}`,getItemHiddenInputId:(t,e)=>t.ids?.itemHiddenInput?.(e)??`radio-group:${t.id}:radio:input:${e}`,getItemControlId:(t,e)=>t.ids?.itemControl?.(e)??`radio-group:${t.id}:radio:control:${e}`,getItemLabelId:(t,e)=>t.ids?.itemLabel?.(e)??`radio-group:${t.id}:radio:label:${e}`,getIndicatorId:t=>t.ids?.indicator??`radio-group:${t.id}:indicator`,getRootEl:t=>qt.getById(t,qt.getRootId(t)),getItemHiddenInputEl:(t,e)=>qt.getById(t,qt.getItemHiddenInputId(t,e)),getIndicatorEl:t=>qt.getById(t,qt.getIndicatorId(t)),getFirstEnabledInputEl:t=>qt.getRootEl(t)?.querySelector("input:not(:disabled)"),getFirstEnabledAndCheckedInputEl:t=>qt.getRootEl(t)?.querySelector("input:not(:disabled):checked"),getInputEls:t=>{const r=`input[type=radio][data-ownedby='${CSS.escape(qt.getRootId(t))}']:not([disabled])`;return An(qt.getRootEl(t),r)},getActiveRadioEl:t=>{if(t.value)return qt.getById(t,qt.getItemId(t,t.value))},getOffsetRect:t=>({left:t?.offsetLeft??0,top:t?.offsetTop??0,width:t?.offsetWidth??0,height:t?.offsetHeight??0}),getRectById:(t,e)=>{const r=qt.getById(t,qt.getItemId(t,e));if(r)return qt.resolveRect(qt.getOffsetRect(r))},resolveRect:t=>({width:`${t.width}px`,height:`${t.height}px`,left:`${t.left}px`,top:`${t.top}px`})});Ae()(["dir","disabled","form","getRootNode","id","ids","name","onValueChange","orientation","readOnly","value"]);Ae()(["value","disabled","invalid"]);var Ck=me("rating-group").parts("root","label","item","control");Ck.build();var ms=nt({getRootId:t=>t.ids?.root??`rating:${t.id}`,getLabelId:t=>t.ids?.label??`rating:${t.id}:label`,getHiddenInputId:t=>t.ids?.hiddenInput??`rating:${t.id}:input`,getControlId:t=>t.ids?.control??`rating:${t.id}:control`,getItemId:(t,e)=>t.ids?.item?.(e)??`rating:${t.id}:item:${e}`,getRootEl:t=>ms.getById(t,ms.getRootId(t)),getControlEl:t=>ms.getById(t,ms.getControlId(t)),getRadioEl:(t,e=t.value)=>{const r=`[role=radio][aria-posinset='${Math.ceil(e)}']`;return ZB(ms.getControlEl(t),r)},getHiddenInputEl:t=>ms.getById(t,ms.getHiddenInputId(t)),dispatchChangeEvent:t=>{const e=ms.getHiddenInputEl(t);e&&HI(e,{value:t.value})}});Ae()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","required","readOnly","translations","value"]);Ae()(["index"]);var a$=Object.defineProperty,l$=(t,e,r)=>e in t?a$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c$=(t,e,r)=>l$(t,e+"",r),qh={itemToValue(t){return typeof t=="string"?t:Vo(t)&&uu(t,"value")?t.value:""},itemToString(t){return typeof t=="string"?t:Vo(t)&&uu(t,"label")?t.label:qh.itemToValue(t)},isItemDisabled(t){return Vo(t)&&uu(t,"disabled")?!!t.disabled:!1}},e_=class{constructor(t){this.options=t,c$(this,"items"),this.items=[...t.items]}isEqual(t){return dn(this.items,t.items)}setItems(t){this.items=Array.from(t)}getValues(t=this.items){return Array.from(t).map(e=>this.getItemValue(e)).filter(Boolean)}find(t){if(t==null)return null;const e=this.items.findIndex(r=>this.getItemValue(r)===t);return e!=null?this.items[e]:null}findMany(t){return Array.from(t).map(e=>this.find(e)).filter(Boolean)}at(t){return this.items[t]??null}sortFn(t,e){const r=this.indexOf(t),n=this.indexOf(e);return(r??0)-(n??0)}sort(t){return[...t].sort(this.sortFn.bind(this))}getItemValue(t){return t==null?null:this.options.itemToValue?.(t)??qh.itemToValue(t)}getItemDisabled(t){return t==null?!1:this.options.isItemDisabled?.(t)??qh.isItemDisabled(t)}stringifyItem(t){return t==null?null:this.options.itemToString?.(t)??qh.itemToString(t)}stringify(t){return t==null?null:this.stringifyItem(this.find(t))}stringifyItems(t,e=", "){return Array.from(t).map(r=>this.stringifyItem(r)).filter(Boolean).join(e)}stringifyMany(t,e){return this.stringifyItems(this.findMany(t),e)}has(t){return this.indexOf(t)!==-1}hasItem(t){return t==null?!1:this.has(this.getItemValue(t))}get size(){return this.items.length}get firstValue(){let t=0;for(;this.getItemDisabled(this.at(t));)t++;return this.getItemValue(this.at(t))}get lastValue(){let t=this.size-1;for(;this.getItemDisabled(this.at(t));)t--;return this.getItemValue(this.at(t))}getNextValue(t,e=1,r=!1){let n=this.indexOf(t);if(n===-1)return null;for(n=r?Math.min(n+e,this.size-1):n+e;n<=this.size&&this.getItemDisabled(this.at(n));)n++;return this.getItemValue(this.at(n))}getPreviousValue(t,e=1,r=!1){let n=this.indexOf(t);if(n===-1)return null;for(n=r?Math.max(n-e,0):n-e;n>=0&&this.getItemDisabled(this.at(n));)n--;return this.getItemValue(this.at(n))}indexOf(t){return t==null?-1:this.items.findIndex(e=>this.getItemValue(e)===t)}getByText(t,e){let r=e!=null?d$(this.items,this.indexOf(e)):this.items;return t.length===1&&(r=r.filter(i=>this.getItemValue(i)!==e)),r.find(i=>u$(this.stringifyItem(i),t))}search(t,e){const{state:r,currentValue:n,timeout:i=350}=e,s=r.keysSoFar+t,a=s.length>1&&Array.from(s).every(h=>h===s[0])?s[0]:s,l=this.getByText(a,n),c=this.getItemValue(l);function u(){clearTimeout(r.timer),r.timer=-1}function d(h){r.keysSoFar=h,u(),h!==""&&(r.timer=+setTimeout(()=>{d(""),u()},i))}return d(s),c}*[Symbol.iterator](){yield*this.items}insertBefore(t,e){const r=this.indexOf(t);r!==-1&&this.items.splice(r,0,e)}insertAfter(t,e){const r=this.indexOf(t);r!==-1&&this.items.splice(r+1,0,e)}reorder(t,e){if(t===-1||e===-1||t===e)return;const[r]=this.items.splice(t,1);this.items.splice(e,0,r)}json(){return{size:this.size,first:this.firstValue,last:this.lastValue}}},u$=(t,e)=>!!t?.toLowerCase().startsWith(e.toLowerCase()),d$=(t,e)=>t.map((r,n)=>t[(Math.max(e,0)+n)%t.length]);const Tm=t=>Ci(new e_(t)),[Tk,pr]=hr({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),Pk=w.forwardRef((t,e)=>{const r=pr(),n=ae(r.getClearTriggerProps(),t);return b.jsx(pe.button,{...n,ref:e})});Pk.displayName="SelectClearTrigger";const Ik=w.forwardRef((t,e)=>{const r=pr(),n=ag(),i=ae(r.getContentProps(),n.getPresenceProps(),t);return n.unmounted?null:b.jsx(pe.div,{...i,ref:ud(n.ref,e)})});Ik.displayName="SelectContent";const h$=t=>t.children(pr()),Ak=w.forwardRef((t,e)=>{const r=pr(),n=ae(r.getControlProps(),t);return b.jsx(pe.div,{...n,ref:e})});Ak.displayName="SelectControl";const kk=w.forwardRef((t,e)=>{const r=pr(),n=ae(r.getHiddenSelectProps(),t),i=r.value.length===0,s=$n();return b.jsxs(pe.select,{"aria-describedby":s?.ariaDescribedby,...n,ref:e,children:[i&&b.jsx("option",{value:""}),r.collection.items.map((o,a)=>b.jsx("option",{value:r.collection.getItemValue(o)??"",disabled:r.collection.getItemDisabled(o)},a))]})});kk.displayName="SelectHiddenSelect";const Rk=w.forwardRef((t,e)=>{const r=pr(),n=ae(r.getIndicatorProps(),t);return b.jsx(pe.div,{...n,ref:e})});Rk.displayName="SelectIndicator";const[f$,ate]=hr({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[p$,Mk]=hr({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),Ok=w.forwardRef((t,e)=>{const[r,n]=fr()(t,["item","persistFocus"]),i=pr(),s=ae(i.getItemProps(r),n),o=i.getItemState(r);return b.jsx(p$,{value:r,children:b.jsx(f$,{value:o,children:b.jsx(pe.div,{...s,ref:e})})})});Ok.displayName="SelectItem";const[g$,m$]=hr({name:"SelectItemGroupPropsContext",hookName:"useSelectItemGroupPropsContext",providerName:"<SelectItemGroupPropsProvider />"}),Lk=w.forwardRef((t,e)=>{const r=w.useId(),[n,i]=fr()(t,["id"]),s={id:r,...n},o=pr(),a=ae(o.getItemGroupProps(s),i);return b.jsx(g$,{value:s,children:b.jsx(pe.div,{...a,ref:e})})});Lk.displayName="SelectItemGroup";const Dk=w.forwardRef((t,e)=>{const r=pr(),n=m$(),i=ae(r.getItemGroupLabelProps({htmlFor:n.id}),t);return b.jsx(pe.div,{...i,ref:e})});Dk.displayName="SelectItemGroupLabel";const Fk=w.forwardRef((t,e)=>{const r=pr(),n=Mk(),i=ae(r.getItemIndicatorProps(n),t);return b.jsx(pe.div,{...i,ref:e})});Fk.displayName="SelectItemIndicator";const Nk=w.forwardRef((t,e)=>{const r=pr(),n=Mk(),i=ae(r.getItemTextProps(n),t);return b.jsx(pe.span,{...i,ref:e})});Nk.displayName="SelectItemText";const Bk=w.forwardRef((t,e)=>{const r=pr(),n=ae(r.getLabelProps(),t);return b.jsx(pe.label,{...n,ref:e})});Bk.displayName="SelectLabel";const Uk=w.forwardRef((t,e)=>{const r=pr(),n=ae(r.getPositionerProps(),t);return ag().unmounted?null:b.jsx(pe.div,{...n,ref:e})});Uk.displayName="SelectPositioner";var zk=me("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText"),ir=zk.build(),$k=t=>Ci(new e_(t));$k.empty=()=>Ci(new e_({items:[]}));var de=nt({getRootId:t=>t.ids?.root??`select:${t.id}`,getContentId:t=>t.ids?.content??`select:${t.id}:content`,getTriggerId:t=>t.ids?.trigger??`select:${t.id}:trigger`,getClearTriggerId:t=>t.ids?.clearTrigger??`select:${t.id}:clear-trigger`,getLabelId:t=>t.ids?.label??`select:${t.id}:label`,getControlId:t=>t.ids?.control??`select:${t.id}:control`,getItemId:(t,e)=>t.ids?.item?.(e)??`select:${t.id}:option:${e}`,getHiddenSelectId:t=>t.ids?.hiddenSelect??`select:${t.id}:select`,getPositionerId:t=>t.ids?.positioner??`select:${t.id}:positioner`,getItemGroupId:(t,e)=>t.ids?.itemGroup?.(e)??`select:${t.id}:optgroup:${e}`,getItemGroupLabelId:(t,e)=>t.ids?.itemGroupLabel?.(e)??`select:${t.id}:optgroup-label:${e}`,getHiddenSelectEl:t=>de.getById(t,de.getHiddenSelectId(t)),getContentEl:t=>de.getById(t,de.getContentId(t)),getControlEl:t=>de.getById(t,de.getControlId(t)),getTriggerEl:t=>de.getById(t,de.getTriggerId(t)),getClearTriggerEl:t=>de.getById(t,de.getClearTriggerId(t)),getPositionerEl:t=>de.getById(t,de.getPositionerId(t)),getHighlightedOptionEl(t){return t.highlightedValue?de.getById(t,de.getItemId(t,t.highlightedValue)):null}});function y$(t,e,r){const n=t.context.isDisabled,i=t.context.invalid,s=t.context.readOnly,o=t.context.isInteractive,a=t.context.composite,l=t.hasTag("open"),c=t.matches("focused"),u=t.context.highlightedValue,d=t.context.highlightedItem,h=t.context.selectedItems,f=t.context.isTypingAhead,p=t.context.collection,g=u?de.getItemId(t.context,u):void 0;function x(y){const m=p.getItemDisabled(y.item),_=p.getItemValue(y.item);return{value:_,disabled:!!(n||m),highlighted:u===_,selected:t.context.value.includes(_)}}const v=nk({...t.context.positioning,placement:t.context.currentPlacement});return{open:l,focused:c,empty:t.context.value.length===0,highlightedItem:d,highlightedValue:u,selectedItems:h,hasSelectedItems:t.context.hasSelectedItems,value:t.context.value,valueAsString:t.context.valueAsString,collection:p,multiple:!!t.context.multiple,disabled:!!n,setCollection(y){e({type:"COLLECTION.SET",value:y})},reposition(y={}){e({type:"POSITIONING.SET",options:y})},focus(){de.getTriggerEl(t.context)?.focus({preventScroll:!0})},setOpen(y){y!==l&&e(y?"OPEN":"CLOSE")},selectValue(y){e({type:"ITEM.SELECT",value:y})},setValue(y){e({type:"VALUE.SET",value:y})},selectAll(){e({type:"VALUE.SET",value:p.getValues()})},highlightValue(y){e({type:"HIGHLIGHTED_VALUE.SET",value:y})},clearValue(y){e(y?{type:"ITEM.CLEAR",value:y}:{type:"VALUE.CLEAR"})},getItemState:x,getRootProps(){return r.element({...ir.root.attrs,dir:t.context.dir,id:de.getRootId(t.context),"data-invalid":Q(i),"data-readonly":Q(s)})},getLabelProps(){return r.label({dir:t.context.dir,id:de.getLabelId(t.context),...ir.label.attrs,"data-disabled":Q(n),"data-invalid":Q(i),"data-readonly":Q(s),htmlFor:de.getHiddenSelectId(t.context),onClick(y){y.defaultPrevented||n||de.getTriggerEl(t.context)?.focus({preventScroll:!0})}})},getControlProps(){return r.element({...ir.control.attrs,dir:t.context.dir,id:de.getControlId(t.context),"data-state":l?"open":"closed","data-focus":Q(c),"data-disabled":Q(n),"data-invalid":Q(i)})},getValueTextProps(){return r.element({...ir.valueText.attrs,dir:t.context.dir,"data-disabled":Q(n),"data-invalid":Q(i),"data-focus":Q(c)})},getTriggerProps(){return r.button({id:de.getTriggerId(t.context),disabled:n,dir:t.context.dir,type:"button",role:"combobox","aria-controls":de.getContentId(t.context),"aria-expanded":l,"aria-haspopup":"listbox","data-state":l?"open":"closed","aria-invalid":i,"aria-labelledby":de.getLabelId(t.context),...ir.trigger.attrs,"data-disabled":Q(n),"data-invalid":Q(i),"data-readonly":Q(s),"data-placement":t.context.currentPlacement,"data-placeholder-shown":Q(!t.context.hasSelectedItems),onClick(y){o&&(y.defaultPrevented||e({type:"TRIGGER.CLICK"}))},onFocus(){e("TRIGGER.FOCUS")},onBlur(){e("TRIGGER.BLUR")},onKeyDown(y){if(y.defaultPrevented||!o)return;const _={ArrowUp(){e({type:"TRIGGER.ARROW_UP"})},ArrowDown(C){e({type:C.altKey?"OPEN":"TRIGGER.ARROW_DOWN"})},ArrowLeft(){e({type:"TRIGGER.ARROW_LEFT"})},ArrowRight(){e({type:"TRIGGER.ARROW_RIGHT"})},Home(){e({type:"TRIGGER.HOME"})},End(){e({type:"TRIGGER.END"})},Enter(){e({type:"TRIGGER.ENTER"})},Space(C){e(f?{type:"TRIGGER.TYPEAHEAD",key:C.key}:{type:"TRIGGER.ENTER"})}}[Mv(y,t.context)];if(_){_(y),y.preventDefault();return}zf.isValidEvent(y)&&(e({type:"TRIGGER.TYPEAHEAD",key:y.key}),y.preventDefault())}})},getIndicatorProps(){return r.element({...ir.indicator.attrs,dir:t.context.dir,"aria-hidden":!0,"data-state":l?"open":"closed","data-disabled":Q(n),"data-invalid":Q(i),"data-readonly":Q(s)})},getItemProps(y){const m=x(y);return r.element({id:de.getItemId(t.context,m.value),role:"option",...ir.item.attrs,dir:t.context.dir,"data-value":m.value,"aria-selected":m.selected,"data-state":m.selected?"checked":"unchecked","data-highlighted":Q(m.highlighted),"data-disabled":Q(m.disabled),"aria-disabled":Bf(m.disabled),onPointerMove(_){m.disabled||_.pointerType!=="mouse"||m.value!==t.context.highlightedValue&&e({type:"ITEM.POINTER_MOVE",value:m.value})},onClick(_){_.defaultPrevented||m.disabled||e({type:"ITEM.CLICK",src:"pointerup",value:m.value})},onPointerLeave(_){m.disabled||y.persistFocus||_.pointerType!=="mouse"||!t.previousEvent.type.includes("POINTER")||e({type:"ITEM.POINTER_LEAVE"})}})},getItemTextProps(y){const m=x(y);return r.element({...ir.itemText.attrs,"data-state":m.selected?"checked":"unchecked","data-disabled":Q(m.disabled),"data-highlighted":Q(m.highlighted)})},getItemIndicatorProps(y){const m=x(y);return r.element({"aria-hidden":!0,...ir.itemIndicator.attrs,"data-state":m.selected?"checked":"unchecked",hidden:!m.selected})},getItemGroupLabelProps(y){const{htmlFor:m}=y;return r.element({...ir.itemGroupLabel.attrs,id:de.getItemGroupLabelId(t.context,m),role:"group",dir:t.context.dir})},getItemGroupProps(y){const{id:m}=y;return r.element({...ir.itemGroup.attrs,"data-disabled":Q(n),id:de.getItemGroupId(t.context,m),"aria-labelledby":de.getItemGroupLabelId(t.context,m),dir:t.context.dir})},getClearTriggerProps(){return r.button({...ir.clearTrigger.attrs,id:de.getClearTriggerId(t.context),type:"button","aria-label":"Clear value","data-invalid":Q(i),disabled:n,hidden:!t.context.hasSelectedItems,dir:t.context.dir,onClick(y){y.defaultPrevented||e("CLEAR.CLICK")}})},getHiddenSelectProps(){return r.select({name:t.context.name,form:t.context.form,disabled:n,multiple:t.context.multiple,required:t.context.required,"aria-hidden":!0,id:de.getHiddenSelectId(t.context),defaultValue:t.context.multiple?t.context.value:t.context.value[0],style:ZI,tabIndex:-1,onFocus(){de.getTriggerEl(t.context)?.focus({preventScroll:!0})},"aria-labelledby":de.getLabelId(t.context)})},getPositionerProps(){return r.element({...ir.positioner.attrs,dir:t.context.dir,id:de.getPositionerId(t.context),style:v.floating})},getContentProps(){return r.element({hidden:!l,dir:t.context.dir,id:de.getContentId(t.context),role:a?"listbox":"dialog",...ir.content.attrs,"data-state":l?"open":"closed","data-placement":t.context.currentPlacement,"data-activedescendant":g,"aria-activedescendant":a?g:void 0,"aria-multiselectable":t.context.multiple&&a?!0:void 0,"aria-labelledby":de.getLabelId(t.context),tabIndex:0,onKeyDown(y){if(!o||!VI(y))return;if(y.key==="Tab"&&!jB(y)){y.preventDefault();return}const m={ArrowUp(){e({type:"CONTENT.ARROW_UP"})},ArrowDown(){e({type:"CONTENT.ARROW_DOWN"})},Home(){e({type:"CONTENT.HOME"})},End(){e({type:"CONTENT.END"})},Enter(){e({type:"ITEM.CLICK",src:"keydown.enter"})},Space(E){f?e({type:"CONTENT.TYPEAHEAD",key:E.key}):m.Enter?.(E)}},_=m[Mv(y)];if(_){_(y),y.preventDefault();return}const C=Ei(y);hB(C)||zf.isValidEvent(y)&&(e({type:"CONTENT.TYPEAHEAD",key:y.key}),y.preventDefault())}})},getListProps(){return r.element({...ir.list.attrs,tabIndex:0,role:a?void 0:"listbox","aria-labelledby":de.getTriggerId(t.context),"aria-activedescendant":a?void 0:g,"aria-multiselectable":!a&&t.context.multiple?!0:void 0})}}}var{and:Tc,not:ho,or:v$}=tc;function x$(t){const e=pn(t);return to({id:"select",context:{value:[],highlightedValue:null,loopFocus:!1,closeOnSelect:!e.multiple,disabled:!1,readOnly:!1,composite:!0,...e,highlightedItem:null,selectedItems:[],valueAsString:"",collection:e.collection??$k.empty(),typeahead:zf.defaultOptions,fieldsetDisabled:!1,positioning:{placement:"bottom-start",gutter:8,...e.positioning}},computed:{hasSelectedItems:r=>r.value.length>0,isTypingAhead:r=>r.typeahead.keysSoFar!=="",isDisabled:r=>!!r.disabled||r.fieldsetDisabled,isInteractive:r=>!(r.isDisabled||r.readOnly)},initial:e.open?"open":"idle",created:["syncCollection"],entry:["syncSelectElement"],watch:{open:["toggleVisibility"],value:["syncSelectedItems","syncSelectElement"],highlightedValue:["syncHighlightedItem"],collection:["syncCollection"]},on:{"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"VALUE.CLEAR":{actions:["clearSelectedItems"]},"CLEAR.CLICK":{actions:["clearSelectedItems","focusTriggerEl"]},"COLLECTION.SET":{actions:["setCollection"]}},activities:["trackFormControlState"],states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{target:"open",actions:["setInitialFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus","highlightFirstSelectedItem"]}],"TRIGGER.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}]}},focused:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{guard:"isTriggerArrowUpEvent",target:"open",actions:["setInitialFocus","highlightComputedLastItem"]},{guard:v$("isTriggerArrowDownEvent","isTriggerEnterEvent"),target:"open",actions:["setInitialFocus","highlightComputedFirstItem"]},{target:"open",actions:["setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}],"TRIGGER.BLUR":{target:"idle"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightFirstSelectedItem"]}],"TRIGGER.ENTER":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_UP":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedLastItem"]}],"TRIGGER.ARROW_DOWN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_LEFT":[{guard:Tc(ho("multiple"),"hasSelectedItems"),actions:["selectPreviousItem"]},{guard:ho("multiple"),actions:["selectLastItem"]}],"TRIGGER.ARROW_RIGHT":[{guard:Tc(ho("multiple"),"hasSelectedItems"),actions:["selectNextItem"]},{guard:ho("multiple"),actions:["selectFirstItem"]}],"TRIGGER.HOME":{guard:ho("multiple"),actions:["selectFirstItem"]},"TRIGGER.END":{guard:ho("multiple"),actions:["selectLastItem"]},"TRIGGER.TYPEAHEAD":{guard:ho("multiple"),actions:["selectMatchingItem"]}}},open:{tags:["open"],exit:["scrollContentToTop"],activities:["trackDismissableElement","computePlacement","scrollToHighlightedItem"],on:{"CONTROLLED.CLOSE":{target:"focused",actions:["focusTriggerEl","clearHighlightedItem"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","focusTriggerEl","clearHighlightedItem"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","clearHighlightedItem"]}],"ITEM.CLICK":[{guard:Tc("closeOnSelect","isOpenControlled"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{actions:["selectHighlightedItem"]}],"CONTENT.HOME":{actions:["highlightFirstItem"]},"CONTENT.END":{actions:["highlightLastItem"]},"CONTENT.ARROW_DOWN":[{guard:Tc("hasHighlightedItem","loop","isLastItemHighlighted"),actions:["highlightFirstItem"]},{guard:"hasHighlightedItem",actions:["highlightNextItem"]},{actions:["highlightFirstItem"]}],"CONTENT.ARROW_UP":[{guard:Tc("hasHighlightedItem","loop","isFirstItemHighlighted"),actions:["highlightLastItem"]},{guard:"hasHighlightedItem",actions:["highlightPreviousItem"]},{actions:["highlightLastItem"]}],"CONTENT.TYPEAHEAD":{actions:["highlightMatchingItem"]},"ITEM.POINTER_MOVE":{actions:["highlightItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"POSITIONING.SET":{actions:["reposition"]}}}}},{guards:{loop:r=>!!r.loopFocus,multiple:r=>!!r.multiple,hasSelectedItems:r=>!!r.hasSelectedItems,hasHighlightedItem:r=>r.highlightedValue!=null,isFirstItemHighlighted:r=>r.highlightedValue===r.collection.firstValue,isLastItemHighlighted:r=>r.highlightedValue===r.collection.lastValue,closeOnSelect:(r,n)=>!!(n.closeOnSelect??r.closeOnSelect),isOpenControlled:r=>!!r["open.controlled"],isTriggerClickEvent:(r,n)=>n.previousEvent?.type==="TRIGGER.CLICK",isTriggerEnterEvent:(r,n)=>n.previousEvent?.type==="TRIGGER.ENTER",isTriggerArrowUpEvent:(r,n)=>n.previousEvent?.type==="TRIGGER.ARROW_UP",isTriggerArrowDownEvent:(r,n)=>n.previousEvent?.type==="TRIGGER.ARROW_DOWN"},activities:{trackFormControlState(r,n,{initialContext:i}){return Ib(de.getHiddenSelectEl(r),{onFieldsetDisabledChange(s){r.fieldsetDisabled=s},onFormReset(){it.selectedItems(r,i.value)}})},trackDismissableElement(r,n,{send:i}){const s=()=>de.getContentEl(r);let o=!0;return jz(s,{defer:!0,exclude:[de.getTriggerEl(r),de.getClearTriggerEl(r)],onFocusOutside:r.onFocusOutside,onPointerDownOutside:r.onPointerDownOutside,onInteractOutside(a){r.onInteractOutside?.(a),o=!(a.detail.focusable||a.detail.contextmenu)},onDismiss(){i({type:"CLOSE",src:"interact-outside",restoreFocus:o})}})},computePlacement(r){return r.currentPlacement=r.positioning.placement,Xf(()=>de.getTriggerEl(r),()=>de.getPositionerEl(r),{defer:!0,...r.positioning,onComplete(s){r.currentPlacement=s.placement}})},scrollToHighlightedItem(r,n,{getState:i}){const s=a=>{if(r.highlightedValue==null||i().event.type.includes("POINTER"))return;const c=de.getHighlightedOptionEl(r),u=de.getContentEl(r);if(r.scrollToIndexFn){const d=r.collection.indexOf(r.highlightedValue);r.scrollToIndexFn({index:d,immediate:a});return}YB(c,{rootEl:u,block:"nearest"})};return at(()=>s(!0)),YI(()=>de.getContentEl(r),{defer:!0,attributes:["data-activedescendant"],callback(){s(!1)}})}},actions:{reposition(r,n){const i=()=>de.getPositionerEl(r);Xf(de.getTriggerEl(r),i,{...r.positioning,...n.options,defer:!0,listeners:!1,onComplete(s){r.currentPlacement=s.placement}})},toggleVisibility(r,n,{send:i}){i({type:r.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})},highlightPreviousItem(r){if(r.highlightedValue==null)return;const n=r.collection.getPreviousValue(r.highlightedValue);it.highlightedItem(r,n)},highlightNextItem(r){if(r.highlightedValue==null)return;const n=r.collection.getNextValue(r.highlightedValue);it.highlightedItem(r,n)},highlightFirstItem(r){const n=r.collection.firstValue;it.highlightedItem(r,n)},highlightLastItem(r){const n=r.collection.lastValue;it.highlightedItem(r,n)},setInitialFocus(r){at(()=>{$B({root:de.getContentEl(r)})?.focus({preventScroll:!0})})},focusTriggerEl(r,n){const i=n.restoreFocus??n.previousEvent?.restoreFocus;i!=null&&!i||at(()=>{de.getTriggerEl(r)?.focus({preventScroll:!0})})},selectHighlightedItem(r,n){let i=n.value??r.highlightedValue;if(i==null)return;const s=r.deselectable&&!r.multiple&&r.value.includes(i);i=s?null:i,it.selectedItem(r,i,s)},highlightComputedFirstItem(r){const n=r.hasSelectedItems?r.collection.sort(r.value)[0]:r.collection.firstValue;it.highlightedItem(r,n)},highlightComputedLastItem(r){const n=r.hasSelectedItems?r.collection.sort(r.value)[0]:r.collection.lastValue;it.highlightedItem(r,n)},highlightFirstSelectedItem(r){if(!r.hasSelectedItems)return;const[n]=r.collection.sort(r.value);it.highlightedItem(r,n)},highlightItem(r,n){it.highlightedItem(r,n.value)},highlightMatchingItem(r,n){const i=r.collection.search(n.key,{state:r.typeahead,currentValue:r.highlightedValue});i!=null&&it.highlightedItem(r,i)},setHighlightedItem(r,n){it.highlightedItem(r,n.value)},clearHighlightedItem(r){it.highlightedItem(r,null,!0)},selectItem(r,n){const i=r.deselectable&&!r.multiple&&r.value.includes(n.value),s=i?null:n.value;it.selectedItem(r,s,i)},clearItem(r,n){const i=r.value.filter(s=>s!==n.value);it.selectedItems(r,i)},setSelectedItems(r,n){it.selectedItems(r,n.value)},clearSelectedItems(r){it.selectedItems(r,[])},selectPreviousItem(r){const n=r.collection.getPreviousValue(r.value[0]);it.selectedItem(r,n)},selectNextItem(r){const n=r.collection.getNextValue(r.value[0]);it.selectedItem(r,n)},selectFirstItem(r){const n=r.collection.firstValue;it.selectedItem(r,n)},selectLastItem(r){const n=r.collection.lastValue;it.selectedItem(r,n)},selectMatchingItem(r,n){const i=r.collection.search(n.key,{state:r.typeahead,currentValue:r.value[0]});i!=null&&it.selectedItem(r,i)},scrollContentToTop(r){r.scrollToIndexFn?r.scrollToIndexFn({index:0,immediate:!0}):de.getContentEl(r)?.scrollTo(0,0)},invokeOnOpen(r){r.onOpenChange?.({open:!0})},invokeOnClose(r){r.onOpenChange?.({open:!1})},syncSelectElement(r){const n=de.getHiddenSelectEl(r);if(n){if(r.value.length===0&&!r.multiple){n.selectedIndex=-1;return}for(const i of n.options)i.selected=r.value.includes(i.value)}},setCollection(r,n){r.collection=n.value},syncCollection(r){const n=r.collection.findMany(r.value),i=r.collection.stringifyItems(n);r.highlightedItem=r.collection.find(r.highlightedValue),r.selectedItems=n,r.valueAsString=i},syncSelectedItems(r){Kf.valueChange(r)},syncHighlightedItem(r){Kf.highlightChange(r)}}})}function b$(t){at(()=>{const e=de.getHiddenSelectEl(t);if(!e)return;const r=de.getWin(t),n=new r.Event("change",{bubbles:!0,composed:!0});e.dispatchEvent(n)})}var Kf={valueChange:t=>{const e=t.selectedItems;t.selectedItems=t.value.map(r=>{const n=e.find(i=>t.collection.getItemValue(i)===r);return n||t.collection.find(r)}),t.valueAsString=t.collection.stringifyItems(t.selectedItems)},highlightChange:t=>{t.highlightedItem=t.collection.find(t.highlightedValue)}},Wd={valueChange:t=>{Kf.valueChange(t),t.onValueChange?.({value:Array.from(t.value),items:Array.from(t.selectedItems)}),b$(t)},highlightChange:t=>{Kf.highlightChange(t),t.onHighlightChange?.({highlightedValue:t.highlightedValue,highlightedItem:t.highlightedItem,highlightedIndex:t.collection.indexOf(t.highlightedValue)})}},it={selectedItem:(t,e,r=!1)=>{if(!dn(t.value,e)&&!(e==null&&!r)){if(e==null&&r){t.value=[],Wd.valueChange(t);return}t.value=t.multiple?A3(t.value,e):[e],Wd.valueChange(t)}},selectedItems:(t,e)=>{dn(t.value,e)||(t.value=e,Wd.valueChange(t))},highlightedItem:(t,e,r=!1)=>{dn(t.highlightedValue,e)||e==null&&!r||(t.highlightedValue=e??null,Wd.highlightChange(t))}};Ae()(["closeOnSelect","collection","dir","disabled","deselectable","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open.controlled","open","composite","positioning","required","readOnly","scrollToIndexFn","value"]);Ae()(["item","persistFocus"]);Ae()(["id"]);Ae()(["htmlFor"]);const _$=t=>{const{collection:e,...r}=t,n=cd(),i=nc(),s=$n(),o={id:w.useId(),ids:{label:s?.ids.label,hiddenSelect:s?.ids.control},disabled:s?.disabled,readOnly:s?.readOnly,invalid:s?.invalid,required:s?.required,dir:n.dir,getRootNode:i.getRootNode,collection:e,open:t.defaultOpen,value:t.defaultValue,"open.controlled":t.open!==void 0,...r},a=(()=>{const{collection:d,...h}=o;return{...h,value:t.value,onValueChange:On(t.onValueChange,{sync:!0}),onHighlightChange:On(t.onHighlightChange),onOpenChange:On(t.onOpenChange)}})(),[l,c,u]=ua(x$(o),{context:a});return w.useEffect(()=>{u.setContext({collection:e})},[e]),y$(l,c,ro)},w$=(t,e)=>{const[r,n]=og(t),[i,s]=fr()(n,["closeOnSelect","collection","composite","defaultOpen","defaultValue","deselectable","disabled","form","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]),o=_$(i),a=dd(ae({present:o.open},r)),l=ae(o.getRootProps(),s);return b.jsx(Tk,{value:o,children:b.jsx(hd,{value:a,children:b.jsx(pe.div,{...l,ref:e})})})},S$=w.forwardRef(w$),E$=(t,e)=>{const[r,n]=og(t),[{value:i},s]=fr()(n,["value"]),o=dd(ae({present:i.open},r)),a=ae(i.getRootProps(),s);return b.jsx(Tk,{value:i,children:b.jsx(hd,{value:o,children:b.jsx(pe.div,{...a,ref:e})})})},C$=w.forwardRef(E$),jk=w.forwardRef((t,e)=>{const r=pr(),n=ae(r.getTriggerProps(),t);return b.jsx(pe.button,{...n,ref:e})});jk.displayName="SelectTrigger";const Vk=w.forwardRef((t,e)=>{const{children:r,placeholder:n,...i}=t,s=pr(),o=ae(s.getValueTextProps(),i);return b.jsx(pe.span,{...o,ref:e,children:r||s.valueAsString||n})});Vk.displayName="SelectValueText";var Gk=me("slider").parts("root","label","thumb","valueText","track","range","control","markerGroup","marker","draggingIndicator");Gk.build();function T$(t){const e=t[0],r=t[t.length-1];return[e,r]}function P$(t){const[e,r]=T$(t.valuePercent);if(t.valuePercent.length===1){if(t.origin==="center"){const n=t.valuePercent[0]<50,i=n?`${t.valuePercent[0]}%`:"50%",s=n?"50%":`${100-t.valuePercent[0]}%`;return{start:i,end:s}}return{start:"0%",end:`${100-r}%`}}return{start:`${e}%`,end:`${100-r}%`}}function I$(t){return t.isVertical?{position:"absolute",bottom:"var(--slider-range-start)",top:"var(--slider-range-end)"}:{position:"absolute",[t.isRtl?"right":"left"]:"var(--slider-range-start)",[t.isRtl?"left":"right"]:"var(--slider-range-end)"}}function A$(t){const{height:e=0}=t.thumbSize??{},r=Uv([t.min,t.max],[-e/2,e/2]);return parseFloat(r(t.value).toFixed(2))}function k$(t){const{width:e=0}=t.thumbSize??{};if(t.isRtl){const n=Uv([t.max,t.min],[-e/2,e/2]);return-1*parseFloat(n(t.value).toFixed(2))}const r=Uv([t.min,t.max],[-e/2,e/2]);return parseFloat(r(t.value).toFixed(2))}function R$(t,e){if(t.thumbAlignment==="center")return`${e}%`;const r=t.isVertical?A$(t):k$(t);return`calc(${e}% - ${r}px)`}function Wk(t){let e=H3(t.value,t.min,t.max)*100;return R$(t,e)}function Hk(t){let e="visible";return t.thumbAlignment==="contain"&&!t.hasMeasuredThumbSize&&(e="hidden"),e}function M$(t,e){const r=t.isVertical?"bottom":"insetInlineStart";return{visibility:Hk(t),position:"absolute",transform:"var(--slider-thumb-transform)",[r]:`var(--slider-thumb-offset-${e})`}}function O$(){return{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",position:"relative"}}function L$(t){const e=P$(t);return{...t.value.reduce((n,i,s)=>{const o=Wk({...t,value:i});return{...n,[`--slider-thumb-offset-${s}`]:o}},{}),"--slider-thumb-transform":t.isVertical?"translateY(50%)":t.isRtl?"translateX(50%)":"translateX(-50%)","--slider-range-start":e.start,"--slider-range-end":e.end}}function D$(t,e){return{visibility:Hk(t),position:"absolute",pointerEvents:"none",[t.isHorizontal?"insetInlineStart":"bottom"]:Wk({...t,value:e}),translate:"var(--tx) var(--ty)","--tx":t.isHorizontal?t.isRtl?"50%":"-50%":"0%","--ty":t.isHorizontal?"0%":"50%"}}function F$(){return{userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",position:"relative"}}var N$={getRootStyle:L$,getControlStyle:O$,getThumbStyle:M$,getRangeStyle:I$,getMarkerStyle:D$,getMarkerGroupStyle:F$},yr=nt({...N$,getRootId:t=>t.ids?.root??`slider:${t.id}`,getThumbId:(t,e)=>t.ids?.thumb?.(e)??`slider:${t.id}:thumb:${e}`,getHiddenInputId:(t,e)=>t.ids?.hiddenInput?.(e)??`slider:${t.id}:input:${e}`,getControlId:t=>t.ids?.control??`slider:${t.id}:control`,getTrackId:t=>t.ids?.track??`slider:${t.id}:track`,getRangeId:t=>t.ids?.range??`slider:${t.id}:range`,getLabelId:t=>t.ids?.label??`slider:${t.id}:label`,getValueTextId:t=>t.ids?.valueText??`slider:${t.id}:value-text`,getMarkerId:(t,e)=>t.ids?.marker?.(e)??`slider:${t.id}:marker:${e}`,getRootEl:t=>yr.getById(t,yr.getRootId(t)),getThumbEl:(t,e)=>yr.getById(t,yr.getThumbId(t,e)),getHiddenInputEl:(t,e)=>yr.getById(t,yr.getHiddenInputId(t,e)),getControlEl:t=>yr.getById(t,yr.getControlId(t)),getElements:t=>An(yr.getControlEl(t),"[role=slider]"),getFirstEl:t=>yr.getElements(t)[0],getRangeEl:t=>yr.getById(t,yr.getRangeId(t)),getValueFromPoint(t,e){const r=yr.getControlEl(t);if(!r)return;const i=Ov(e,r).getPercentValue({orientation:t.orientation,dir:t.dir,inverted:{y:!0}});return X3(i,t.min,t.max,t.step)},dispatchChangeEvent(t){Array.from(t.value).forEach((r,n)=>{const i=yr.getHiddenInputEl(t,n);i&&HI(i,{value:r})})}});Ae()(["aria-label","aria-labelledby","dir","disabled","form","getAriaValueText","getRootNode","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value"]);Ae()(["index","name"]);const[Xk,oc]=hr({name:"SwitchContext",hookName:"useSwitchContext",providerName:"<SwitchProvider />"}),Yk=w.forwardRef((t,e)=>{const r=oc(),n=ae(r.getControlProps(),t);return b.jsx(pe.span,{...n,ref:e})});Yk.displayName="SwitchControl";const qk=w.forwardRef((t,e)=>{const r=oc(),n=ae(r.getHiddenInputProps(),t),i=$n();return b.jsx(pe.input,{"aria-describedby":i?.ariaDescribedby,...n,ref:e})});qk.displayName="SwitchHiddenInput";const Kk=w.forwardRef((t,e)=>{const r=oc(),n=ae(r.getLabelProps(),t);return b.jsx(pe.span,{...n,ref:e})});Kk.displayName="SwitchLabel";var Zk=me("switch").parts("root","label","control","thumb"),Hd=Zk.build(),kt=nt({getRootId:t=>t.ids?.root??`switch:${t.id}`,getLabelId:t=>t.ids?.label??`switch:${t.id}:label`,getThumbId:t=>t.ids?.thumb??`switch:${t.id}:thumb`,getControlId:t=>t.ids?.control??`switch:${t.id}:control`,getHiddenInputId:t=>t.ids?.hiddenInput??`switch:${t.id}:input`,getRootEl:t=>kt.getById(t,kt.getRootId(t)),getHiddenInputEl:t=>kt.getById(t,kt.getHiddenInputId(t))});function B$(t,e,r){const n=t.context.isDisabled,i=t.context.readOnly,s=t.context.checked,o=!n&&t.context.focused,a=!n&&t.context.focusVisible,l={"data-active":Q(t.context.active),"data-focus":Q(o),"data-focus-visible":Q(a),"data-readonly":Q(i),"data-hover":Q(t.context.hovered),"data-disabled":Q(n),"data-state":t.context.checked?"checked":"unchecked","data-invalid":Q(t.context.invalid)};return{checked:s,disabled:n,focused:o,setChecked(c){e({type:"CHECKED.SET",checked:c,isTrusted:!1})},toggleChecked(){e({type:"CHECKED.TOGGLE",checked:s,isTrusted:!1})},getRootProps(){return r.label({...Hd.root.attrs,...l,dir:t.context.dir,id:kt.getRootId(t.context),htmlFor:kt.getHiddenInputId(t.context),onPointerMove(){n||e({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){n||e({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(c){if(n)return;Ei(c)===kt.getHiddenInputEl(t.context)&&c.stopPropagation()}})},getLabelProps(){return r.element({...Hd.label.attrs,...l,dir:t.context.dir,id:kt.getLabelId(t.context)})},getThumbProps(){return r.element({...Hd.thumb.attrs,...l,dir:t.context.dir,id:kt.getThumbId(t.context),"aria-hidden":!0})},getControlProps(){return r.element({...Hd.control.attrs,...l,dir:t.context.dir,id:kt.getControlId(t.context),"aria-hidden":!0})},getHiddenInputProps(){return r.input({id:kt.getHiddenInputId(t.context),type:"checkbox",required:t.context.required,defaultChecked:s,disabled:n,"aria-labelledby":kt.getLabelId(t.context),"aria-invalid":t.context.invalid,name:t.context.name,form:t.context.form,value:t.context.value,style:ZI,onFocus(){const c=qf();e({type:"CONTEXT.SET",context:{focused:!0,focusVisible:c}})},onBlur(){e({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(c){if(i){c.preventDefault();return}const u=c.currentTarget.checked;e({type:"CHECKED.SET",checked:u,isTrusted:!0})}})}}}var{not:QS}=tc;function U$(t){const e=pn(t);return to({id:"switch",initial:"ready",context:{checked:!1,label:"switch",value:"on",disabled:!1,...e,fieldsetDisabled:!1,focusVisible:!1},computed:{isDisabled:r=>r.disabled||r.fieldsetDisabled},watch:{disabled:"removeFocusIfNeeded",checked:"syncInputElement"},activities:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:QS("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:QS("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}}},{guards:{isTrusted:(r,n)=>!!n.isTrusted},activities:{trackPressEvent(r){if(!r.isDisabled)return KB({pointerNode:kt.getRootEl(r),keyboardNode:kt.getHiddenInputEl(r),isValidKey:n=>n.key===" ",onPress:()=>r.active=!1,onPressStart:()=>r.active=!0,onPressEnd:()=>r.active=!1})},trackFocusVisible(r){if(!r.isDisabled)return wk({root:kt.getRootNode(r)})},trackFormControlState(r,n,{send:i,initialContext:s}){return Ib(kt.getHiddenInputEl(r),{onFieldsetDisabledChange(o){r.fieldsetDisabled=o},onFormReset(){i({type:"CHECKED.SET",checked:!!s.checked,src:"form-reset"})}})}},actions:{setContext(r,n){Object.assign(r,n.context)},syncInputElement(r){const n=kt.getHiddenInputEl(r);n&&(n.checked=!!r.checked)},removeFocusIfNeeded(r){r.disabled&&r.focused&&(r.focused=!1)},setChecked(r,n){JS.checked(r,n.checked)},toggleChecked(r,n){JS.checked(r,!r.checked)},dispatchChangeEvent(r){const n=kt.getHiddenInputEl(r);OB(n,{checked:r.checked})}}})}var z$={change:t=>{t.onCheckedChange?.({checked:t.checked})}},JS={checked:(t,e)=>{dn(t.checked,e)||(t.checked=e,z$.change(t))}};Ae()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);const $$=(t={})=>{const{getRootNode:e}=nc(),{dir:r}=cd(),n=$n(),i={id:w.useId(),ids:{label:n?.ids.label,hiddenInput:n?.ids.control},dir:r,disabled:n?.disabled,readOnly:n?.readOnly,invalid:n?.invalid,required:n?.required,getRootNode:e,checked:t.defaultChecked,...t},s={...i,checked:t.checked,onCheckedChange:On(t.onCheckedChange,{sync:!0})},[o,a]=ua(U$(i),{context:s});return B$(o,a,ro)},Qk=w.forwardRef((t,e)=>{const[r,n]=fr()(t,["checked","defaultChecked","disabled","form","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),i=$$(r),s=ae(i.getRootProps(),n);return b.jsx(Xk,{value:i,children:b.jsx(pe.label,{...s,ref:e})})});Qk.displayName="SwitchRoot";const Jk=w.forwardRef((t,e)=>{const[{value:r},n]=fr()(t,["value"]),i=ae(r.getRootProps(),n);return b.jsx(Xk,{value:r,children:b.jsx(pe.label,{...i,ref:e})})});Jk.displayName="SwitchRootProvider";const eR=w.forwardRef((t,e)=>{const r=oc(),n=ae(r.getThumbProps(),t);return b.jsx(pe.span,{...n,ref:e})});eR.displayName="SwitchThumb";var tR=me("avatar").parts("root","image","fallback");tR.build();var Xd=nt({getRootId:t=>t.ids?.root??`avatar:${t.id}`,getImageId:t=>t.ids?.image??`avatar:${t.id}:image`,getFallbackId:t=>t.ids?.fallback??`avatar:${t.id}:fallback`,getRootEl:t=>Xd.getById(t,Xd.getRootId(t)),getImageEl:t=>Xd.getById(t,Xd.getImageId(t))});Ae()(["dir","id","ids","onStatusChange","getRootNode"]);var rR=me("checkbox").parts("root","label","control","indicator");rR.build();var Yd=nt({getRootId:t=>t.ids?.root??`checkbox:${t.id}`,getLabelId:t=>t.ids?.label??`checkbox:${t.id}:label`,getControlId:t=>t.ids?.control??`checkbox:${t.id}:control`,getHiddenInputId:t=>t.ids?.hiddenInput??`checkbox:${t.id}:input`,getRootEl:t=>Yd.getById(t,Yd.getRootId(t)),getHiddenInputEl:t=>Yd.getById(t,Yd.getHiddenInputId(t))});Ae()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]);const j$=rR.extendWith("group"),V$=sk.extendWith("view");var nR=me("hoverCard").parts("arrow","arrowTip","trigger","positioner","content");nR.build();var Ea=nt({getTriggerId:t=>t.ids?.trigger??`hover-card:${t.id}:trigger`,getContentId:t=>t.ids?.content??`hover-card:${t.id}:content`,getPositionerId:t=>t.ids?.positioner??`hover-card:${t.id}:popper`,getArrowId:t=>t.ids?.arrow??`hover-card:${t.id}:arrow`,getTriggerEl:t=>Ea.getById(t,Ea.getTriggerId(t)),getContentEl:t=>Ea.getById(t,Ea.getContentId(t)),getPositionerEl:t=>Ea.getById(t,Ea.getPositionerId(t))});Ae()(["closeDelay","dir","getRootNode","id","ids","onOpenChange","open.controlled","open","openDelay","positioning"]);const[iR,ha]=hr({name:"NumberInputContext",hookName:"useNumberInputContext",providerName:"<NumberInputProvider />"}),sR=w.forwardRef((t,e)=>{const r=ha(),n=ae(r.getControlProps(),t);return b.jsx(pe.div,{...n,ref:e})});sR.displayName="NumberInputControl";const oR=w.forwardRef((t,e)=>{const r=ha(),n=ae(r.getDecrementTriggerProps(),t);return b.jsx(pe.button,{...n,ref:e})});oR.displayName="NumberInputDecrementTrigger";const aR=w.forwardRef((t,e)=>{const r=ha(),n=ae(r.getIncrementTriggerProps(),t);return b.jsx(pe.button,{...n,ref:e})});aR.displayName="NumberInputIncrementTrigger";const lR=w.forwardRef((t,e)=>{const r=ha(),n=ae(r.getInputProps(),t),i=$n();return b.jsx(pe.input,{"aria-describedby":i?.ariaDescribedby,...n,ref:e})});lR.displayName="NumberInputInput";const cR=w.forwardRef((t,e)=>{const r=ha(),n=ae(r.getLabelProps(),t);return b.jsx(pe.label,{...n,ref:e})});cR.displayName="NumberInputLabel";let Pm=new Map,Zv=!1;try{Zv=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let Zf=!1;try{Zf=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const uR={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class G${format(e){let r="";if(!Zv&&this.options.signDisplay!=null?r=H$(this.numberFormatter,this.options.signDisplay,e):r=this.numberFormatter.format(e),this.options.style==="unit"&&!Zf){var n;let{unit:i,unitDisplay:s="short",locale:o}=this.resolvedOptions();if(!i)return r;let a=(n=uR[i])===null||n===void 0?void 0:n[s];r+=a[o]||a.default}return r}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,r){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,r);if(r<e)throw new RangeError("End date must be >= start date");return`${this.format(e)}  ${this.format(r)}`}formatRangeToParts(e,r){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,r);if(r<e)throw new RangeError("End date must be >= start date");let n=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(r);return[...n.map(s=>({...s,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!Zv&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!Zf&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,r={}){this.numberFormatter=W$(e,r),this.options=r}}function W$(t,e={}){let{numberingSystem:r}=e;if(r&&t.includes("-nu-")&&(t.includes("-u-")||(t+="-u-"),t+=`-nu-${r}`),e.style==="unit"&&!Zf){var n;let{unit:o,unitDisplay:a="short"}=e;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((n=uR[o])===null||n===void 0)&&n[a]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${a}`);e={...e,style:"decimal"}}let i=t+(e?Object.entries(e).sort((o,a)=>o[0]<a[0]?-1:1).join():"");if(Pm.has(i))return Pm.get(i);let s=new Intl.NumberFormat(t,e);return Pm.set(i,s),s}function H$(t,e,r){if(e==="auto")return t.format(r);if(e==="never")return t.format(Math.abs(r));{let n=!1;if(e==="always"?n=r>0||Object.is(r,0):e==="exceptZero"&&(Object.is(r,-0)||Object.is(r,0)?r=Math.abs(r):n=r>0),n){let i=t.format(-r),s=t.format(r),o=i.replace(s,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(s,"!!!").replace(o,"+").replace("!!!",s)}else return t.format(r)}}const X$=new RegExp("^.*\\(.*\\).*$"),Y$=["latn","arab","hanidec","deva","beng"];class dR{parse(e){return Im(this.locale,this.options,e).parse(e)}isValidPartialNumber(e,r,n){return Im(this.locale,this.options,e).isValidPartialNumber(e,r,n)}getNumberingSystem(e){return Im(this.locale,this.options,e).options.numberingSystem}constructor(e,r={}){this.locale=e,this.options=r}}const e1=new Map;function Im(t,e,r){let n=t1(t,e);if(!t.includes("-nu-")&&!n.isValidPartialNumber(r)){for(let i of Y$)if(i!==n.options.numberingSystem){let s=t1(t+(t.includes("-u-")?"-nu-":"-u-nu-")+i,e);if(s.isValidPartialNumber(r))return s}}return n}function t1(t,e){let r=t+(e?Object.entries(e).sort((i,s)=>i[0]<s[0]?-1:1).join():""),n=e1.get(r);return n||(n=new q$(t,e),e1.set(r,n)),n}class q${parse(e){let r=this.sanitize(e);if(this.symbols.group&&(r=qd(r,this.symbols.group,"")),this.symbols.decimal&&(r=r.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(r=r.replace(this.symbols.minusSign,"-")),r=r.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let o=r.indexOf("-");r=r.replace("-","");let a=r.indexOf(".");a===-1&&(a=r.length),r=r.replace(".",""),a-2===0?r=`0.${r}`:a-2===-1?r=`0.0${r}`:a-2===-2?r="0.00":r=`${r.slice(0,a-2)}.${r.slice(a-2)}`,o>-1&&(r=`-${r}`)}let n=r?+r:NaN;if(isNaN(n))return NaN;if(this.options.style==="percent"){var i,s;let o={...this.options,style:"decimal",minimumFractionDigits:Math.min(((i=this.options.minimumFractionDigits)!==null&&i!==void 0?i:0)+2,20),maximumFractionDigits:Math.min(((s=this.options.maximumFractionDigits)!==null&&s!==void 0?s:0)+2,20)};return new dR(this.locale,o).parse(new G$(this.locale,o).format(n))}return this.options.currencySign==="accounting"&&X$.test(e)&&(n=-1*n),n}sanitize(e){return e=e.replace(this.symbols.literals,""),this.symbols.minusSign&&(e=e.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(e=e.replace(",",this.symbols.decimal),e=e.replace("",this.symbols.decimal)),this.symbols.group&&(e=qd(e,".",this.symbols.group))),this.options.locale==="fr-FR"&&(e=qd(e,".","")),e}isValidPartialNumber(e,r=-1/0,n=1/0){return e=this.sanitize(e),this.symbols.minusSign&&e.startsWith(this.symbols.minusSign)&&r<0?e=e.slice(this.symbols.minusSign.length):this.symbols.plusSign&&e.startsWith(this.symbols.plusSign)&&n>0&&(e=e.slice(this.symbols.plusSign.length)),this.symbols.group&&e.startsWith(this.symbols.group)||this.symbols.decimal&&e.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(e=qd(e,this.symbols.group,"")),e=e.replace(this.symbols.numeral,""),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,"")),e.length===0)}constructor(e,r={}){this.locale=e,this.formatter=new Intl.NumberFormat(e,r),this.options=this.formatter.resolvedOptions(),this.symbols=Z$(e,this.formatter,this.options,r);var n,i;this.options.style==="percent"&&(((n=this.options.minimumFractionDigits)!==null&&n!==void 0?n:0)>18||((i=this.options.maximumFractionDigits)!==null&&i!==void 0?i:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const r1=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),K$=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function Z$(t,e,r,n){var i,s,o,a;let l=new Intl.NumberFormat(t,{...r,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),c=l.formatToParts(-10000.111),u=l.formatToParts(10000.111),d=K$.map(I=>l.formatToParts(I));var h;let f=(h=(i=c.find(I=>I.type==="minusSign"))===null||i===void 0?void 0:i.value)!==null&&h!==void 0?h:"-",p=(s=u.find(I=>I.type==="plusSign"))===null||s===void 0?void 0:s.value;!p&&(n?.signDisplay==="exceptZero"||n?.signDisplay==="always")&&(p="+");let x=(o=new Intl.NumberFormat(t,{...r,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(I=>I.type==="decimal"))===null||o===void 0?void 0:o.value,v=(a=c.find(I=>I.type==="group"))===null||a===void 0?void 0:a.value,y=c.filter(I=>!r1.has(I.type)).map(I=>n1(I.value)),m=d.flatMap(I=>I.filter(M=>!r1.has(M.type)).map(M=>n1(M.value))),_=[...new Set([...y,...m])].sort((I,M)=>M.length-I.length),C=_.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${_.join("|")}|[\\p{White_Space}]`,"gu"),E=[...new Intl.NumberFormat(r.locale,{useGrouping:!1}).format(9876543210)].reverse(),T=new Map(E.map((I,M)=>[I,M])),S=new RegExp(`[${E.join("")}]`,"g");return{minusSign:f,plusSign:p,decimal:x,group:v,literals:C,numeral:S,index:I=>String(T.get(I))}}function qd(t,e,r){return t.replaceAll?t.replaceAll(e,r):t.split(e).join(r)}function n1(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var hR=me("numberInput").parts("root","label","input","control","valueText","incrementTrigger","decrementTrigger","scrubber"),ys=hR.build(),Se=nt({getRootId:t=>t.ids?.root??`number-input:${t.id}`,getInputId:t=>t.ids?.input??`number-input:${t.id}:input`,getIncrementTriggerId:t=>t.ids?.incrementTrigger??`number-input:${t.id}:inc`,getDecrementTriggerId:t=>t.ids?.decrementTrigger??`number-input:${t.id}:dec`,getScrubberId:t=>t.ids?.scrubber??`number-input:${t.id}:scrubber`,getCursorId:t=>`number-input:${t.id}:cursor`,getLabelId:t=>t.ids?.label??`number-input:${t.id}:label`,getInputEl:t=>Se.getById(t,Se.getInputId(t)),getIncrementTriggerEl:t=>Se.getById(t,Se.getIncrementTriggerId(t)),getDecrementTriggerEl:t=>Se.getById(t,Se.getDecrementTriggerId(t)),getScrubberEl:t=>Se.getById(t,Se.getScrubberId(t)),getCursorEl:t=>Se.getDoc(t).getElementById(Se.getCursorId(t)),getPressedTriggerEl:(t,e=t.hint)=>{let r=null;return e==="increment"&&(r=Se.getIncrementTriggerEl(t)),e==="decrement"&&(r=Se.getDecrementTriggerEl(t)),r},setupVirtualCursor(t){if(!Cb())return Se.createVirtualCursor(t),()=>{Se.getCursorEl(t)?.remove()}},preventTextSelection(t){const e=Se.getDoc(t),r=e.documentElement,n=e.body;return n.style.pointerEvents="none",r.style.userSelect="none",r.style.cursor="ew-resize",()=>{n.style.pointerEvents="",r.style.userSelect="",r.style.cursor="",r.style.length||r.removeAttribute("style"),n.style.length||n.removeAttribute("style")}},getMousemoveValue(t,e){const r=Se.getWin(t),n=du(e.movementX,r.devicePixelRatio),i=du(e.movementY,r.devicePixelRatio);let s=n>0?"increment":n<0?"decrement":null;t.isRtl&&s==="increment"&&(s="decrement"),t.isRtl&&s==="decrement"&&(s="increment");const o={x:t.scrubberCursorPoint.x+n,y:t.scrubberCursorPoint.y+i},a=r.innerWidth,l=du(7.5,r.devicePixelRatio);return o.x=$3(o.x+l,a)-l,{hint:s,point:o}},createVirtualCursor(t){const e=Se.getDoc(t),r=e.createElement("div");r.className="scrubber--cursor",r.id=Se.getCursorId(t),Object.assign(r.style,{width:"15px",height:"15px",position:"fixed",pointerEvents:"none",left:"0px",top:"0px",zIndex:BI,transform:t.scrubberCursorPoint?`translate3d(${t.scrubberCursorPoint.x}px, ${t.scrubberCursorPoint.y}px, 0px)`:void 0,willChange:"transform"}),r.innerHTML=`
        <svg width="46" height="15" style="left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);">
          <g transform="translate(2 3)">
            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z" style="stroke-width: 2px; stroke: white;"></path>
            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z"></path>
          </g>
        </svg>`,e.body.appendChild(r)}});function Q$(t,e,r){const n=t.hasTag("focus"),i=t.context.isDisabled,s=t.context.readOnly,o=t.context.isValueEmpty,a=t.context.isOutOfRange||!!t.context.invalid,l=i||!t.context.canIncrement||s,c=i||!t.context.canDecrement||s,u=t.context.translations;return{focused:n,invalid:a,empty:o,value:t.context.formattedValue,valueAsNumber:t.context.valueAsNumber,setValue(d){e({type:"VALUE.SET",value:d})},clearValue(){e("VALUE.CLEAR")},increment(){e("VALUE.INCREMENT")},decrement(){e("VALUE.DECREMENT")},setToMax(){e({type:"VALUE.SET",value:t.context.max})},setToMin(){e({type:"VALUE.SET",value:t.context.min})},focus(){Se.getInputEl(t.context)?.focus()},getRootProps(){return r.element({id:Se.getRootId(t.context),...ys.root.attrs,dir:t.context.dir,"data-disabled":Q(i),"data-focus":Q(n),"data-invalid":Q(a)})},getLabelProps(){return r.label({...ys.label.attrs,dir:t.context.dir,"data-disabled":Q(i),"data-focus":Q(n),"data-invalid":Q(a),id:Se.getLabelId(t.context),htmlFor:Se.getInputId(t.context)})},getControlProps(){return r.element({...ys.control.attrs,dir:t.context.dir,role:"group","aria-disabled":i,"data-focus":Q(n),"data-disabled":Q(i),"data-invalid":Q(a),"aria-invalid":Bf(t.context.invalid)})},getValueTextProps(){return r.element({...ys.valueText.attrs,dir:t.context.dir,"data-disabled":Q(i),"data-invalid":Q(a),"data-focus":Q(n)})},getInputProps(){return r.input({...ys.input.attrs,dir:t.context.dir,name:t.context.name,form:t.context.form,id:Se.getInputId(t.context),role:"spinbutton",defaultValue:t.context.formattedValue,pattern:t.context.pattern,inputMode:t.context.inputMode,"aria-invalid":Bf(a),"data-invalid":Q(a),disabled:i,"data-disabled":Q(i),readOnly:t.context.readOnly,required:t.context.required,autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text","aria-roledescription":"numberfield","aria-valuemin":t.context.min,"aria-valuemax":t.context.max,"aria-valuenow":Number.isNaN(t.context.valueAsNumber)?void 0:t.context.valueAsNumber,"aria-valuetext":t.context.valueText,onFocus(){e("INPUT.FOCUS")},onBlur(){e("INPUT.BLUR")},onInput(d){e({type:"INPUT.CHANGE",target:d.currentTarget,hint:"set"})},onBeforeInput(d){try{const{selectionStart:h,selectionEnd:f,value:p}=d.currentTarget,g=p.slice(0,h)+(d.data??"")+p.slice(f);t.context.parser.isValidPartialNumber(g)||d.preventDefault()}catch{}},onKeyDown(d){if(d.defaultPrevented||s||Tb(d))return;const h=kB(d)*t.context.step,p={ArrowUp(){e({type:"INPUT.ARROW_UP",step:h}),d.preventDefault()},ArrowDown(){e({type:"INPUT.ARROW_DOWN",step:h}),d.preventDefault()},Home(){uS(d)||(e("INPUT.HOME"),d.preventDefault())},End(){uS(d)||(e("INPUT.END"),d.preventDefault())},Enter(){e("INPUT.ENTER")}}[d.key];p?.(d)}})},getDecrementTriggerProps(){return r.button({...ys.decrementTrigger.attrs,dir:t.context.dir,id:Se.getDecrementTriggerId(t.context),disabled:c,"data-disabled":Q(c),"aria-label":u.decrementLabel,type:"button",tabIndex:-1,"aria-controls":Se.getInputId(t.context),onPointerDown(d){c||!cS(d)||(e({type:"TRIGGER.PRESS_DOWN",hint:"decrement",pointerType:d.pointerType}),d.pointerType==="mouse"&&d.preventDefault(),d.pointerType==="touch"&&d.currentTarget?.focus({preventScroll:!0}))},onPointerUp(d){e({type:"TRIGGER.PRESS_UP",hint:"decrement",pointerType:d.pointerType})},onPointerLeave(){c||e({type:"TRIGGER.PRESS_UP",hint:"decrement"})}})},getIncrementTriggerProps(){return r.button({...ys.incrementTrigger.attrs,dir:t.context.dir,id:Se.getIncrementTriggerId(t.context),disabled:l,"data-disabled":Q(l),"aria-label":u.incrementLabel,type:"button",tabIndex:-1,"aria-controls":Se.getInputId(t.context),onPointerDown(d){l||!cS(d)||(e({type:"TRIGGER.PRESS_DOWN",hint:"increment",pointerType:d.pointerType}),d.pointerType==="mouse"&&d.preventDefault(),d.pointerType==="touch"&&d.currentTarget?.focus({preventScroll:!0}))},onPointerUp(d){e({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:d.pointerType})},onPointerLeave(d){e({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:d.pointerType})}})},getScrubberProps(){return r.element({...ys.scrubber.attrs,dir:t.context.dir,"data-disabled":Q(i),id:Se.getScrubberId(t.context),role:"presentation",onMouseDown(d){if(i)return;const h=GI(d),p=Lt(d.currentTarget).devicePixelRatio;h.x=h.x-du(7.5,p),h.y=h.y-du(7.5,p),e({type:"SCRUBBER.PRESS_DOWN",point:h}),d.preventDefault()},style:{cursor:i?void 0:"ew-resize"}})}}}function J$(t){if(t.ownerDocument.activeElement===t)try{const{selectionStart:e,selectionEnd:r,value:n}=t,i=n.substring(0,e),s=n.substring(r);return{start:e,end:r,value:n,beforeTxt:i,afterTxt:s}}catch{}}function ej(t,e){if(t.ownerDocument.activeElement===t){if(!e){t.setSelectionRange(t.value.length,t.value.length);return}try{const{value:r}=t,{beforeTxt:n="",afterTxt:i="",start:s}=e;let o=r.length;if(r.endsWith(i))o=r.length-i.length;else if(r.startsWith(n))o=n.length;else if(s!=null){const a=n[s-1],l=r.indexOf(a,s-1);l!==-1&&(o=l+1)}t.setSelectionRange(o,o)}catch{}}}var i1=(t,e={})=>Ci(new Intl.NumberFormat(t,e)),s1=(t,e={})=>Ci(new dR(t,e)),o1=(t,e)=>t.formatOptions?t.parser.parse(String(e)):parseFloat(e),fo=(t,e)=>Number.isNaN(e)?"":t.formatOptions?t.formatter.format(e):e.toString(),{not:Am,and:Kd}=tc;function tj(t){const e=pn(t);return to({id:"number-input",initial:"idle",context:{dir:"ltr",locale:"en-US",focusInputOnChange:!0,clampValueOnBlur:!0,allowOverflow:!1,inputMode:"decimal",pattern:"[0-9]*(.[0-9]+)?",value:"",step:1,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,invalid:!1,spinOnPress:!0,disabled:!1,readOnly:!1,...e,hint:null,scrubberCursorPoint:null,fieldsetDisabled:!1,formatter:i1(e.locale||"en-US",e.formatOptions),parser:s1(e.locale||"en-US",e.formatOptions),translations:{incrementLabel:"increment value",decrementLabel:"decrease value",...e.translations}},computed:{isRtl:r=>r.dir==="rtl",valueAsNumber:r=>o1(r,r.value),formattedValue:r=>fo(r,r.valueAsNumber),isAtMin:r=>V3(r.valueAsNumber,r.min),isAtMax:r=>j3(r.valueAsNumber,r.max),isOutOfRange:r=>!G3(r.valueAsNumber,r.min,r.max),isValueEmpty:r=>r.value==="",isDisabled:r=>!!r.disabled||r.fieldsetDisabled,canIncrement:r=>r.allowOverflow||!r.isAtMax,canDecrement:r=>r.allowOverflow||!r.isAtMin,valueText:r=>r.translations.valueText?.(r.value)},watch:{formatOptions:["setFormatterAndParser","syncInputElement"],locale:["setFormatterAndParser","syncInputElement"],value:["syncInputElement"],isOutOfRange:["invokeOnInvalid"],scrubberCursorPoint:["setVirtualCursorPosition"]},activities:["trackFormControl"],on:{"VALUE.SET":{actions:["setRawValue","setHintToSet"]},"VALUE.CLEAR":{actions:["clearValue"]},"VALUE.INCREMENT":{actions:["increment"]},"VALUE.DECREMENT":{actions:["decrement"]}},states:{idle:{on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","invokeOnFocus","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","invokeOnFocus","setHint","setCursorPoint"]},"INPUT.FOCUS":{target:"focused",actions:["focusInput","invokeOnFocus"]}}},focused:{tags:"focus",activities:"attachWheelListener",on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","setHint","setCursorPoint"]},"INPUT.ARROW_UP":{actions:"increment"},"INPUT.ARROW_DOWN":{actions:"decrement"},"INPUT.HOME":{actions:"decrementToMin"},"INPUT.END":{actions:"incrementToMax"},"INPUT.CHANGE":{actions:["setValue","setHint"]},"INPUT.BLUR":[{guard:Kd("clampValueOnBlur",Am("isInRange")),target:"idle",actions:["setClampedValue","clearHint","invokeOnBlur"]},{target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur"]}],"INPUT.ENTER":{actions:["setFormattedValue","clearHint","invokeOnBlur"]}}},"before:spin":{tags:"focus",activities:"trackButtonDisabled",entry:n5([{guard:"isIncrementHint",actions:"increment"},{guard:"isDecrementHint",actions:"decrement"}]),after:{CHANGE_DELAY:{target:"spinning",guard:Kd("isInRange","spinOnPress")}},on:{"TRIGGER.PRESS_UP":[{guard:"isTouchPointer",target:"focused",actions:"clearHint"},{target:"focused",actions:["focusInput","clearHint"]}]}},spinning:{tags:"focus",activities:"trackButtonDisabled",every:[{delay:"CHANGE_INTERVAL",guard:Kd(Am("isAtMin"),"isIncrementHint"),actions:"increment"},{delay:"CHANGE_INTERVAL",guard:Kd(Am("isAtMax"),"isDecrementHint"),actions:"decrement"}],on:{"TRIGGER.PRESS_UP":{target:"focused",actions:["focusInput","clearHint"]}}},scrubbing:{tags:"focus",activities:["activatePointerLock","trackMousemove","setupVirtualCursor","preventTextSelection"],on:{"SCRUBBER.POINTER_UP":{target:"focused",actions:["focusInput","clearCursorPoint"]},"SCRUBBER.POINTER_MOVE":[{guard:"isIncrementHint",actions:["increment","setCursorPoint"]},{guard:"isDecrementHint",actions:["decrement","setCursorPoint"]}]}}}},{delays:{CHANGE_INTERVAL:50,CHANGE_DELAY:300},guards:{clampValueOnBlur:r=>r.clampValueOnBlur,isAtMin:r=>r.isAtMin,spinOnPress:r=>!!r.spinOnPress,isAtMax:r=>r.isAtMax,isInRange:r=>!r.isOutOfRange,isDecrementHint:(r,n)=>(n.hint??r.hint)==="decrement",isIncrementHint:(r,n)=>(n.hint??r.hint)==="increment",isTouchPointer:(r,n)=>n.pointerType==="touch"},activities:{trackFormControl(r,n,{initialContext:i}){const s=Se.getInputEl(r);return Ib(s,{onFieldsetDisabledChange(o){r.fieldsetDisabled=o},onFormReset(){qn.value(r,i.value)}})},setupVirtualCursor(r){return Se.setupVirtualCursor(r)},preventTextSelection(r){return Se.preventTextSelection(r)},trackButtonDisabled(r,n,{send:i}){const s=Se.getPressedTriggerEl(r,r.hint);return YI(s,{attributes:["disabled"],callback(){i({type:"TRIGGER.PRESS_UP",src:"attr"})}})},attachWheelListener(r,n,{send:i}){const s=Se.getInputEl(r);if(!s||!Se.isActiveElement(r,s)||!r.allowMouseWheel)return;function o(a){a.preventDefault();const l=Math.sign(a.deltaY)*-1;l===1?i("VALUE.INCREMENT"):l===-1&&i("VALUE.DECREMENT")}return ct(s,"wheel",o,{passive:!1})},activatePointerLock(r){if(!Cb())return qB(Se.getDoc(r))},trackMousemove(r,n,{send:i}){const s=Se.getDoc(r);function o(l){if(!r.scrubberCursorPoint)return;const c=Se.getMousemoveValue(r,l);c.hint&&i({type:"SCRUBBER.POINTER_MOVE",hint:c.hint,point:c.point})}function a(){i("SCRUBBER.POINTER_UP")}return $f(ct(s,"mousemove",o,!1),ct(s,"mouseup",a,!1))}},actions:{focusInput(r){if(!r.focusInputOnChange)return;const n=Se.getInputEl(r);Se.isActiveElement(r,n)||at(()=>n?.focus({preventScroll:!0}))},increment(r,n){const i=Y3(r.valueAsNumber,n.step??r.step),s=fo(r,Vc(i,r.min,r.max));qn.value(r,s)},decrement(r,n){const i=q3(r.valueAsNumber,n.step??r.step),s=fo(r,Vc(i,r.min,r.max));qn.value(r,s)},setClampedValue(r){const n=Vc(r.valueAsNumber,r.min,r.max);qn.value(r,fo(r,n))},setRawValue(r,n){const i=o1(r,n.value),s=fo(r,Vc(i,r.min,r.max));qn.value(r,s)},setValue(r,n){const i=n.target?.value??n.value;qn.value(r,i)},clearValue(r){qn.value(r,"")},incrementToMax(r){const n=fo(r,r.max);qn.value(r,n)},decrementToMin(r){const n=fo(r,r.min);qn.value(r,n)},setHint(r,n){r.hint=n.hint},clearHint(r){r.hint=null},setHintToSet(r){r.hint="set"},invokeOnFocus(r){r.onFocusChange?.({focused:!0,value:r.formattedValue,valueAsNumber:r.valueAsNumber})},invokeOnBlur(r){r.onFocusChange?.({focused:!1,value:r.formattedValue,valueAsNumber:r.valueAsNumber})},invokeOnInvalid(r){if(!r.isOutOfRange)return;const n=r.valueAsNumber>r.max?"rangeOverflow":"rangeUnderflow";r.onValueInvalid?.({reason:n,value:r.formattedValue,valueAsNumber:r.valueAsNumber})},syncInputElement(r,n){const i=n.type.endsWith("CHANGE")?r.value:r.formattedValue;rj.input(r,i)},setFormattedValue(r){qn.value(r,r.formattedValue)},setCursorPoint(r,n){r.scrubberCursorPoint=n.point},clearCursorPoint(r){r.scrubberCursorPoint=null},setVirtualCursorPosition(r){const n=Se.getCursorEl(r);if(!n||!r.scrubberCursorPoint)return;const{x:i,y:s}=r.scrubberCursorPoint;n.style.transform=`translate3d(${i}px, ${s}px, 0px)`},setFormatterAndParser(r){r.locale&&(r.formatter=i1(r.locale,r.formatOptions),r.parser=s1(r.locale,r.formatOptions))}},compareFns:{formatOptions:(r,n)=>dn(r,n),scrubberCursorPoint:(r,n)=>dn(r,n)}})}var rj={input(t,e){const r=Se.getInputEl(t);if(!r)return;const n=J$(r);at(()=>{Pb(r,e),ej(r,n)})}},nj={onChange:t=>{t.onValueChange?.({value:t.value,valueAsNumber:t.valueAsNumber})}},qn={value:(t,e)=>{dn(t.value,e)||(t.value=e,nj.onChange(t))}};const ij=(t={})=>{const{getRootNode:e}=nc(),{dir:r,locale:n}=cd(),i=$n(),s={id:w.useId(),ids:{label:i?.ids.label,input:i?.ids.control},disabled:i?.disabled,readOnly:i?.readOnly,required:i?.required,invalid:i?.invalid,dir:r,locale:n,getRootNode:e,value:t.defaultValue,...t},o={...s,value:t.value,onValueChange:On(t.onValueChange,{sync:!0}),onValueInvalid:On(t.onValueInvalid),onFocusChange:On(t.onFocusChange)},[a,l]=ua(tj(s),{context:o});return Q$(a,l,ro)},fR=w.forwardRef((t,e)=>{const[r,n]=fr()(t,["allowMouseWheel","allowOverflow","clampValueOnBlur","defaultValue","disabled","focusInputOnChange","form","formatOptions","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","readOnly","required","spinOnPress","step","translations","value"]),i=ij(r),s=ae(i.getRootProps(),n);return b.jsx(iR,{value:i,children:b.jsx(pe.div,{...s,ref:e})})});fR.displayName="NumberInputRoot";const pR=w.forwardRef((t,e)=>{const[{value:r},n]=fr()(t,["value"]),i=ae(r.getRootProps(),n);return b.jsx(iR,{value:r,children:b.jsx(pe.div,{...i,ref:e})})});pR.displayName="NumberInputRootProvider";const gR=w.forwardRef((t,e)=>{const r=ha(),n=ae(r.getScrubberProps(),t);return b.jsx(pe.div,{...n,ref:e})});gR.displayName="NumberInputScrubber";const mR=w.forwardRef((t,e)=>{const{children:r,...n}=t,i=ha(),s=ae(i.getValueTextProps(),n);return b.jsx(pe.span,{...s,ref:e,children:r||i.value})});mR.displayName="NumberInputValueText";var yR=me("pinInput").parts("root","label","input","control");yR.build();var Kn=nt({getRootId:t=>t.ids?.root??`pin-input:${t.id}`,getInputId:(t,e)=>t.ids?.input?.(e)??`pin-input:${t.id}:${e}`,getHiddenInputId:t=>t.ids?.hiddenInput??`pin-input:${t.id}:hidden`,getLabelId:t=>t.ids?.label??`pin-input:${t.id}:label`,getControlId:t=>t.ids?.control??`pin-input:${t.id}:control`,getRootEl:t=>Kn.getById(t,Kn.getRootId(t)),getInputEls:t=>{const r=`input[data-ownedby=${CSS.escape(Kn.getRootId(t))}]`;return An(Kn.getRootEl(t),r)},getInputEl:(t,e)=>Kn.getById(t,Kn.getInputId(t,e)),getFocusedInputEl:t=>Kn.getInputEls(t)[t.focusedIndex],getFirstInputEl:t=>Kn.getInputEls(t)[0],getHiddenInputEl:t=>Kn.getById(t,Kn.getHiddenInputId(t))}),t_=me("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange");t_.build();nt({getRootId:t=>t.ids?.root??`progress-${t.id}`,getTrackId:t=>t.ids?.track??`progress-${t.id}-track`,getLabelId:t=>t.ids?.label??`progress-${t.id}-label`,getCircleId:t=>t.ids?.circle??`progress-${t.id}-circle`});Ae()(["dir","getRootNode","id","ids","max","min","orientation","translations","value","onValueChange"]);var vR=me("qr-code").parts("root","frame","pattern","overlay","downloadTrigger");vR.build();var a1=nt({getRootId:t=>t.ids?.root??`qrcode:${t.id}:root`,getFrameId:t=>t.ids?.frame??`qrcode:${t.id}:frame`,getFrameEl:t=>a1.getById(t,a1.getFrameId(t))});Ae()(["ids","value","id","encoding","dir","getRootNode","onValueChange"]);const xR=Jb.rename("segment-group");xR.build();const[bR,pd]=hr({name:"TooltipContext",hookName:"useTooltipContext",providerName:"<TooltipProvider />"}),_R=w.forwardRef((t,e)=>{const r=pd(),n=ae(r.getArrowProps(),t);return b.jsx(pe.div,{...n,ref:e})});_R.displayName="TooltipArrow";const wR=w.forwardRef((t,e)=>{const r=pd(),n=ae(r.getArrowTipProps(),t);return b.jsx(pe.div,{...n,ref:e})});wR.displayName="TooltipArrowTip";const SR=w.forwardRef((t,e)=>{const r=pd(),n=ag(),i=ae(r.getContentProps(),n.getPresenceProps(),t);return n.unmounted?null:b.jsx(pe.div,{...i,ref:ud(n.ref,e)})});SR.displayName="TooltipContent";const ER=w.forwardRef((t,e)=>{const r=pd(),n=ae(r.getPositionerProps(),t);return ag().unmounted?null:b.jsx(pe.div,{...n,ref:e})});ER.displayName="TooltipPositioner";var CR=me("tooltip").parts("trigger","arrow","arrowTip","positioner","content"),Pc=CR.build(),pt=nt({getTriggerId:t=>t.ids?.trigger??`tooltip:${t.id}:trigger`,getContentId:t=>t.ids?.content??`tooltip:${t.id}:content`,getArrowId:t=>t.ids?.arrow??`tooltip:${t.id}:arrow`,getPositionerId:t=>t.ids?.positioner??`tooltip:${t.id}:popper`,getTriggerEl:t=>pt.getById(t,pt.getTriggerId(t)),getContentEl:t=>pt.getById(t,pt.getContentId(t)),getPositionerEl:t=>pt.getById(t,pt.getPositionerId(t)),getArrowEl:t=>pt.getById(t,pt.getArrowId(t))}),Ui=ig({id:null,prevId:null,setId(t){this.prevId=this.id,this.id=t}});function sj(t,e,r){const n=t.context.id,i=t.context.hasAriaLabel,s=t.hasTag("open"),o=pt.getTriggerId(t.context),a=pt.getContentId(t.context),l=t.context.disabled,c=nk({...t.context.positioning,placement:t.context.currentPlacement});return{open:s,setOpen(u){u!==s&&e(u?"OPEN":"CLOSE")},reposition(u={}){e({type:"POSITIONING.SET",options:u})},getTriggerProps(){return r.button({...Pc.trigger.attrs,id:o,dir:t.context.dir,"data-expanded":Q(s),"data-state":s?"open":"closed","aria-describedby":s?a:void 0,onClick(u){u.defaultPrevented||l||t.context.closeOnClick&&e({type:"CLOSE",src:"trigger.click"})},onFocus(u){u.defaultPrevented||l||t.event.src!=="trigger.pointerdown"&&qf()&&e({type:"OPEN",src:"trigger.focus"})},onBlur(u){u.defaultPrevented||l||n===Ui.id&&e({type:"CLOSE",src:"trigger.blur"})},onPointerDown(u){u.defaultPrevented||l||t.context.closeOnPointerDown&&n===Ui.id&&e({type:"CLOSE",src:"trigger.pointerdown"})},onPointerMove(u){u.defaultPrevented||l||u.pointerType!=="touch"&&e("POINTER_MOVE")},onPointerLeave(){l||e("POINTER_LEAVE")},onPointerCancel(){l||e("POINTER_LEAVE")}})},getArrowProps(){return r.element({id:pt.getArrowId(t.context),...Pc.arrow.attrs,dir:t.context.dir,style:c.arrow})},getArrowTipProps(){return r.element({...Pc.arrowTip.attrs,dir:t.context.dir,style:c.arrowTip})},getPositionerProps(){return r.element({id:pt.getPositionerId(t.context),...Pc.positioner.attrs,dir:t.context.dir,style:c.floating})},getContentProps(){return r.element({...Pc.content.attrs,dir:t.context.dir,hidden:!s,"data-state":s?"open":"closed",role:i?void 0:"tooltip",id:i?void 0:a,"data-placement":t.context.currentPlacement,onPointerEnter(){e("CONTENT.POINTER_MOVE")},onPointerLeave(){e("CONTENT.POINTER_LEAVE")},style:{pointerEvents:t.context.interactive?"auto":"none"}})}}}var{and:oj,not:l1}=tc;function aj(t){const e=pn(t);return to({id:"tooltip",initial:e.open?"open":"closed",activities:["trackFocusVisible"],context:{openDelay:1e3,closeDelay:500,closeOnPointerDown:!0,closeOnEscape:!0,interactive:!1,closeOnScroll:!0,closeOnClick:!0,disabled:!1,...e,currentPlacement:void 0,hasPointerMoveOpened:!1,positioning:{placement:"bottom",...e.positioning}},computed:{hasAriaLabel:r=>!!r["aria-label"]},watch:{disabled:["closeIfDisabled"],open:["toggleVisibility"]},states:{closed:{tags:["closed"],entry:["clearGlobalId"],on:{"CONTROLLED.OPEN":"open",OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],POINTER_LEAVE:{actions:["clearPointerMoveOpened"]},POINTER_MOVE:[{guard:oj("noVisibleTooltip",l1("hasPointerMoveOpened")),target:"opening"},{guard:l1("hasPointerMoveOpened"),target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}]}},opening:{tags:["closed"],activities:["trackScroll","trackPointerlockChange"],after:{OPEN_DELAY:[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],POINTER_LEAVE:[{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose","toggleVisibility"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose","toggleVisibility"]},{target:"closed",actions:["invokeOnClose"]}]}},open:{tags:["open"],activities:["trackEscapeKey","trackScroll","trackPointerlockChange","trackPositioning"],entry:["setGlobalId"],on:{"CONTROLLED.CLOSE":"closed",CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],POINTER_LEAVE:[{guard:"isVisible",target:"closing",actions:["clearPointerMoveOpened"]},{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],"CONTENT.POINTER_LEAVE":{guard:"isInteractive",target:"closing"},"POSITIONING.SET":{actions:"reposition"}}},closing:{tags:["open"],activities:["trackStore","trackPositioning"],after:{CLOSE_DELAY:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]},on:{"CONTROLLED.CLOSE":"closed","CONTROLLED.OPEN":"open",CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],POINTER_MOVE:[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen","toggleVisibility"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}],"CONTENT.POINTER_MOVE":{guard:"isInteractive",target:"open"},"POSITIONING.SET":{actions:"reposition"}}}}},{activities:{trackFocusVisible(r){return wk({root:pt.getRootNode(r)})},trackPositioning(r){r.currentPlacement||(r.currentPlacement=r.positioning.placement);const n=()=>pt.getPositionerEl(r);return Xf(pt.getTriggerEl(r),n,{...r.positioning,defer:!0,onComplete(i){r.currentPlacement=i.placement}})},trackPointerlockChange(r,n,{send:i}){const s=()=>i({type:"CLOSE",src:"pointerlock:change"});return ct(pt.getDoc(r),"pointerlockchange",s,!1)},trackScroll(r,n,{send:i}){if(!r.closeOnScroll)return;const s=pt.getTriggerEl(r);if(!s)return;const a=qI(s).map(l=>ct(l,"scroll",()=>{i({type:"CLOSE",src:"scroll"})},{passive:!0,capture:!0}));return()=>{a.forEach(l=>l?.())}},trackStore(r,n,{send:i}){return Vu(Ui,()=>{Ui.id!==r.id&&i({type:"CLOSE",src:"id.change"})})},trackEscapeKey(r,n,{send:i}){if(!r.closeOnEscape)return;const s=o=>{Tb(o)||o.key==="Escape"&&(o.stopPropagation(),i({type:"CLOSE",src:"keydown.escape"}))};return ct(pt.getDoc(r),"keydown",s,!0)}},actions:{setGlobalId(r){Ui.setId(r.id)},clearGlobalId(r){r.id===Ui.id&&Ui.setId(null)},invokeOnOpen(r){r.onOpenChange?.({open:!0})},invokeOnClose(r){r.onOpenChange?.({open:!1})},closeIfDisabled(r,n,{send:i}){r.disabled&&i({type:"CLOSE",src:"disabled.change"})},reposition(r,n){const i=()=>pt.getPositionerEl(r);Xf(pt.getTriggerEl(r),i,{...r.positioning,...n.options,defer:!0,listeners:!1,onComplete(s){r.currentPlacement=s.placement}})},toggleVisibility(r,n,{send:i}){queueMicrotask(()=>{i({type:r.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})})},setPointerMoveOpened(r){r.hasPointerMoveOpened=!0},clearPointerMoveOpened(r){r.hasPointerMoveOpened=!1}},guards:{noVisibleTooltip:()=>Ui.id===null,isVisible:r=>r.id===Ui.id,isInteractive:r=>r.interactive,hasPointerMoveOpened:r=>!!r.hasPointerMoveOpened,isOpenControlled:r=>!!r["open.controlled"]},delays:{OPEN_DELAY:r=>r.openDelay,CLOSE_DELAY:r=>r.closeDelay}})}Ae()(["aria-label","closeDelay","closeOnEscape","closeOnPointerDown","closeOnScroll","closeOnClick","dir","disabled","getRootNode","id","ids","interactive","onOpenChange","open.controlled","open","openDelay","positioning"]);const lj=(t={})=>{const{getRootNode:e}=nc(),{dir:r}=cd(),n={id:w.useId(),dir:r,getRootNode:e,open:t.defaultOpen,"open.controlled":t.open!==void 0,...t},i={...n,onOpenChange:On(t.onOpenChange,{sync:!0})},[s,o]=ua(aj(n),{context:i});return sj(s,o,ro)},cj=t=>{const[e,{children:r,...n}]=og(t),i=lj(n),s=dd(ae({present:i.open},e));return b.jsx(bR,{value:i,children:b.jsx(hd,{value:s,children:r})})},uj=t=>{const[e,{value:r,children:n}]=og(t),i=dd(ae({present:r.open},e));return b.jsx(bR,{value:r,children:b.jsx(hd,{value:i,children:n})})},TR=w.forwardRef((t,e)=>{const r=pd(),n=ae(r.getTriggerProps(),t);return b.jsx(pe.button,{...n,ref:e})});TR.displayName="TooltipTrigger";const dj=HA.extendWith("itemBody"),hj=me("action-bar").parts("positioner","content","separator","selectionTrigger","closeTrigger"),fj=me("alert").parts("title","description","root","indicator","content"),pj=me("breadcrumb").parts("link","currentLink","item","list","root","ellipsis","separator"),gj=me("blockquote").parts("root","icon","content","caption"),mj=me("card").parts("root","header","body","footer","title","description"),yj=me("checkbox-card",["root","control","label","description","addon","indicator","content"]),vj=me("data-list").parts("root","item","itemLabel","itemValue"),xj=Qb.extendWith("header","body","footer","backdrop"),bj=Qb.extendWith("header","body","footer","backdrop"),_j=lk.extendWith("textarea"),wj=me("empty-state",["root","content","indicator","title","description"]),Sj=fk.extendWith("requiredIndicator"),Ej=gk.extendWith("content"),Cj=mk.extendWith("itemContent","dropzoneContent"),Tj=me("list").parts("root","item","indicator"),Pj=yk.extendWith("itemCommand"),Ij=me("select").parts("root","field","indicator"),Aj=vk.extendWith("header","body","footer"),PR=Jb.extendWith("itemAddon","itemIndicator"),kj=PR.extendWith("itemContent","itemDescription"),Rj=Ck.extendWith("itemIndicator"),Mj=zk.extendWith("indicatorGroup"),Oj=Gk.extendWith("markerIndicator"),Lj=me("stat").parts("root","label","helpText","valueText","valueUnit","indicator"),Dj=me("status").parts("root","indicator"),Fj=me("steps",["root","list","item","trigger","indicator","separator","content","title","description","nextTrigger","prevTrigger","progress"]),Nj=Zk.extendWith("indicator"),Bj=me("table").parts("root","header","body","row","columnHeader","cell","footer","caption"),Uj=me("toast").parts("root","title","description","indicator","closeTrigger","actionTrigger"),zj=me("tabs").parts("root","trigger","list","content","contentGroup","indicator"),$j=me("tag").parts("root","label","closeTrigger","startElement","endElement"),jj=me("timeline").parts("root","item","content","separator","indicator","connector","title","description"),Vj=ve({className:"chakra-accordion",slots:dj.keys(),base:{root:{width:"full","--accordion-radius":"radii.l2"},item:{overflowAnchor:"none"},itemTrigger:{display:"flex",alignItems:"center",width:"full",outline:"0",gap:"3",fontWeight:"medium",borderRadius:"var(--accordion-radius)",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{layerStyle:"disabled"}},itemBody:{pt:"var(--accordion-padding-y)",pb:"calc(var(--accordion-padding-y) * 2)"},itemContent:{overflow:"hidden",borderRadius:"var(--accordion-radius)",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}},itemIndicator:{transition:"rotate 0.2s",transformOrigin:"center",color:"fg.subtle",_open:{rotate:"180deg"},_icon:{width:"1.2em",height:"1.2em"}}},variants:{variant:{outline:{item:{borderBottomWidth:"1px"}},subtle:{itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{borderRadius:"var(--accordion-radius)",_open:{bg:"colorPalette.subtle"}}},enclosed:{root:{borderWidth:"1px",borderRadius:"var(--accordion-radius)",divideY:"1px",overflow:"hidden"},itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{_open:{bg:"bg.subtle"}}},plain:{}},size:{sm:{root:{"--accordion-padding-x":"spacing.3","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"sm",py:"var(--accordion-padding-y)"}},md:{root:{"--accordion-padding-x":"spacing.4","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"md",py:"var(--accordion-padding-y)"}},lg:{root:{"--accordion-padding-x":"spacing.4.5","--accordion-padding-y":"spacing.2.5"},itemTrigger:{textStyle:"lg",py:"var(--accordion-padding-y)"}}}},defaultVariants:{size:"md",variant:"outline"}}),Gj=ve({className:"chakra-action-bar",slots:hj.keys(),base:{positioner:{position:"fixed",display:"flex",justifyContent:"center",pointerEvents:"none",insetInline:"0",top:"unset",bottom:"calc(env(safe-area-inset-bottom) + 20px)"},content:{bg:"bg.panel",shadow:"md",display:"flex",alignItems:"center",gap:"3",borderRadius:"l3",py:"2.5",px:"3",pointerEvents:"auto",translate:"calc(-1 * var(--scrollbar-width) / 2) 0px",_open:{animationName:"slide-from-bottom, fade-in",animationDuration:"moderate"},_closed:{animationName:"slide-to-bottom, fade-out",animationDuration:"faster"}},separator:{width:"1px",height:"5",bg:"border"},selectionTrigger:{display:"inline-flex",alignItems:"center",gap:"2",alignSelf:"stretch",textStyle:"sm",px:"4",py:"1",borderRadius:"l2",borderWidth:"1px",borderStyle:"dashed"}}}),Wj=ve({slots:fj.keys(),className:"chakra-alert",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",borderRadius:"l3"},title:{fontWeight:"medium"},description:{display:"inline"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"1em",height:"1em",_icon:{boxSize:"full"}},content:{display:"flex",flex:"1",gap:"1"}},variants:{status:{info:{root:{colorPalette:"blue"}},warning:{root:{colorPalette:"orange"}},success:{root:{colorPalette:"green"}},error:{root:{colorPalette:"red"}},neutral:{root:{colorPalette:"gray"}}},inline:{true:{content:{display:"inline-flex",flexDirection:"row",alignItems:"center"}},false:{content:{display:"flex",flexDirection:"column"}}},variant:{subtle:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg"}},surface:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"},indicator:{color:"colorPalette.contrast"}}},size:{sm:{root:{gap:"2",px:"3",py:"3",textStyle:"xs"},indicator:{textStyle:"lg"}},md:{root:{gap:"3",px:"4",py:"4",textStyle:"sm"},indicator:{textStyle:"xl"}},lg:{root:{gap:"3",px:"4",py:"4",textStyle:"md"},indicator:{textStyle:"2xl"}}}},defaultVariants:{status:"info",variant:"subtle",size:"md",inline:!1}}),Hj=ve({slots:tR.keys(),className:"chakra-avatar",base:{root:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"medium",position:"relative",verticalAlign:"top",flexShrink:"0",userSelect:"none",width:"var(--avatar-size)",height:"var(--avatar-size)",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)","&[data-group-item]":{borderWidth:"2px",borderColor:"bg"}},image:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--avatar-radius)"},fallback:{lineHeight:"1",textTransform:"uppercase",fontWeight:"medium",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)"}},variants:{size:{full:{root:{"--avatar-size":"100%","--avatar-font-size":"100%"}},"2xs":{root:{"--avatar-font-size":"fontSizes.2xs","--avatar-size":"sizes.6"}},xs:{root:{"--avatar-font-size":"fontSizes.xs","--avatar-size":"sizes.8"}},sm:{root:{"--avatar-font-size":"fontSizes.sm","--avatar-size":"sizes.9"}},md:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.10"}},lg:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.11"}},xl:{root:{"--avatar-font-size":"fontSizes.lg","--avatar-size":"sizes.12"}},"2xl":{root:{"--avatar-font-size":"fontSizes.xl","--avatar-size":"sizes.16"}}},variant:{solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},subtle:{root:{bg:"colorPalette.muted",color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",borderWidth:"1px",borderColor:"colorPalette.muted"}}},shape:{square:{},rounded:{root:{"--avatar-radius":"radii.l3"}},full:{root:{"--avatar-radius":"radii.full"}}},borderless:{true:{root:{"&[data-group-item]":{borderWidth:"0px"}}}}},defaultVariants:{size:"md",shape:"full",variant:"subtle"}}),Xj=ve({className:"chakra-blockquote",slots:gj.keys(),base:{root:{position:"relative",display:"flex",flexDirection:"column",gap:"2"},caption:{textStyle:"sm",color:"fg.muted"},icon:{boxSize:"5"}},variants:{justify:{start:{root:{alignItems:"flex-start",textAlign:"start"}},center:{root:{alignItems:"center",textAlign:"center"}},end:{root:{alignItems:"flex-end",textAlign:"end"}}},variant:{subtle:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.muted"},icon:{color:"colorPalette.fg"}},solid:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.solid"},icon:{color:"colorPalette.solid"}},plain:{root:{paddingX:"5"},icon:{color:"colorPalette.solid"}}}},defaultVariants:{variant:"subtle",justify:"start"}}),Yj=ve({className:"chakra-breadcrumb",slots:pj.keys(),base:{list:{display:"flex",alignItems:"center",wordBreak:"break-word",color:"fg.muted"},link:{outline:"0",textDecoration:"none",borderRadius:"l1",focusRing:"outside",display:"inline-flex",alignItems:"center",gap:"2"},item:{display:"inline-flex",alignItems:"center"},separator:{color:"fg.muted",opacity:"0.8",_icon:{boxSize:"1em"}},ellipsis:{display:"inline-flex",alignItems:"center",justifyContent:"center",_icon:{boxSize:"1em"}}},variants:{variant:{underline:{link:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"0.2em",textDecorationColor:"colorPalette.muted"},currentLink:{color:"colorPalette.fg"}},plain:{link:{color:"fg.muted",_hover:{color:"fg"}},currentLink:{color:"fg"}}},size:{sm:{list:{gap:"1",textStyle:"xs"}},md:{list:{gap:"1.5",textStyle:"sm"}},lg:{list:{gap:"2",textStyle:"md"}}}},defaultVariants:{variant:"plain",size:"md"}}),qj=ve({className:"chakra-card",slots:mj.keys(),base:{root:{display:"flex",flexDirection:"column",position:"relative",minWidth:"0",wordWrap:"break-word",borderRadius:"l3",color:"fg",textAlign:"start"},title:{fontWeight:"semibold"},description:{color:"fg.muted",fontSize:"sm"},header:{paddingInline:"var(--card-padding)",paddingTop:"var(--card-padding)",display:"flex",flexDirection:"column",gap:"1.5"},body:{padding:"var(--card-padding)",flex:"1",display:"flex",flexDirection:"column"},footer:{display:"flex",alignItems:"center",gap:"2",paddingInline:"var(--card-padding)",paddingBottom:"var(--card-padding)"}},variants:{size:{sm:{root:{"--card-padding":"spacing.4"},title:{textStyle:"md"}},md:{root:{"--card-padding":"spacing.6"},title:{textStyle:"lg"}},lg:{root:{"--card-padding":"spacing.7"},title:{textStyle:"xl"}}},variant:{elevated:{root:{bg:"bg.panel",boxShadow:"md"}},outline:{root:{bg:"bg.panel",borderWidth:"1px",borderColor:"border"}},subtle:{root:{bg:"bg.muted"}}}},defaultVariants:{variant:"outline",size:"md"}}),Kj=ve({slots:j$.keys(),className:"chakra-checkbox",base:{root:{display:"inline-flex",gap:"2",alignItems:"center",verticalAlign:"top",position:"relative"},control:Ut.base,label:{fontWeight:"medium",userSelect:"none",_disabled:{opacity:"0.5"}}},variants:{size:{xs:{root:{gap:"1.5"},label:{textStyle:"xs"},control:Ut.variants?.size?.xs},sm:{root:{gap:"2"},label:{textStyle:"sm"},control:Ut.variants?.size?.sm},md:{root:{gap:"2.5"},label:{textStyle:"sm"},control:Ut.variants?.size?.md},lg:{root:{gap:"3"},label:{textStyle:"md"},control:Ut.variants?.size?.lg}},variant:{outline:{control:Ut.variants?.variant?.outline},solid:{control:Ut.variants?.variant?.solid},subtle:{control:Ut.variants?.variant?.subtle}}},defaultVariants:{variant:"solid",size:"md"}}),Zj=ve({slots:yj.keys(),className:"chakra-checkbox-card",base:{root:{display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",flex:"1",focusVisibleRing:"outside",_disabled:{opacity:"0.8",borderColor:"border.subtle"},_invalid:{outline:"2px solid",outlineColor:"border.error"}},control:{display:"inline-flex",flex:"1",position:"relative",borderRadius:"inherit",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"},label:{fontWeight:"medium",display:"flex",alignItems:"center",gap:"2",_disabled:{opacity:"0.5"}},description:{opacity:"0.64",textStyle:"sm"},addon:{_disabled:{opacity:"0.5"}},indicator:Ut.base,content:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"}},variants:{size:{sm:{root:{textStyle:"sm"},control:{padding:"3",gap:"1.5"},addon:{px:"3",py:"1.5",borderTopWidth:"1px"},indicator:Ut.variants?.size.sm},md:{root:{textStyle:"sm"},control:{padding:"4",gap:"2.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:Ut.variants?.size.md},lg:{root:{textStyle:"md"},control:{padding:"4",gap:"3.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:Ut.variants?.size.lg}},variant:{surface:{root:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"},_disabled:{bg:"bg.muted"}},indicator:Ut.variants?.variant.solid},subtle:{root:{bg:"bg.muted"},control:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},indicator:Ut.variants?.variant.plain},outline:{root:{borderWidth:"1px",borderColor:"border",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},indicator:Ut.variants?.variant.solid},solid:{root:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},indicator:Ut.variants?.variant.inverted}},justify:{start:{root:{"--checkbox-card-justify":"flex-start"}},end:{root:{"--checkbox-card-justify":"flex-end"}},center:{root:{"--checkbox-card-justify":"center"}}},align:{start:{root:{"--checkbox-card-align":"flex-start"},content:{textAlign:"start"}},end:{root:{"--checkbox-card-align":"flex-end"},content:{textAlign:"end"}},center:{root:{"--checkbox-card-align":"center"},content:{textAlign:"center"}}},orientation:{vertical:{control:{flexDirection:"column"}},horizontal:{control:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}}),Qj=ve({slots:XA.keys(),className:"chakra-collapsible",base:{content:{overflow:"hidden",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}}}}),Jj=ve({className:"colorPicker",slots:V$.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5"},label:{color:"fg",fontWeight:"medium",textStyle:"sm"},valueText:{textAlign:"start"},control:{display:"flex",alignItems:"center",flexDirection:"row",gap:"2",position:"relative"},swatchTrigger:{display:"flex",alignItems:"center",justifyContent:"center"},trigger:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",flexShrink:"0",gap:"2",textStyle:"sm",minH:"var(--input-height)",minW:"var(--input-height)",px:"1",rounded:"l2",_disabled:{opacity:"0.5"},"--focus-color":"colors.colorPalette.focusRing","&:focus-visible":{borderColor:"var(--focus-color)",outline:"1px solid var(--focus-color)"},"&[data-fit-content]":{"--input-height":"unset",px:"0",border:"0"}},content:{display:"flex",flexDirection:"column",bg:"bg.panel",borderRadius:"l3",boxShadow:"lg",width:"64",p:"4",gap:"3",zIndex:"dropdown",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},area:{height:"180px",borderRadius:"l2",overflow:"hidden"},areaThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",focusVisibleRing:"mixed",focusRingColor:"white"},areaBackground:{height:"full"},channelSlider:{borderRadius:"l2",flex:"1"},channelSliderTrack:{height:"var(--slider-height)",borderRadius:"inherit",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"},swatchGroup:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"2"},swatch:{...WA.base,borderRadius:"l1"},swatchIndicator:{color:"white",rounded:"full"},channelSliderThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",transform:"translate(-50%, -50%)",focusVisibleRing:"outside",focusRingOffset:"1px"},channelInput:{...ft.base,"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}},formatSelect:{textStyle:"xs",textTransform:"uppercase",borderWidth:"1px",minH:"6",focusRing:"inside",rounded:"l2"},transparencyGrid:{borderRadius:"l2"},view:{display:"flex",flexDirection:"column",gap:"2"}},variants:{size:{"2xs":{channelInput:ft.variants?.size?.["2xs"],swatch:{"--swatch-size":"sizes.4.5"},trigger:{"--input-height":"sizes.7"},area:{"--thumb-size":"sizes.3"},channelSlider:{"--slider-height":"sizes.3","--thumb-size":"sizes.3"}},xs:{channelInput:ft.variants?.size?.xs,swatch:{"--swatch-size":"sizes.5"},trigger:{"--input-height":"sizes.8"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},sm:{channelInput:ft.variants?.size?.sm,swatch:{"--swatch-size":"sizes.6"},trigger:{"--input-height":"sizes.9"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},md:{channelInput:ft.variants?.size?.md,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.10"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},lg:{channelInput:ft.variants?.size?.lg,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.11"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},xl:{channelInput:ft.variants?.size?.xl,swatch:{"--swatch-size":"sizes.8"},trigger:{"--input-height":"sizes.12"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},"2xl":{channelInput:ft.variants?.size?.["2xl"],swatch:{"--swatch-size":"sizes.10"},trigger:{"--input-height":"sizes.16"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}}},variant:{outline:{channelInput:ft.variants?.variant?.outline,trigger:{borderWidth:"1px"}},subtle:{channelInput:ft.variants?.variant?.subtle,trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}}},defaultVariants:{size:"md",variant:"outline"}}),eV=ve({slots:vj.keys(),className:"chakra-data-list",base:{itemLabel:{display:"flex",alignItems:"center",gap:"1"},itemValue:{display:"flex",minWidth:"0",flex:"1"}},variants:{orientation:{horizontal:{root:{display:"flex",flexDirection:"column"},item:{display:"inline-flex",alignItems:"center",gap:"4"},itemLabel:{minWidth:"120px"}},vertical:{root:{display:"flex",flexDirection:"column"},item:{display:"flex",flexDirection:"column",gap:"1"}}},size:{sm:{root:{gap:"3"},item:{textStyle:"xs"}},md:{root:{gap:"4"},item:{textStyle:"sm"}},lg:{root:{gap:"5"},item:{textStyle:"md"}}},variant:{subtle:{itemLabel:{color:"fg.muted"}},bold:{itemLabel:{fontWeight:"medium"},itemValue:{color:"fg.muted"}}}},defaultVariants:{size:"md",orientation:"vertical",variant:"subtle"}}),tV=ve({slots:xj.keys(),className:"chakra-dialog",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",left:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",left:0,top:0,"--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",justifyContent:"center",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,borderRadius:"l3",textStyle:"sm",my:"var(--dialog-margin, var(--dialog-base-margin))","--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"moderate"},_closed:{animationDuration:"faster"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{flex:"1",px:"6",pt:"2",pb:"6"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{placement:{center:{positioner:{alignItems:"center"},content:{"--dialog-base-margin":"auto",mx:"auto"}},top:{positioner:{alignItems:"flex-start"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}},bottom:{positioner:{alignItems:"flex-end"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}}},scrollBehavior:{inside:{positioner:{overflow:"hidden"},content:{maxH:"calc(100% - 7.5rem)"},body:{overflow:"auto"}},outside:{positioner:{overflow:"auto",pointerEvents:"auto"}}},size:{xs:{content:{maxW:"sm"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},cover:{positioner:{padding:"10"},content:{width:"100%",height:"100%","--dialog-margin":"0"}},full:{content:{maxW:"100vw",minH:"100vh","--dialog-margin":"0",borderRadius:"0"}}},motionPreset:{scale:{content:{_open:{animationName:"scale-in, fade-in"},_closed:{animationName:"scale-out, fade-out"}}},"slide-in-bottom":{content:{_open:{animationName:"slide-from-bottom, fade-in"},_closed:{animationName:"slide-to-bottom, fade-out"}}},"slide-in-top":{content:{_open:{animationName:"slide-from-top, fade-in"},_closed:{animationName:"slide-to-top, fade-out"}}},"slide-in-left":{content:{_open:{animationName:"slide-from-left, fade-in"},_closed:{animationName:"slide-to-left, fade-out"}}},"slide-in-right":{content:{_open:{animationName:"slide-from-right, fade-in"},_closed:{animationName:"slide-to-right, fade-out"}}},none:{}}},defaultVariants:{size:"md",scrollBehavior:"outside",placement:"top",motionPreset:"scale"}}),rV=ve({slots:bj.keys(),className:"chakra-drawer",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",insetInlineStart:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",insetInlineStart:0,top:0,zIndex:"modal",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,zIndex:"modal",textStyle:"sm",maxH:"100dvh",color:"inherit",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"slowest",animationTimingFunction:"ease-in-smooth"},_closed:{animationDuration:"slower",animationTimingFunction:"ease-in-smooth"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{px:"6",py:"2",flex:"1",overflow:"auto"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{size:{xs:{content:{maxW:"xs"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},full:{content:{maxW:"100vw",h:"100dvh"}}},placement:{start:{positioner:{justifyContent:"flex-start"},content:{_open:{animationName:{base:"slide-from-left-full, fade-in",_rtl:"slide-from-right-full, fade-in"}},_closed:{animationName:{base:"slide-to-left-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},end:{positioner:{justifyContent:"flex-end"},content:{_open:{animationName:{base:"slide-from-right-full, fade-in",_rtl:"slide-from-left-full, fade-in"}},_closed:{animationName:{base:"slide-to-right-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},top:{positioner:{alignItems:"flex-start"},content:{maxW:"100%",_open:{animationName:"slide-from-top-full, fade-in"},_closed:{animationName:"slide-to-top-full, fade-out"}}},bottom:{positioner:{alignItems:"flex-end"},content:{maxW:"100%",_open:{animationName:"slide-from-bottom-full, fade-in"},_closed:{animationName:"slide-to-bottom-full, fade-out"}}}},contained:{true:{positioner:{padding:"4"},content:{borderRadius:"l3"}}}},defaultVariants:{size:"xs",placement:"end"}}),c1=bA({fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",borderRadius:"l2"}),nV=ve({slots:_j.keys(),className:"chakra-editable",base:{root:{display:"inline-flex",alignItems:"center",position:"relative",gap:"1.5",width:"full"},preview:{...c1,py:"1",px:"1",display:"inline-flex",alignItems:"center",transitionProperty:"common",transitionDuration:"normal",cursor:"text",_hover:{bg:"bg.muted"},_disabled:{userSelect:"none"}},input:{...c1,outline:"0",py:"1",px:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",focusVisibleRing:"inside",focusRingWidth:"2px",_placeholder:{opacity:.6}},control:{display:"inline-flex",alignItems:"center",gap:"1.5"}},variants:{size:{sm:{root:{textStyle:"sm"},preview:{minH:"8"},input:{minH:"8"}},md:{root:{textStyle:"sm"},preview:{minH:"9"},input:{minH:"9"}},lg:{root:{textStyle:"md"},preview:{minH:"10"},input:{minH:"10"}}}},defaultVariants:{size:"md"}}),iV=ve({slots:wj.keys(),className:"chakra-empty-state",base:{root:{width:"full"},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:"fg.subtle",_icon:{boxSize:"1em"}},title:{fontWeight:"semibold"},description:{textStyle:"sm",color:"fg.muted"}},variants:{size:{sm:{root:{px:"4",py:"6"},title:{textStyle:"md"},content:{gap:"4"},indicator:{textStyle:"2xl"}},md:{root:{px:"8",py:"12"},title:{textStyle:"lg"},content:{gap:"6"},indicator:{textStyle:"4xl"}},lg:{root:{px:"12",py:"16"},title:{textStyle:"xl"},content:{gap:"8"},indicator:{textStyle:"6xl"}}}},defaultVariants:{size:"md"}}),sV=ve({className:"chakra-field",slots:Sj.keys(),base:{requiredIndicator:{color:"fg.error",lineHeight:"1"},root:{display:"flex",width:"100%",position:"relative",gap:"1.5"},label:{display:"flex",alignItems:"center",textAlign:"start",textStyle:"sm",fontWeight:"medium",gap:"1",userSelect:"none",_disabled:{opacity:"0.5"}},errorText:{display:"inline-flex",alignItems:"center",fontWeight:"medium",gap:"1",color:"fg.error",textStyle:"xs"},helperText:{color:"fg.muted",textStyle:"xs"}},variants:{orientation:{vertical:{root:{flexDirection:"column",alignItems:"flex-start"}},horizontal:{root:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},label:{flex:"0 0 var(--field-label-width, 80px)"}}}},defaultVariants:{orientation:"vertical"}}),oV=ve({className:"fieldset",slots:Ej.keys(),base:{root:{display:"flex",flexDirection:"column",width:"full"},content:{display:"flex",flexDirection:"column",width:"full"},legend:{color:"fg",fontWeight:"medium",_disabled:{opacity:"0.5"}},helperText:{color:"fg.muted",textStyle:"sm"},errorText:{display:"inline-flex",alignItems:"center",color:"fg.error",gap:"2",fontWeight:"medium",textStyle:"sm"}},variants:{size:{sm:{root:{spaceY:"2"},content:{gap:"1.5"},legend:{textStyle:"sm"}},md:{root:{spaceY:"4"},content:{gap:"4"},legend:{textStyle:"sm"}},lg:{root:{spaceY:"6"},content:{gap:"4"},legend:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),aV=ve({className:"chakra-file-upload",slots:Cj.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"4",width:"100%",alignItems:"flex-start"},label:{fontWeight:"medium",textStyle:"sm"},dropzone:{background:"bg",borderRadius:"l3",borderWidth:"2px",borderStyle:"dashed",display:"flex",alignItems:"center",flexDirection:"column",gap:"4",justifyContent:"center",minHeight:"2xs",px:"3",py:"2",transition:"backgrounds",focusVisibleRing:"outside",_hover:{bg:"bg.subtle"},_dragging:{bg:"colorPalette.subtle",borderStyle:"solid",borderColor:"colorPalette.solid"}},dropzoneContent:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"1",textStyle:"sm"},item:{textStyle:"sm",animationName:"fade-in",animationDuration:"moderate",background:"bg",borderRadius:"l2",borderWidth:"1px",width:"100%",display:"flex",alignItems:"center",gap:"3",p:"4"},itemGroup:{width:"100%",display:"flex",flexDirection:"column",gap:"3"},itemName:{color:"fg",fontWeight:"medium",lineClamp:"1"},itemContent:{display:"flex",flexDirection:"column",gap:"0.5",flex:"1"},itemSizeText:{color:"fg.muted",textStyle:"xs"},itemDeleteTrigger:{alignSelf:"flex-start"},itemPreviewImage:{width:"10",height:"10",objectFit:"scale-down"}},defaultVariants:{}}),lV=ve({className:"chakra-hover-card",slots:nR.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--hovercard-bg":"colors.bg.panel",bg:"var(--hovercard-bg)",boxShadow:"lg",maxWidth:"80",borderRadius:"l3",zIndex:"popover",transformOrigin:"var(--transform-origin)",outline:"0",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--hovercard-bg)"},arrowTip:{borderTopWidth:"0.5px",borderInlineStartWidth:"0.5px"}},variants:{size:{xs:{content:{padding:"3"}},sm:{content:{padding:"4"}},md:{content:{padding:"5"}},lg:{content:{padding:"6"}}}},defaultVariants:{size:"md"}}),cV=ve({className:"chakra-list",slots:Tj.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"var(--list-gap)","& :where(ul, ol)":{marginTop:"var(--list-gap)"}},item:{whiteSpace:"normal",display:"list-item"},indicator:{marginEnd:"2",minHeight:"1lh",flexShrink:0,display:"inline-block",verticalAlign:"middle"}},variants:{variant:{marker:{root:{listStyle:"revert",listStylePosition:"inside"},item:{_marker:{color:"fg.subtle"}}},plain:{item:{alignItems:"flex-start",display:"inline-flex"}}},align:{center:{item:{alignItems:"center"}},start:{item:{alignItems:"flex-start"}},end:{item:{alignItems:"flex-end"}}}},defaultVariants:{variant:"marker"}}),uV=ve({className:"chakra-menu",slots:Pj.keys(),base:{content:{outline:0,bg:"bg.panel",boxShadow:"lg",color:"fg",maxHeight:"var(--available-height)","--menu-z-index":"zIndex.dropdown",zIndex:"calc(var(--menu-z-index) + var(--layer-index, 0))",borderRadius:"l2",overflow:"hidden",overflowY:"auto",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},item:{textDecoration:"none",color:"fg",userSelect:"none",borderRadius:"l1",width:"100%",display:"flex",cursor:"menuitem",alignItems:"center",textAlign:"start",position:"relative",flex:"0 0 auto",outline:0,_disabled:{layerStyle:"disabled"}},itemText:{flex:"1"},itemGroupLabel:{px:"2",py:"1.5",fontWeight:"semibold",textStyle:"sm"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},itemCommand:{opacity:"0.6",textStyle:"xs",ms:"auto",ps:"4",letterSpacing:"widest"},separator:{height:"1px",bg:"bg.muted",my:"1",mx:"-1"}},variants:{variant:{subtle:{item:{_highlighted:{bg:"bg.emphasized/60"}}},solid:{item:{_highlighted:{bg:"colorPalette.solid",color:"colorPalette.contrast"}}}},size:{sm:{content:{minW:"8rem",padding:"1"},item:{gap:"1",textStyle:"xs",py:"1",px:"1.5"}},md:{content:{minW:"8rem",padding:"1.5"},item:{gap:"2",textStyle:"sm",py:"1.5",px:"2"}}}},defaultVariants:{size:"md",variant:"subtle"}}),Kh=ve({className:"chakra-select",slots:Mj.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",width:"full"},trigger:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"full",minH:"var(--select-trigger-height)",px:"var(--select-trigger-padding-x)",borderRadius:"l2",userSelect:"none",textAlign:"start",focusVisibleRing:"inside",_placeholderShown:{color:"fg.muted/80"},_disabled:{layerStyle:"disabled"},_invalid:{borderColor:"border.error"}},indicatorGroup:{display:"flex",alignItems:"center",gap:"1",pos:"absolute",right:"0",top:"0",bottom:"0",px:"var(--select-trigger-padding-x)",pointerEvents:"none"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:{base:"fg.muted",_disabled:"fg.subtle",_invalid:"fg.error"}},content:{background:"bg.panel",display:"flex",flexDirection:"column",zIndex:"dropdown",borderRadius:"l2",outline:0,maxH:"96",overflowY:"auto",boxShadow:"md",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"fastest"}},item:{position:"relative",userSelect:"none",display:"flex",alignItems:"center",gap:"2",cursor:"option",justifyContent:"space-between",flex:"1",textAlign:"start",borderRadius:"l1",_highlighted:{bg:"bg.emphasized/60"},_disabled:{pointerEvents:"none",opacity:"0.5"},_icon:{width:"4",height:"4"}},control:{pos:"relative"},itemText:{flex:"1"},itemGroup:{_first:{mt:"0"}},itemGroupLabel:{py:"1",fontWeight:"medium"},label:{fontWeight:"medium",userSelect:"none",textStyle:"sm",_disabled:{layerStyle:"disabled"}},valueText:{lineClamp:"1",maxW:"80%"}},variants:{variant:{outline:{trigger:{bg:"transparent",borderWidth:"1px",borderColor:"border",_expanded:{borderColor:"border.emphasized"}}},subtle:{trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}},size:{xs:{root:{"--select-trigger-height":"sizes.8","--select-trigger-padding-x":"spacing.2"},content:{p:"1",gap:"1",textStyle:"xs"},trigger:{textStyle:"xs",gap:"1"},item:{py:"1",px:"2"},itemGroupLabel:{py:"1",px:"2"},indicator:{_icon:{width:"3.5",height:"3.5"}}},sm:{root:{"--select-trigger-height":"sizes.9","--select-trigger-padding-x":"spacing.2.5"},content:{p:"1",textStyle:"sm"},trigger:{textStyle:"sm",gap:"1"},indicator:{_icon:{width:"4",height:"4"}},item:{py:"1",px:"1.5"},itemGroup:{mt:"1"},itemGroupLabel:{py:"1",px:"1.5"}},md:{root:{"--select-trigger-height":"sizes.10","--select-trigger-padding-x":"spacing.3"},content:{p:"1",textStyle:"sm"},itemGroup:{mt:"1.5"},item:{py:"1.5",px:"2"},itemIndicator:{display:"flex",alignItems:"center",justifyContent:"center"},itemGroupLabel:{py:"1.5",px:"2"},trigger:{textStyle:"sm",gap:"2"},indicator:{_icon:{width:"4",height:"4"}}},lg:{root:{"--select-trigger-height":"sizes.12","--select-trigger-padding-x":"spacing.4"},content:{p:"1.5",textStyle:"md"},itemGroup:{mt:"2"},item:{py:"2",px:"3"},itemGroupLabel:{py:"2",px:"3"},trigger:{textStyle:"md",py:"3",gap:"2"},indicator:{_icon:{width:"5",height:"5"}}}}},defaultVariants:{size:"md",variant:"outline"}}),dV=ve({className:"chakra-native-select",slots:Ij.keys(),base:{root:{height:"fit-content",display:"flex",width:"100%",position:"relative"},field:{width:"100%",minWidth:"0",outline:"0",appearance:"none",borderRadius:"l2","--error-color":"colors.border.error",_disabled:{layerStyle:"disabled"},_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"},focusVisibleRing:"inside",lineHeight:"normal","& > option, & > optgroup":{bg:"bg"}},indicator:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)",height:"100%",color:"fg.muted",_disabled:{opacity:"0.5"},_invalid:{color:"fg.error"},_icon:{width:"1em",height:"1em"}}},variants:{variant:{outline:{field:Kh.variants?.variant.outline.trigger},subtle:{field:Kh.variants?.variant.subtle.trigger},plain:{field:{bg:"transparent",color:"fg",focusRingWidth:"2px"}}},size:{xs:{field:{textStyle:"xs",ps:"2",pe:"6",height:"6"},indicator:{textStyle:"sm",insetEnd:"1.5"}},sm:{field:{textStyle:"sm",ps:"2.5",pe:"8",height:"8"},indicator:{textStyle:"md",insetEnd:"2"}},md:{field:{textStyle:"sm",ps:"3",pe:"8",height:"10"},indicator:{textStyle:"lg",insetEnd:"2"}},lg:{field:{textStyle:"md",ps:"4",pe:"8",height:"11"},indicator:{textStyle:"xl",insetEnd:"3"}},xl:{field:{textStyle:"md",ps:"4.5",pe:"10",height:"12"},indicator:{textStyle:"xl",insetEnd:"3"}}}},defaultVariants:Kh.defaultVariants});function Qv(t,e){const r={};for(const n in t){const i=e(n,t[n]);r[i[0]]=i[1]}return r}const u1=bA({display:"flex",justifyContent:"center",alignItems:"center",flex:"1",userSelect:"none",cursor:"button",lineHeight:"1",color:"fg.muted","--stepper-base-radius":"radii.l1","--stepper-radius":"calc(var(--stepper-base-radius) + 1px)",_icon:{boxSize:"1em"},_disabled:{opacity:"0.5"},_hover:{bg:"bg.muted"},_active:{bg:"bg.emphasized"}}),hV=ve({className:"chakra-number-input",slots:hR.keys(),base:{root:{position:"relative",zIndex:"0",isolation:"isolate"},input:{...ft.base,verticalAlign:"top",pe:"calc(var(--stepper-width) + 0.5rem)"},control:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",width:"var(--stepper-width)",height:"calc(100% - 2px)",zIndex:"1",borderStartWidth:"1px",divideY:"1px"},incrementTrigger:{...u1,borderTopEndRadius:"var(--stepper-radius)"},decrementTrigger:{...u1,borderBottomEndRadius:"var(--stepper-radius)"},valueText:{fontWeight:"medium",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}},variants:{size:{xs:{input:ft.variants.size.xs,control:{fontSize:"2xs","--stepper-width":"sizes.4"}},sm:{input:ft.variants.size.sm,control:{fontSize:"xs","--stepper-width":"sizes.5"}},md:{input:ft.variants.size.md,control:{fontSize:"sm","--stepper-width":"sizes.6"}},lg:{input:ft.variants.size.lg,control:{fontSize:"sm","--stepper-width":"sizes.6"}}},variant:Qv(ft.variants.variant,(t,e)=>[t,{input:e}])},defaultVariants:{size:"md",variant:"outline"}}),{variants:d1,defaultVariants:fV}=ft,pV=ve({className:"chakra-pin-input",slots:yR.keys(),base:{input:{...ft.base,textAlign:"center",width:"var(--input-height)"}},variants:{size:Qv(d1.size,(t,e)=>[t,{input:e}]),variant:Qv(d1.variant,(t,e)=>[t,{input:e}])},defaultVariants:fV}),gV=ve({className:"chakra-popover",slots:Aj.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--popover-bg":"colors.bg.panel",bg:"var(--popover-bg)",boxShadow:"lg","--popover-size":"sizes.xs","--popover-mobile-size":"calc(100dvw - 1rem)",width:{base:"min(var(--popover-mobile-size), var(--popover-size))",sm:"var(--popover-size)"},borderRadius:"l3","--popover-z-index":"zIndex.popover",zIndex:"calc(var(--popover-z-index) + var(--layer-index, 0))",outline:"0",transformOrigin:"var(--transform-origin)",maxHeight:"var(--available-height)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"faster"}},header:{paddingInline:"var(--popover-padding)",paddingTop:"var(--popover-padding)"},body:{padding:"var(--popover-padding)",flex:"1"},footer:{display:"flex",alignItems:"center",paddingInline:"var(--popover-padding)",paddingBottom:"var(--popover-padding)"},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--popover-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px"}},variants:{size:{xs:{content:{"--popover-padding":"spacing.3"}},sm:{content:{"--popover-padding":"spacing.4"}},md:{content:{"--popover-padding":"spacing.5"}},lg:{content:{"--popover-padding":"spacing.6"}}}},defaultVariants:{size:"md"}}),mV=ve({slots:t_.keys(),className:"chakra-progress",base:{root:{textStyle:"sm",position:"relative"},track:{overflow:"hidden",position:"relative"},range:{display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"width, height",transitionDuration:"slow",height:"100%",bgColor:"var(--track-color)",_indeterminate:{"--animate-from-x":"-40%","--animate-to-x":"100%",position:"absolute",willChange:"left",minWidth:"50%",animation:"position 1s ease infinite normal none running",backgroundImage:"linear-gradient(to right, transparent 0%, var(--track-color) 50%, transparent 100%)"}},label:{display:"inline-flex",fontWeight:"medium",alignItems:"center",gap:"1"},valueText:{textStyle:"xs",lineHeight:"1",fontWeight:"medium"}},variants:{variant:{outline:{track:{shadow:"inset",bgColor:"bg.muted"},range:{bgColor:"colorPalette.solid"}},subtle:{track:{bgColor:"colorPalette.muted"},range:{bgColor:"colorPalette.solid/72"}}},shape:{square:{},rounded:{track:{borderRadius:"l1"}},full:{track:{borderRadius:"full"}}},striped:{true:{range:{backgroundImage:"linear-gradient(45deg, var(--stripe-color) 25%, transparent 25%, transparent 50%, var(--stripe-color) 50%, var(--stripe-color) 75%, transparent 75%, transparent)",backgroundSize:"var(--stripe-size) var(--stripe-size)","--stripe-size":"1rem","--stripe-color":{_light:"rgba(255, 255, 255, 0.3)",_dark:"rgba(0, 0, 0, 0.3)"}}}},animated:{true:{range:{"--animate-from":"var(--stripe-size)",animation:"bg-position 1s linear infinite"}}},size:{xs:{track:{h:"1.5"}},sm:{track:{h:"2"}},md:{track:{h:"2.5"}},lg:{track:{h:"3"}},xl:{track:{h:"4"}}}},defaultVariants:{variant:"outline",size:"md",shape:"rounded"}}),yV=ve({className:"chakra-progress-circle",slots:t_.keys(),base:{root:{display:"inline-flex",textStyle:"sm",position:"relative"},circle:{_indeterminate:{animation:"spin 2s linear infinite"}},circleTrack:{"--track-color":"colors.colorPalette.muted",stroke:"var(--track-color)"},circleRange:{stroke:"colorPalette.solid",transitionProperty:"stroke-dasharray",transitionDuration:"0.6s",_indeterminate:{animation:"circular-progress 1.5s linear infinite"}},label:{display:"inline-flex"},valueText:{lineHeight:"1",fontWeight:"medium",letterSpacing:"tight",fontVariantNumeric:"tabular-nums"}},variants:{size:{xs:{circle:{"--size":"24px","--thickness":"4px"},valueText:{textStyle:"2xs"}},sm:{circle:{"--size":"32px","--thickness":"5px"},valueText:{textStyle:"2xs"}},md:{circle:{"--size":"40px","--thickness":"6px"},valueText:{textStyle:"xs"}},lg:{circle:{"--size":"48px","--thickness":"7px"},valueText:{textStyle:"sm"}},xl:{circle:{"--size":"64px","--thickness":"8px"},valueText:{textStyle:"sm"}}}},defaultVariants:{size:"md"}}),vV=ve({slots:vR.keys(),className:"chakra-qr-code",base:{root:{position:"relative",width:"fit-content","--qr-code-overlay-size":"calc(var(--qr-code-size) / 3)"},frame:{width:"var(--qr-code-size)",height:"var(--qr-code-size)",fill:"currentColor"},overlay:{display:"flex",alignItems:"center",justifyContent:"center",width:"var(--qr-code-overlay-size)",height:"var(--qr-code-overlay-size)",padding:"1",bg:"bg",rounded:"l1"}},variants:{size:{"2xs":{root:{"--qr-code-size":"40px"}},xs:{root:{"--qr-code-size":"64px"}},sm:{root:{"--qr-code-size":"80px"}},md:{root:{"--qr-code-size":"120px"}},lg:{root:{"--qr-code-size":"160px"}},xl:{root:{"--qr-code-size":"200px"}},"2xl":{root:{"--qr-code-size":"240px"}},full:{root:{"--qr-code-size":"100%"}}}},defaultVariants:{size:"md"}}),xV=ve({className:"chakra-radio-card",slots:kj.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",isolation:"isolate"},item:{flex:"1",display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",_focus:{bg:"colorPalette.muted/20"},_disabled:{opacity:"0.8",borderColor:"border.disabled"},_checked:{zIndex:"1"}},label:{display:"inline-flex",fontWeight:"medium",textStyle:"sm",_disabled:{opacity:"0.5"}},itemText:{fontWeight:"medium"},itemDescription:{opacity:"0.64",textStyle:"sm"},itemControl:{display:"inline-flex",flex:"1",pos:"relative",rounded:"inherit",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)",_disabled:{bg:"bg.muted"}},itemIndicator:zt.base,itemAddon:{roundedBottom:"inherit",_disabled:{color:"fg.muted"}},itemContent:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)"}},variants:{size:{sm:{item:{textStyle:"sm"},itemControl:{padding:"3",gap:"1.5"},itemAddon:{px:"3",py:"1.5",borderTopWidth:"1px"},itemIndicator:zt.variants?.size.sm},md:{item:{textStyle:"sm"},itemControl:{padding:"4",gap:"2.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:zt.variants?.size.md},lg:{item:{textStyle:"md"},itemControl:{padding:"4",gap:"3.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:zt.variants?.size.lg}},variant:{surface:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"}},itemIndicator:zt.variants?.variant.solid},subtle:{item:{bg:"bg.muted"},itemControl:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},itemIndicator:zt.variants?.variant.outline},outline:{item:{borderWidth:"1px",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},itemIndicator:zt.variants?.variant.solid},solid:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},itemIndicator:zt.variants?.variant.inverted}},justify:{start:{item:{"--radio-card-justify":"flex-start"}},end:{item:{"--radio-card-justify":"flex-end"}},center:{item:{"--radio-card-justify":"center"}}},align:{start:{item:{"--radio-card-align":"flex-start"},itemControl:{textAlign:"start"}},end:{item:{"--radio-card-align":"flex-end"},itemControl:{textAlign:"end"}},center:{item:{"--radio-card-align":"center"},itemControl:{textAlign:"center"}}},orientation:{vertical:{itemControl:{flexDirection:"column"}},horizontal:{itemControl:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}}),bV=ve({className:"chakra-radio-group",slots:PR.keys(),base:{item:{display:"inline-flex",alignItems:"center",position:"relative",fontWeight:"medium",_disabled:{cursor:"disabled"}},itemControl:zt.base,label:{userSelect:"none",textStyle:"sm",_disabled:{opacity:"0.5"}}},variants:{variant:{outline:{itemControl:zt.variants?.variant?.outline},subtle:{itemControl:zt.variants?.variant?.subtle},solid:{itemControl:zt.variants?.variant?.solid}},size:{xs:{item:{textStyle:"xs",gap:"1.5"},itemControl:zt.variants?.size?.xs},sm:{item:{textStyle:"sm",gap:"2"},itemControl:zt.variants?.size?.sm},md:{item:{textStyle:"sm",gap:"2.5"},itemControl:zt.variants?.size?.md},lg:{item:{textStyle:"md",gap:"3"},itemControl:zt.variants?.size?.lg}}},defaultVariants:{size:"md",variant:"solid"}}),_V=ve({className:"chakra-rating-group",slots:Rj.keys(),base:{root:{display:"inline-flex"},control:{display:"inline-flex",alignItems:"center"},item:{display:"inline-flex",alignItems:"center",justifyContent:"center",userSelect:"none"},itemIndicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",position:"relative",_icon:{stroke:"currentColor",width:"100%",height:"100%",display:"inline-block",flexShrink:0,position:"absolute",left:0,top:0},"& [data-bg]":{color:"bg.emphasized"},"& [data-fg]":{color:"transparent"},"&[data-highlighted]:not([data-half])":{"& [data-fg]":{color:"colorPalette.solid"}},"&[data-half]":{"& [data-fg]":{color:"colorPalette.solid",clipPath:"inset(0 50% 0 0)"}}}},variants:{size:{xs:{item:{textStyle:"sm"}},sm:{item:{textStyle:"md"}},md:{item:{textStyle:"xl"}},lg:{item:{textStyle:"2xl"}}}},defaultVariants:{size:"md"}}),wV=ve({className:"chakra-segment-group",slots:xR.keys(),base:{root:{"--segment-radius":"radii.l2",borderRadius:"l2",display:"inline-flex",boxShadow:"inset",minW:"max-content",textAlign:"center",position:"relative",isolation:"isolate",bg:"bg.muted"},item:{display:"flex",alignItems:"center",userSelect:"none",fontSize:"sm",position:"relative",color:"fg",borderRadius:"var(--segment-radius)",_disabled:{opacity:"0.5"},"&:has(input:focus-visible)":{focusRing:"outside"},_before:{content:'""',position:"absolute",insetInlineStart:0,insetBlock:"1.5",bg:"border",width:"1px",transition:"opacity 0.2s"},"& + &[data-state=checked], &[data-state=checked] + &, &:first-of-type":{_before:{opacity:"0"}},"&[data-state=checked][data-ssr]":{shadow:"sm",bg:"bg",borderRadius:"var(--segment-radius)"}},indicator:{shadow:"sm",pos:"absolute",bg:{_light:"bg",_dark:"bg.emphasized"},width:"var(--width)",height:"var(--height)",top:"var(--top)",left:"var(--left)",zIndex:-1,borderRadius:"var(--segment-radius)"}},variants:{size:{xs:{root:{height:"6"},item:{textStyle:"xs",px:"3",gap:"1"}},sm:{root:{height:"8"},item:{textStyle:"sm",px:"4",gap:"2"}},md:{root:{height:"10"},item:{textStyle:"sm",px:"4",gap:"2"}},lg:{root:{height:"10"},item:{textStyle:"md",px:"5",gap:"3"}}}},defaultVariants:{size:"md"}}),SV=ve({className:"chakra-slider",slots:Oj.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",textStyle:"sm",position:"relative",isolation:"isolate",touchAction:"none"},label:{fontWeight:"medium",textStyle:"sm"},control:{display:"inline-flex",alignItems:"center",position:"relative"},track:{overflow:"hidden",borderRadius:"full",flex:"1"},range:{width:"inherit",height:"inherit",_disabled:{bg:"border.emphasized!"}},markerGroup:{position:"absolute!",zIndex:"1"},marker:{"--marker-bg":{base:"white",_underValue:"colors.bg"},display:"flex",alignItems:"center",gap:"calc(var(--slider-thumb-size) / 2)",color:"fg.muted",textStyle:"xs"},markerIndicator:{width:"var(--slider-marker-size)",height:"var(--slider-marker-size)",borderRadius:"full",bg:"var(--marker-bg)"},thumb:{width:"var(--slider-thumb-size)",height:"var(--slider-thumb-size)",display:"flex",alignItems:"center",justifyContent:"center",outline:0,zIndex:"2",borderRadius:"full",_focusVisible:{ring:"2px",ringColor:"colorPalette.focusRing",ringOffset:"2px",ringOffsetColor:"bg"}}},variants:{size:{sm:{root:{"--slider-thumb-size":"sizes.4","--slider-track-size":"sizes.1.5","--slider-marker-center":"6px","--slider-marker-size":"sizes.1","--slider-marker-inset":"3px"}},md:{root:{"--slider-thumb-size":"sizes.5","--slider-track-size":"sizes.2","--slider-marker-center":"8px","--slider-marker-size":"sizes.1","--slider-marker-inset":"4px"}},lg:{root:{"--slider-thumb-size":"sizes.6","--slider-track-size":"sizes.2.5","--slider-marker-center":"9px","--slider-marker-size":"sizes.1.5","--slider-marker-inset":"5px"}}},variant:{outline:{track:{shadow:"inset",bg:"bg.emphasized/72"},range:{bg:"colorPalette.solid"},thumb:{borderWidth:"2px",borderColor:"colorPalette.solid",bg:"bg",_disabled:{bg:"border.emphasized",borderColor:"border.emphasized"}}},solid:{track:{bg:"colorPalette.subtle",_disabled:{bg:"bg.muted"}},range:{bg:"colorPalette.solid"},thumb:{bg:"colorPalette.solid",_disabled:{bg:"border.emphasized"}}}},orientation:{vertical:{root:{display:"inline-flex"},control:{flexDirection:"column",height:"100%",minWidth:"var(--slider-thumb-size)","&[data-has-mark-label]":{marginEnd:"4"}},track:{width:"var(--slider-track-size)"},thumb:{left:"50%",translate:"-50% 0"},markerGroup:{insetStart:"var(--slider-marker-center)",insetBlock:"var(--slider-marker-inset)"},marker:{flexDirection:"row"}},horizontal:{control:{flexDirection:"row",width:"100%",minHeight:"var(--slider-thumb-size)","&[data-has-mark-label]":{marginBottom:"4"}},track:{height:"var(--slider-track-size)"},thumb:{top:"50%",translate:"0 -50%"},markerGroup:{top:"var(--slider-marker-center)",insetInline:"var(--slider-marker-inset)"},marker:{flexDirection:"column"}}}},defaultVariants:{size:"md",variant:"outline",orientation:"horizontal"}}),EV=ve({className:"chakra-stat",slots:Lj.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",position:"relative",flex:"1"},label:{display:"inline-flex",gap:"1.5",alignItems:"center",color:"fg.muted",textStyle:"sm"},helpText:{color:"fg.muted",textStyle:"xs"},valueUnit:{color:"fg.muted",textStyle:"xs",fontWeight:"initial",letterSpacing:"initial"},valueText:{verticalAlign:"baseline",fontWeight:"semibold",letterSpacing:"tight",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums",display:"inline-flex",gap:"1"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginEnd:1,"& :where(svg)":{w:"1em",h:"1em"},"&[data-type=up]":{color:"fg.success"},"&[data-type=down]":{color:"fg.error"}}},variants:{size:{sm:{valueText:{textStyle:"xl"}},md:{valueText:{textStyle:"2xl"}},lg:{valueText:{textStyle:"3xl"}}}},defaultVariants:{size:"md"}}),CV=ve({className:"chakra-status",slots:Dj.keys(),base:{root:{display:"inline-flex",alignItems:"center",gap:"2"},indicator:{width:"0.64em",height:"0.64em",flexShrink:0,borderRadius:"full",forcedColorAdjust:"none",bg:"colorPalette.solid"}},variants:{size:{sm:{root:{textStyle:"xs"}},md:{root:{textStyle:"sm"}},lg:{root:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),TV=ve({className:"chakra-steps",slots:Fj.keys(),base:{root:{display:"flex",width:"full"},list:{display:"flex",justifyContent:"space-between","--steps-gutter":"spacing.3","--steps-thickness":"2px"},title:{fontWeight:"medium",color:"fg"},description:{color:"fg.muted"},separator:{bg:"border",flex:"1"},indicator:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0",borderRadius:"full",fontWeight:"medium",width:"var(--steps-size)",height:"var(--steps-size)",_icon:{flexShrink:"0",width:"var(--steps-icon-size)",height:"var(--steps-icon-size)"}},item:{position:"relative",display:"flex",flex:"1 0 0","&:last-of-type":{flex:"initial","& [data-part=separator]":{display:"none"}}},trigger:{display:"flex",alignItems:"center",gap:"3",textAlign:"start",focusVisibleRing:"outside",borderRadius:"l2"},content:{focusVisibleRing:"outside"}},variants:{orientation:{vertical:{root:{flexDirection:"row",height:"100%"},list:{flexDirection:"column",alignItems:"flex-start"},separator:{position:"absolute",width:"var(--steps-thickness)",height:"100%",maxHeight:"calc(100% - var(--steps-size) - var(--steps-gutter) * 2)",top:"calc(var(--steps-size) + var(--steps-gutter))",insetStart:"calc(var(--steps-size) / 2 - 1px)"},item:{alignItems:"flex-start"}},horizontal:{root:{flexDirection:"column",width:"100%"},list:{flexDirection:"row",alignItems:"center"},separator:{width:"100%",height:"var(--steps-thickness)",marginX:"var(--steps-gutter)"},item:{alignItems:"center"}}},variant:{solid:{indicator:{_incomplete:{borderWidth:"var(--steps-thickness)"},_current:{bg:"colorPalette.muted",borderWidth:"var(--steps-thickness)",borderColor:"colorPalette.solid",color:"colorPalette.fg"},_complete:{bg:"colorPalette.solid",borderColor:"colorPalette.solid",color:"colorPalette.contrast"}},separator:{_complete:{bg:"colorPalette.solid"}}},subtle:{indicator:{_incomplete:{bg:"bg.muted"},_current:{bg:"colorPalette.muted",color:"colorPalette.fg"},_complete:{bg:"colorPalette.emphasized",color:"colorPalette.fg"}},separator:{_complete:{bg:"colorPalette.emphasized"}}}},size:{xs:{root:{gap:"2.5"},list:{"--steps-size":"sizes.6","--steps-icon-size":"sizes.3.5",textStyle:"xs"},title:{textStyle:"sm"}},sm:{root:{gap:"3"},list:{"--steps-size":"sizes.8","--steps-icon-size":"sizes.4",textStyle:"xs"},title:{textStyle:"sm"}},md:{root:{gap:"4"},list:{"--steps-size":"sizes.10","--steps-icon-size":"sizes.4",textStyle:"sm"},title:{textStyle:"sm"}},lg:{root:{gap:"6"},list:{"--steps-size":"sizes.11","--steps-icon-size":"sizes.5",textStyle:"md"},title:{textStyle:"md"}}}},defaultVariants:{size:"md",variant:"solid",orientation:"horizontal"}}),PV=ve({slots:Nj.keys(),className:"chakra-switch",base:{root:{display:"inline-flex",gap:"2.5",alignItems:"center",position:"relative",verticalAlign:"middle","--switch-diff":"calc(var(--switch-width) - var(--switch-height))","--switch-x":{base:"var(--switch-diff)",_rtl:"calc(var(--switch-diff) * -1)"}},label:{lineHeight:"1",userSelect:"none",fontSize:"sm",fontWeight:"medium",_disabled:{opacity:"0.5"}},indicator:{position:"absolute",height:"var(--switch-height)",width:"var(--switch-height)",fontSize:"var(--switch-indicator-font-size)",fontWeight:"medium",flexShrink:0,userSelect:"none",display:"grid",placeContent:"center",transition:"inset-inline-start 0.12s ease",insetInlineStart:"calc(var(--switch-x) - 2px)",_checked:{insetInlineStart:"2px"}},control:{display:"inline-flex",gap:"0.5rem",flexShrink:0,justifyContent:"flex-start",cursor:"switch",borderRadius:"full",position:"relative",width:"var(--switch-width)",height:"var(--switch-height)",_disabled:{opacity:"0.5",cursor:"not-allowed"},_invalid:{outline:"2px solid",outlineColor:"border.error",outlineOffset:"2px"}},thumb:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transitionProperty:"translate",transitionDuration:"fast",borderRadius:"inherit",_checked:{translate:"var(--switch-x) 0"}}},variants:{variant:{solid:{control:{borderRadius:"full",bg:"bg.emphasized",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}},thumb:{bg:"white",width:"var(--switch-height)",height:"var(--switch-height)",scale:"0.8",boxShadow:"sm",_checked:{bg:"colorPalette.contrast"}}},raised:{control:{borderRadius:"full",height:"calc(var(--switch-height) / 2)",bg:"bg.muted",boxShadow:"inset",_checked:{bg:"colorPalette.solid/60"}},thumb:{width:"var(--switch-height)",height:"var(--switch-height)",position:"relative",top:"calc(var(--switch-height) * -0.25)",bg:"white",boxShadow:"xs",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}}}},size:{xs:{root:{"--switch-width":"sizes.6","--switch-height":"sizes.3","--switch-indicator-font-size":"fontSizes.xs"}},sm:{root:{"--switch-width":"sizes.8","--switch-height":"sizes.4","--switch-indicator-font-size":"fontSizes.xs"}},md:{root:{"--switch-width":"sizes.10","--switch-height":"sizes.5","--switch-indicator-font-size":"fontSizes.sm"}},lg:{root:{"--switch-width":"sizes.12","--switch-height":"sizes.6","--switch-indicator-font-size":"fontSizes.md"}}}},defaultVariants:{variant:"solid",size:"md"}}),IV=ve({className:"chakra-table",slots:Bj.keys(),base:{root:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full",textAlign:"start",verticalAlign:"top"},row:{_selected:{bg:"colorPalette.subtle"}},cell:{textAlign:"start",alignItems:"center"},columnHeader:{fontWeight:"medium",textAlign:"start",color:"fg"},caption:{fontWeight:"medium",textStyle:"xs"},footer:{fontWeight:"medium"}},variants:{interactive:{true:{body:{"& tr":{_hover:{bg:"colorPalette.subtle"}}}}},stickyHeader:{true:{header:{"& :where(tr)":{top:"var(--table-sticky-offset, 0)",position:"sticky",zIndex:1}}}},striped:{true:{row:{"&:nth-of-type(odd) td":{bg:"bg.muted"}}}},showColumnBorder:{true:{columnHeader:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}},cell:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}}}},variant:{line:{columnHeader:{borderBottomWidth:"1px"},cell:{borderBottomWidth:"1px"},row:{bg:"bg"}},outline:{root:{boxShadow:"0 0 0 1px {colors.border}",overflow:"hidden"},columnHeader:{borderBottomWidth:"1px"},header:{bg:"bg.muted"},row:{"&:not(:last-of-type)":{borderBottomWidth:"1px"}},footer:{borderTopWidth:"1px"}}},size:{sm:{root:{textStyle:"sm"},columnHeader:{px:"2",py:"2"},cell:{px:"2",py:"2"}},md:{root:{textStyle:"sm"},columnHeader:{px:"3",py:"3"},cell:{px:"3",py:"3"}},lg:{root:{textStyle:"md"},columnHeader:{px:"4",py:"3"},cell:{px:"4",py:"3"}}}},defaultVariants:{variant:"line",size:"md"}}),AV=ve({slots:zj.keys(),className:"chakra-tabs",base:{root:{"--tabs-trigger-radius":"radii.l2",position:"relative",_horizontal:{display:"block"},_vertical:{display:"flex"}},list:{display:"inline-flex",position:"relative",isolation:"isolate","--tabs-indicator-shadow":"shadows.xs","--tabs-indicator-bg":"colors.bg",minH:"var(--tabs-height)",_horizontal:{flexDirection:"row"},_vertical:{flexDirection:"column"}},trigger:{outline:"0",minW:"var(--tabs-height)",height:"var(--tabs-height)",display:"flex",alignItems:"center",fontWeight:"medium",position:"relative",cursor:"button",gap:"2",_focusVisible:{zIndex:1,outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{cursor:"not-allowed",opacity:.5}},content:{focusVisibleRing:"inside",_horizontal:{width:"100%",pt:"var(--tabs-content-padding)"},_vertical:{height:"100%",ps:"var(--tabs-content-padding)"}},indicator:{width:"var(--width)",height:"var(--height)",borderRadius:"var(--tabs-indicator-radius)",bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",zIndex:-1}},variants:{fitted:{true:{list:{display:"flex"},trigger:{flex:1,textAlign:"center",justifyContent:"center"}}},justify:{start:{list:{justifyContent:"flex-start"}},center:{list:{justifyContent:"center"}},end:{list:{justifyContent:"flex-end"}}},size:{sm:{root:{"--tabs-height":"sizes.9","--tabs-content-padding":"spacing.3"},trigger:{py:"1",px:"3",textStyle:"sm"}},md:{root:{"--tabs-height":"sizes.10","--tabs-content-padding":"spacing.4"},trigger:{py:"2",px:"4",textStyle:"sm"}},lg:{root:{"--tabs-height":"sizes.11","--tabs-content-padding":"spacing.4.5"},trigger:{py:"2",px:"4.5",textStyle:"md"}}},variant:{line:{list:{display:"flex",borderColor:"border",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}},trigger:{color:"fg.muted",_disabled:{_active:{bg:"initial"}},_selected:{color:"fg",_horizontal:{layerStyle:"indicator.bottom","--indicator-offset-y":"-1px","--indicator-color":"colors.colorPalette.solid"},_vertical:{layerStyle:"indicator.end","--indicator-offset-x":"-1px"}}}},subtle:{trigger:{borderRadius:"var(--tabs-trigger-radius)",color:"fg.muted",_selected:{bg:"colorPalette.subtle",color:"colorPalette.fg"}}},enclosed:{list:{bg:"bg.muted",padding:"1",borderRadius:"l3",minH:"calc(var(--tabs-height) - 4px)"},trigger:{justifyContent:"center",color:"fg.muted",borderRadius:"var(--tabs-trigger-radius)",_selected:{bg:"bg",color:"colorPalette.fg",shadow:"xs"}}},outline:{list:{"--line-thickness":"1px","--line-offset":"calc(var(--line-thickness) * -1)",borderColor:"border",display:"flex",_horizontal:{_before:{content:'""',position:"absolute",bottom:"0px",width:"100%",borderBottomWidth:"var(--line-thickness)",borderBottomColor:"border"}},_vertical:{_before:{content:'""',position:"absolute",insetInline:"var(--line-offset)",height:"calc(100% - calc(var(--line-thickness) * 2))",borderEndWidth:"var(--line-thickness)",borderEndColor:"border"}}},trigger:{color:"fg.muted",borderWidth:"1px",borderColor:"transparent",_selected:{bg:"currentBg",color:"colorPalette.fg"},_horizontal:{borderTopRadius:"var(--tabs-trigger-radius)",marginBottom:"var(--line-offset)",marginEnd:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderBottomColor:"transparent"}},_vertical:{borderStartRadius:"var(--tabs-trigger-radius)",marginEnd:"var(--line-offset)",marginBottom:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderEndColor:"transparent"}}}},plain:{trigger:{color:"fg.muted",_selected:{color:"colorPalette.fg"},borderRadius:"var(--tabs-trigger-radius)","&[data-selected][data-ssr]":{bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",borderRadius:"var(--tabs-indicator-radius)"}}}}},defaultVariants:{size:"md",variant:"line"}}),Zd=Gb.variants?.variant,kV=ve({slots:$j.keys(),className:"chakra-tag",base:{root:{display:"inline-flex",alignItems:"center",verticalAlign:"top",maxWidth:"100%",userSelect:"none",borderRadius:"l2",focusVisibleRing:"outside"},label:{lineClamp:"1"},closeTrigger:{display:"flex",alignItems:"center",justifyContent:"center",outline:"0",borderRadius:"l1",color:"currentColor",focusVisibleRing:"inside",focusRingWidth:"2px"},startElement:{flexShrink:0,boxSize:"var(--tag-element-size)",ms:"var(--tag-element-offset)","&:has([data-scope=avatar])":{boxSize:"var(--tag-avatar-size)",ms:"calc(var(--tag-element-offset) * 1.5)"},_icon:{boxSize:"100%"}},endElement:{flexShrink:0,boxSize:"var(--tag-element-size)",me:"var(--tag-element-offset)",_icon:{boxSize:"100%"},"&:has(button)":{ms:"calc(var(--tag-element-offset) * -1)"}}},variants:{size:{sm:{root:{px:"1.5",minH:"4.5",gap:"1","--tag-avatar-size":"spacing.3","--tag-element-size":"spacing.3","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},md:{root:{px:"1.5",minH:"5",gap:"1","--tag-avatar-size":"spacing.3.5","--tag-element-size":"spacing.3.5","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},lg:{root:{px:"2",minH:"6",gap:"1.5","--tag-avatar-size":"spacing.4.5","--tag-element-size":"spacing.4","--tag-element-offset":"-3px"},label:{textStyle:"sm"}},xl:{root:{px:"2.5",minH:"8",gap:"1.5","--tag-avatar-size":"spacing.6","--tag-element-size":"spacing.4.5","--tag-element-offset":"-4px"},label:{textStyle:"sm"}}},variant:{subtle:{root:Zd?.subtle},solid:{root:Zd?.solid},outline:{root:Zd?.outline},surface:{root:Zd?.surface}}},defaultVariants:{size:"md",variant:"surface"}}),RV=ve({slots:jj.keys(),className:"chakra-timeline",base:{root:{display:"flex",flexDirection:"column",width:"full","--timeline-thickness":"1px","--timeline-gutter":"4px"},item:{display:"flex",position:"relative",alignItems:"flex-start",flexShrink:0,gap:"4",_last:{"& :where(.chakra-timeline__separator)":{display:"none"}}},separator:{position:"absolute",borderStartWidth:"var(--timeline-thickness)",ms:"calc(-1 * var(--timeline-thickness) / 2)",insetInlineStart:"calc(var(--timeline-indicator-size) / 2)",insetBlock:"0",borderColor:"border"},indicator:{outline:"2px solid {colors.bg}",position:"relative",flexShrink:"0",boxSize:"var(--timeline-indicator-size)",fontSize:"var(--timeline-font-size)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"full",fontWeight:"medium"},connector:{alignSelf:"stretch",position:"relative"},content:{pb:"6",display:"flex",flexDirection:"column",width:"full",gap:"2"},title:{display:"flex",fontWeight:"medium",flexWrap:"wrap",gap:"1.5",alignItems:"center",mt:"var(--timeline-margin)"},description:{color:"fg.muted",textStyle:"xs"}},variants:{variant:{subtle:{indicator:{bg:"colorPalette.muted"}},solid:{indicator:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},outline:{indicator:{bg:"currentBg",borderWidth:"1px",borderColor:"colorPalette.muted"}},plain:{}},size:{sm:{root:{"--timeline-indicator-size":"sizes.4","--timeline-font-size":"fontSizes.2xs"},title:{textStyle:"xs"}},md:{root:{"--timeline-indicator-size":"sizes.5","--timeline-font-size":"fontSizes.xs"},title:{textStyle:"sm"}},lg:{root:{"--timeline-indicator-size":"sizes.6","--timeline-font-size":"fontSizes.xs"},title:{mt:"0.5",textStyle:"sm"}},xl:{root:{"--timeline-indicator-size":"sizes.8","--timeline-font-size":"fontSizes.sm"},title:{mt:"1.5",textStyle:"sm"}}}},defaultVariants:{size:"md",variant:"solid"}}),MV=ve({slots:Uj.keys(),className:"chakra-toast",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",gap:"3",py:"4",ps:"4",pe:"6",borderRadius:"l2",translate:"var(--x) var(--y)",scale:"var(--scale)",zIndex:"var(--z-index)",height:"var(--height)",opacity:"var(--opacity)",willChange:"translate, opacity, scale",transition:"translate 400ms, scale 400ms, opacity 400ms, height 400ms, box-shadow 200ms",transitionTimingFunction:"cubic-bezier(0.21, 1.02, 0.73, 1)",_closed:{transition:"translate 400ms, scale 400ms, opacity 200ms",transitionTimingFunction:"cubic-bezier(0.06, 0.71, 0.55, 1)"},bg:"bg.panel",color:"fg",boxShadow:"xl","--toast-trigger-bg":"colors.bg.muted","&[data-type=warning]":{bg:"orange.solid",color:"orange.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=success]":{bg:"green.solid",color:"green.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=error]":{bg:"red.solid",color:"red.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"}},title:{fontWeight:"medium",textStyle:"sm",marginEnd:"2"},description:{display:"inline",textStyle:"sm",opacity:"0.8"},indicator:{flexShrink:"0",boxSize:"5"},actionTrigger:{textStyle:"sm",fontWeight:"medium",height:"8",px:"3",borderRadius:"l2",alignSelf:"center",borderWidth:"1px",borderColor:"var(--toast-border-color, inherit)",transition:"background 200ms",_hover:{bg:"var(--toast-trigger-bg)"}},closeTrigger:{position:"absolute",top:"1",insetEnd:"1",padding:"1",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"{currentColor/60}",borderRadius:"l2",textStyle:"md",transition:"background 200ms",_icon:{boxSize:"1em"}}}}),OV=ve({slots:CR.keys(),className:"chakra-tooltip",base:{content:{"--tooltip-bg":"colors.bg.inverted",bg:"var(--tooltip-bg)",color:"fg.inverted",px:"2.5",py:"1",borderRadius:"l2",fontWeight:"medium",textStyle:"xs",boxShadow:"md",maxW:"xs",zIndex:"tooltip",transformOrigin:"var(--transform-origin)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"fast"}},arrow:{"--arrow-size":"sizes.2","--arrow-background":"var(--tooltip-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px",borderColor:"var(--tooltip-bg)"}}}),LV={accordion:Vj,actionBar:Gj,alert:Wj,avatar:Hj,blockquote:Xj,breadcrumb:Yj,card:qj,checkbox:Kj,checkboxCard:Zj,collapsible:Qj,dataList:eV,dialog:tV,drawer:rV,editable:nV,emptyState:iV,field:sV,fieldset:oV,fileUpload:aV,hoverCard:lV,list:cV,menu:uV,nativeSelect:dV,numberInput:hV,pinInput:pV,popover:gV,progress:mV,progressCircle:yV,radioCard:xV,radioGroup:bV,ratingGroup:_V,segmentGroup:wV,select:Kh,slider:SV,stat:EV,steps:TV,switch:PV,table:IV,tabs:AV,tag:kV,toast:MV,tooltip:OV,status:CV,timeline:RV,colorPicker:Jj,qrCode:vV},DV=R5({"2xs":{value:{fontSize:"2xs",lineHeight:"0.75rem"}},xs:{value:{fontSize:"xs",lineHeight:"1rem"}},sm:{value:{fontSize:"sm",lineHeight:"1.25rem"}},md:{value:{fontSize:"md",lineHeight:"1.5rem"}},lg:{value:{fontSize:"lg",lineHeight:"1.75rem"}},xl:{value:{fontSize:"xl",lineHeight:"1.875rem"}},"2xl":{value:{fontSize:"2xl",lineHeight:"2rem"}},"3xl":{value:{fontSize:"3xl",lineHeight:"2.375rem"}},"4xl":{value:{fontSize:"4xl",lineHeight:"2.75rem",letterSpacing:"-0.025em"}},"5xl":{value:{fontSize:"5xl",lineHeight:"3.75rem",letterSpacing:"-0.025em"}},"6xl":{value:{fontSize:"6xl",lineHeight:"4.5rem",letterSpacing:"-0.025em"}},"7xl":{value:{fontSize:"7xl",lineHeight:"5.75rem",letterSpacing:"-0.025em"}},none:{value:{}}}),FV=vt.animations({spin:{value:"spin 1s linear infinite"},ping:{value:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite"},pulse:{value:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},bounce:{value:"bounce 1s infinite"}}),NV=vt.aspectRatios({square:{value:"1 / 1"},landscape:{value:"4 / 3"},portrait:{value:"3 / 4"},wide:{value:"16 / 9"},ultrawide:{value:"18 / 5"},golden:{value:"1.618 / 1"}}),BV=vt.blurs({none:{value:" "},sm:{value:"4px"},md:{value:"8px"},lg:{value:"12px"},xl:{value:"16px"},"2xl":{value:"24px"},"3xl":{value:"40px"},"4xl":{value:"64px"}}),UV=vt.borders({xs:{value:"0.5px solid"},sm:{value:"1px solid"},md:{value:"2px solid"},lg:{value:"4px solid"},xl:{value:"8px solid"}}),zV=vt.colors({transparent:{value:"transparent"},current:{value:"currentColor"},black:{value:"#09090B"},white:{value:"#FFFFFF"},whiteAlpha:{50:{value:"rgba(255, 255, 255, 0.04)"},100:{value:"rgba(255, 255, 255, 0.06)"},200:{value:"rgba(255, 255, 255, 0.08)"},300:{value:"rgba(255, 255, 255, 0.16)"},400:{value:"rgba(255, 255, 255, 0.24)"},500:{value:"rgba(255, 255, 255, 0.36)"},600:{value:"rgba(255, 255, 255, 0.48)"},700:{value:"rgba(255, 255, 255, 0.64)"},800:{value:"rgba(255, 255, 255, 0.80)"},900:{value:"rgba(255, 255, 255, 0.92)"},950:{value:"rgba(255, 255, 255, 0.95)"}},blackAlpha:{50:{value:"rgba(0, 0, 0, 0.04)"},100:{value:"rgba(0, 0, 0, 0.06)"},200:{value:"rgba(0, 0, 0, 0.08)"},300:{value:"rgba(0, 0, 0, 0.16)"},400:{value:"rgba(0, 0, 0, 0.24)"},500:{value:"rgba(0, 0, 0, 0.36)"},600:{value:"rgba(0, 0, 0, 0.48)"},700:{value:"rgba(0, 0, 0, 0.64)"},800:{value:"rgba(0, 0, 0, 0.80)"},900:{value:"rgba(0, 0, 0, 0.92)"},950:{value:"rgba(0, 0, 0, 0.95)"}},gray:{50:{value:"#fafafa"},100:{value:"#f4f4f5"},200:{value:"#e4e4e7"},300:{value:"#d4d4d8"},400:{value:"#a1a1aa"},500:{value:"#71717a"},600:{value:"#52525b"},700:{value:"#3f3f46"},800:{value:"#27272a"},900:{value:"#18181b"},950:{value:"#111111"}},red:{50:{value:"#fef2f2"},100:{value:"#fee2e2"},200:{value:"#fecaca"},300:{value:"#fca5a5"},400:{value:"#f87171"},500:{value:"#ef4444"},600:{value:"#dc2626"},700:{value:"#991919"},800:{value:"#511111"},900:{value:"#300c0c"},950:{value:"#1f0808"}},orange:{50:{value:"#fff7ed"},100:{value:"#ffedd5"},200:{value:"#fed7aa"},300:{value:"#fdba74"},400:{value:"#fb923c"},500:{value:"#f97316"},600:{value:"#ea580c"},700:{value:"#92310a"},800:{value:"#6c2710"},900:{value:"#3b1106"},950:{value:"#220a04"}},yellow:{50:{value:"#fefce8"},100:{value:"#fef9c3"},200:{value:"#fef08a"},300:{value:"#fde047"},400:{value:"#facc15"},500:{value:"#eab308"},600:{value:"#ca8a04"},700:{value:"#845209"},800:{value:"#713f12"},900:{value:"#422006"},950:{value:"#281304"}},green:{50:{value:"#f0fdf4"},100:{value:"#dcfce7"},200:{value:"#bbf7d0"},300:{value:"#86efac"},400:{value:"#4ade80"},500:{value:"#22c55e"},600:{value:"#16a34a"},700:{value:"#116932"},800:{value:"#124a28"},900:{value:"#042713"},950:{value:"#03190c"}},teal:{50:{value:"#f0fdfa"},100:{value:"#ccfbf1"},200:{value:"#99f6e4"},300:{value:"#5eead4"},400:{value:"#2dd4bf"},500:{value:"#14b8a6"},600:{value:"#0d9488"},700:{value:"#0c5d56"},800:{value:"#114240"},900:{value:"#032726"},950:{value:"#021716"}},blue:{50:{value:"#eff6ff"},100:{value:"#dbeafe"},200:{value:"#bfdbfe"},300:{value:"#a3cfff"},400:{value:"#60a5fa"},500:{value:"#3b82f6"},600:{value:"#2563eb"},700:{value:"#173da6"},800:{value:"#1a3478"},900:{value:"#14204a"},950:{value:"#0c142e"}},cyan:{50:{value:"#ecfeff"},100:{value:"#cffafe"},200:{value:"#a5f3fc"},300:{value:"#67e8f9"},400:{value:"#22d3ee"},500:{value:"#06b6d4"},600:{value:"#0891b2"},700:{value:"#0c5c72"},800:{value:"#134152"},900:{value:"#072a38"},950:{value:"#051b24"}},purple:{50:{value:"#faf5ff"},100:{value:"#f3e8ff"},200:{value:"#e9d5ff"},300:{value:"#d8b4fe"},400:{value:"#c084fc"},500:{value:"#a855f7"},600:{value:"#9333ea"},700:{value:"#641ba3"},800:{value:"#4a1772"},900:{value:"#2f0553"},950:{value:"#1a032e"}},pink:{50:{value:"#fdf2f8"},100:{value:"#fce7f3"},200:{value:"#fbcfe8"},300:{value:"#f9a8d4"},400:{value:"#f472b6"},500:{value:"#ec4899"},600:{value:"#db2777"},700:{value:"#a41752"},800:{value:"#6d0e34"},900:{value:"#45061f"},950:{value:"#2c0514"}}}),$V=vt.cursor({button:{value:"pointer"},checkbox:{value:"default"},disabled:{value:"not-allowed"},menuitem:{value:"default"},option:{value:"default"},radio:{value:"default"},slider:{value:"default"},switch:{value:"pointer"}}),jV=vt.durations({fastest:{value:"50ms"},faster:{value:"100ms"},fast:{value:"150ms"},moderate:{value:"200ms"},slow:{value:"300ms"},slower:{value:"400ms"},slowest:{value:"500ms"}}),VV=vt.easings({"ease-in":{value:"cubic-bezier(0.42, 0, 1, 1)"},"ease-out":{value:"cubic-bezier(0, 0, 0.58, 1)"},"ease-in-out":{value:"cubic-bezier(0.42, 0, 0.58, 1)"},"ease-in-smooth":{value:"cubic-bezier(0.32, 0.72, 0, 1)"}}),GV=vt.fontSizes({"2xs":{value:"0.625rem"},xs:{value:"0.75rem"},sm:{value:"0.875rem"},md:{value:"1rem"},lg:{value:"1.125rem"},xl:{value:"1.25rem"},"2xl":{value:"1.5rem"},"3xl":{value:"1.875rem"},"4xl":{value:"2.25rem"},"5xl":{value:"3rem"},"6xl":{value:"3.75rem"},"7xl":{value:"4.5rem"},"8xl":{value:"6rem"},"9xl":{value:"8rem"}}),WV=vt.fontWeights({thin:{value:"100"},extralight:{value:"200"},light:{value:"300"},normal:{value:"400"},medium:{value:"500"},semibold:{value:"600"},bold:{value:"700"},extrabold:{value:"800"},black:{value:"900"}}),h1='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',HV=vt.fonts({heading:{value:`Inter, ${h1}`},body:{value:`Inter, ${h1}`},mono:{value:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'}}),XV=A5({spin:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},pulse:{"50%":{opacity:"0.5"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}},"bg-position":{from:{backgroundPosition:"var(--animate-from, 1rem) 0"},to:{backgroundPosition:"var(--animate-to, 0) 0"}},position:{from:{insetInlineStart:"var(--animate-from-x)",insetBlockStart:"var(--animate-from-y)"},to:{insetInlineStart:"var(--animate-to-x)",insetBlockStart:"var(--animate-to-y)"}},"circular-progress":{"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100%"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260%"}},"expand-height":{from:{height:"0"},to:{height:"var(--height)"}},"collapse-height":{from:{height:"var(--height)"},to:{height:"0"}},"expand-width":{from:{width:"0"},to:{width:"var(--width)"}},"collapse-width":{from:{height:"var(--width)"},to:{height:"0"}},"fade-in":{from:{opacity:0},to:{opacity:1}},"fade-out":{from:{opacity:1},to:{opacity:0}},"slide-from-left-full":{from:{translate:"-100% 0"},to:{translate:"0 0"}},"slide-from-right-full":{from:{translate:"100% 0"},to:{translate:"0 0"}},"slide-from-top-full":{from:{translate:"0 -100%"},to:{translate:"0 0"}},"slide-from-bottom-full":{from:{translate:"0 100%"},to:{translate:"0 0"}},"slide-to-left-full":{from:{translate:"0 0"},to:{translate:"-100% 0"}},"slide-to-right-full":{from:{translate:"0 0"},to:{translate:"100% 0"}},"slide-to-top-full":{from:{translate:"0 0"},to:{translate:"0 -100%"}},"slide-to-bottom-full":{from:{translate:"0 0"},to:{translate:"0 100%"}},"slide-from-top":{"0%":{translate:"0 -0.5rem"},to:{translate:"0"}},"slide-from-bottom":{"0%":{translate:"0 0.5rem"},to:{translate:"0"}},"slide-from-left":{"0%":{translate:"-0.5rem 0"},to:{translate:"0"}},"slide-from-right":{"0%":{translate:"0.5rem 0"},to:{translate:"0"}},"slide-to-top":{"0%":{translate:"0"},to:{translate:"0 -0.5rem"}},"slide-to-bottom":{"0%":{translate:"0"},to:{translate:"0 0.5rem"}},"slide-to-left":{"0%":{translate:"0"},to:{translate:"-0.5rem 0"}},"slide-to-right":{"0%":{translate:"0"},to:{translate:"0.5rem 0"}},"scale-in":{from:{scale:"0.95"},to:{scale:"1"}},"scale-out":{from:{scale:"1"},to:{scale:"0.95"}}}),YV=vt.letterSpacings({tighter:{value:"-0.05em"},tight:{value:"-0.025em"},wide:{value:"0.025em"},wider:{value:"0.05em"},widest:{value:"0.1em"}}),qV=vt.lineHeights({shorter:{value:1.25},short:{value:1.375},moderate:{value:1.5},tall:{value:1.625},taller:{value:2}}),KV=vt.radii({none:{value:"0"},"2xs":{value:"0.0625rem"},xs:{value:"0.125rem"},sm:{value:"0.25rem"},md:{value:"0.375rem"},lg:{value:"0.5rem"},xl:{value:"0.75rem"},"2xl":{value:"1rem"},"3xl":{value:"1.5rem"},"4xl":{value:"2rem"},full:{value:"9999px"}}),IR=vt.spacing({.5:{value:"0.125rem"},1:{value:"0.25rem"},1.5:{value:"0.375rem"},2:{value:"0.5rem"},2.5:{value:"0.625rem"},3:{value:"0.75rem"},3.5:{value:"0.875rem"},4:{value:"1rem"},4.5:{value:"1.125rem"},5:{value:"1.25rem"},6:{value:"1.5rem"},7:{value:"1.75rem"},8:{value:"2rem"},9:{value:"2.25rem"},10:{value:"2.5rem"},11:{value:"2.75rem"},12:{value:"3rem"},14:{value:"3.5rem"},16:{value:"4rem"},20:{value:"5rem"},24:{value:"6rem"},28:{value:"7rem"},32:{value:"8rem"},36:{value:"9rem"},40:{value:"10rem"},44:{value:"11rem"},48:{value:"12rem"},52:{value:"13rem"},56:{value:"14rem"},60:{value:"15rem"},64:{value:"16rem"},72:{value:"18rem"},80:{value:"20rem"},96:{value:"24rem"}}),ZV=vt.sizes({"3xs":{value:"14rem"},"2xs":{value:"16rem"},xs:{value:"20rem"},sm:{value:"24rem"},md:{value:"28rem"},lg:{value:"32rem"},xl:{value:"36rem"},"2xl":{value:"42rem"},"3xl":{value:"48rem"},"4xl":{value:"56rem"},"5xl":{value:"64rem"},"6xl":{value:"72rem"},"7xl":{value:"80rem"},"8xl":{value:"90rem"}}),QV=vt.sizes({max:{value:"max-content"},min:{value:"min-content"},fit:{value:"fit-content"},prose:{value:"60ch"},full:{value:"100%"},dvh:{value:"100dvh"},svh:{value:"100svh"},lvh:{value:"100lvh"},dvw:{value:"100dvw"},svw:{value:"100svw"},lvw:{value:"100lvw"},vw:{value:"100vw"},vh:{value:"100vh"}}),JV=vt.sizes({"1/2":{value:"50%"},"1/3":{value:"33.333333%"},"2/3":{value:"66.666667%"},"1/4":{value:"25%"},"3/4":{value:"75%"},"1/5":{value:"20%"},"2/5":{value:"40%"},"3/5":{value:"60%"},"4/5":{value:"80%"},"1/6":{value:"16.666667%"},"2/6":{value:"33.333333%"},"3/6":{value:"50%"},"4/6":{value:"66.666667%"},"5/6":{value:"83.333333%"},"1/12":{value:"8.333333%"},"2/12":{value:"16.666667%"},"3/12":{value:"25%"},"4/12":{value:"33.333333%"},"5/12":{value:"41.666667%"},"6/12":{value:"50%"},"7/12":{value:"58.333333%"},"8/12":{value:"66.666667%"},"9/12":{value:"75%"},"10/12":{value:"83.333333%"},"11/12":{value:"91.666667%"}}),e6=vt.sizes({...ZV,...IR,...JV,...QV}),t6=vt.zIndex({hide:{value:-1},base:{value:0},docked:{value:10},dropdown:{value:1e3},sticky:{value:1100},banner:{value:1200},overlay:{value:1300},modal:{value:1400},popover:{value:1500},skipNav:{value:1600},toast:{value:1700},tooltip:{value:1800},max:{value:2147483647}}),r6=wA({preflight:!0,cssVarsPrefix:"chakra",cssVarsRoot:":where(html, .chakra-theme)",globalCss:tU,theme:{breakpoints:eU,keyframes:XV,tokens:{aspectRatios:NV,animations:FV,blurs:BV,borders:UV,colors:zV,durations:jV,easings:VV,fonts:HV,fontSizes:GV,fontWeights:WV,letterSpacings:YV,lineHeights:qV,radii:KV,spacing:IR,sizes:e6,zIndex:t6,cursor:$V},semanticTokens:{colors:_U,shadows:SU,radii:wU},recipes:bU,slotRecipes:LV,textStyles:DV,layerStyles:rU,animationStyles:nU}}),n6=SA($5,r6),i6=Q4(n6);function s6(t){const{key:e,recipe:r}=t,n=rg();return w.useMemo(()=>{const i=r||(e!=null?n.getSlotRecipe(e):{});return n.sva(structuredClone(i))},[e,r,n])}const o6=t=>t.charAt(0).toUpperCase()+t.slice(1),hs=t=>{const{key:e,recipe:r}=t,n=o6(e||r.className||"Component"),[i,s]=fl({name:`${n}StylesContext`,errorMessage:`use${n}Styles returned is 'undefined'. Seems you forgot to wrap the components in "<${n}.Root />" `}),[o,a]=fl({name:`${n}ClassNameContext`,errorMessage:`use${n}ClassNames returned is 'undefined'. Seems you forgot to wrap the components in "<${n}.Root />" `,strict:!1}),[l,c]=fl({strict:!1,name:`${n}PropsContext`,providerName:`${n}PropsContext`,defaultValue:{}});function u(p){const{unstyled:g,...x}=p,v=s6({key:e,recipe:x.recipe||r}),[y,m]=v.splitVariantProps(x);return{styles:g?FF:v(y),classNames:v.classNameMap,props:m}}function d(p,g={}){const{defaultProps:x}=g,v=y=>{const m=Nu(x,c(),y),{styles:_,classNames:C,props:E}=u(m);return b.jsx(i,{value:_,children:b.jsx(o,{value:C,children:b.jsx(p,{...E})})})};return v.displayName=p.displayName||p.name,v}return{StylesProvider:i,ClassNamesProvider:o,PropsProvider:l,usePropsContext:c,useRecipeResult:u,withProvider:(p,g,x)=>{const{defaultProps:v,...y}=x??{},m=Ye(p,{},y),_=w.forwardRef((C,E)=>{const T=Nu(v??{},c(),C),{styles:S,props:P,classNames:I}=u(T),M=I[g],k=b.jsx(i,{value:S,children:b.jsx(o,{value:I,children:b.jsx(m,{ref:E,...P,css:[S[g],T.css],className:Ar(T.className,M)})})});return x?.wrapElement?.(k,T)??k});return _.displayName=p.displayName||p.name,_},withContext:(p,g,x)=>{const v=Ye(p,{},x),y=w.forwardRef((m,_)=>{const C=s(),T=a()?.[g];return b.jsx(v,{...m,css:[g?C[g]:void 0,m.css],ref:_,className:Ar(m.className,T)})});return y.displayName=p.displayName||p.name,y},withRootProvider:d,useStyles:s,useClassNames:a}},a6=t=>b.jsx(Ye.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:b.jsx("path",{d:"M20 6 9 17l-5-5"})}),l6=t=>b.jsx(Ye.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:b.jsx("path",{d:"m18 15-6-6-6 6"})}),AR=t=>b.jsx(Ye.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:b.jsx("path",{d:"m6 9 6 6 6-6"})}),kR=t=>b.jsx(Ye.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11.0026 16L6.75999 11.7574L8.17421 10.3431L11.0026 13.1716L16.6595 7.51472L18.0737 8.92893L11.0026 16Z"})}),Qf=t=>b.jsx(Ye.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"})}),f1=t=>b.jsx(Ye.svg,{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0",...t,children:b.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})}),RR=t=>b.jsx(Ye.svg,{viewBox:"0 0 24 24",fill:"currentColor",...t,children:b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711Z"})}),[c6,u6]=fl({name:"AlertStatusContext",hookName:"useAlertStatusContext",providerName:"<Alert />"}),{withProvider:d6,withContext:r_,useStyles:h6,PropsProvider:lte}=hs({key:"alert"}),f6=d6("div","root",{forwardAsChild:!0,wrapElement(t,e){return b.jsx(c6,{value:{status:e.status||"info"},children:t})}}),p1=r_("div","title"),p6=r_("div","description"),g6=r_("div","content"),m6={info:f1,warning:Qf,success:kR,error:Qf,neutral:f1},y6=w.forwardRef(function(e,r){const n=u6(),i=h6(),s=typeof n.status=="string"?m6[n.status]:w.Fragment,{children:o=b.jsx(s,{}),...a}=e;return b.jsx(Ye.span,{ref:r,...a,css:[i.indicator,e.css],children:o})}),K=Ye("div");K.displayName="Box";const Wc=Ye("span"),n_=Ye("div",{base:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},variants:{axis:{horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}}},defaultVariants:{axis:"both"}});n_.displayName="AbsoluteCenter";const{withContext:v6,PropsProvider:cte}=ca({key:"spinner"}),jl=v6("span"),x6=w.forwardRef(function(e,r){const{spinner:n=b.jsx(jl,{size:"inherit",borderWidth:"0.125em",color:"inherit"}),spinnerPlacement:i="start",children:s,text:o,visible:a=!0,...l}=e;return a?o?b.jsxs(Wc,{ref:r,display:"contents",...l,children:[i==="start"&&n,o,i==="end"&&n]}):n?b.jsxs(Wc,{ref:r,display:"contents",...l,children:[b.jsx(n_,{display:"inline-flex",children:n}),b.jsx(Wc,{opacity:0,children:s})]}):b.jsx(Wc,{ref:r,display:"contents",...l,children:s}):s}),{useRecipeResult:b6,PropsProvider:ute,usePropsContext:_6}=ca({key:"button"}),Zt=w.forwardRef(function(e,r){const n=_6(),i=w.useMemo(()=>Nu(n,e),[n,e]),s=b6(i),{loading:o,loadingText:a,children:l,spinner:c,spinnerPlacement:u,...d}=s.props;return b.jsx(Ye.button,{type:"button",ref:r,...d,disabled:o||d.disabled,className:Ar(s.className,i.className),css:[s.styles,i.css],children:!i.asChild&&o?b.jsx(x6,{spinner:c,text:a,spinnerPlacement:u,children:l}):l})}),sn=w.forwardRef(function(e,r){return b.jsx(Zt,{px:"0",py:"0",_icon:{fontSize:"1.2em"},ref:r,...e})}),MR=t=>t?"":void 0,{useRecipeResult:w6,PropsProvider:dte}=ca({key:"icon"}),ar=w.forwardRef(function(e,r){const{styles:n,className:i,props:s}=w6({asChild:!e.as,...e});return b.jsx(Ye.svg,{ref:r,focusable:!1,"aria-hidden":"true",...s,css:[n,e.css],className:Ar(i,e.className)})});function S6(t){const{viewBox:e="0 0 24 24",d:r,displayName:n,defaultProps:i={}}=t,s=w.Children.toArray(t.path),o=w.forwardRef((a,l)=>b.jsx(ar,{ref:l,asChild:!1,viewBox:e,...i,...a,children:s.length?s:b.jsx("path",{fill:"currentColor",d:r})}));return o.displayName=n,o}const{withProvider:E6,withContext:i_,useStyles:C6,useClassNames:T6,PropsProvider:hte}=hs({key:"field"}),P6=E6(pk,"root",{forwardAsChild:!0}),I6=i_(hk,"label",{forwardAsChild:!0}),A6=i_(uk,"helperText",{forwardAsChild:!0}),k6=i_(ck,"errorText",{forwardAsChild:!0});S6({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"});const R6=w.forwardRef(function(e,r){const{fallback:n,children:i="*",...s}=e,o=$n(),a=T6(),l=C6();return o?.required?b.jsx(Ye.span,{ref:r,"aria-hidden":"true",...s,className:Ar(a.requiredIndicator,e.className),css:[l.requiredIndicator,e.css],children:i}):n}),pu=w.forwardRef(function(e,r){const{direction:n,align:i,justify:s,wrap:o,basis:a,grow:l,shrink:c,inline:u,...d}=e;return b.jsx(Ye.div,{ref:r,...d,css:{display:u?"inline-flex":"flex",flexDirection:n,alignItems:i,justifyContent:s,flexWrap:o,flexBasis:a,flexGrow:l,flexShrink:c,...e.css}})}),M6=w.forwardRef(function(e,r){const{align:n,fit:i="cover",...s}=e;return b.jsx(Ye.img,{ref:r,objectFit:i,objectPosition:n,className:Ar("chakra-image",e.className),...s})}),{withContext:O6,PropsProvider:fte}=ca({key:"input"}),s_=O6(dk),{withContext:L6,PropsProvider:pte}=ca({key:"kbd"}),D6=L6("kbd"),{withProvider:OR,withContext:fa,useStyles:gte,PropsProvider:mte}=hs({key:"numberInput"});OR(pR,"root",{forwardAsChild:!0});const F6=OR(fR,"root",{forwardAsChild:!0}),N6=fa(sR,"control",{forwardAsChild:!0});fa(cR,"label",{forwardAsChild:!0});const B6=fa(lR,"input",{forwardAsChild:!0}),U6=fa(aR,"incrementTrigger",{forwardAsChild:!0,defaultProps:{children:b.jsx(l6,{})}}),z6=fa(oR,"decrementTrigger",{forwardAsChild:!0,defaultProps:{children:b.jsx(AR,{})}});fa(gR,"scrubber",{forwardAsChild:!0});fa(mR,"valueText",{forwardAsChild:!0});const o_=t=>{const{children:e,disabled:r}=t,[n,i]=w.useState(t.container?.current),s=w.useSyncExternalStore(j6,()=>!1,()=>!0),{getRootNode:o}=nc();if(w.useEffect(()=>{i(()=>t.container?.current)},[t.container]),s||r)return b.jsx(b.Fragment,{children:e});const a=n??$6(o);return b.jsx(b.Fragment,{children:w.Children.map(e,l=>vI.createPortal(l,a))})},$6=t=>{const e=t?.(),r=e.getRootNode();return $u(r)?r:zn(e).body},j6=()=>()=>{},{withProvider:LR,withContext:Rr,useStyles:yte,PropsProvider:vte}=hs({key:"select"});LR(C$,"root",{forwardAsChild:!0});const V6=LR(S$,"root",{forwardAsChild:!0}),G6=Rr(jk,"trigger",{forwardAsChild:!0}),W6=Rr(Uk,"positioner",{forwardAsChild:!0}),H6=Rr(Ik,"content",{forwardAsChild:!0}),X6=Rr(Vk,"valueText",{forwardAsChild:!0}),Y6=Rr(Pk,"clearTrigger",{forwardAsChild:!0}),q6=Rr(Lk,"itemGroup",{forwardAsChild:!0}),K6=Rr(Dk,"itemGroupLabel",{forwardAsChild:!0}),Z6=Rr(Ok,"item",{forwardAsChild:!0});Rr(Nk,"itemText",{forwardAsChild:!0});const Q6=Rr(Fk,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:b.jsx(a6,{})}}),J6=Rr("div","indicatorGroup"),eG=Rr(Rk,"indicator",{forwardAsChild:!0,defaultProps:{children:b.jsx(AR,{})}}),tG=Rr(Ak,"control",{forwardAsChild:!0});Rr(Bk,"label",{forwardAsChild:!0});const rG=h$,nG=kk,DR=Ye("div",{base:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});DR.displayName="Spacer";function iG(t){const{gap:e,direction:r}=t,n={column:{marginY:e,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},"column-reverse":{marginY:e,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},row:{marginX:e,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0},"row-reverse":{marginX:e,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0}};return{"&":CA(r,i=>n[i])}}function sG(t){return w.Children.toArray(t).filter(e=>w.isValidElement(e))}const no=w.forwardRef(function(e,r){const{direction:n="column",align:i,justify:s,gap:o="0.5rem",wrap:a,children:l,separator:c,className:u,...d}=e,h=w.useMemo(()=>iG({gap:o,direction:n}),[o,n]),f=w.useMemo(()=>c?sG(l).map((p,g,x)=>{const v=typeof p.key<"u"?p.key:g,y=w.cloneElement(c,{css:[h,c.props.css]});return b.jsxs(w.Fragment,{children:[p,g===x.length-1?null:y]},v)}):l,[l,c,h]);return b.jsx(Ye.div,{ref:r,display:"flex",alignItems:i,justifyContent:s,flexDirection:n,flexWrap:a,gap:c?void 0:o,className:Ar("chakra-stack",u),...d,children:f})}),lt=w.forwardRef(function(e,r){return b.jsx(no,{align:"center",...e,direction:"row",ref:r})}),oi=w.forwardRef(function(e,r){return b.jsx(no,{align:"center",...e,direction:"column",ref:r})}),{withProvider:FR,withContext:a_,useStyles:oG,PropsProvider:xte}=hs({key:"switch"});FR(Jk,"root",{forwardAsChild:!0});const aG=FR(Qk,"root",{forwardAsChild:!0}),lG=a_(Kk,"label",{forwardAsChild:!0}),cG=a_(Yk,"control",{forwardAsChild:!0}),uG=a_(eR,"thumb",{forwardAsChild:!0}),dG=w.forwardRef(function(e,r){const n=oc(),i=oG(),{fallback:s,children:o,...a}=e;return b.jsx(Ye.span,{ref:r,"data-checked":MR(n.checked),...a,css:[i.indicator,e.css],children:n.checked?o:s})}),hG=w.forwardRef(function(e,r){const n=oc(),{fallback:i,children:s,...o}=e;return b.jsx(Ye.span,{ref:r,"data-checked":MR(n.checked),...o,children:n.checked?s:i})}),fG=qk;function pG(t,e){const[r,n]=w.useState(t);return w.useEffect(()=>{const i=setTimeout(()=>{n(t)},e);return()=>{clearTimeout(i)}},[t,e]),r}const[NR,fg]=hr({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),BR=w.forwardRef((t,e)=>{const[r,n]=fr()(t,["value"]),i=fg(),s=Gz(),o=dd({...s,present:pG(i.value===t.value,0),immediate:!0}),a=ae(i.getContentProps(r),o.getPresenceProps(),n);return b.jsx(hd,{value:o,children:o.unmounted?null:b.jsx(pe.div,{...a,ref:ud(o.ref,e)})})});BR.displayName="TabContent";const UR=w.forwardRef((t,e)=>{const r=fg(),n=ae(r.getIndicatorProps(),t);return b.jsx(pe.div,{...n,ref:e})});UR.displayName="TabIndicator";const zR=w.forwardRef((t,e)=>{const r=fg(),n=ae(r.getListProps(),t);return b.jsx(pe.div,{...n,ref:e})});zR.displayName="TabList";const $R=w.forwardRef((t,e)=>{const[r,n]=fr()(t,["disabled","value"]),i=fg(),s=ae(i.getTriggerProps(r),n);return b.jsx(pe.button,{...s,ref:e})});$R.displayName="TabTrigger";var gG=me("tabs").parts("root","list","trigger","content","indicator"),Ic=gG.build(),ye=nt({getRootId:t=>t.ids?.root??`tabs:${t.id}`,getListId:t=>t.ids?.list??`tabs:${t.id}:list`,getContentId:(t,e)=>t.ids?.content??`tabs:${t.id}:content-${e}`,getTriggerId:(t,e)=>t.ids?.trigger??`tabs:${t.id}:trigger-${e}`,getIndicatorId:t=>t.ids?.indicator??`tabs:${t.id}:indicator`,getListEl:t=>ye.getById(t,ye.getListId(t)),getContentEl:(t,e)=>ye.getById(t,ye.getContentId(t,e)),getTriggerEl:(t,e)=>ye.getById(t,ye.getTriggerId(t,e)),getIndicatorEl:t=>ye.getById(t,ye.getIndicatorId(t)),getElements:t=>{const r=`[role=tab][data-ownedby='${CSS.escape(ye.getListId(t))}']:not([disabled])`;return An(ye.getListEl(t),r)},getFirstTriggerEl:t=>Ub(ye.getElements(t)),getLastTriggerEl:t=>zb(ye.getElements(t)),getNextTriggerEl:(t,e)=>Db(ye.getElements(t),ye.getTriggerId(t,e),t.loopFocus),getPrevTriggerEl:(t,e)=>Fb(ye.getElements(t),ye.getTriggerId(t,e),t.loopFocus),getSelectedContentEl:t=>{if(t.value)return ye.getContentEl(t,t.value)},getSelectedTriggerEl:t=>{if(t.value)return ye.getTriggerEl(t,t.value)},getOffsetRect:t=>({left:t?.offsetLeft??0,top:t?.offsetTop??0,width:t?.offsetWidth??0,height:t?.offsetHeight??0}),getRectById:(t,e)=>{const r=KI(ye.getElements(t),ye.getTriggerId(t,e));return ye.resolveRect(ye.getOffsetRect(r))},resolveRect:t=>({width:`${t.width}px`,height:`${t.height}px`,left:`${t.left}px`,top:`${t.top}px`})});function mG(t,e,r){const n=t.context.translations,i=t.matches("focused"),s=t.context.orientation==="vertical",o=t.context.orientation==="horizontal",a=t.context.composite,l=t.context.indicatorState;function c(u){return{selected:t.context.value===u.value,focused:t.context.focusedValue===u.value,disabled:!!u.disabled}}return{value:t.context.value,focusedValue:t.context.focusedValue,setValue(u){e({type:"SET_VALUE",value:u})},clearValue(){e({type:"CLEAR_VALUE"})},setIndicatorRect(u){const d=ye.getTriggerId(t.context,u);e({type:"SET_INDICATOR_RECT",id:d})},syncTabIndex(){e("SYNC_TAB_INDEX")},selectNext(u){e({type:"TAB_FOCUS",value:u,src:"selectNext"}),e({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(u){e({type:"TAB_FOCUS",value:u,src:"selectPrev"}),e({type:"ARROW_PREV",src:"selectPrev"})},focus(){ye.getSelectedTriggerEl(t.context)?.focus()},getRootProps(){return r.element({...Ic.root.attrs,id:ye.getRootId(t.context),"data-orientation":t.context.orientation,"data-focus":Q(i),dir:t.context.dir})},getListProps(){return r.element({...Ic.list.attrs,id:ye.getListId(t.context),role:"tablist",dir:t.context.dir,"data-focus":Q(i),"aria-orientation":t.context.orientation,"data-orientation":t.context.orientation,"aria-label":n?.listLabel,onKeyDown(u){if(u.defaultPrevented||!VI(u)||Tb(u))return;const d={ArrowDown(){o||e({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){o||e({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){s||e({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){s||e({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){e("HOME")},End(){e("END")},Enter(){e({type:"ENTER"})}};let h=Mv(u,t.context);const f=d[h];f&&(u.preventDefault(),f(u))}})},getTriggerState:c,getTriggerProps(u){const{value:d,disabled:h}=u,f=c(u);return r.button({...Ic.trigger.attrs,role:"tab",type:"button",disabled:h,dir:t.context.dir,"data-orientation":t.context.orientation,"data-disabled":Q(h),"aria-disabled":h,"data-value":d,"aria-selected":f.selected,"data-selected":Q(f.selected),"data-focus":Q(f.focused),"aria-controls":f.selected?ye.getContentId(t.context,d):void 0,"data-ownedby":ye.getListId(t.context),"data-ssr":Q(t.context.ssr),id:ye.getTriggerId(t.context,d),tabIndex:f.selected&&a?0:-1,onFocus(){e({type:"TAB_FOCUS",value:d})},onBlur(p){p.relatedTarget?.getAttribute("role")!=="tab"&&e({type:"TAB_BLUR"})},onClick(p){p.defaultPrevented||h||(Cb()&&p.currentTarget.focus(),e({type:"TAB_CLICK",value:d}))}})},getContentProps(u){const{value:d}=u,h=t.context.value===d;return r.element({...Ic.content.attrs,dir:t.context.dir,id:ye.getContentId(t.context,d),tabIndex:a?0:-1,"aria-labelledby":ye.getTriggerId(t.context,d),role:"tabpanel","data-ownedby":ye.getListId(t.context),"data-selected":Q(h),"data-orientation":t.context.orientation,hidden:!h})},getIndicatorProps(){return r.element({id:ye.getIndicatorId(t.context),...Ic.indicator.attrs,dir:t.context.dir,"data-orientation":t.context.orientation,style:{"--transition-property":"left, right, top, bottom, width, height","--left":l.rect?.left,"--top":l.rect?.top,"--width":l.rect?.width,"--height":l.rect?.height,position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:l.transition?"var(--transition-duration, 150ms)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",[o?"left":"top"]:o?"var(--left)":"var(--top)"}})}}}var{not:yG}=tc;function vG(t){const e=pn(t);return to({initial:"idle",context:{dir:"ltr",orientation:"horizontal",activationMode:"automatic",value:null,loopFocus:!0,composite:!0,navigate(r){WB(r.node)},...e,focusedValue:e.value??null,ssr:!0,indicatorState:{rendered:!1,transition:!1,rect:{left:"0px",top:"0px",width:"0px",height:"0px"}}},watch:{value:["allowIndicatorTransition","syncIndicatorRect","syncTabIndex","navigateIfNeeded"],dir:["syncIndicatorRect"],orientation:["syncIndicatorRect"]},on:{SET_VALUE:{actions:"setValue"},CLEAR_VALUE:{actions:"clearValue"},SET_INDICATOR_RECT:{actions:"setIndicatorRect"},SYNC_TAB_INDEX:{actions:"syncTabIndex"}},created:["syncFocusedValue"],entry:["checkRenderedElements","syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:"setFocusedValue"},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:"focusPrevTab"}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:"focusNextTab"}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:"focusFirstTab"}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:"focusLastTab"}],ENTER:{guard:yG("selectOnFocus"),actions:"selectFocusedTab"},TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:"clearFocusedValue"}}}}},{guards:{selectOnFocus:r=>r.activationMode==="automatic"},actions:{syncFocusedValue(r){r.value!=null&&r.focusedValue==null&&(r.focusedValue=r.value)},selectFocusedTab(r){at(()=>{const i=r.deselectable&&r.value===r.focusedValue?null:r.focusedValue;po.value(r,i)})},setFocusedValue(r,n){n.value!=null&&po.focusedValue(r,n.value)},clearFocusedValue(r){po.focusedValue(r,null)},setValue(r,n){const s=r.deselectable&&r.value===r.focusedValue?null:n.value;po.value(r,s)},clearValue(r){po.value(r,null)},focusFirstTab(r){at(()=>{ye.getFirstTriggerEl(r)?.focus()})},focusLastTab(r){at(()=>{ye.getLastTriggerEl(r)?.focus()})},focusNextTab(r){if(!r.focusedValue)return;const n=ye.getNextTriggerEl(r,r.focusedValue);at(()=>{r.composite?n?.focus():n?.dataset.value!=null&&po.focusedValue(r,n.dataset.value)})},focusPrevTab(r){if(!r.focusedValue)return;const n=ye.getPrevTriggerEl(r,r.focusedValue);at(()=>{r.composite?n?.focus():n?.dataset.value!=null&&po.focusedValue(r,n.dataset.value)})},checkRenderedElements(r){r.indicatorState.rendered=!!ye.getIndicatorEl(r)},syncTabIndex(r){at(()=>{const n=ye.getSelectedContentEl(r);if(!n)return;kb(n).length>0?n.removeAttribute("tabindex"):n.setAttribute("tabindex","0")})},cleanupObserver(r){r.indicatorCleanup?.()},allowIndicatorTransition(r){r.indicatorState.transition=!0},setIndicatorRect(r,n){const i=n.id??r.value;!r.indicatorState.rendered||!i||!ye.getTriggerEl(r,i)||(r.indicatorState.rect=ye.getRectById(r,i),hS(()=>{r.indicatorState.transition=!1}))},syncSsr(r){r.ssr=!1},syncIndicatorRect(r){r.indicatorCleanup?.();const n=r.value;if(!r.indicatorState.rendered||!n)return;const i=ye.getSelectedTriggerEl(r);i&&(r.indicatorCleanup=n$(i,{getRect(s){return ye.getOffsetRect(s)},onChange(s){r.indicatorState.rect=ye.resolveRect(s),hS(()=>{r.indicatorState.transition=!1})}}))},navigateIfNeeded(r){const n=ye.getSelectedTriggerEl(r);cB(n)&&r.navigate({value:r.value,node:n})}}})}var g1={change:t=>{t.value!=null&&t.onValueChange?.({value:t.value})},focusChange:t=>{t.focusedValue!=null&&t.onFocusChange?.({focusedValue:t.focusedValue})}},po={value:(t,e)=>{dn(e,t.value)||(t.value=e,g1.change(t))},focusedValue:(t,e)=>{dn(e,t.focusedValue)||(t.focusedValue=e,g1.focusChange(t))}};Ae()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]);Ae()(["disabled","value"]);Ae()(["value"]);const xG=(t={})=>{const{getRootNode:e}=nc(),{dir:r}=cd(),n={id:w.useId(),dir:r,getRootNode:e,value:t.defaultValue,...t},i={...n,value:t.value,onValueChange:On(t.onValueChange,{sync:!0}),onFocusChange:On(t.onFocusChange)},[s,o]=ua(vG(n),{context:i});return mG(s,o,ro)},jR=w.forwardRef((t,e)=>{const[r,n]=ak(t),[i,s]=fr()(n,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]),o=xG(i),a=ae(o.getRootProps(),s);return b.jsx(NR,{value:o,children:b.jsx(ok,{value:r,children:b.jsx(pe.div,{...a,ref:e})})})});jR.displayName="TabsRoot";const VR=w.forwardRef((t,e)=>{const[r,n]=ak(t),[{value:i},s]=fr()(n,["value"]),o=ae(i.getRootProps(),s);return b.jsx(NR,{value:i,children:b.jsx(ok,{value:r,children:b.jsx(pe.div,{...o,ref:e})})})});VR.displayName="TabsRootProvider";const{withProvider:GR,withContext:gd,useStyles:bte,PropsProvider:_te}=hs({key:"tabs"});GR(VR,"root",{forwardAsChild:!0});const bG=GR(jR,"root",{forwardAsChild:!0}),go=gd($R,"trigger",{forwardAsChild:!0}),mo=gd(BR,"content",{forwardAsChild:!0}),_G=gd("div","contentGroup"),wG=gd(zR,"list",{forwardAsChild:!0});gd(UR,"indicator",{forwardAsChild:!0});const{withProvider:SG,withContext:pg,useStyles:wte,PropsProvider:Ste}=hs({key:"tag"}),EG=SG("div","root"),CG=pg("span","label"),TG=pg("button","closeTrigger",{defaultProps:{children:b.jsx(RR,{})}}),PG=pg("span","startElement"),m1=pg("span","endElement");var IG=me("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),Ma=IG.build(),er=nt({getRegionId:t=>`toast-group:${t}`,getRegionEl:(t,e)=>er.getById(t,`toast-group:${e}`),getRootId:t=>`toast:${t.id}`,getRootEl:t=>er.getById(t,er.getRootId(t)),getTitleId:t=>`toast:${t.id}:title`,getDescriptionId:t=>`toast:${t.id}:description`,getCloseTriggerId:t=>`toast${t.id}:close`});function l_(t,e){return t.filter(r=>r.state.context.placement===e)}var y1={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function v1(t,e){return t??y1[e]??y1.DEFAULT}function AG(t,e){const r=t.offsets,n=typeof r=="string"?{left:r,right:r,bottom:r,top:r}:r,i=t.dir==="rtl",s=e.replace("-start",i?"-right":"-left").replace("-end",i?"-left":"-right"),o=s.includes("right"),a=s.includes("left"),l={position:"fixed",pointerEvents:t.count>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${t.gap}px`,"--first-height":`${t.heights[0]?.height||0}px`,zIndex:BI};let c="center";if(o&&(c="flex-end"),a&&(c="flex-start"),l.alignItems=c,s.includes("top")){const u=n.top;l.top=`max(env(safe-area-inset-top, 0px), ${u})`}if(s.includes("bottom")){const u=n.bottom;l.bottom=`max(env(safe-area-inset-bottom, 0px), ${u})`}if(!s.includes("left")){const u=n.right;l.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${u})`}if(!s.includes("right")){const u=n.left;l.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${u})`}return l}function kG(t,e){const[r]=t.placement.split("-"),n=!t.frontmost,i=!t.stacked,s={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${t.removeDelay}ms`,"--duration":`${t.type==="loading"?Number.MAX_SAFE_INTEGER:t.duration}ms`,"--initial-height":`${t.height}px`,"--offset":`${t.offset}px`,"--index":t.index,"--z-index":t.zIndex,"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},o=a=>Object.assign(s,a);return r==="top"?o({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):r==="bottom"&&o({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),t.mounted&&(o({"--y":"0","--opacity":"1"}),t.stacked&&o({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),e||o({"--opacity":"0",pointerEvents:"none"}),n&&i&&(o({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),e||o({"--y":"calc(var(--sign) * 40%)"})),n&&t.stacked&&!e&&o({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),t.frontmost&&!e&&o({"--y":"calc(var(--lift) * -100%)"}),s}function RG(t,e){const r={position:"absolute",inset:"0",scale:"1 2",pointerEvents:e?"none":"auto"},n=i=>Object.assign(r,i);return t.frontmost&&!e&&n({height:"calc(var(--initial-height) + 80%)"}),r}function MG(t,e){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function OG(t,e,r){function n(){return a5(t)?t.getState():t}function i(u){return l_(n().context.toasts,u)}function s(u){const d=n().context.toasts;return d.length?!!d.find(h=>h.id==u):!1}function o(u){const d=`toast:${Bv()}`,h=u.id?u.id:d;return s(h)||e({type:"ADD_TOAST",toast:{...u,id:h}}),h}function a(u,d){return s(u)&&e({type:"UPDATE_TOAST",id:u,toast:d}),u}function l(u){const{id:d}=u;return(d?s(d):!1)&&d!=null?a(d,u):o(u)}function c(u){u==null?e("DISMISS_ALL"):s(u)&&e({type:"DISMISS_TOAST",id:u})}return{getCount(){return n().context.count},getPlacements(){const d=n().context.toasts.map(h=>h.state.context.placement);return Array.from(new Set(d))},getToastsByPlacement:i,isVisible:s,create:o,update:a,upsert:l,dismiss:c,remove(u){u==null?e("REMOVE_ALL"):s(u)&&e({type:"REMOVE_TOAST",id:u})},dismissByPlacement(u){i(u).forEach(h=>c(h.id))},loading(u){return l({...u,type:"loading"})},success(u){return l({...u,type:"success"})},error(u){return l({...u,type:"error"})},promise(u,d,h={}){const f=l({...h,...d.loading,type:"loading"});return ml(u).then(p=>{const g=ml(d.success,p);l({...h,...g,id:f,type:"success"})}).catch(p=>{const g=ml(d.error,p);l({...h,...g,id:f,type:"error"})}).finally(()=>{d.finally?.()}),f},pause(u){u==null?e("PAUSE_ALL"):s(u)&&e({type:"PAUSE_TOAST",id:u})},resume(u){u==null?e("RESUME_ALL"):s(u)&&e({type:"RESUME_TOAST",id:u})},getGroupProps(u){const{placement:d,label:h="Notifications"}=u,f=n(),p=f.context.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),[g,x="center"]=d.split("-");return r.element({...Ma.group.attrs,dir:f.context.dir,tabIndex:-1,"aria-label":`${d} ${h} ${p}`,id:er.getRegionId(d),"data-placement":d,"data-side":g,"data-align":x,"aria-live":"polite",role:"region",style:AG(f.context,d),onMouseMove(){e({type:"REGION.POINTER_ENTER",placement:d})},onMouseLeave(){e({type:"REGION.POINTER_LEAVE",placement:d})},onFocus(v){e({type:"REGION.FOCUS",target:v.relatedTarget})},onBlur(v){f.context.isFocusWithin&&!Qo(v.currentTarget,v.relatedTarget)&&e({type:"REGION.BLUR"})}})},subscribe(u){const d=n();return Vu(d.context.toasts,()=>{const f=i(d.context.placement).map(p=>p.getState().context);u(f)})}}}var{not:LG,and:DG,or:FG}=tc;function NG(t){const{type:e="info",duration:r,id:n="1",placement:i="bottom",removeDelay:s=200,...o}=t,a=pn(o),l=v1(r,e);return to({id:n,context:{id:n,type:e,remaining:l,duration:l,removeDelay:s,createdAt:Date.now(),placement:i,...a,height:0,offset:0,frontmost:!1,mounted:!1,index:-1,zIndex:0},initial:e==="loading"?"visible:persist":"visible",on:{UPDATE:[{guard:DG("hasTypeChanged","isChangingToLoading"),target:"visible:persist",actions:["setContext"]},{guard:FG("hasDurationChanged","hasTypeChanged"),target:"visible:updating",actions:["setContext"]},{actions:["setContext"]}],MEASURE:{actions:["measureHeight"]}},entry:["invokeOnVisible"],activities:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],after:{0:"visible"}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:LG("isLoadingType"),target:"visible",actions:["setCreatedAt"]},DISMISS:"dismissing"}},visible:{tags:["visible"],after:{VISIBLE_DURATION:"dismissing"},on:{DISMISS:"dismissing",PAUSE:{target:"visible:persist",actions:"setRemainingDuration"}}},dismissing:{entry:"invokeOnDismiss",after:{REMOVE_DELAY:{target:"unmounted",actions:"notifyParentToRemove"}}},unmounted:{entry:"invokeOnUnmount",type:"final"}}},{activities:{trackHeight(c,u,{self:d}){let h;return at(()=>{const f=er.getRootEl(c);if(!f)return;c.mounted=!0;const p=An(f,"[data-ghost]");yl(p.length!==2,"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements");const g=()=>{const y=f.style.height;f.style.height="auto";const m=f.getBoundingClientRect().height;f.style.height=y,c.height=m,d.sendParent({type:"UPDATE_HEIGHT",id:d.id,height:m,placement:c.placement})};g();const x=er.getWin(c),v=new x.MutationObserver(g);v.observe(f,{childList:!0,subtree:!0,characterData:!0}),h=()=>v.disconnect()}),()=>h?.()}},guards:{isChangingToLoading:(c,u)=>u.toast?.type==="loading",isLoadingType:c=>c.type==="loading",hasTypeChanged:(c,u)=>u.toast?.type!=null&&u.toast.type!==c.type,hasDurationChanged:(c,u)=>u.toast?.duration!=null&&u.toast.duration!==c.duration},delays:{VISIBLE_DURATION:c=>c.remaining,REMOVE_DELAY:c=>c.removeDelay},actions:{measureHeight(c,u,{self:d}){at(()=>{const h=er.getRootEl(c);if(!h)return;c.mounted=!0;const f=h.style.height;h.style.height="auto";const p=h.getBoundingClientRect().height;h.style.height=f,c.height=p,d.sendParent({type:"UPDATE_HEIGHT",id:d.id,height:p,placement:c.placement})})},setRemainingDuration(c){c.remaining-=Date.now()-c.createdAt},setCreatedAt(c){c.createdAt=Date.now()},notifyParentToRemove(c,u,{self:d}){d.sendParent({type:"REMOVE_TOAST",id:d.id})},invokeOnDismiss(c){c.onStatusChange?.({status:"dismissing"})},invokeOnUnmount(c){c.onStatusChange?.({status:"unmounted"})},invokeOnVisible(c){c.onStatusChange?.({status:"visible"})},setContext(c,u){const d=u.toast?.duration,h=u.toast?.type??c.type,f=v1(d,h);Object.assign(c,{...u.toast,duration:f,remaining:f})}}})}function BG(t){const e=pn(t);return to({id:"toaster",initial:e.overlap?"overlap":"stack",context:{dir:"ltr",max:Number.MAX_SAFE_INTEGER,gap:16,pauseOnPageIdle:!1,hotkey:["altKey","KeyT"],offsets:"1rem",placement:"bottom",removeDelay:200,...e,toasts:[],lastFocusedEl:null,isFocusWithin:!1,heights:[]},computed:{count:r=>r.toasts.length},activities:["trackDocumentVisibility","trackHotKeyPress"],watch:{toasts:["collapsedIfEmpty","setDismissableBranch"]},exit:["removeToasts","clearDismissableBranch","clearLastFocusedEl"],on:{PAUSE_TOAST:{actions:["pauseToast"]},PAUSE_ALL:{actions:["pauseToasts"]},RESUME_TOAST:{actions:["resumeToast"]},RESUME_ALL:{actions:["resumeToasts"]},ADD_TOAST:{guard:"isWithinRange",actions:["createToast","syncToastIndex"]},UPDATE_TOAST:{actions:["updateToast"]},DISMISS_TOAST:{actions:["dismissToast"]},DISMISS_ALL:{actions:["dismissToasts"]},REMOVE_TOAST:{actions:["removeToast","syncToastIndex","syncToastOffset"]},REMOVE_ALL:{actions:["removeToasts"]},UPDATE_HEIGHT:{actions:["syncHeights","syncToastOffset"]},"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","restoreLastFocusedEl"]},{actions:["resumeToasts","restoreLastFocusedEl"]}]},states:{stack:{entry:["expandToasts"],on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap"},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{entry:["collapseToasts"],on:{"REGION.STACK":{target:"stack"},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts"]}}}}},{guards:{isWithinRange:r=>r.toasts.length<r.max,isOverlapping:r=>!!r.overlap},activities:{trackHotKeyPress(r,n,{send:i}){return ct(document,"keydown",o=>{r.hotkey.every(l=>o[l]||o.code===l)&&i({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility(r,n,{send:i}){if(!r.pauseOnPageIdle)return;const s=er.getDoc(r);return ct(s,"visibilitychange",()=>{i(s.visibilityState==="hidden"?"PAUSE_ALL":"RESUME_ALL")})}},actions:{setDismissableBranch(r){const i=l_(r.toasts,r.placement).length>0;if(!i){r._cleanup?.();return}if(i&&r._cleanup)return;const s=()=>er.getRegionEl(r,r.placement);r._cleanup=Vz(s,{defer:!0})},clearDismissableBranch(r){r._cleanup?.()},focusRegionEl(r){queueMicrotask(()=>{er.getRegionEl(r,r.placement)?.focus()})},expandToasts(r){Qd(r,n=>{n.state.context.stacked=!0})},collapseToasts(r){Qd(r,n=>{n.state.context.stacked=!1})},collapsedIfEmpty(r,n,{send:i}){!r.overlap||r.toasts.length>1||i("REGION.OVERLAP")},pauseToast(r,n,{self:i}){i.sendChild("PAUSE",n.id)},pauseToasts(r){r.toasts.forEach(n=>n.send("PAUSE"))},resumeToast(r,n,{self:i}){i.sendChild("RESUME",n.id)},resumeToasts(r){r.toasts.forEach(n=>n.send("RESUME"))},measureToasts(r){r.toasts.forEach(n=>n.send("MEASURE"))},createToast(r,n,{self:i,getState:s}){const o={placement:r.placement,duration:r.duration,removeDelay:r.removeDelay,...n.toast,dir:r.dir,getRootNode:r.getRootNode,stacked:s().matches("stack")},a=NG(o),l=i.spawn(a);r.toasts=[l,...r.toasts]},updateToast(r,n,{self:i}){i.sendChild({type:"UPDATE",toast:n.toast},n.id)},dismissToast(r,n,{self:i}){i.sendChild("DISMISS",n.id)},dismissToasts(r){r.toasts.forEach(n=>n.send("DISMISS"))},removeToast(r,n,{self:i}){i.stopChild(n.id),r.toasts=r.toasts.filter(s=>s.id!==n.id),r.heights=r.heights.filter(s=>s.id!==n.id)},removeToasts(r,n,{self:i}){r.toasts.forEach(s=>i.stopChild(s.id)),r.toasts=[],r.heights=[]},syncHeights(r,n){const i=r.heights.find(s=>s.id===n.id);if(i)i.height=n.height,i.placement=n.placement;else{const s={id:n.id,height:n.height,placement:n.placement};r.heights=[s,...r.heights]}},syncToastIndex(r){Qd(r,(n,i,s)=>{n.state.context.index=i,n.state.context.frontmost=i===0,n.state.context.zIndex=s.length-i})},syncToastOffset(r,n){const i=n.placement??r.placement;Qd({...r,placement:i},s=>{const o=Math.max(r.heights.findIndex(l=>l.id===s.id),0),a=r.heights.reduce((l,c,u)=>u>=o?l:l+c.height,0);s.state.context.offset=o*r.gap+a})},setLastFocusedEl(r,n){r.isFocusWithin||!n.target||(r.isFocusWithin=!0,r.lastFocusedEl=Ci(n.target))},restoreLastFocusedEl(r){r.isFocusWithin=!1,r.lastFocusedEl&&(r.lastFocusedEl.focus({preventScroll:!0}),r.lastFocusedEl=null)},clearLastFocusedEl(r){r.lastFocusedEl&&(r.lastFocusedEl.focus({preventScroll:!0}),r.lastFocusedEl=null,r.isFocusWithin=!1)}}})}function Qd(t,e){l_(t.toasts,t.placement).forEach(e)}function UG(t,e,r){const n=t.hasTag("visible"),i=t.hasTag("paused"),s=t.context.placement,o=t.context.type,[a,l="center"]=s.split("-");return{type:o,title:t.context.title,description:t.context.description,placement:s,visible:n,paused:i,pause(){e("PAUSE")},resume(){e("RESUME")},dismiss(){e("DISMISS")},getRootProps(){return r.element({...Ma.root.attrs,dir:t.context.dir,id:er.getRootId(t.context),"data-state":n?"open":"closed","data-type":o,"data-placement":s,"data-align":l,"data-side":a,"data-mounted":Q(t.context.mounted),"data-paused":Q(i),"data-first":Q(t.context.frontmost),"data-sibling":Q(!t.context.frontmost),"data-stack":Q(t.context.stacked),"data-overlap":Q(!t.context.stacked),role:"status","aria-atomic":"true","aria-describedby":t.context.description?er.getDescriptionId(t.context):void 0,"aria-labelledby":t.context.title?er.getTitleId(t.context):void 0,tabIndex:0,style:kG(t.context,n),onKeyDown(c){c.defaultPrevented||c.key=="Escape"&&(e("DISMISS"),c.preventDefault())}})},getGhostBeforeProps(){return r.element({"data-ghost":"before",style:RG(t.context,n)})},getGhostAfterProps(){return r.element({"data-ghost":"after",style:MG()})},getTitleProps(){return r.element({...Ma.title.attrs,id:er.getTitleId(t.context)})},getDescriptionProps(){return r.element({...Ma.description.attrs,id:er.getDescriptionId(t.context)})},getActionTriggerProps(){return r.button({...Ma.actionTrigger.attrs,type:"button",onClick(c){c.defaultPrevented||(t.context.action?.onClick?.(),e("DISMISS"))}})},getCloseTriggerProps(){return r.button({id:er.getCloseTriggerId(t.context),...Ma.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(c){c.defaultPrevented||e("DISMISS")}})}}}var Jv={connect:OG,machine:BG};const zG=t=>{const e=Jv.machine({id:"1",...t});return{...Jv.connect(e,e.send,ro),machine:e}},[$G,ac]=hr({name:"ToastContext",hookName:"useToastContext",providerName:"<ToastProvider />"}),WR=w.forwardRef((t,e)=>{const r=ac(),n=ae(r.getActionTriggerProps(),t);return b.jsx(pe.button,{...n,ref:e})});WR.displayName="ToastActionTrigger";const HR=w.forwardRef((t,e)=>{const r=ac(),n=ae(r.getCloseTriggerProps(),t);return b.jsx(pe.button,{...n,ref:e})});HR.displayName="ToastCloseTrigger";const XR=w.forwardRef((t,e)=>{const r=ac(),n=ae(r.getDescriptionProps(),t);return b.jsx(pe.div,{...n,ref:e})});XR.displayName="ToastDescription";const YR=w.forwardRef((t,e)=>{const r=ac(),n=ae(r.getRootProps(),t);return b.jsxs("div",{...n,ref:e,children:[b.jsx("div",{...r.getGhostBeforeProps()}),t.children,b.jsx("div",{...r.getGhostAfterProps()})]})});YR.displayName="ToastRoot";const qR=w.forwardRef((t,e)=>{const r=ac(),n=ae(r.getTitleProps(),t);return b.jsx(pe.div,{...n,ref:e})});qR.displayName="ToastTitle";const KR=w.forwardRef((t,e)=>{const{toaster:r,children:n,...i}=t,[s,o]=ua(r.machine),a=s.context.placement,l=Jv.connect(s,o,ro),c=l.getToastsByPlacement(a),u=ae(l.getGroupProps({placement:a}),i);return b.jsx(pe.div,{...u,ref:e,children:c.map(d=>b.jsx(jG,{value:d,children:h=>n(h)},d.id))})});KR.displayName="Toaster";const jG=t=>{const[e,r]=w5(t.value),n=UG(e,r,ro);return b.jsx($G,{value:n,children:t.children(e.context)})},{withProvider:VG,withContext:gg,useStyles:GG}=hs({key:"toast"}),WG=Ye(KR,{},{forwardAsChild:!0}),HG=VG(YR,"root",{forwardAsChild:!0}),XG=gg(HR,"closeTrigger",{forwardAsChild:!0,defaultProps:{children:b.jsx(RR,{})}}),YG=gg(qR,"title",{forwardAsChild:!0}),qG=gg(XR,"description",{forwardAsChild:!0}),KG=gg(WR,"actionTrigger",{forwardAsChild:!0}),ZG={warning:Qf,success:kR,error:Qf},QG=w.forwardRef(function(e,r){const n=ac(),i=GG(),s=ZG[n.type];return s?b.jsx(s,{ref:r,...e,css:[i.indicator,e.css]}):null}),{withRootProvider:ZR,withContext:md,useStyles:Ete,PropsProvider:Cte}=hs({key:"tooltip"});ZR(uj);const JG=ZR(cj),e8=md(TR,"trigger",{forwardAsChild:!0}),t8=md(ER,"positioner",{forwardAsChild:!0}),r8=md(SR,"content",{forwardAsChild:!0}),n8=md(_R,"arrow",{forwardAsChild:!0}),i8=md(wR,"arrowTip",{forwardAsChild:!0}),{withContext:s8,PropsProvider:Tte}=ca({key:"heading"}),el=s8("h2"),{withContext:o8,PropsProvider:Pte}=ca({key:"text"}),ze=o8("p"),xl={background:{container:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"auto"},image:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1},video:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1,transform:"scaleX(-1)"}},canvas:{container:{position:"relative",width:"100%",height:"100%",zIndex:2,pointerEvents:"auto",css:{"-webkit-app-region":"no-drag"}}},subtitle:{container:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:"200px",maxWidth:"95%",width:"max-content",zIndex:3,userSelect:"none",willChange:"transform"},text:{color:"#ff8ac3",fontSize:"1.6rem",textAlign:"center",lineHeight:"1.4",whiteSpace:"pre-wrap",textShadow:"0 0 8px rgba(255, 105, 180, 0.6), 2px 2px 4px rgba(0, 0, 0, 0.6)",paddingInline:"8px"}},wsStatus:{container:{position:"absolute",top:"20px",left:"20px",zIndex:2,padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"medium",color:"white",transition:"all 0.2s",cursor:"pointer",userSelect:"none",_hover:{opacity:.8}}}},Qt=zG({placement:"top-end",pauseOnPageIdle:!0,max:5});function a8(){return b.jsx(o_,{children:b.jsx(WG,{toaster:Qt,insetInline:{mdDown:"4"},children:t=>b.jsxs(HG,{width:{md:"sm"},children:[t.type==="loading"?b.jsx(jl,{size:"sm",color:"blue.solid"}):b.jsx(QG,{}),b.jsxs(no,{gap:"1",flex:"1",maxWidth:"100%",children:[t.title&&b.jsx(YG,{children:t.title}),t.description&&b.jsx(qG,{children:t.description})]}),t.action&&b.jsx(KG,{children:t.action.label}),t.meta?.closable&&b.jsx(XG,{})]})})})}const l8={width:320,height:240},QR=w.createContext(null);function c8({children:t}){const[e,r]=w.useState(!1),[n,i]=w.useState(!1),[s,o]=w.useState(l8),a=w.useRef(null),l=w.useRef(null),c=w.useRef(null),u=w.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(y=>y.kind==="videoinput"))throw new Error("No camera found on this device");const v=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:s.width},height:{ideal:s.height}}});a.current=v,c.current&&(c.current.srcObject=v),r(!0)}catch(g){throw console.error("Failed to start camera:",g),Qt.create({title:`Failed to start camera: ${g}`,type:"error",duration:2e3}),g}},[s]),d=w.useCallback(()=>{a.current&&(a.current.getTracks().forEach(g=>g.stop()),a.current=null,r(!1))},[]),h=w.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(y=>y.kind==="videoinput"))throw new Error("No camera found on this device");const v=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:s.width},height:{ideal:s.height}}});l.current=v,i(!0)}catch(g){throw console.error("Failed to start background camera:",g),Qt.create({title:`Failed to start background camera: ${g}`,type:"error",duration:2e3}),g}},[s]),f=w.useCallback(()=>{l.current&&(l.current.getTracks().forEach(g=>g.stop()),l.current=null,i(!1))},[]);w.useEffect(()=>()=>{try{a.current&&(a.current.getTracks().forEach(g=>g.stop()),a.current=null),l.current&&(l.current.getTracks().forEach(g=>g.stop()),l.current=null)}catch{}},[]);const p=w.useMemo(()=>({isStreaming:e,stream:a.current,startCamera:u,stopCamera:d,cameraConfig:s,setCameraConfig:o,videoRef:c,backgroundStream:l.current,startBackgroundCamera:h,stopBackgroundCamera:f,isBackgroundStreaming:n}),[e,u,d,s,n,h,f]);return b.jsx(QR.Provider,{value:p,children:t})}function JR(){const t=w.useContext(QR);if(!t)throw new Error("useCamera must be used within a CameraProvider");return t}var e0=function(t,e){return e0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},e0(t,e)};function mg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");e0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function t0(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function r0(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function n0(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Ji(t){return typeof t=="function"}function eM(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var km=eM(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function i0(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var yg=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=t0(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){e={error:g}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(Ji(u))try{u()}catch(g){s=g instanceof km?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=t0(d),f=h.next();!f.done;f=h.next()){var p=f.value;try{x1(p)}catch(g){s=s??[],g instanceof km?s=n0(n0([],r0(s)),r0(g.errors)):s.push(g)}}}catch(g){n={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(s)throw new km(s)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)x1(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&i0(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&i0(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),tM=yg.EMPTY;function rM(t){return t instanceof yg||t&&"closed"in t&&Ji(t.remove)&&Ji(t.add)&&Ji(t.unsubscribe)}function x1(t){Ji(t)?t():t.unsubscribe()}var u8={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},d8={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,n0([t,e],r0(r)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function h8(t){d8.setTimeout(function(){throw t})}function b1(){}function Zh(t){t()}var nM=function(t){mg(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,rM(r)&&r.add(n)):n.destination=g8,n}return e.create=function(r,n,i){return new s0(r,n,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(yg),f8=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){Jd(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){Jd(n)}else Jd(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Jd(r)}},t}(),s0=function(t){mg(e,t);function e(r,n,i){var s=t.call(this)||this,o;return Ji(r)||!r?o={next:r??void 0,error:n??void 0,complete:i??void 0}:o=r,s.destination=new f8(o),s}return e}(nM);function Jd(t){h8(t)}function p8(t){throw t}var g8={closed:!0,next:b1,error:p8,complete:b1},m8=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function y8(t){return t}function v8(t){return t.length===0?y8:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var _1=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,s=b8(e)?e:new s0(e,r,n);return Zh(function(){var o=i,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=w1(r),new r(function(i,s){var o=new s0({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});n.subscribe(o)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[m8]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return v8(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=w1(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function w1(t){var e;return(e=t??u8.Promise)!==null&&e!==void 0?e:Promise}function x8(t){return t&&Ji(t.next)&&Ji(t.error)&&Ji(t.complete)}function b8(t){return t&&t instanceof nM||x8(t)&&rM(t)}var _8=eM(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),o0=function(t){mg(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new S1(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new _8},e.prototype.next=function(r){var n=this;Zh(function(){var i,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=t0(n.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(r)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(r){var n=this;Zh(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},e.prototype.complete=function(){var r=this;Zh(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?tM:(this.currentObservers=null,a.push(r),new yg(function(){n.currentObservers=null,i0(a,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,s=n.thrownError,o=n.isStopped;i?r.error(s):o&&r.complete()},e.prototype.asObservable=function(){var r=new _1;return r.source=this,r},e.create=function(r,n){return new S1(r,n)},e}(_1),S1=function(t){mg(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},e.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:tM},e}(o0);class tl{static instance;errorHistory=[];maxHistorySize=100;recoveryStrategies=new Map;static getInstance(){return tl.instance||(tl.instance=new tl),tl.instance}constructor(){this.setupGlobalHandlers(),this.setupDefaultRecoveryStrategies()}setupGlobalHandlers(){window.addEventListener("unhandledrejection",e=>{console.error(" Promise rejection:",e.reason);const r={type:"unknown",message:e.reason?.message||"",originalError:e.reason,context:"unhandledrejection",timestamp:Date.now(),recoverable:!1};this.handleError(r),e.preventDefault()}),window.addEventListener("error",e=>{console.error(" JavaScript:",e.error);const r={type:"unknown",message:e.message,originalError:e.error,context:`${e.filename}:${e.lineno}:${e.colno}`,timestamp:Date.now(),recoverable:!1};this.handleError(r)})}setupDefaultRecoveryStrategies(){this.recoveryStrategies.set("websocket",{attempt:async()=>{console.log(" WebSocket...")},maxRetries:3,retryDelay:2e3}),this.recoveryStrategies.set("network",{attempt:async()=>{console.log(" ...")},maxRetries:2,retryDelay:1e3})}handleError(e){this.addToHistory(e),console.error(` [${e.type.toUpperCase()}] ${e.message}`,{context:e.context,originalError:e.originalError,timestamp:new Date(e.timestamp).toISOString()}),this.notifyUser(e),e.recoverable&&this.attemptRecovery(e.type),this.reportToMonitoring(e)}handleNetworkError(e,r){const n={type:"network",message:this.getNetworkErrorMessage(e),originalError:e,context:r,timestamp:Date.now(),recoverable:!0};this.handleError(n)}handleWebSocketError(e,r){const n={type:"websocket",message:"...",originalError:e,context:r,timestamp:Date.now(),recoverable:!0};this.handleError(n)}handleMediaError(e,r){const n={type:"media",message:"",originalError:e,context:r,timestamp:Date.now(),recoverable:!1};this.handleError(n)}handlePermissionError(e,r){const n={type:"permission",message:"",originalError:e,context:r,timestamp:Date.now(),recoverable:!1};this.handleError(n)}getNetworkErrorMessage(e){const r=e.message.toLowerCase();return r.includes("fetch")?"":r.includes("timeout")?"":r.includes("cors")?"":""}notifyUser(e){if(this.errorHistory.filter(s=>s.type===e.type&&s.message===e.message).find(s=>Date.now()-s.timestamp<6e4))return;const n=e.recoverable?"warning":"error",i=e.recoverable?3e3:5e3;Qt.create({title:this.getErrorTitle(e.type),description:e.message,type:n,duration:i})}getErrorTitle(e){return{network:"",websocket:"",media:"",permission:"",validation:"",unknown:""}[e]||""}async attemptRecovery(e){const r=this.recoveryStrategies.get(e);if(!r)return;let n=0;for(;n<r.maxRetries;)try{console.log(`  ${e} (${n+1}/${r.maxRetries})`),await r.attempt(),console.log(` ${e} `);return}catch(i){n++,console.warn(`  (${n}/${r.maxRetries}):`,i),n<r.maxRetries&&await new Promise(s=>setTimeout(s,r.retryDelay))}console.error(` ${e} `)}addToHistory(e){this.errorHistory.push(e),this.errorHistory.length>this.maxHistorySize&&this.errorHistory.shift()}reportToMonitoring(e){}getErrorHistory(){return Object.freeze([...this.errorHistory])}clearErrorHistory(){this.errorHistory=[]}registerRecoveryStrategy(e,r){this.recoveryStrategies.set(e,r)}}const Hc=tl.getInstance();class rl{static instance;ws=null;messageSubject=new o0;stateSubject=new o0;currentState="CLOSED";lastUrl=null;shouldReconnect=!0;reconnectAttempts=0;reconnectTimer=null;heartbeatInterval=null;heartbeatWatchdog=null;lastHeartbeatAckTs=0;delayedConnectTimer=null;outbox=[];static getInstance(){return rl.instance||(rl.instance=new rl),rl.instance}initializeConnection(){this.sendMessage({type:"fetch-backgrounds"}),this.sendMessage({type:"fetch-configs"}),this.sendMessage({type:"fetch-history-list"}),this.sendMessage({type:"create-new-history"})}startHeartbeat(){this.lastHeartbeatAckTs=Date.now(),this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&(console.debug(" WS heartbeat -> ping"),this.sendMessage({type:"heartbeat"}))},1e4),this.heartbeatWatchdog&&clearInterval(this.heartbeatWatchdog),this.heartbeatWatchdog=setInterval(()=>{const e=Date.now();if(this.currentState==="OPEN"&&e-this.lastHeartbeatAckTs>9e4){console.warn(" WS heartbeat timeout (>30s no ack). Closing to trigger reconnect...");try{this.ws?.close()}catch{}}},5e3)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.heartbeatWatchdog&&(clearInterval(this.heartbeatWatchdog),this.heartbeatWatchdog=null)}scheduleReconnect(){if(!this.shouldReconnect||!this.lastUrl||this.reconnectTimer)return;const e=Math.min(15e3,1e3*Math.pow(2,this.reconnectAttempts));console.warn(` WS schedule reconnect in ${e}ms (attempt ${this.reconnectAttempts+1})`),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.reconnectAttempts+=1,console.info(" WS reconnecting...",{attempt:this.reconnectAttempts,url:this.lastUrl}),this.connect(this.lastUrl)},e)}connect(e){if(this.delayedConnectTimer&&(clearTimeout(this.delayedConnectTimer),this.delayedConnectTimer=null),this.lastUrl===e&&(this.ws?.readyState===WebSocket.CONNECTING||this.ws?.readyState===WebSocket.OPEN)){console.warn(" WS already connecting/connected to",e,"- skipping duplicate connect");return}if(this.ws){console.info(" WS closing existing connection before reconnect"),this.disconnect(),this.delayedConnectTimer=setTimeout(()=>{this.delayedConnectTimer=null,this._doConnect(e)},100);return}this._doConnect(e)}_doConnect(e){try{this.shouldReconnect=!0,this.lastUrl=e,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),console.info(" WS connecting...",e),this.ws=new WebSocket(e),this.currentState="CONNECTING",this.stateSubject.next("CONNECTING"),this.ws.onopen=()=>{console.info(" WS open"),this.currentState="OPEN",this.stateSubject.next("OPEN"),this.reconnectAttempts=0,this.startHeartbeat(),this.initializeConnection();try{for(;this.ws?.readyState===WebSocket.OPEN&&this.outbox.length>0;){const r=this.outbox.shift();r&&this.ws.send(JSON.stringify(r))}}catch(r){console.warn("Failed to flush WS outbox:",r)}},this.ws.onmessage=r=>{try{const n=JSON.parse(r.data);if(n?.type==="heartbeat-ack"){this.lastHeartbeatAckTs=Date.now(),console.debug(" WS heartbeat <- ack");return}this.messageSubject.next(n)}catch(n){console.error("Failed to parse WebSocket message:",n),Hc.handleWebSocketError(n,"Message parsing failed")}},this.ws.onclose=r=>{console.warn(" WS closed:",{code:r.code,reason:r.reason,wasClean:r.wasClean}),this.currentState="CLOSED",this.stateSubject.next("CLOSED"),this.stopHeartbeat(),r.wasClean||(console.warn(" WebSocket:",r.code,r.reason),Hc.handleWebSocketError(new Error(`Connection closed unexpectedly: ${r.reason||r.code}`),"Connection lost")),this.scheduleReconnect()},this.ws.onerror=r=>{console.error(" WS error event:",r),this.currentState="CLOSED",this.stateSubject.next("CLOSED"),console.error(" WebSocket:",r),this.stopHeartbeat(),Hc.handleWebSocketError(new Error("WebSocket connection failed"),"Connection error"),this.scheduleReconnect()}}catch(r){console.error("Failed to connect to WebSocket:",r),this.currentState="CLOSED",this.stateSubject.next("CLOSED"),Hc.handleWebSocketError(r,"Connection initialization failed"),this.scheduleReconnect()}}sendMessage(e){if(this.ws?.readyState===WebSocket.OPEN){this.ws.send(JSON.stringify(e));return}if(e&&e.type==="heartbeat"){console.debug("WS not open. Skip heartbeat toast.");return}this.outbox.push(e),console.warn("WS not open. Queued message for resend after reconnect:",e),this.currentState==="CLOSED"&&this.lastUrl&&this.connect(this.lastUrl)}onMessage(e){const r=this.messageSubject.subscribe(e);return console.debug(" "),r}onStateChange(e){const r=this.stateSubject.subscribe(e);return console.debug(" "),r}getSubscriptionCount(){return{message:this.messageSubject.observers.length,state:this.stateSubject.observers.length}}disconnect(){if(console.info(" WS manual disconnect - cleaning up all resources"),this.shouldReconnect=!1,this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.delayedConnectTimer&&(clearTimeout(this.delayedConnectTimer),this.delayedConnectTimer=null),this.ws){try{this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null,(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING)&&this.ws.close()}catch(e){console.warn("Error closing WebSocket:",e)}this.ws=null}this.outbox=[],this.currentState="CLOSED",this.stateSubject.next("CLOSED"),console.info(" WS disconnect - ")}getCurrentState(){return this.currentState}}const xr=rl.getInstance(),E1=t=>{let e;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(f=>f(e,h))}},i=()=>e,a={setState:n,getState:i,getInitialState:()=>l,subscribe:c=>(r.add(c),()=>r.delete(c))},l=e=t(n,i,a);return a},w8=t=>t?E1(t):E1,S8=t=>t;function E8(t,e=S8){const r=cn.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return cn.useDebugValue(r),r}const C1=t=>{const e=w8(t),r=n=>E8(e,n);return Object.assign(r,e),r},iM=t=>t?C1(t):C1,C8={BASE_URL:"./",DEV:!1,MODE:"web",PROD:!0,SSR:!1},a0=new Map,eh=t=>{const e=a0.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([r,n])=>[r,n.getState()])):{}},T8=(t,e,r)=>{if(t===void 0)return{type:"untracked",connection:e.connect(r)};const n=a0.get(r.name);if(n)return{type:"tracked",store:t,...n};const i={connection:e.connect(r),stores:{}};return a0.set(r.name,i),{type:"tracked",store:t,...i}},P8=(t,e={})=>(r,n,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=e;let c;try{c=(s??(C8?"web":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return t(r,n,i);const{connection:u,...d}=T8(a,c,l);let h=!0;i.setState=(g,x,v)=>{const y=r(g,x);if(!h)return y;const m=v===void 0?{type:o||"anonymous"}:typeof v=="string"?{type:v}:v;return a===void 0?(u?.send(m,n()),y):(u?.send({...m,type:`${a}/${m.type}`},{...eh(l.name),[a]:i.getState()}),y)};const f=(...g)=>{const x=h;h=!1,r(...g),h=x},p=t(i.setState,n,i);if(d.type==="untracked"?u?.init(p):(d.stores[d.store]=i,u?.init(Object.fromEntries(Object.entries(d.stores).map(([g,x])=>[g,g===d.store?p:x.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const x=i.dispatch;i.dispatch=(...v)=>{v[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),x(...v)}}return u.subscribe(g=>{var x;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Rm(g.payload,v=>{if(v.type==="__setState"){if(a===void 0){f(v.state);return}Object.keys(v.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const y=v.state[a];if(y==null)return;JSON.stringify(i.getState())!==JSON.stringify(y)&&f(y);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(v)});case"DISPATCH":switch(g.payload.type){case"RESET":return f(p),a===void 0?u?.init(i.getState()):u?.init(eh(l.name));case"COMMIT":if(a===void 0){u?.init(i.getState());return}return u?.init(eh(l.name));case"ROLLBACK":return Rm(g.state,v=>{if(a===void 0){f(v),u?.init(i.getState());return}f(v[a]),u?.init(eh(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Rm(g.state,v=>{if(a===void 0){f(v);return}JSON.stringify(i.getState())!==JSON.stringify(v[a])&&f(v[a])});case"IMPORT_STATE":{const{nextLiftedState:v}=g.payload,y=(x=v.computedStates.slice(-1)[0])==null?void 0:x.state;if(!y)return;f(a===void 0?y:y[a]),u?.send(null,v);return}case"PAUSE_RECORDING":return h=!h}return}}),p},I8=P8,Rm=(t,e)=>{let r;try{r=JSON.parse(t)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&e(r)},A8=t=>(e,r,n)=>{const i=n.subscribe;return n.subscribe=(o,a,l)=>{let c=o;if(a){const u=l?.equalityFn||Object.is;let d=o(n.getState());c=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},l?.fireImmediately&&a(d,d)}return i(c)},t(e,r,n)},k8=A8;function R8(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>r.removeItem(i)}}const l0=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return l0(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return l0(n)(r)}}}},M8=(t,e)=>(r,n,i)=>{let s={storage:R8(()=>localStorage),partialize:g=>g,version:0,merge:(g,x)=>({...x,...g}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...g)},n,i);const u=()=>{const g=s.partialize({...n()});return c.setItem(s.name,{state:g,version:s.version})},d=i.setState;i.setState=(g,x)=>{d(g,x),u()};const h=t((...g)=>{r(...g),u()},n,i);i.getInitialState=()=>h;let f;const p=()=>{var g,x;if(!c)return;o=!1,a.forEach(y=>{var m;return y((m=n())!=null?m:h)});const v=((x=s.onRehydrateStorage)==null?void 0:x.call(s,(g=n())!=null?g:h))||void 0;return l0(c.getItem.bind(c))(s.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==s.version){if(s.migrate){const m=s.migrate(y.state,y.version);return m instanceof Promise?m.then(_=>[!0,_]):[!0,m]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var m;const[_,C]=y;if(f=s.merge(C,(m=n())!=null?m:h),r(f,!0),_)return u()}).then(()=>{v?.(f,void 0),f=n(),o=!0,l.forEach(y=>y(f))}).catch(y=>{v?.(void 0,y)})};return i.persist={setOptions:g=>{s={...s,...g},g.storage&&(c=g.storage)},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},s.skipHydration||p(),f||h},O8=M8;var sM=Symbol.for("immer-nothing"),T1=Symbol.for("immer-draftable"),Gr=Symbol.for("immer-state");function Pn(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Vl=Object.getPrototypeOf;function Gl(t){return!!t&&!!t[Gr]}function ta(t){return t?oM(t)||Array.isArray(t)||!!t[T1]||!!t.constructor?.[T1]||xg(t)||bg(t):!1}var L8=Object.prototype.constructor.toString();function oM(t){if(!t||typeof t!="object")return!1;const e=Vl(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===L8}function Jf(t,e){vg(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function vg(t){const e=t[Gr];return e?e.type_:Array.isArray(t)?1:xg(t)?2:bg(t)?3:0}function c0(t,e){return vg(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function aM(t,e,r){const n=vg(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function D8(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function xg(t){return t instanceof Map}function bg(t){return t instanceof Set}function Co(t){return t.copy_||t.base_}function u0(t,e){if(xg(t))return new Map(t);if(bg(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=oM(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Gr];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const o=i[s],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Vl(t),n)}else{const n=Vl(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function c_(t,e=!1){return _g(t)||Gl(t)||!ta(t)||(vg(t)>1&&(t.set=t.add=t.clear=t.delete=F8),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>c_(n,!0))),t}function F8(){Pn(2)}function _g(t){return Object.isFrozen(t)}var N8={};function ra(t){const e=N8[t];return e||Pn(0,t),e}var Hu;function lM(){return Hu}function B8(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function P1(t,e){e&&(ra("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function d0(t){h0(t),t.drafts_.forEach(U8),t.drafts_=null}function h0(t){t===Hu&&(Hu=t.parent_)}function I1(t){return Hu=B8(Hu,t)}function U8(t){const e=t[Gr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function A1(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Gr].modified_&&(d0(e),Pn(4)),ta(t)&&(t=ep(e,t),e.parent_||tp(e,t)),e.patches_&&ra("Patches").generateReplacementPatches_(r[Gr].base_,t,e.patches_,e.inversePatches_)):t=ep(e,r,[]),d0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==sM?t:void 0}function ep(t,e,r){if(_g(e))return e;const n=e[Gr];if(!n)return Jf(e,(i,s)=>k1(t,n,e,i,s,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return tp(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let s=i,o=!1;n.type_===3&&(s=new Set(i),i.clear(),o=!0),Jf(s,(a,l)=>k1(t,n,i,a,l,r,o)),tp(t,i,!1),r&&t.patches_&&ra("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function k1(t,e,r,n,i,s,o){if(Gl(i)){const a=s&&e&&e.type_!==3&&!c0(e.assigned_,n)?s.concat(n):void 0,l=ep(t,i,a);if(aM(r,n,l),Gl(l))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(ta(i)&&!_g(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;ep(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&tp(t,i)}}function tp(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&c_(e,r)}function z8(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:lM(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=u_;r&&(i=[n],s=Xu);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return n.draft_=a,n.revoke_=o,a}var u_={get(t,e){if(e===Gr)return t;const r=Co(t);if(!c0(r,e))return $8(t,r,e);const n=r[e];return t.finalized_||!ta(n)?n:n===Mm(t.base_,e)?(Om(t),t.copy_[e]=p0(n,t)):n},has(t,e){return e in Co(t)},ownKeys(t){return Reflect.ownKeys(Co(t))},set(t,e,r){const n=cM(Co(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=Mm(Co(t),e),s=i?.[Gr];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(D8(r,i)&&(r!==void 0||c0(t.base_,e)))return!0;Om(t),f0(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Mm(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Om(t),f0(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Co(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Pn(11)},getPrototypeOf(t){return Vl(t.base_)},setPrototypeOf(){Pn(12)}},Xu={};Jf(u_,(t,e)=>{Xu[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Xu.deleteProperty=function(t,e){return Xu.set.call(this,t,e,void 0)};Xu.set=function(t,e,r){return u_.set.call(this,t[0],e,r,t[0])};function Mm(t,e){const r=t[Gr];return(r?Co(r):t)[e]}function $8(t,e,r){const n=cM(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function cM(t,e){if(!(e in t))return;let r=Vl(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Vl(r)}}function f0(t){t.modified_||(t.modified_=!0,t.parent_&&f0(t.parent_))}function Om(t){t.copy_||(t.copy_=u0(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var j8=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(l=s,...c){return o.produce(l,u=>r.call(this,u,...c))}}typeof r!="function"&&Pn(6),n!==void 0&&typeof n!="function"&&Pn(7);let i;if(ta(e)){const s=I1(this),o=p0(e,void 0);let a=!0;try{i=r(o),a=!1}finally{a?d0(s):h0(s)}return P1(s,n),A1(i,s)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===sM&&(i=void 0),this.autoFreeze_&&c_(i,!0),n){const s=[],o=[];ra("Patches").generateReplacementPatches_(e,i,s,o),n(s,o)}return i}else Pn(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let n,i;return[this.produce(e,r,(o,a)=>{n=o,i=a}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ta(t)||Pn(8),Gl(t)&&(t=V8(t));const e=I1(this),r=p0(t,void 0);return r[Gr].isManual_=!0,h0(e),r}finishDraft(t,e){const r=t&&t[Gr];(!r||!r.isManual_)&&Pn(9);const{scope_:n}=r;return P1(n,e),A1(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=ra("Patches").applyPatches_;return Gl(t)?n(t,e):this.produce(t,i=>n(i,e))}};function p0(t,e){const r=xg(t)?ra("MapSet").proxyMap_(t,e):bg(t)?ra("MapSet").proxySet_(t,e):z8(t,e);return(e?e.scope_:lM()).drafts_.push(r),r}function V8(t){return Gl(t)||Pn(10,t),uM(t)}function uM(t){if(!ta(t)||_g(t))return t;const e=t[Gr];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=u0(t,e.scope_.immer_.useStrictShallowCopy_)}else r=u0(t,!0);return Jf(r,(n,i)=>{aM(r,n,uM(i))}),e&&(e.finalized_=!1),r}var Wr=new j8,G8=Wr.produce;Wr.produceWithPatches.bind(Wr);Wr.setAutoFreeze.bind(Wr);Wr.setUseStrictShallowCopy.bind(Wr);Wr.applyPatches.bind(Wr);Wr.createDraft.bind(Wr);Wr.finishDraft.bind(Wr);const W8=t=>(e,r,n)=>(n.setState=(i,s,...o)=>{const a=typeof i=="function"?G8(i):i;return e(a,s,...o)},t(n.setState,r,n)),H8=W8;function X8(){try{if(typeof window<"u"&&window.location.protocol==="https:"){const t=window.location.host;return{wsUrl:`wss://${t}/client-ws`,baseUrl:`https://${t}`}}}catch{console.warn(" ")}return{wsUrl:"ws://127.0.0.1:12393/client-ws",baseUrl:"http://127.0.0.1:12393"}}const R1=X8(),Lm={status:"idle",isIdle:!0,isThinkingSpeaking:!1,isInterrupted:!1,isLoading:!1,isListening:!1,isWaiting:!1},M1={micOn:!1,autoStopMic:!0,autoStartMicOn:!1,autoStartMicOnConvEnd:!0,previousTriggeredProbability:0,settings:{positiveSpeechThreshold:30,negativeSpeechThreshold:30,redemptionFrames:8,frameSamples:1536,minSpeechFrames:4,vadMode:3}},O1={currentModel:null,backgroundUrl:"",backgroundFiles:[],useCameraBackground:!1,stream:null,isStreaming:!1,showAdvertisements:!0,currentAdIndex:0,advertisements:[],isAdPlaying:!1,isLaundryMode:!1,currentVideo:null,videoTitle:"",isVideoPlaying:!1,availableMachines:[],isIdle:!1,idleTimeout:6e4,autoCloseEnabled:!0,autoCloseDelay:3e3},L1={messages:[],historyList:[],currentHistoryUid:null,subtitleText:"",showSubtitle:!0,fullResponse:"",forceNewMessage:!1,groupMembers:[],isOwner:!1,selfUid:""},D1={modelInfo:null,characterConfig:null,wsUrl:R1.wsUrl,baseUrl:R1.baseUrl,wsState:"CLOSED",appConfig:{}},Y8={allowButtonTrigger:!1,allowProactiveSpeak:!1,idleSecondsToSpeak:5},Z=iM()(I8(O8(k8(H8((t,e)=>({ai:Lm,vad:M1,media:O1,chat:L1,config:D1,proactive:Y8,backendSynthComplete:!1,setAiState:r=>{t(n=>{const i=typeof r=="function"?r(n.ai.status):r;n.ai.status=i,n.ai.isIdle=i==="idle",n.ai.isThinkingSpeaking=i==="thinking"||i==="speaking",n.ai.isInterrupted=i==="interrupted",n.ai.isLoading=i==="loading",n.ai.isListening=i==="listening",n.ai.isWaiting=i==="waiting"})},resetAiState:()=>{t(r=>{r.ai=Lm})},updateVADSettings:r=>{t(n=>{Object.assign(n.vad.settings,r)})},setMicState:r=>{t(n=>{n.vad.micOn=r})},setAutoStopMic:r=>{t(n=>{n.vad.autoStopMic=r})},setAutoStartMicOn:r=>{t(n=>{n.vad.autoStartMicOn=r})},setAutoStartMicOnConvEnd:r=>{t(n=>{n.vad.autoStartMicOnConvEnd=r})},setCurrentModel:r=>{t(n=>{n.media.currentModel=r})},updateMediaState:r=>{t(n=>{Object.assign(n.media,r)})},setBackgroundUrl:r=>{t(n=>{n.media.backgroundUrl=r})},setBackgroundFiles:r=>{t(n=>{n.media.backgroundFiles=r})},setUseCameraBackground:r=>{t(n=>{n.media.useCameraBackground=r})},setShowAdvertisements:r=>{t(n=>{n.media.showAdvertisements=r})},setAdvertisements:r=>{t(n=>{n.media.advertisements=r,n.media.currentAdIndex=0})},setIsLaundryMode:r=>{t(n=>{n.media.isLaundryMode=r})},setCurrentVideo:(r,n="")=>{t(i=>{i.media.currentVideo=r,i.media.videoTitle=n,i.media.isVideoPlaying=!!r})},setAvailableMachines:r=>{t(n=>{n.media.availableMachines=r})},addMessage:r=>{t(n=>{n.chat.messages.push(r)})},clearMessages:()=>{t(r=>{r.chat.messages=[]})},setMessages:r=>{t(n=>{n.chat.messages=r})},setHistoryList:r=>{t(n=>{n.chat.historyList=typeof r=="function"?r(n.chat.historyList):r})},setCurrentHistoryUid:r=>{t(n=>{n.chat.currentHistoryUid=r})},setForceNewMessage:r=>{t(n=>{n.chat.forceNewMessage=r})},appendHumanMessage:r=>{t(n=>{n.chat.messages.push({id:Date.now().toString(),content:r,role:"human",timestamp:new Date().toISOString()})})},appendAIMessage:(r,n,i)=>{t(s=>{const o=s.chat.messages,a=o[o.length-1];s.chat.forceNewMessage||!a||a.role!=="ai"?(s.chat.forceNewMessage=!1,o.push({id:Date.now().toString(),content:r,role:"ai",timestamp:new Date().toISOString(),name:n,avatar:i})):(a.content=`${a.content}${r}`,a.timestamp=new Date().toISOString())})},setSubtitleText:r=>{t(n=>{n.chat.subtitleText=r})},setFullResponse:r=>{t(n=>{n.chat.fullResponse=r})},appendResponse:r=>{t(n=>{n.chat.fullResponse=`${n.chat.fullResponse}${r||""}`})},clearResponse:()=>{t(r=>{r.chat.fullResponse=""})},setShowSubtitle:r=>{t(n=>{n.chat.showSubtitle=r})},updateChatState:r=>{t(n=>{Object.assign(n.chat,r)})},updateNetworkConfig:r=>{t(n=>{r.wsUrl&&(n.config.wsUrl=r.wsUrl),r.baseUrl&&(n.config.baseUrl=r.baseUrl)})},setModelInfo:r=>{t(n=>{n.config.modelInfo=r})},updateAppConfig:r=>{t(n=>{Object.assign(n.config.appConfig,r)})},setBackendSynthComplete:r=>{t(n=>{n.backendSynthComplete=r})},updateProactiveSettings:r=>{t(n=>{Object.assign(n.proactive,r)})},resetAll:()=>{t(r=>{r.ai=Lm,r.vad=M1,r.media=O1,r.chat=L1,r.config=D1,r.backendSynthComplete=!1})},getSnapshot:()=>{const r=e();return{ai:r.ai,vad:r.vad,media:r.media,chat:r.chat,config:r.config,backendSynthComplete:r.backendSynthComplete}}}))),{name:"app-store",partialize:t=>({vad:{micOn:t.vad.micOn,autoStopMic:t.vad.autoStopMic,autoStartMicOn:t.vad.autoStartMicOn,autoStartMicOnConvEnd:t.vad.autoStartMicOnConvEnd,settings:t.vad.settings},media:{backgroundUrl:t.media.backgroundUrl,showAdvertisements:t.media.showAdvertisements,isLaundryMode:t.media.isLaundryMode},config:{wsUrl:t.config.wsUrl,baseUrl:t.config.baseUrl,appConfig:t.config.appConfig}}),merge:(t,e)=>{const r=typeof window<"u"&&window.location.protocol==="https:",n=t?.config?.wsUrl&&/127\.0\.0\.1|localhost/i.test(t.config.wsUrl);return r&&n?(console.log("  HTTPS  localStorage "),{...e,...t,config:{...t.config,wsUrl:e.config.wsUrl,baseUrl:e.config.baseUrl}}):{...e,...t}}}),{name:"app-store"})),Ai=()=>{const t=Z(i=>i.ai.status),e=Z(i=>i.ai.isIdle),r=Z(i=>i.ai.isThinkingSpeaking),n=Z(i=>i.setAiState);return{status:t,isIdle:e,isThinkingSpeaking:r,setAiState:n}},q8=()=>{const t=Z(u=>u.vad.micOn),e=Z(u=>u.vad.autoStopMic),r=Z(u=>u.vad.autoStartMicOn),n=Z(u=>u.vad.autoStartMicOnConvEnd),i=Z(u=>u.vad.settings),s=Z(u=>u.setMicState),o=Z(u=>u.updateVADSettings),a=Z(u=>u.setAutoStopMic),l=Z(u=>u.setAutoStartMicOn),c=Z(u=>u.setAutoStartMicOnConvEnd);return{micOn:t,autoStopMic:e,autoStartMicOn:r,autoStartMicOnConvEnd:n,settings:i,setMicState:s,updateVADSettings:o,setAutoStopMic:a,setAutoStartMicOn:l,setAutoStartMicOnConvEnd:c}},rp=()=>{const t=Z(_=>_.media.currentModel),e=Z(_=>_.media.backgroundUrl),r=Z(_=>_.media.backgroundFiles),n=Z(_=>_.media.useCameraBackground),i=Z(_=>_.media.showAdvertisements),s=Z(_=>_.media.advertisements),o=Z(_=>_.media.isLaundryMode),a=Z(_=>_.media.currentVideo),l=Z(_=>_.media.videoTitle),c=Z(_=>_.media.isVideoPlaying),u=Z(_=>_.media.availableMachines),d=Z(_=>_.setCurrentModel),h=Z(_=>_.updateMediaState),f=Z(_=>_.setShowAdvertisements),p=Z(_=>_.setAdvertisements),g=Z(_=>_.setIsLaundryMode),x=Z(_=>_.setCurrentVideo),v=Z(_=>_.setAvailableMachines),y=Z(_=>_.setBackgroundFiles),m=Z(_=>_.setUseCameraBackground);return{currentModel:t,backgroundUrl:e,backgroundFiles:r,useCameraBackground:n,showAdvertisements:i,advertisements:s,isLaundryMode:o,currentVideo:a,videoTitle:l,isVideoPlaying:c,availableMachines:u,setCurrentModel:d,updateMediaState:h,setShowAdvertisements:f,setAdvertisements:p,setIsLaundryMode:g,setCurrentVideo:x,setAvailableMachines:v,setBackgroundFiles:y,setUseCameraBackground:m}},ki=()=>{const t=Z(m=>m.chat.messages),e=Z(m=>m.chat.historyList),r=Z(m=>m.chat.currentHistoryUid),n=Z(m=>m.chat.fullResponse),i=Z(m=>m.chat.forceNewMessage),s=Z(m=>m.chat.subtitleText),o=Z(m=>m.chat.showSubtitle),a=Z(m=>m.addMessage),l=Z(m=>m.setMessages),c=Z(m=>m.setHistoryList),u=Z(m=>m.setCurrentHistoryUid),d=Z(m=>m.setForceNewMessage),h=Z(m=>m.appendHumanMessage),f=Z(m=>m.appendAIMessage),p=Z(m=>m.setSubtitleText),g=Z(m=>m.setFullResponse),x=Z(m=>m.appendResponse),v=Z(m=>m.clearResponse),y=Z(m=>m.setShowSubtitle);return{messages:t,historyList:e,currentHistoryUid:r,fullResponse:n,forceNewMessage:i,subtitleText:s,showSubtitle:o,addMessage:a,setMessages:l,setHistoryList:c,setCurrentHistoryUid:u,setForceNewMessage:d,appendHumanMessage:h,appendAIMessage:f,setSubtitleText:p,setFullResponse:g,appendResponse:x,clearResponse:v,setShowSubtitle:y}},K8=()=>{const t=Z(o=>o.config.wsUrl),e=Z(o=>o.config.baseUrl),r=Z(o=>o.config.wsState),n=Z(o=>o.config.modelInfo),i=Z(o=>o.updateNetworkConfig),s=Z(o=>o.setModelInfo);return{wsUrl:t,baseUrl:e,wsState:r,modelInfo:n,updateNetworkConfig:i,setModelInfo:s}},Z8=()=>{const t=Z(i=>i.proactive.allowButtonTrigger),e=Z(i=>i.proactive.allowProactiveSpeak),r=Z(i=>i.proactive.idleSecondsToSpeak),n=Z(i=>i.updateProactiveSettings);return{allowButtonTrigger:t,allowProactiveSpeak:e,idleSecondsToSpeak:r,updateProactiveSettings:n}};console.log(" Zustand");const Q8={network:{defaultHost:"127.0.0.1",defaultPort:12393,fallbackPorts:[12393,8080,3e3,5e3],wsScheme:"ws",httpScheme:"http"},timeouts:{autoCloseDelay:3e3,taskInterval:3e3,reconnectDelay:1e3,vadMisfireTimeout:2e3,healthCheckTimeout:5e3},development:{devServerPort:3e3,hmrPort:5173,detectDevPorts:[5173,3e3,8080]},paths:{libsPath:"/libs/",cachePath:"/cache/",staticPath:"/static/"},ui:{toastDuration:2e3,transitionDuration:300,debounceDelay:500}};class nl{static instance;config;constructor(){this.config={...Q8},this.loadFromEnv()}static getInstance(){return nl.instance||(nl.instance=new nl),nl.instance}loadFromEnv(){}get network(){return this.config.network}get timeouts(){return this.config.timeouts}get development(){return this.config.development}get paths(){return this.config.paths}get ui(){return this.config.ui}getWsUrl(e,r){const n=e||this.config.network.defaultHost,i=r||this.config.network.defaultPort;return`${this.config.network.wsScheme}://${n}:${i}/client-ws`}getHttpUrl(e,r){const n=e||this.config.network.defaultHost,i=r||this.config.network.defaultPort;return`${this.config.network.httpScheme}://${n}:${i}`}isDevPort(e){return this.config.development.detectDevPorts.includes(e)}getMediaUrl(e,r){return`/${e}/${r}`}updateConfig(e){this.config={...this.config,...e}}getConfig(){return Object.freeze({...this.config})}}const Pt=nl.getInstance();Pt.network;Pt.timeouts;Pt.development;Pt.paths;Pt.ui;const Dm={BASE_URL:"./",DEV:!1,MODE:"web",PROD:!0,SSR:!1};function J8(){if(typeof window<"u")try{const t=new URL(window.location.href);return`${t.protocol}//${t.host}`}catch(t){console.warn("URL:",t)}return Pt.getHttpUrl()}function dM(){if(typeof window<"u"&&window.__cachedServerConfig)return window.__cachedServerConfig;const t=Dm?.VITE_SERVER_HOST,e=Dm?.VITE_SERVER_PORT,r=Dm?.VITE_API_BASE_URL;if(r){const d=new URL(r),h=`${d.protocol}//${d.host}`,f=`${d.protocol==="https:"?"wss:":"ws:"}//${d.host}/client-ws`,p={host:d.hostname,port:parseInt(d.port)||(d.protocol==="https:"?443:80),baseUrl:h,wsUrl:f};return typeof window<"u"&&(window.__cachedServerConfig=p),p}if(t||e){const d=t||Pt.network.defaultHost,h=e?parseInt(e):Pt.network.defaultPort,f=Pt.getHttpUrl(d,h),p=Pt.getWsUrl(d,h),g={host:d,port:h,baseUrl:f,wsUrl:p};return typeof window<"u"&&(window.__cachedServerConfig=g),g}const n=J8(),i=new URL(n);let s=i.hostname,o;if(i.protocol==="https:"){const d=`${i.protocol}//${i.host}`,h=`wss://${i.host}/client-ws`,f={host:s,port:i.port?parseInt(i.port):443,baseUrl:d,wsUrl:h};return typeof window<"u"&&(window.__cachedServerConfig=f),f}const a=i.port?parseInt(i.port):i.protocol==="https:"?443:80;Pt.isDevPort(a)||Pt.network.defaultPort,o=Pt.network.defaultPort;const l=Pt.getHttpUrl(s,o),c=Pt.getWsUrl(s,o),u={host:s,port:o,wsUrl:c,baseUrl:l};return typeof window<"u"&&(window.__cachedServerConfig=u),u}function hM(t,e){return Pt.getMediaUrl(t,e)}function eW(t){return hM("ads",t)}function tW(t){return hM("videos",t)}function rW(){const t=dM();return console.log(` : ${t.baseUrl}`),{baseUrl:t.baseUrl,wsUrl:t.wsUrl}}const fM=rW(),g0=fM.wsUrl,pM=fM.baseUrl,gM=cn.createContext({sendMessage:xr.sendMessage.bind(xr),wsState:"CLOSED",reconnect:()=>xr.connect(g0),wsUrl:g0,setWsUrl:()=>{},baseUrl:pM,setBaseUrl:()=>{}}),fs=()=>{const t=w.useContext(gM);if(!t)throw new Error("useWebSocket must be used within a WebSocketProvider");return t},nW=g0,iW=pM,mM=w.createContext(null);function sW({children:t}){const{baseUrl:e}=fs(),r=`${e}/bg/ceiling-window-room-night.jpeg`,{backgroundUrl:n,backgroundFiles:i,useCameraBackground:s,setBackgroundFiles:o,setUseCameraBackground:a,updateMediaState:l}=rp(),c=w.useCallback(g=>{l({backgroundUrl:g})},[l]),u=w.useCallback(()=>{c(r)},[c,r]),d=w.useCallback(g=>{const x=Array.isArray(i)?i:[];o([...x,g])},[i,o]),h=w.useCallback(g=>{const v=(Array.isArray(i)?i:[]).filter(y=>typeof y=="string"?y!==g:y.name!==g&&y.filename!==g);o(v)},[i,o]),f=w.useMemo(()=>n===r,[n,r]),p=w.useMemo(()=>({backgroundUrl:n,setBackgroundUrl:c,backgroundFiles:i,setBackgroundFiles:o,resetBackground:u,addBackgroundFile:d,removeBackgroundFile:h,isDefaultBackground:f,useCameraBackground:s,setUseCameraBackground:a}),[n,c,i,u,d,h,f,s,a,o]);return b.jsx(mM.Provider,{value:p,children:t})}const d_=()=>{const t=w.useContext(mM);if(!t)throw new Error("useBgUrl must be used within a BgUrlProvider");return t},yM=w.memo(({children:t})=>{const e=w.useRef(null),{backgroundStream:r,isBackgroundStreaming:n,startBackgroundCamera:i,stopBackgroundCamera:s}=JR(),{useCameraBackground:o,backgroundUrl:a}=d_(),[l,c]=w.useState(!0);return w.useEffect(()=>{o?i():s()},[o,i,s]),w.useEffect(()=>{e.current&&r&&(e.current.srcObject=r)},[r]),b.jsxs(K,{...xl.background.container,children:[o?b.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{...xl.background.video,display:n?"block":"none",transform:"scaleX(-1)",pointerEvents:"none"}}):l&&a?b.jsx(M6,{...xl.background.image,src:a,alt:"",onError:()=>c(!1),style:{pointerEvents:"none"}}):null,t]})});yM.displayName="Background";const oW=t=>t.replace(/\[[\w\s]*\]/g,"").trim(),aW=()=>{const{subtitleText:t}=ki();return{subtitleText:w.useMemo(()=>t?oW(t):null,[t]),isLoaded:!0}};function vM({isPet:t=!1,componentId:e,baseTransform:r=""}){const[n,i]=w.useState(!1),s=w.useRef({x:0,y:0}),o=w.useRef({x:0,y:0}),a=w.useRef(null);return{elementRef:a,isDragging:n,handleMouseDown:d=>{i(!0),o.current={x:d.clientX-s.current.x,y:d.clientY-s.current.y};const h=v=>{if(!a.current)return;const y={x:v.clientX-o.current.x,y:v.clientY-o.current.y};s.current=y;const m=r?`${r} `:"";a.current.style.transform=`${m}translate(${s.current.x}px, ${s.current.y}px)`},f=()=>{i(!1),document.removeEventListener("mousemove",h,!0),document.removeEventListener("mouseup",f,!0)};document.addEventListener("mousemove",h,!0),document.addEventListener("mouseup",f,!0);const p=()=>{try{document.removeEventListener("mousemove",h,!0)}catch{}try{document.removeEventListener("mouseup",f,!0)}catch{}};window.addEventListener("beforeunload",p,{once:!0});const g=f,x=()=>{p(),window.removeEventListener("beforeunload",p),g()};document.removeEventListener("mouseup",f,!0),document.addEventListener("mouseup",x,!0)},handleMouseEnter:()=>{t&&window.api?.updateComponentHover(e,!0)},handleMouseLeave:()=>{t&&!n&&window.api?.updateComponentHover(e,!1)}}}const xM=w.memo(({text:t,style:e})=>b.jsx(ze,{...xl.subtitle.text,style:e,children:t}));xM.displayName="SubtitleText";const bM=w.memo(()=>{const{subtitleText:t,isLoaded:e}=aW(),{showSubtitle:r}=ki(),n=Z(p=>p.config.appConfig),{elementRef:i,isDragging:s,handleMouseDown:o,handleMouseEnter:a,handleMouseLeave:l}=vM({componentId:"canvas-subtitle",baseTransform:"translate(-50%, -50%)"}),[c,u]=w.useState(!1),d=w.useRef(!1);w.useEffect(()=>{const p=y=>{(y.key==="Shift"||y.key==="Alt")&&(d.current=!0,u(!0))},g=y=>{(y.key==="Shift"||y.key==="Alt")&&(d.current=!1,u(!1))},x=()=>{d.current=!1,u(!1)},v=()=>{d.current||u(!1)};return window.addEventListener("keydown",p),window.addEventListener("keyup",g),window.addEventListener("blur",x),window.addEventListener("mouseup",v,!0),()=>{window.removeEventListener("keydown",p),window.removeEventListener("keyup",g),window.removeEventListener("blur",x),window.removeEventListener("mouseup",v,!0)}},[]);const h=w.useMemo(()=>{const p=n?.subtitle??{};if(!(p.enabled??!0))return{};const x=E=>{const T=(E||"#000000").replace("#",""),S=parseInt(T.length===3?T.split("").map(k=>k+k).join(""):T,16),P=S>>16&255,I=S>>8&255,M=S&255;return{r:P,g:I,b:M}},{r:v,g:y,b:m}=x(p.bgColor??"#000000"),_=Math.max(0,Math.min(1,Number(p.bgOpacity??.45))),C=(E,T)=>E??T;return{backgroundColor:`rgba(${v}, ${y}, ${m}, ${_})`,paddingInline:C(p.paddingX,14),paddingBlock:C(p.paddingY,10),borderRadius:C(p.borderRadius,14),boxShadow:p.boxShadow??"0 4px 20px rgba(0,0,0,0.25)",backdropFilter:p.blur?`blur(${p.blur}px)`:void 0,maxWidth:p.maxWidth??"100%",width:"100%"}},[n?.subtitle]),f=w.useMemo(()=>{const p=n?.subtitle?.textColor;return p?{color:p}:void 0},[n?.subtitle?.textColor]);return!e||!t||!r?null:b.jsx(K,{...xl.subtitle.container,style:{pointerEvents:"none"},children:b.jsx(K,{ref:i,style:{...h,pointerEvents:c?"auto":"none"},cursor:c?s?"grabbing":"grab":"default",transition:s?"none":"transform 0.1s ease",onMouseDown:c?o:void 0,onMouseEnter:c?a:void 0,onMouseLeave:c?l:void 0,onMouseUp:()=>{d.current||u(!1)},children:b.jsx(xM,{text:t,style:{...f,pointerEvents:c?"auto":"none"}})})})});bM.displayName="Subtitle";function np(t,e,r){const[n,i]=w.useState(()=>{try{const o=window.localStorage.getItem(t);return o?JSON.parse(o):e}catch(o){return console.error(`Error reading localStorage key "${t}":`,o),e}});return[n,o=>{try{const a=o instanceof Function?o(n):o,l=r?.filter?r.filter(a):a;i(a),window.localStorage.setItem(t,JSON.stringify(l))}catch(a){console.error(`Error setting localStorage key "${t}":`,a)}}]}const Fm={confName:"",confUid:"",configFiles:[]},_M=w.createContext(null);function lW({children:t}){const[e,r]=w.useState(Fm.confName),[n,i]=w.useState(Fm.confUid),[s,o]=w.useState(Fm.configFiles),a=w.useCallback(c=>s.find(u=>u.name===c)?.filename,[s]),l=w.useMemo(()=>({confName:e,confUid:n,configFiles:s,setConfName:r,setConfUid:i,setConfigFiles:o,getFilenameByName:a}),[e,n,s,a]);return w.useEffect(()=>{window.api?.updateConfigFiles?.(s)},[s]),b.jsx(_M.Provider,{value:l,children:t})}const lc=()=>{const t=w.useContext(_M);if(!t)throw new Error("useConfig must be used within a CharacterConfigProvider");return t},F1={modelInfo:{scrollToResize:!0},isLoading:!1},wM=w.createContext(null);function cW({children:t}){const{confUid:e}=lc(),[r,n]=w.useState(!1),[i,s]=w.useState(F1.isLoading);w.useEffect(()=>{const p=window.api?.onModeChanged(g=>{n(g==="pet")});return()=>p?.()},[]);const o=(p,g)=>`${p}_${g?"pet":"window"}`,[a,l]=np("modelInfo",F1.modelInfo,{filter:p=>p&&{...p,url:""}}),[c,u]=np("scale_memory",{}),d=(p,g)=>{if(!p?.url){console.log(" setModelInfo: No URL provided, skipping");return}const x=g||e;if(!x){console.warn(" setModelInfo: Attempting to set model info without confUid"),Qt.create({title:"Attempting to set model info without confUid",type:"error",duration:2e3});return}if(JSON.stringify(p)===JSON.stringify(a)){console.log(" setModelInfo: Model info unchanged, skipping");return}if(p){const v=o(x,r);let y;const m=c[v];if(m!==void 0&&!isNaN(m))y=m,console.log(" Using stored scale:",y);else{const _=Number(p.kScale);isNaN(_)||_<=0?(y=.5,console.warn(" Invalid kScale value, using default:",y)):y=_,u(C=>({...C,[v]:y})),console.log(" Computed new scale:",y)}console.log(" setModelInfo: Setting model with confUid:",x,"scale:",y),l({...p,kScale:y,pointerInteractive:"pointerInteractive"in p?p.pointerInteractive:a?.pointerInteractive??!1,scrollToResize:"scrollToResize"in p?p.scrollToResize:a?.scrollToResize??!0})}else console.log(" setModelInfo: Clearing model info"),l(void 0)},h=w.useCallback(p=>{if(a){const g=o(e,r),x=Number(p.toFixed(8));u(v=>({...v,[g]:x})),l({...a,kScale:x})}},[a,e,r,u,l]);w.useEffect(()=>{if(a){const p=o(e,r),g=c[p];g!==void 0&&g!==Number(a.kScale)&&d({...a,kScale:g})}},[r,a]);const f=w.useMemo(()=>({modelInfo:a,setModelInfo:d,isLoading:i,setIsLoading:s,updateModelScale:h}),[a,i,h]);return b.jsx(wM.Provider,{value:f,children:t})}function io(){const t=w.useContext(wM);if(!t)throw new Error("useLive2DConfig must be used within a Live2DConfigProvider");return t}const uW="modulepreload",dW=function(t,e){return new URL(t,e).href},N1={},B1=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=Promise.allSettled(r.map(c=>{if(c=dW(c,n),c in N1)return;N1[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!n)for(let p=o.length-1;p>=0;p--){const g=o[p];if(g.href===c&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":uW,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};class hW{queue=[];running=!1;taskInterval;pendingComplete=!1;activeTasks=new Set;constructor(e=3e3){this.taskInterval=e}addTask(e){this.queue.push(e),this.runNextTask()}clearQueue(){this.queue=[],this.activeTasks.clear(),this.running=!1}async runNextTask(){if(this.running||this.queue.length===0){this.queue.length===0&&this.activeTasks.size===0&&this.pendingComplete&&(this.pendingComplete=!1,await new Promise(r=>setTimeout(r,this.taskInterval)));return}this.running=!0;const e=this.queue.shift();if(e){const r=e();this.activeTasks.add(r);try{await r,await new Promise(n=>setTimeout(n,this.taskInterval))}catch(n){console.error("Task Queue Error",n)}finally{this.activeTasks.delete(r),this.running=!1,this.runNextTask()}}}hasTask(){return this.queue.length>0||this.activeTasks.size>0||this.running}waitForCompletion(){return this.pendingComplete=!0,new Promise(e=>{const r=()=>{this.hasTask()?setTimeout(r,100):e()};r()})}}const Yi=new hW(20),fW=w.createContext(void 0);function pW({children:t}){const[e,r]=w.useState(null),[n,i]=w.useState(!1),[s,o]=w.useState(""),a=async()=>{try{let c;if(window.electron){const d={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:await window.electron.ipcRenderer.invoke("get-screen-capture"),minWidth:1280,maxWidth:1280,minHeight:720,maxHeight:720}},audio:!1};c=await navigator.mediaDevices.getUserMedia(d)}else{const u={video:!0,audio:!1};c=await navigator.mediaDevices.getDisplayMedia(u)}r(c),i(!0),o("")}catch(c){o("Failed to start screen capture"),Qt.create({title:`Failed to start screen capture: ${c}`,type:"error",duration:2e3}),console.error(c)}},l=()=>{e&&(e.getTracks().forEach(c=>c.stop()),r(null),i(!1))};return w.useEffect(()=>()=>{try{e&&e.getTracks().forEach(c=>c.stop())}catch{}},[e]),b.jsx(fW.Provider,{value:{stream:e,isStreaming:n,error:s,startCapture:a,stopCapture:l},children:t})}const gW=()=>{const{sendMessage:t}=fs();return{sendAudioPartition:w.useCallback(async r=>{for(let i=0;i<r.length;i+=16384){const s=Math.min(i+16384,r.length),o=r.slice(i,s);t({type:"mic-audio-data",audio:Array.from(o)})}t({type:"mic-audio-end"})},[t])}};class mW{audioContext=null;analyser=null;source=null;monitoringInterval=null;callbacks=new Set;isMonitoring=!1;constructor(){this.initializeAudioContext()}async initializeAudioContext(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=256,console.log(" ")}catch(e){console.error(" :",e)}}startMonitoring(e){if(!(!this.audioContext||!this.analyser)){this.isMonitoring&&(console.log(" ..."),this.stopMonitoring());try{const r=e.__audioSource;if(r?(console.log(" "),this.source=r):(this.source=this.audioContext.createMediaElementSource(e),e.__audioSource=this.source),!this.source||!this.analyser||!this.audioContext)throw new Error("Audio graph not ready");this.source.connect(this.analyser),this.analyser.connect(this.audioContext.destination),this.isMonitoring=!0,this.startAnalysis(),console.log(" ")}catch(r){console.error(" :",r),this.isMonitoring=!1,this.source=null}}}stopMonitoring(){if(this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null),this.source){try{this.source.disconnect(),console.log(" ")}catch(r){console.warn(":",r)}this.source=null}if(this.analyser)try{this.analyser.disconnect()}catch(r){console.warn(":",r)}this.isMonitoring=!1,console.log(" ");const e={isPlaying:!1,volume:0,averageAmplitude:0,peakAmplitude:0};this.callbacks.forEach(r=>{try{r(e)}catch{}})}async dispose(){try{this.stopMonitoring(),this.audioContext&&this.audioContext.state!=="closed"&&(await this.audioContext.close(),console.log(" "))}catch(e){console.warn(":",e)}finally{this.audioContext=null,this.analyser=null}}addCallback(e){this.callbacks.add(e)}removeCallback(e){this.callbacks.delete(e)}startAnalysis(){this.monitoringInterval=window.setInterval(()=>{this.analyzeAudio()},100)}analyzeAudio(){if(!this.analyser)return;const e=new Uint8Array(this.analyser.frequencyBinCount);this.analyser.getByteFrequencyData(e);const r=this.calculateAverage(e);let n=0;for(let a=0;a<e.length;a+=1)e[a]>n&&(n=e[a]);const i=r/255,o={isPlaying:r>10,volume:i,averageAmplitude:r,peakAmplitude:n};this.callbacks.forEach(a=>{try{a(o)}catch(l){console.error(":",l)}})}calculateAverage(e){let r=0;for(let n=0;n<e.length;n+=1)r+=Number(e[n]);return e.length?r/e.length:0}getAudioContextState(){return this.audioContext?.state||null}async resumeAudioContext(){this.audioContext?.state==="suspended"&&(await this.audioContext.resume(),console.log(" "))}}const zi=new mW,Nm={positiveSpeechThreshold:50,negativeSpeechThreshold:35,redemptionFrames:35},SM=w.createContext(null);function yW({children:t}){const e=w.useRef(null),r=w.useRef(0),n=q8(),{micOn:i,autoStopMic:s,settings:o,autoStartMicOn:a,autoStartMicOnConvEnd:l,setMicState:c,updateVADSettings:u,setAutoStopMic:d,setAutoStartMicOn:h,setAutoStartMicOnConvEnd:f}=n,p=w.useRef(s),g=w.useRef(a),x=w.useRef(l),v=w.useRef(o),y=w.useRef(!1),m=w.useRef(0),[,_]=w.useReducer(X=>X+1,0),{interrupt:C}=ya(),{sendAudioPartition:E}=gW(),{setSubtitleText:T}=ki(),{status:S,setAiState:P}=Ai(),I=w.useRef(C),M=w.useRef(E),k=w.useRef(S),R=w.useRef(T),O=w.useRef(P),V=w.useRef(null),U=w.useRef(null),F=w.useRef(!1);w.useEffect(()=>{k.current=S},[S]),w.useEffect(()=>{I.current=C},[C]),w.useEffect(()=>{M.current=E},[E]),w.useEffect(()=>{R.current=T},[T]),w.useEffect(()=>{O.current=P},[P]),w.useEffect(()=>{p.current=s},[s]),w.useEffect(()=>{g.current=a},[a]),w.useEffect(()=>{x.current=l},[l]);const L=w.useCallback(X=>{r.current=X,_()},[]),B=w.useCallback(()=>{F.current||(console.log("Speech started"),(k.current==="thinking"||k.current==="speaking")&&I.current(),F.current=!0,O.current("listening"))},[]),A=w.useCallback(X=>{X.isSpeech>r.current&&L(X.isSpeech)},[]),N=w.useCallback(X=>{F.current&&(console.log("Speech ended"),console.log(" autoStopMic :",p.current),Yi.clearQueue(),p.current?(console.log(" autoStopMic  true stopMic"),V.current&&V.current()):console.log(" autoStopMic  falsekeeping mic active"),L(0),M.current(X),F.current=!1)},[]),z=w.useCallback(()=>{F.current&&(console.log("VAD misfire detected"),L(0),F.current=!1,(k.current==="interrupted"||k.current==="listening")&&O.current("idle"),R.current(""))},[]),q=w.useCallback(X=>{if(u(X),e.current&&V.current&&U.current)try{V.current(),setTimeout(async()=>{try{U.current&&await U.current()}catch(oe){console.error(" Failed to restart VAD after settings change:",oe)}},100)}catch(oe){console.error(" Failed to update VAD settings:",oe)}},[u]);w.useEffect(()=>{v.current=o},[]),w.useEffect(()=>{y.current||(v.current=o)},[o]),w.useEffect(()=>{const X=oe=>{const he=Date.now(),Ue=he-(m.current||0);if(oe?.isPlaying&&!y.current){if(Ue<1500)return;y.current=!0,m.current=he;const ht=Math.max(0,Math.min(1,oe?.volume??.5)),nr=Math.round(15+15*ht),Mi={positiveSpeechThreshold:Math.min(95,(v.current?.positiveSpeechThreshold??Nm.positiveSpeechThreshold)+nr),negativeSpeechThreshold:Math.min(90,(v.current?.negativeSpeechThreshold??Nm.negativeSpeechThreshold)+Math.round(nr*.8)),redemptionFrames:(v.current?.redemptionFrames??Nm.redemptionFrames)+20};q(Mi)}else if(!oe?.isPlaying&&y.current){if(Ue<1500)return;y.current=!1,m.current=he,q(v.current)}};return zi.addCallback(X),()=>{try{zi.removeCallback(X)}catch{}}},[q]);const ue=async()=>{try{const he=await B1(()=>import("./ort-web.min-OS_AKbTQ.js").then(Ue=>Ue.o),[],import.meta.url);he.env.wasm.wasmPaths="/libs/",he.env.wasm.numThreads=1,he.env.wasm.simd=!0}catch(he){console.warn("onnxruntime-web not available, proceeding anyway:",he)}const oe=await(await B1(()=>import("./index--7Y_mXRl.js").then(he=>he.i),__vite__mapDeps([0,1]),import.meta.url)).MicVAD.new({model:"v5",preSpeechPadFrames:20,positiveSpeechThreshold:o.positiveSpeechThreshold/100,negativeSpeechThreshold:o.negativeSpeechThreshold/100,redemptionFrames:o.redemptionFrames,baseAssetPath:"/libs/",onnxWASMBasePath:"/libs/",onSpeechStart:B,onFrameProcessed:A,onSpeechEnd:N,onVADMisfire:z});e.current=oe,oe.start()},xe=w.useCallback(async()=>{console.log(" startMic , vadRef.current:",!!e.current),console.log(" :",new Error().stack),console.log("  AI :",k.current);try{e.current?(console.log("Starting VAD"),e.current.start(),console.log(" VAD ")):(console.log("Initializing VAD"),await ue(),console.log(" VAD ")),c(!0)}catch(X){console.error(" Failed to start VAD:",X);const oe=X;console.error("Error details:",{message:oe?.message,name:oe?.name,stack:oe?.stack}),Qt.create({title:`Failed to start VAD: ${X}`,type:"error",duration:2e3})}},[c]),we=w.useCallback(()=>{console.log(" Stopping VAD"),console.log(" :",new Error().stack),console.log("  AI :",k.current),e.current?(e.current.pause(),e.current.destroy(),e.current=null,console.log("VAD stopped and destroyed successfully"),L(0)):console.log("VAD instance not found"),c(!1),F.current=!1},[c]);w.useEffect(()=>{V.current=we},[we]),w.useEffect(()=>{U.current=xe},[xe]);const Me=w.useCallback(X=>{p.current=X,d(X),_()},[d]),$=w.useCallback(X=>{g.current=X,h(X),_()},[h]),j=w.useCallback(X=>{x.current=X,f(X),_()},[f]),le=w.useMemo(()=>({autoStopMic:p.current,micOn:i,setMicOn:c,setAutoStopMic:Me,startMic:xe,stopMic:we,previousTriggeredProbability:r.current,setPreviousTriggeredProbability:L,settings:o,updateSettings:q,autoStartMicOn:g.current,setAutoStartMicOn:$,autoStartMicOnConvEnd:x.current,setAutoStartMicOnConvEnd:j}),[i,c,Me,$,j,xe,we,o,q]);return w.useEffect(()=>()=>{try{e.current&&(e.current.pause(),e.current.destroy(),e.current=null)}catch{}try{L(0)}catch{}},[]),b.jsx(SM.Provider,{value:le,children:t})}const pa=()=>{const t=w.useContext(SM);if(!t)throw new Error("useVAD must be used within a VADProvider");return t};function EM(){const{startMic:t,stopMic:e,micOn:r}=pa(),{status:n,setAiState:i}=Ai();return{handleMicToggle:async()=>{r?(e(),n==="listening"&&i("idle")):await t()},micOn:r}}function CM(){const{sendMessage:t}=fs(),{confName:e,getFilenameByName:r}=lc(),{interrupt:n}=ya(),{stopMic:i}=pa(),{setSubtitleText:s}=ki(),{setAiState:o}=Ai(),{setModelInfo:a}=io();return{switchCharacter:w.useCallback(c=>{if(r(e)===c){console.log("Skipping character switch - same configuration file");return}s("..."),n(),i(),o("loading"),a(void 0),t({type:"switch-config",file:c}),console.log("Switch Character fileName: ",c)},[e,r,t,n,i,s,o])}}const vW=iM(t=>({forceIgnoreMouse:!1,setForceIgnoreMouse:e=>t({forceIgnoreMouse:e})}));function h_(){const{forceIgnoreMouse:t,setForceIgnoreMouse:e}=vW();return{forceIgnoreMouse:t,setForceIgnoreMouse:e}}function xW({isPet:t}){const{handleMicToggle:e}=EM(),{interrupt:r}=ya(),{modelInfo:n,setModelInfo:i}=io(),{switchCharacter:s}=CM(),{setForceIgnoreMouse:o}=h_(),a=w.useCallback(()=>{e()},[e]),l=w.useCallback(()=>{r()},[r]),c=w.useCallback(()=>{n&&i({...n,scrollToResize:!n.scrollToResize})},[n,i]),u=w.useCallback((f,p)=>{s(p)},[s]),d=w.useCallback((f,p)=>{console.log("Force ignore mouse changed:",p),o(p)},[o]),h=w.useCallback(()=>{window.api.toggleForceIgnoreMouse()},[]);w.useEffect(()=>{if(window.electron?.ipcRenderer&&t)return window.electron.ipcRenderer.removeAllListeners("mic-toggle"),window.electron.ipcRenderer.removeAllListeners("interrupt"),window.electron.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),window.electron.ipcRenderer.removeAllListeners("switch-character"),window.electron.ipcRenderer.removeAllListeners("toggle-force-ignore-mouse"),window.electron.ipcRenderer.removeAllListeners("force-ignore-mouse-changed"),window.electron.ipcRenderer.on("mic-toggle",a),window.electron.ipcRenderer.on("interrupt",l),window.electron.ipcRenderer.on("toggle-scroll-to-resize",c),window.electron.ipcRenderer.on("switch-character",u),window.electron.ipcRenderer.on("toggle-force-ignore-mouse",h),window.electron.ipcRenderer.on("force-ignore-mouse-changed",d),()=>{window.electron?.ipcRenderer.removeAllListeners("mic-toggle"),window.electron?.ipcRenderer.removeAllListeners("interrupt"),window.electron?.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),window.electron?.ipcRenderer.removeAllListeners("switch-character"),window.electron?.ipcRenderer.removeAllListeners("toggle-force-ignore-mouse"),window.electron?.ipcRenderer.removeAllListeners("force-ignore-mouse-changed")}},[a,l,c,u,h,d,t])}var ga=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(ga||{}),TM=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(TM||{}),m0=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(m0||{}),ge=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(ge||{}),pi=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(pi||{}),W=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(W||{}),bl=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(bl||{}),ce=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(ce||{}),J=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(J||{}),qi=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(qi||{}),Vs=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Vs||{}),Pi=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Pi||{}),Er=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(Er||{}),ui=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(ui||{}),f_=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(f_||{}),on=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(on||{}),bt=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(bt||{}),gt=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(gt||{}),bi=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(bi||{});const bW={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},ee={ADAPTER:bW,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Bm=/iPhone/i,U1=/iPod/i,z1=/iPad/i,$1=/\biOS-universal(?:.+)Mac\b/i,Um=/\bAndroid(?:.+)Mobile\b/i,j1=/Android/i,Ca=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,th=/Silk/i,Di=/Windows Phone/i,V1=/\bWindows(?:.+)ARM\b/i,G1=/BlackBerry/i,W1=/BB10/i,H1=/Opera Mini/i,X1=/\b(CriOS|Chrome)(?:.+)Mobile/i,Y1=/Mobile(?:.+)Firefox\b/i,q1=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function _W(t){return function(e){return e.test(t)}}function K1(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=_W(r),s={apple:{phone:i(Bm)&&!i(Di),ipod:i(U1),tablet:!i(Bm)&&(i(z1)||q1(e))&&!i(Di),universal:i($1),device:(i(Bm)||i(U1)||i(z1)||i($1)||q1(e))&&!i(Di)},amazon:{phone:i(Ca),tablet:!i(Ca)&&i(th),device:i(Ca)||i(th)},android:{phone:!i(Di)&&i(Ca)||!i(Di)&&i(Um),tablet:!i(Di)&&!i(Ca)&&!i(Um)&&(i(th)||i(j1)),device:!i(Di)&&(i(Ca)||i(th)||i(Um)||i(j1))||i(/\bokhttp\b/i)},windows:{phone:i(Di),tablet:i(V1),device:i(Di)||i(V1)},other:{blackberry:i(G1),blackberry10:i(W1),opera:i(H1),firefox:i(Y1),chrome:i(X1),device:i(G1)||i(W1)||i(H1)||i(Y1)||i(X1)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const wW=K1.default??K1,Ki=wW(globalThis.navigator);ee.RETINA_PREFIX=/@([0-9\.]+)x/;ee.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var PM={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),p=r?r+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=r?r+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(c){var u=r?r+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,h,f,p){var g=r?r+c:c;if(!this._events[g])return!1;var x=this._events[g],v=arguments.length,y,m;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,d),!0;case 4:return x.fn.call(x.context,u,d,h),!0;case 5:return x.fn.call(x.context,u,d,h,f),!0;case 6:return x.fn.call(x.context,u,d,h,f,p),!0}for(m=1,y=new Array(v-1);m<v;m++)y[m-1]=arguments[m];x.fn.apply(x.context,y)}else{var _=x.length,C;for(m=0;m<_;m++)switch(x[m].once&&this.removeListener(c,x[m].fn,void 0,!0),v){case 1:x[m].fn.call(x[m].context);break;case 2:x[m].fn.call(x[m].context,u);break;case 3:x[m].fn.call(x[m].context,u,d);break;case 4:x[m].fn.call(x[m].context,u,d,h);break;default:if(!y)for(C=1,y=new Array(v-1);C<v;C++)y[C-1]=arguments[C];x[m].fn.apply(x[m].context,y)}}return!0},a.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,h){var f=r?r+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,x=[],v=p.length;g<v;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&x.push(p[g]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(PM);var SW=PM.exports;const so=yx(SW);var p_={exports:{}};p_.exports=wg;p_.exports.default=wg;function wg(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,s=IM(t,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,d,h,f;if(n&&(s=IW(t,e,s,r)),t.length>80*r){a=c=t[0],l=u=t[1];for(var p=r;p<i;p+=r)d=t[p],h=t[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return Yu(s,o,r,a,l,f,0),o}function IM(t,e,r,n,i){var s,o;if(i===x0(t,e,r,n)>0)for(s=e;s<r;s+=n)o=Z1(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=Z1(s,t[s],t[s+1],o);return o&&Sg(o,o.next)&&(Ku(o),o=o.next),o}function na(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(Sg(r,r.next)||Je(r.prev,r,r.next)===0)){if(Ku(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function Yu(t,e,r,n,i,s,o){if(t){!o&&s&&OW(t,n,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?CW(t,n,i,s):EW(t)){e.push(l.i/r|0),e.push(t.i/r|0),e.push(c.i/r|0),Ku(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=TW(na(t),e,r),Yu(t,e,r,n,i,s,2)):o===2&&PW(t,e,r,n,i,s):Yu(na(t),e,r,n,i,s,1);break}}}}function EW(t){var e=t.prev,r=t,n=t.next;if(Je(e,r,n)>=0)return!1;for(var i=e.x,s=r.x,o=n.x,a=e.y,l=r.y,c=n.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,h=i>s?i>o?i:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=n.next;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=d&&p.y<=f&&il(i,a,s,l,o,c,p.x,p.y)&&Je(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function CW(t,e,r,n){var i=t.prev,s=t,o=t.next;if(Je(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<d?u<h?u:h:d<h?d:h,g=a>l?a>c?a:c:l>c?l:c,x=u>d?u>h?u:h:d>h?d:h,v=y0(f,p,e,r,n),y=y0(g,x,e,r,n),m=t.prevZ,_=t.nextZ;m&&m.z>=v&&_&&_.z<=y;){if(m.x>=f&&m.x<=g&&m.y>=p&&m.y<=x&&m!==i&&m!==o&&il(a,u,l,d,c,h,m.x,m.y)&&Je(m.prev,m,m.next)>=0||(m=m.prevZ,_.x>=f&&_.x<=g&&_.y>=p&&_.y<=x&&_!==i&&_!==o&&il(a,u,l,d,c,h,_.x,_.y)&&Je(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;m&&m.z>=v;){if(m.x>=f&&m.x<=g&&m.y>=p&&m.y<=x&&m!==i&&m!==o&&il(a,u,l,d,c,h,m.x,m.y)&&Je(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;_&&_.z<=y;){if(_.x>=f&&_.x<=g&&_.y>=p&&_.y<=x&&_!==i&&_!==o&&il(a,u,l,d,c,h,_.x,_.y)&&Je(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function TW(t,e,r){var n=t;do{var i=n.prev,s=n.next.next;!Sg(i,s)&&AM(i,n,n.next,s)&&qu(i,s)&&qu(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),Ku(n),Ku(n.next),n=t=s),n=n.next}while(n!==t);return na(n)}function PW(t,e,r,n,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&FW(o,a)){var l=kM(o,a);o=na(o,o.next),l=na(l,l.next),Yu(o,e,r,n,i,s,0),Yu(l,e,r,n,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function IW(t,e,r,n){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:t.length,c=IM(t,a,l,n,!1),c===c.next&&(c.steiner=!0),i.push(DW(c));for(i.sort(AW),s=0;s<i.length;s++)r=kW(i[s],r);return r}function AW(t,e){return t.x-e.x}function kW(t,e){var r=RW(t,e);if(!r)return e;var n=kM(r,t);return na(n,n.next),na(r,r.next)}function RW(t,e){var r=e,n=t.x,i=t.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==e);if(!o)return null;var l=o,c=o.x,u=o.y,d=1/0,h;r=o;do n>=r.x&&r.x>=c&&n!==r.x&&il(i<u?n:s,i,c,u,i<u?s:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),qu(r,t)&&(h<d||h===d&&(r.x>o.x||r.x===o.x&&MW(o,r)))&&(o=r,d=h)),r=r.next;while(r!==l);return o}function MW(t,e){return Je(t.prev,t,e.prev)<0&&Je(e.next,t,t.next)<0}function OW(t,e,r,n){var i=t;do i.z===0&&(i.z=y0(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,LW(i)}function LW(t){var e,r,n,i,s,o,a,l,c=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,n=r,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,c*=2}while(o>1);return t}function y0(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function DW(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function il(t,e,r,n,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function FW(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!NW(t,e)&&(qu(t,e)&&qu(e,t)&&BW(t,e)&&(Je(t.prev,t,e.prev)||Je(t,e.prev,e))||Sg(t,e)&&Je(t.prev,t,t.next)>0&&Je(e.prev,e,e.next)>0)}function Je(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Sg(t,e){return t.x===e.x&&t.y===e.y}function AM(t,e,r,n){var i=nh(Je(t,e,r)),s=nh(Je(t,e,n)),o=nh(Je(r,n,t)),a=nh(Je(r,n,e));return!!(i!==s&&o!==a||i===0&&rh(t,r,e)||s===0&&rh(t,n,e)||o===0&&rh(r,t,n)||a===0&&rh(r,e,n))}function rh(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function nh(t){return t>0?1:t<0?-1:0}function NW(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&AM(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function qu(t,e){return Je(t.prev,t,t.next)<0?Je(t,e,t.next)>=0&&Je(t,t.prev,e)>=0:Je(t,e,t.prev)<0||Je(t,t.next,e)<0}function BW(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function kM(t,e){var r=new v0(t.i,t.x,t.y),n=new v0(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function Z1(t,e,r,n){var i=new v0(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ku(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function v0(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}wg.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(x0(t,0,s,r));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*r,u=a<l-1?e[a+1]*r:t.length;o-=Math.abs(x0(t,c,u,r))}var d=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;d+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function x0(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}wg.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r};var UW=p_.exports;const zW=yx(UW);var ip={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */ip.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,i=!t.nodeType&&t,s=typeof globalThis=="object"&&globalThis;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,l=36,c=1,u=26,d=38,h=700,f=72,p=128,g="-",x=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-c,C=Math.floor,E=String.fromCharCode,T;function S(A){throw new RangeError(m[A])}function P(A,N){for(var z=A.length,q=[];z--;)q[z]=N(A[z]);return q}function I(A,N){var z=A.split("@"),q="";z.length>1&&(q=z[0]+"@",A=z[1]),A=A.replace(y,".");var ue=A.split("."),xe=P(ue,N).join(".");return q+xe}function M(A){for(var N=[],z=0,q=A.length,ue,xe;z<q;)ue=A.charCodeAt(z++),ue>=55296&&ue<=56319&&z<q?(xe=A.charCodeAt(z++),(xe&64512)==56320?N.push(((ue&1023)<<10)+(xe&1023)+65536):(N.push(ue),z--)):N.push(ue);return N}function k(A){return P(A,function(N){var z="";return N>65535&&(N-=65536,z+=E(N>>>10&1023|55296),N=56320|N&1023),z+=E(N),z}).join("")}function R(A){return A-48<10?A-22:A-65<26?A-65:A-97<26?A-97:l}function O(A,N){return A+22+75*(A<26)-((N!=0)<<5)}function V(A,N,z){var q=0;for(A=z?C(A/h):A>>1,A+=C(A/N);A>_*u>>1;q+=l)A=C(A/_);return C(q+(_+1)*A/(A+d))}function U(A){var N=[],z=A.length,q,ue=0,xe=p,we=f,Me,$,j,le,X,oe,he,Ue,ht;for(Me=A.lastIndexOf(g),Me<0&&(Me=0),$=0;$<Me;++$)A.charCodeAt($)>=128&&S("not-basic"),N.push(A.charCodeAt($));for(j=Me>0?Me+1:0;j<z;){for(le=ue,X=1,oe=l;j>=z&&S("invalid-input"),he=R(A.charCodeAt(j++)),(he>=l||he>C((a-ue)/X))&&S("overflow"),ue+=he*X,Ue=oe<=we?c:oe>=we+u?u:oe-we,!(he<Ue);oe+=l)ht=l-Ue,X>C(a/ht)&&S("overflow"),X*=ht;q=N.length+1,we=V(ue-le,q,le==0),C(ue/q)>a-xe&&S("overflow"),xe+=C(ue/q),ue%=q,N.splice(ue++,0,xe)}return k(N)}function F(A){var N,z,q,ue,xe,we,Me,$,j,le,X,oe=[],he,Ue,ht,nr;for(A=M(A),he=A.length,N=p,z=0,xe=f,we=0;we<he;++we)X=A[we],X<128&&oe.push(E(X));for(q=ue=oe.length,ue&&oe.push(g);q<he;){for(Me=a,we=0;we<he;++we)X=A[we],X>=N&&X<Me&&(Me=X);for(Ue=q+1,Me-N>C((a-z)/Ue)&&S("overflow"),z+=(Me-N)*Ue,N=Me,we=0;we<he;++we)if(X=A[we],X<N&&++z>a&&S("overflow"),X==N){for($=z,j=l;le=j<=xe?c:j>=xe+u?u:j-xe,!($<le);j+=l)nr=$-le,ht=l-le,oe.push(E(O(le+nr%ht,0))),$=C(nr/ht);oe.push(E(O($,0))),xe=V(z,Ue,q==ue),z=0,++q}++z,++N}return oe.join("")}function L(A){return I(A,function(N){return x.test(N)?U(N.slice(4).toLowerCase()):N})}function B(A){return I(A,function(N){return v.test(N)?"xn--"+F(N):N})}if(o={version:"1.4.1",ucs2:{decode:M,encode:k},decode:U,encode:F,toASCII:B,toUnicode:L},n&&i)if(t.exports==n)i.exports=o;else for(T in o)o.hasOwnProperty(T)&&(n[T]=o[T]);else r.punycode=o})(sL)})(ip,ip.exports);var $W=ip.exports,cc=TypeError;const jW={},VW=Object.freeze(Object.defineProperty({__proto__:null,default:jW},Symbol.toStringTag,{value:"Module"})),GW=oL(VW);var g_=typeof Map=="function"&&Map.prototype,zm=Object.getOwnPropertyDescriptor&&g_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,sp=g_&&zm&&typeof zm.get=="function"?zm.get:null,Q1=g_&&Map.prototype.forEach,m_=typeof Set=="function"&&Set.prototype,$m=Object.getOwnPropertyDescriptor&&m_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,op=m_&&$m&&typeof $m.get=="function"?$m.get:null,J1=m_&&Set.prototype.forEach,WW=typeof WeakMap=="function"&&WeakMap.prototype,gu=WW?WeakMap.prototype.has:null,HW=typeof WeakSet=="function"&&WeakSet.prototype,mu=HW?WeakSet.prototype.has:null,XW=typeof WeakRef=="function"&&WeakRef.prototype,eE=XW?WeakRef.prototype.deref:null,YW=Boolean.prototype.valueOf,qW=Object.prototype.toString,KW=Function.prototype.toString,ZW=String.prototype.match,y_=String.prototype.slice,Ms=String.prototype.replace,QW=String.prototype.toUpperCase,tE=String.prototype.toLowerCase,RM=RegExp.prototype.test,rE=Array.prototype.concat,di=Array.prototype.join,JW=Array.prototype.slice,nE=Math.floor,b0=typeof BigInt=="function"?BigInt.prototype.valueOf:null,jm=Object.getOwnPropertySymbols,_0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="object",rr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Wl||!0)?Symbol.toStringTag:null,MM=Object.prototype.propertyIsEnumerable,iE=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function sE(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||RM.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-nE(-t):nE(t);if(n!==t){var i=String(n),s=y_.call(e,i.length+1);return Ms.call(i,r,"$&_")+"."+Ms.call(Ms.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ms.call(e,r,"$&_")}var w0=GW,oE=w0.custom,aE=DM(oE)?oE:null,OM={__proto__:null,double:'"',single:"'"},eH={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Eg=function t(e,r,n,i){var s=r||{};if($i(s,"quoteStyle")&&!$i(OM,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if($i(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=$i(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if($i(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if($i(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return NM(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?sE(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?sE(e,c):c}var u=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return S0(e)?"[Array]":"[Object]";var d=vH(s,n);if(typeof i>"u")i=[];else if(FM(i,e)>=0)return"[Circular]";function h(R,O,V){if(O&&(i=JW.call(i),i.push(O)),V){var U={depth:s.depth};return $i(s,"quoteStyle")&&(U.quoteStyle=s.quoteStyle),t(R,U,n+1,i)}return t(R,s,n+1,i)}if(typeof e=="function"&&!lE(e)){var f=cH(e),p=ih(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+di.call(p,", ")+" }":"")}if(DM(e)){var g=Wl?Ms.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):_0.call(e);return typeof e=="object"&&!Wl?Ac(g):g}if(gH(e)){for(var x="<"+tE.call(String(e.nodeName)),v=e.attributes||[],y=0;y<v.length;y++)x+=" "+v[y].name+"="+LM(tH(v[y].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+tE.call(String(e.nodeName))+">",x}if(S0(e)){if(e.length===0)return"[]";var m=ih(e,h);return d&&!yH(m)?"["+E0(m,d)+"]":"[ "+di.call(m,", ")+" ]"}if(nH(e)){var _=ih(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!MM.call(e,"cause")?"{ ["+String(e)+"] "+di.call(rE.call("[cause]: "+h(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+di.call(_,", ")+" }"}if(typeof e=="object"&&o){if(aE&&typeof e[aE]=="function"&&w0)return w0(e,{depth:u-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(uH(e)){var C=[];return Q1&&Q1.call(e,function(R,O){C.push(h(O,e,!0)+" => "+h(R,e))}),cE("Map",sp.call(e),C,d)}if(fH(e)){var E=[];return J1&&J1.call(e,function(R){E.push(h(R,e))}),cE("Set",op.call(e),E,d)}if(dH(e))return Vm("WeakMap");if(pH(e))return Vm("WeakSet");if(hH(e))return Vm("WeakRef");if(sH(e))return Ac(h(Number(e)));if(aH(e))return Ac(h(b0.call(e)));if(oH(e))return Ac(YW.call(e));if(iH(e))return Ac(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof globalThis<"u"&&e===globalThis)return"{ [object globalThis] }";if(!rH(e)&&!lE(e)){var T=ih(e,h),S=iE?iE(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",I=!S&&rr&&Object(e)===e&&rr in e?y_.call(oo(e),8,-1):P?"Object":"",M=S||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",k=M+(I||P?"["+di.call(rE.call([],I||[],P||[]),": ")+"] ":"");return T.length===0?k+"{}":d?k+"{"+E0(T,d)+"}":k+"{ "+di.call(T,", ")+" }"}return String(e)};function LM(t,e,r){var n=r.quoteStyle||e,i=OM[n];return i+t+i}function tH(t){return Ms.call(String(t),/"/g,"&quot;")}function S0(t){return oo(t)==="[object Array]"&&(!rr||!(typeof t=="object"&&rr in t))}function rH(t){return oo(t)==="[object Date]"&&(!rr||!(typeof t=="object"&&rr in t))}function lE(t){return oo(t)==="[object RegExp]"&&(!rr||!(typeof t=="object"&&rr in t))}function nH(t){return oo(t)==="[object Error]"&&(!rr||!(typeof t=="object"&&rr in t))}function iH(t){return oo(t)==="[object String]"&&(!rr||!(typeof t=="object"&&rr in t))}function sH(t){return oo(t)==="[object Number]"&&(!rr||!(typeof t=="object"&&rr in t))}function oH(t){return oo(t)==="[object Boolean]"&&(!rr||!(typeof t=="object"&&rr in t))}function DM(t){if(Wl)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!_0)return!1;try{return _0.call(t),!0}catch{}return!1}function aH(t){if(!t||typeof t!="object"||!b0)return!1;try{return b0.call(t),!0}catch{}return!1}var lH=Object.prototype.hasOwnProperty||function(t){return t in this};function $i(t,e){return lH.call(t,e)}function oo(t){return qW.call(t)}function cH(t){if(t.name)return t.name;var e=ZW.call(KW.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function FM(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function uH(t){if(!sp||!t||typeof t!="object")return!1;try{sp.call(t);try{op.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function dH(t){if(!gu||!t||typeof t!="object")return!1;try{gu.call(t,gu);try{mu.call(t,mu)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function hH(t){if(!eE||!t||typeof t!="object")return!1;try{return eE.call(t),!0}catch{}return!1}function fH(t){if(!op||!t||typeof t!="object")return!1;try{op.call(t);try{sp.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function pH(t){if(!mu||!t||typeof t!="object")return!1;try{mu.call(t,mu);try{gu.call(t,gu)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function gH(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function NM(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return NM(y_.call(t,0,e.maxStringLength),e)+n}var i=eH[e.quoteStyle||"single"];i.lastIndex=0;var s=Ms.call(Ms.call(t,i,"\\$1"),/[\x00-\x1f]/g,mH);return LM(s,"single",e)}function mH(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+QW.call(e.toString(16))}function Ac(t){return"Object("+t+")"}function Vm(t){return t+" { ? }"}function cE(t,e,r,n){var i=n?E0(r,n):di.call(r,", ");return t+" ("+e+") {"+i+"}"}function yH(t){for(var e=0;e<t.length;e++)if(FM(t[e],`
`)>=0)return!1;return!0}function vH(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=di.call(Array(t.indent+1)," ");else return null;return{base:r,prev:di.call(Array(e+1),r)}}function E0(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+di.call(t,","+r)+`
`+e.prev}function ih(t,e){var r=S0(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=$i(t,i)?e(t[i],t):""}var s=typeof jm=="function"?jm(t):[],o;if(Wl){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)$i(t,l)&&(r&&String(Number(l))===l&&l<t.length||Wl&&o["$"+l]instanceof Symbol||(RM.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof jm=="function")for(var c=0;c<s.length;c++)MM.call(t,s[c])&&n.push("["+e(s[c])+"]: "+e(t[s[c]],t));return n}var xH=Eg,bH=cc,Cg=function(t,e,r){for(var n=t,i;(i=n.next)!=null;n=i)if(i.key===e)return n.next=i.next,r||(i.next=t.next,t.next=i),i},_H=function(t,e){if(t){var r=Cg(t,e);return r&&r.value}},wH=function(t,e,r){var n=Cg(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},SH=function(t,e){return t?!!Cg(t,e):!1},EH=function(t,e){if(t)return Cg(t,e,!0)},CH=function(){var e,r={assert:function(n){if(!r.has(n))throw new bH("Side channel does not contain "+xH(n))},delete:function(n){var i=e&&e.next,s=EH(e,n);return s&&i&&i===s&&(e=void 0),!!s},get:function(n){return _H(e,n)},has:function(n){return SH(e,n)},set:function(n,i){e||(e={next:void 0}),wH(e,n,i)}};return r},BM=Object,TH=Error,PH=EvalError,IH=RangeError,AH=ReferenceError,kH=SyntaxError,RH=URIError,MH=Math.abs,OH=Math.floor,LH=Math.max,DH=Math.min,FH=Math.pow,NH=Math.round,BH=Number.isNaN||function(e){return e!==e},UH=BH,zH=function(e){return UH(e)||e===0?e:e<0?-1:1},$H=Object.getOwnPropertyDescriptor,Qh=$H;if(Qh)try{Qh([],"length")}catch{Qh=null}var UM=Qh,Jh=Object.defineProperty||!1;if(Jh)try{Jh({},"a",{value:1})}catch{Jh=!1}var jH=Jh,Gm,uE;function VH(){return uE||(uE=1,Gm=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),Gm}var Wm,dE;function GH(){if(dE)return Wm;dE=1;var t=typeof Symbol<"u"&&Symbol,e=VH();return Wm=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Wm}var Hm,hE;function zM(){return hE||(hE=1,Hm=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Hm}var Xm,fE;function $M(){if(fE)return Xm;fE=1;var t=BM;return Xm=t.getPrototypeOf||null,Xm}var Ym,pE;function WH(){if(pE)return Ym;pE=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(l,c){for(var u=[],d=0;d<l.length;d+=1)u[d]=l[d];for(var h=0;h<c.length;h+=1)u[h+l.length]=c[h];return u},s=function(l,c){for(var u=[],d=c,h=0;d<l.length;d+=1,h+=1)u[h]=l[d];return u},o=function(a,l){for(var c="",u=0;u<a.length;u+=1)c+=a[u],u+1<a.length&&(c+=l);return c};return Ym=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(t+c);for(var u=s(arguments,1),d,h=function(){if(this instanceof d){var v=c.apply(this,i(u,arguments));return Object(v)===v?v:this}return c.apply(l,i(u,arguments))},f=r(0,c.length-u.length),p=[],g=0;g<f;g++)p[g]="$"+g;if(d=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(h),c.prototype){var x=function(){};x.prototype=c.prototype,d.prototype=new x,x.prototype=null}return d},Ym}var qm,gE;function Tg(){if(gE)return qm;gE=1;var t=WH();return qm=Function.prototype.bind||t,qm}var Km,mE;function v_(){return mE||(mE=1,Km=Function.prototype.call),Km}var Zm,yE;function jM(){return yE||(yE=1,Zm=Function.prototype.apply),Zm}var HH=typeof Reflect<"u"&&Reflect&&Reflect.apply,XH=Tg(),YH=jM(),qH=v_(),KH=HH,ZH=KH||XH.call(qH,YH),QH=Tg(),JH=cc,e7=v_(),t7=ZH,VM=function(e){if(e.length<1||typeof e[0]!="function")throw new JH("a function is required");return t7(QH,e7,e)},Qm,vE;function r7(){if(vE)return Qm;vE=1;var t=VM,e=UM,r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!r&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Qm=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,Qm}var Jm,xE;function n7(){if(xE)return Jm;xE=1;var t=zM(),e=$M(),r=r7();return Jm=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:r?function(i){return r(i)}:null,Jm}var ey,bE;function i7(){if(bE)return ey;bE=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=Tg();return ey=r.call(t,e),ey}var Pe,s7=BM,o7=TH,a7=PH,l7=IH,c7=AH,Hl=kH,_l=cc,u7=RH,d7=MH,h7=OH,f7=LH,p7=DH,g7=FH,m7=NH,y7=zH,GM=Function,ty=function(t){try{return GM('"use strict"; return ('+t+").constructor;")()}catch{}},Zu=UM,v7=jH,ry=function(){throw new _l},x7=Zu?function(){try{return arguments.callee,ry}catch{try{return Zu(arguments,"callee").get}catch{return ry}}}():ry,Ta=GH()(),It=n7(),b7=$M(),_7=zM(),WM=jM(),yd=v_(),Oa={},w7=typeof Uint8Array>"u"||!It?Pe:It(Uint8Array),Go={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Pe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Pe:ArrayBuffer,"%ArrayIteratorPrototype%":Ta&&It?It([][Symbol.iterator]()):Pe,"%AsyncFromSyncIteratorPrototype%":Pe,"%AsyncFunction%":Oa,"%AsyncGenerator%":Oa,"%AsyncGeneratorFunction%":Oa,"%AsyncIteratorPrototype%":Oa,"%Atomics%":typeof Atomics>"u"?Pe:Atomics,"%BigInt%":typeof BigInt>"u"?Pe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Pe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Pe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Pe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o7,"%eval%":eval,"%EvalError%":a7,"%Float32Array%":typeof Float32Array>"u"?Pe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Pe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Pe:FinalizationRegistry,"%Function%":GM,"%GeneratorFunction%":Oa,"%Int8Array%":typeof Int8Array>"u"?Pe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Pe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Pe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ta&&It?It(It([][Symbol.iterator]())):Pe,"%JSON%":typeof JSON=="object"?JSON:Pe,"%Map%":typeof Map>"u"?Pe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ta||!It?Pe:It(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":s7,"%Object.getOwnPropertyDescriptor%":Zu,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Pe:Promise,"%Proxy%":typeof Proxy>"u"?Pe:Proxy,"%RangeError%":l7,"%ReferenceError%":c7,"%Reflect%":typeof Reflect>"u"?Pe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Pe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ta||!It?Pe:It(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Pe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ta&&It?It(""[Symbol.iterator]()):Pe,"%Symbol%":Ta?Symbol:Pe,"%SyntaxError%":Hl,"%ThrowTypeError%":x7,"%TypedArray%":w7,"%TypeError%":_l,"%Uint8Array%":typeof Uint8Array>"u"?Pe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Pe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Pe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Pe:Uint32Array,"%URIError%":u7,"%WeakMap%":typeof WeakMap>"u"?Pe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Pe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Pe:WeakSet,"%Function.prototype.call%":yd,"%Function.prototype.apply%":WM,"%Object.defineProperty%":v7,"%Object.getPrototypeOf%":b7,"%Math.abs%":d7,"%Math.floor%":h7,"%Math.max%":f7,"%Math.min%":p7,"%Math.pow%":g7,"%Math.round%":m7,"%Math.sign%":y7,"%Reflect.getPrototypeOf%":_7};if(It)try{null.error}catch(t){var S7=It(It(t));Go["%Error.prototype%"]=S7}var E7=function t(e){var r;if(e==="%AsyncFunction%")r=ty("async function () {}");else if(e==="%GeneratorFunction%")r=ty("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=ty("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&It&&(r=It(i.prototype))}return Go[e]=r,r},_E={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vd=Tg(),ap=i7(),C7=vd.call(yd,Array.prototype.concat),T7=vd.call(WM,Array.prototype.splice),wE=vd.call(yd,String.prototype.replace),lp=vd.call(yd,String.prototype.slice),P7=vd.call(yd,RegExp.prototype.exec),I7=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A7=/\\(\\)?/g,k7=function(e){var r=lp(e,0,1),n=lp(e,-1);if(r==="%"&&n!=="%")throw new Hl("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Hl("invalid intrinsic syntax, expected opening `%`");var i=[];return wE(e,I7,function(s,o,a,l){i[i.length]=a?wE(l,A7,"$1"):o||s}),i},R7=function(e,r){var n=e,i;if(ap(_E,n)&&(i=_E[n],n="%"+i[0]+"%"),ap(Go,n)){var s=Go[n];if(s===Oa&&(s=E7(n)),typeof s>"u"&&!r)throw new _l("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Hl("intrinsic "+e+" does not exist!")},x_=function(e,r){if(typeof e!="string"||e.length===0)throw new _l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new _l('"allowMissing" argument must be a boolean');if(P7(/^%?[^%]*%?$/,e)===null)throw new Hl("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=k7(e),i=n.length>0?n[0]:"",s=R7("%"+i+"%",r),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],T7(n,C7([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],f=lp(h,0,1),p=lp(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Hl("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,o="%"+i+"%",ap(Go,o))a=Go[o];else if(a!=null){if(!(h in a)){if(!r)throw new _l("base intrinsic for "+e+" exists, but the property is not available.");return}if(Zu&&u+1>=n.length){var g=Zu(a,h);d=!!g,d&&"get"in g&&!("originalValue"in g.get)?a=g.get:a=a[h]}else d=ap(a,h),a=a[h];d&&!l&&(Go[o]=a)}}return a},HM=x_,XM=VM,M7=XM([HM("%String.prototype.indexOf%")]),YM=function(e,r){var n=HM(e,!!r);return typeof n=="function"&&M7(e,".prototype.")>-1?XM([n]):n},O7=x_,xd=YM,L7=Eg,D7=cc,SE=O7("%Map%",!0),F7=xd("Map.prototype.get",!0),N7=xd("Map.prototype.set",!0),B7=xd("Map.prototype.has",!0),U7=xd("Map.prototype.delete",!0),z7=xd("Map.prototype.size",!0),qM=!!SE&&function(){var e,r={assert:function(n){if(!r.has(n))throw new D7("Side channel does not contain "+L7(n))},delete:function(n){if(e){var i=U7(e,n);return z7(e)===0&&(e=void 0),i}return!1},get:function(n){if(e)return F7(e,n)},has:function(n){return e?B7(e,n):!1},set:function(n,i){e||(e=new SE),N7(e,n,i)}};return r},$7=x_,Pg=YM,j7=Eg,sh=qM,V7=cc,Pa=$7("%WeakMap%",!0),G7=Pg("WeakMap.prototype.get",!0),W7=Pg("WeakMap.prototype.set",!0),H7=Pg("WeakMap.prototype.has",!0),X7=Pg("WeakMap.prototype.delete",!0),Y7=Pa?function(){var e,r,n={assert:function(i){if(!n.has(i))throw new V7("Side channel does not contain "+j7(i))},delete:function(i){if(Pa&&i&&(typeof i=="object"||typeof i=="function")){if(e)return X7(e,i)}else if(sh&&r)return r.delete(i);return!1},get:function(i){return Pa&&i&&(typeof i=="object"||typeof i=="function")&&e?G7(e,i):r&&r.get(i)},has:function(i){return Pa&&i&&(typeof i=="object"||typeof i=="function")&&e?H7(e,i):!!r&&r.has(i)},set:function(i,s){Pa&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Pa),W7(e,i,s)):sh&&(r||(r=sh()),r.set(i,s))}};return n}:sh,q7=cc,K7=Eg,Z7=CH,Q7=qM,J7=Y7,e9=J7||Q7||Z7,t9=function(){var e,r={assert:function(n){if(!r.has(n))throw new q7("Side channel does not contain "+K7(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,i){e||(e=e9()),e.set(n,i)}};return r},r9=String.prototype.replace,n9=/%20/g,ny={RFC1738:"RFC1738",RFC3986:"RFC3986"},b_={default:ny.RFC3986,formatters:{RFC1738:function(t){return r9.call(t,n9,"+")},RFC3986:function(t){return String(t)}},RFC1738:ny.RFC1738,RFC3986:ny.RFC3986},i9=b_,iy=Object.prototype.hasOwnProperty,Lo=Array.isArray,Zn=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),s9=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Lo(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},KM=function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},o9=function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(Lo(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!iy.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return Lo(e)&&!Lo(r)&&(i=KM(e,n)),Lo(e)&&Lo(r)?(r.forEach(function(s,o){if(iy.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return iy.call(s,o)?s[o]=t(s[o],a,n):s[o]=a,s},i)},a9=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},l9=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},sy=1024,c9=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=sy){for(var c=o.length>=sy?o.slice(l,l+sy):o,u=[],d=0;d<c.length;++d){var h=c.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===i9.RFC1738&&(h===40||h===41)){u[u.length]=c.charAt(d);continue}if(h<128){u[u.length]=Zn[h];continue}if(h<2048){u[u.length]=Zn[192|h>>6]+Zn[128|h&63];continue}if(h<55296||h>=57344){u[u.length]=Zn[224|h>>12]+Zn[128|h>>6&63]+Zn[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|c.charCodeAt(d)&1023),u[u.length]=Zn[240|h>>18]+Zn[128|h>>12&63]+Zn[128|h>>6&63]+Zn[128|h&63]}a+=u.join("")}return a},u9=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(r.push({obj:o,prop:c}),n.push(u))}return s9(r),e},d9=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},h9=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},f9=function(e,r){return[].concat(e,r)},p9=function(e,r){if(Lo(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},ZM={arrayToObject:KM,assign:a9,combine:f9,compact:u9,decode:l9,encode:c9,isBuffer:h9,isRegExp:d9,maybeMap:p9,merge:o9},QM=t9,ef=ZM,yu=b_,g9=Object.prototype.hasOwnProperty,JM={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},ai=Array.isArray,m9=Array.prototype.push,e2=function(t,e){m9.apply(t,ai(e)?e:[e])},y9=Date.prototype.toISOString,EE=yu.default,xt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ef.encode,encodeValuesOnly:!1,filter:void 0,format:EE,formatter:yu.formatters[EE],indices:!1,serializeDate:function(e){return y9.call(e)},skipNulls:!1,strictNullHandling:!1},v9=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},oy={},x9=function t(e,r,n,i,s,o,a,l,c,u,d,h,f,p,g,x,v,y){for(var m=e,_=y,C=0,E=!1;(_=_.get(oy))!==void 0&&!E;){var T=_.get(e);if(C+=1,typeof T<"u"){if(T===C)throw new RangeError("Cyclic object value");E=!0}typeof _.get(oy)>"u"&&(C=0)}if(typeof u=="function"?m=u(r,m):m instanceof Date?m=f(m):n==="comma"&&ai(m)&&(m=ef.maybeMap(m,function(A){return A instanceof Date?f(A):A})),m===null){if(o)return c&&!x?c(r,xt.encoder,v,"key",p):r;m=""}if(v9(m)||ef.isBuffer(m)){if(c){var S=x?r:c(r,xt.encoder,v,"key",p);return[g(S)+"="+g(c(m,xt.encoder,v,"value",p))]}return[g(r)+"="+g(String(m))]}var P=[];if(typeof m>"u")return P;var I;if(n==="comma"&&ai(m))x&&c&&(m=ef.maybeMap(m,c)),I=[{value:m.length>0?m.join(",")||null:void 0}];else if(ai(u))I=u;else{var M=Object.keys(m);I=d?M.sort(d):M}var k=l?String(r).replace(/\./g,"%2E"):String(r),R=i&&ai(m)&&m.length===1?k+"[]":k;if(s&&ai(m)&&m.length===0)return R+"[]";for(var O=0;O<I.length;++O){var V=I[O],U=typeof V=="object"&&V&&typeof V.value<"u"?V.value:m[V];if(!(a&&U===null)){var F=h&&l?String(V).replace(/\./g,"%2E"):String(V),L=ai(m)?typeof n=="function"?n(R,F):R:R+(h?"."+F:"["+F+"]");y.set(e,C);var B=QM();B.set(oy,y),e2(P,t(U,L,n,i,s,o,a,l,n==="comma"&&x&&ai(m)?null:c,u,d,h,f,p,g,x,v,B))}}return P},b9=function(e){if(!e)return xt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||xt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=yu.default;if(typeof e.format<"u"){if(!g9.call(yu.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=yu.formatters[n],s=xt.filter;(typeof e.filter=="function"||ai(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in JM?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=xt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:xt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:xt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:xt.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:xt.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?xt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:xt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:xt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:xt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:xt.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:xt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:xt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:xt.strictNullHandling}},_9=function(t,e){var r=t,n=b9(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):ai(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a=JM[n.arrayFormat],l=a==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var c=QM(),u=0;u<i.length;++u){var d=i[u],h=r[d];n.skipNulls&&h===null||e2(o,x9(h,d,a,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var f=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},ia=ZM,C0=Object.prototype.hasOwnProperty,CE=Array.isArray,st={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ia.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},w9=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},t2=function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},S9="utf8=%26%2310003%3B",E9="utf8=%E2%9C%93",C9=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,r.throwOnLimitExceeded?s+1:s);if(r.throwOnLimitExceeded&&o.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var a=-1,l,c=r.charset;if(r.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===E9?c="utf-8":o[l]===S9&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var u=o[l],d=u.indexOf("]="),h=d===-1?u.indexOf("="):d+1,f,p;h===-1?(f=r.decoder(u,st.decoder,c,"key"),p=r.strictNullHandling?null:""):(f=r.decoder(u.slice(0,h),st.decoder,c,"key"),p=ia.maybeMap(t2(u.slice(h+1),r,CE(n[f])?n[f].length:0),function(x){return r.decoder(x,st.decoder,c,"value")})),p&&r.interpretNumericEntities&&c==="iso-8859-1"&&(p=w9(String(p))),u.indexOf("[]=")>-1&&(p=CE(p)?[p]:p);var g=C0.call(n,f);g&&r.duplicates==="combine"?n[f]=ia.combine(n[f],p):(!g||r.duplicates==="last")&&(n[f]=p)}return n},T9=function(t,e,r,n){var i=0;if(t.length>0&&t[t.length-1]==="[]"){var s=t.slice(0,-1).join("");i=Array.isArray(e)&&e[s]?e[s].length:0}for(var o=n?e:t2(e,r,i),a=t.length-1;a>=0;--a){var l,c=t[a];if(c==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(o===""||r.strictNullHandling&&o===null)?[]:ia.combine([],o);else{l=r.plainObjects?{__proto__:null}:{};var u=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,d=r.decodeDotInKeys?u.replace(/%2E/g,"."):u,h=parseInt(d,10);!r.parseArrays&&d===""?l={0:o}:!isNaN(h)&&c!==d&&String(h)===d&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(l=[],l[h]=o):d!=="__proto__"&&(l[d]=o)}o=l}return o},P9=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!n.plainObjects&&C0.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var d=0;n.depth>0&&(l=a.exec(s))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&C0.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");u.push("["+s.slice(l.index)+"]")}return T9(u,r,n,i)}},I9=function(e){if(!e)return st;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?st.charset:e.charset,n=typeof e.duplicates>"u"?st.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:st.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:st.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:st.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:st.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:st.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:st.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:st.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:st.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:st.decoder,delimiter:typeof e.delimiter=="string"||ia.isRegExp(e.delimiter)?e.delimiter:st.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:st.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:st.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:st.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:st.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:st.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:st.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},A9=function(t,e){var r=I9(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?C9(t,r):t,i=r.plainObjects?{__proto__:null}:{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],l=P9(a,n[a],r,typeof t=="string");i=ia.merge(i,l,r)}return r.allowSparse===!0?i:ia.compact(i)},k9=_9,R9=A9,M9=b_,O9={formats:M9,parse:R9,stringify:k9},L9=$W;function Ln(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var D9=/^([a-z0-9.+-]+:)/i,F9=/:[0-9]*$/,N9=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,B9=["<",">",'"',"`"," ","\r",`
`,"	"],U9=["{","}","|","\\","^","`"].concat(B9),T0=["'"].concat(U9),TE=["%","/","?",";","#"].concat(T0),PE=["/","?","#"],z9=255,IE=/^[+a-z0-9A-Z_-]{0,63}$/,$9=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,j9={javascript:!0,"javascript:":!0},P0={javascript:!0,"javascript:":!0},wl={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I0=O9;function Ig(t,e,r){if(t&&typeof t=="object"&&t instanceof Ln)return t;var n=new Ln;return n.parse(t,e,r),n}Ln.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var l=N9.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=I0.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=D9.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(c&&P0[c])&&(a=a.substr(2),this.slashes=!0)}if(!P0[c]&&(d||c&&!wl[c])){for(var h=-1,f=0;f<PE.length;f++){var p=a.indexOf(PE[f]);p!==-1&&(h===-1||p<h)&&(h=p)}var g,x;h===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",h),x!==-1&&(g=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(g)),h=-1;for(var f=0;f<TE.length;f++){var p=a.indexOf(TE[f]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var y=this.hostname.split(/\./),f=0,m=y.length;f<m;f++){var _=y[f];if(_&&!_.match(IE)){for(var C="",E=0,T=_.length;E<T;E++)_.charCodeAt(E)>127?C+="x":C+=_[E];if(!C.match(IE)){var S=y.slice(0,f),P=y.slice(f+1),I=_.match($9);I&&(S.push(I[1]),P.unshift(I[2])),P.length&&(a="/"+P.join(".")+a),this.hostname=S.join(".");break}}}this.hostname.length>z9?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=L9.toASCII(this.hostname));var M=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+M,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!j9[u])for(var f=0,m=T0.length;f<m;f++){var R=T0[f];if(a.indexOf(R)!==-1){var O=encodeURIComponent(R);O===R&&(O=escape(R)),a=a.split(R).join(O)}}var V=a.indexOf("#");V!==-1&&(this.hash=a.substr(V),a=a.slice(0,V));var U=a.indexOf("?");if(U!==-1?(this.search=a.substr(U),this.query=a.substr(U+1),e&&(this.query=I0.parse(this.query)),a=a.slice(0,U)):e&&(this.search="",this.query={}),a&&(this.pathname=a),wl[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",F=this.search||"";this.path=M+F}return this.href=this.format(),this};function V9(t){return typeof t=="string"&&(t=Ig(t)),t instanceof Ln?t.format():Ln.prototype.format.call(t)}Ln.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=I0.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||wl[e])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+r+o+n};function G9(t,e){return Ig(t,!1,!0).resolve(e)}Ln.prototype.resolve=function(t){return this.resolveObject(Ig(t,!1,!0)).format()};Ln.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Ln;e.parse(t,!1,!0),t=e}for(var r=new Ln,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=t[l])}return wl[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!wl[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!P0[t.protocol]){for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),m[0]!==""&&m.unshift(""),m.length<2&&m.unshift(""),r.pathname=m.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var h=r.pathname||"",f=r.search||"";r.path=h+f}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",g=t.host||t.pathname&&t.pathname.charAt(0)==="/",x=g||p||r.host&&t.pathname,v=x,y=r.pathname&&r.pathname.split("/")||[],m=t.pathname&&t.pathname.split("/")||[],_=r.protocol&&!wl[r.protocol];if(_&&(r.hostname="",r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(m[0]===""?m[0]=t.host:m.unshift(t.host)),t.host=null),x=x&&(m[0]===""||y[0]==="")),g)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,y=m;else if(m.length)y||(y=[]),y.pop(),y=y.concat(m),r.search=t.search,r.query=t.query;else if(t.search!=null){if(_){r.host=y.shift(),r.hostname=r.host;var C=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;C&&(r.auth=C.shift(),r.hostname=C.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=y.slice(-1)[0],T=(r.host||t.host||y.length>1)&&(E==="."||E==="..")||E==="",S=0,P=y.length;P>=0;P--)E=y[P],E==="."?y.splice(P,1):E===".."?(y.splice(P,1),S++):S&&(y.splice(P,1),S--);if(!x&&!v)for(;S--;S)y.unshift("..");x&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),T&&y.join("/").substr(-1)!=="/"&&y.push("");var I=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(_){r.hostname=I?"":y.length?y.shift():"",r.host=r.hostname;var C=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;C&&(r.auth=C.shift(),r.hostname=C.shift(),r.host=r.hostname)}return x=x||r.host&&y.length,x&&!I&&y.unshift(""),y.length>0?r.pathname=y.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};Ln.prototype.parseHost=function(){var t=this.host,e=F9.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var W9=Ig,H9=G9,X9=V9;const AE={};function Ee(t,e,r=3){if(AE[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),AE[e]=!0}const __={get parse(){return Ee("7.3.0","utils.url.parse is deprecated, use native URL API instead."),W9},get format(){return Ee("7.3.0","utils.url.format is deprecated, use native URL API instead."),X9},get resolve(){return Ee("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),H9}};function xn(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function kc(t){return t.split("?")[0].split("#")[0]}function Y9(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q9(t,e,r){return t.replace(new RegExp(Y9(e),"g"),r)}function K9(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}}else r.length>0?r+=`/${t.slice(i+1,a)}`:r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const Ot={toPosix(t){return q9(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){xn(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(xn(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=kc(this.toPosix(e??ee.ADAPTER.getBaseUrl())),i=kc(this.toPosix(r??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?Ot.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(xn(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=K9(t),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return xn(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(xn(n),n.length>0)if(e===void 0)e=n;else{const i=t[r-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(xn(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+t:s:r&&n===1?"//":s+t.slice(0,n)},rootname(t){xn(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){xn(t),e&&xn(e),t=kc(this.toPosix(t));let r=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){xn(t),t=kc(this.toPosix(t));let e=-1,r=0,n=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){xn(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=kc(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let i;e.root=this.rootname(t),n||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=i;--c){if(r=t.charCodeAt(c),r===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),r===46?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let ay;async function Z9(){return ay??(ay=(async()=>{const t=document.createElement("canvas").getContext("webgl");if(!t)return Er.UNPACK;const e=await new Promise(s=>{const o=document.createElement("video");o.onloadeddata=()=>s(o),o.onerror=()=>s(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!e)return Er.UNPACK;const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(n),t.deleteTexture(r),t.getExtension("WEBGL_lose_context")?.loseContext(),i[0]<=i[3]?Er.PMA:Er.UNPACK})()),ay}let ly;function Q9(){return typeof ly>"u"&&(ly=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:ee.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ee.ADAPTER.getWebGLRenderingContext())return!1;const e=ee.ADAPTER.createCanvas();let r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const n=!!r?.getContextAttributes()?.stencil;if(r){const i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch{return!1}}()),ly}var J9={grad:.9,turn:360,rad:360/(2*Math.PI)},Fi=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Rt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},an=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},r2=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},kE=function(t){return{r:an(t.r,0,255),g:an(t.g,0,255),b:an(t.b,0,255),a:an(t.a)}},cy=function(t){return{r:Rt(t.r),g:Rt(t.g),b:Rt(t.b),a:Rt(t.a,3)}},eX=/^#([0-9a-f]{3,8})$/i,oh=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},n2=function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=Math.max(e,r,n),o=s-Math.min(e,r,n),a=o?s===e?(r-n)/o:s===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},i2=function(t){var e=t.h,r=t.s,n=t.v,i=t.a;e=e/360*6,r/=100,n/=100;var s=Math.floor(e),o=n*(1-r),a=n*(1-(e-s)*r),l=n*(1-(1-e+s)*r),c=s%6;return{r:255*[n,a,o,o,l,n][c],g:255*[l,n,n,a,o,o][c],b:255*[o,o,l,n,n,a][c],a:i}},RE=function(t){return{h:r2(t.h),s:an(t.s,0,100),l:an(t.l,0,100),a:an(t.a)}},ME=function(t){return{h:Rt(t.h),s:Rt(t.s),l:Rt(t.l),a:Rt(t.a,3)}},OE=function(t){return i2((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},vu=function(t){return{h:(e=n2(t)).h,s:(i=(200-(r=e.s))*(n=e.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,r,n,i},tX=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rX=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nX=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,iX=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,A0={string:[[function(t){var e=eX.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Rt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Rt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=nX.exec(t)||iX.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:kE({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=tX.exec(t)||rX.exec(t);if(!e)return null;var r,n,i=RE({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(J9[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return OE(i)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=i===void 0?1:i;return Fi(e)&&Fi(r)&&Fi(n)?kE({r:Number(e),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,i=t.a,s=i===void 0?1:i;if(!Fi(e)||!Fi(r)||!Fi(n))return null;var o=RE({h:Number(e),s:Number(r),l:Number(n),a:Number(s)});return OE(o)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,i=t.a,s=i===void 0?1:i;if(!Fi(e)||!Fi(r)||!Fi(n))return null;var o=function(a){return{h:r2(a.h),s:an(a.s,0,100),v:an(a.v,0,100),a:an(a.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(s)});return i2(o)},"hsv"]]},LE=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},sX=function(t){return typeof t=="string"?LE(t.trim(),A0.string):typeof t=="object"&&t!==null?LE(t,A0.object):[null,void 0]},uy=function(t,e){var r=vu(t);return{h:r.h,s:an(r.s+100*e,0,100),l:r.l,a:r.a}},dy=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},DE=function(t,e){var r=vu(t);return{h:r.h,s:r.s,l:an(r.l+100*e,0,100),a:r.a}},k0=function(){function t(e){this.parsed=sX(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Rt(dy(this.rgba),2)},t.prototype.isDark=function(){return dy(this.rgba)<.5},t.prototype.isLight=function(){return dy(this.rgba)>=.5},t.prototype.toHex=function(){return e=cy(this.rgba),r=e.r,n=e.g,i=e.b,o=(s=e.a)<1?oh(Rt(255*s)):"","#"+oh(r)+oh(n)+oh(i)+o;var e,r,n,i,s,o},t.prototype.toRgb=function(){return cy(this.rgba)},t.prototype.toRgbString=function(){return e=cy(this.rgba),r=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var e,r,n,i,s},t.prototype.toHsl=function(){return ME(vu(this.rgba))},t.prototype.toHslString=function(){return e=ME(vu(this.rgba)),r=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var e,r,n,i,s},t.prototype.toHsv=function(){return e=n2(this.rgba),{h:Rt(e.h),s:Rt(e.s),v:Rt(e.v),a:Rt(e.a,3)};var e},t.prototype.invert=function(){return Jn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Jn(uy(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Jn(uy(this.rgba,-e))},t.prototype.grayscale=function(){return Jn(uy(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Jn(DE(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Jn(DE(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Jn({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Rt(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=vu(this.rgba);return typeof e=="number"?Jn({h:e,s:r.s,l:r.l,a:r.a}):Rt(r.h)},t.prototype.isEqual=function(e){return this.toHex()===Jn(e).toHex()},t}(),Jn=function(t){return t instanceof k0?t:new k0(t)},FE=[],oX=function(t){t.forEach(function(e){FE.indexOf(e)<0&&(e(k0,A0),FE.push(e))})};function aX(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=n[this.toHex()];if(c)return c;if(o?.closest){var u=this.toRgb(),d=1/0,h="black";if(!s.length)for(var f in r)s[f]=new t(r[f]).toRgb();for(var p in r){var g=(a=u,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<d&&(d=g,h=p)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":r[a];return l?new t(l).toRgb():null},"name"])}oX([aX]);const La=class tf{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof tf)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,r){const n=typeof e;if(n!==typeof r)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((i,s)=>i===r[s]);if(e!==null&&r!==null){const i=Object.keys(e),s=Object.keys(r);return i.length!==s.length?!1:i.every(o=>e[o]===r[o])}return e===r}toRgba(){const[e,r,n,i]=this._components;return{r:e,g:r,b:n,a:i}}toRgb(){const[e,r,n]=this._components;return{r:e,g:r,b:n}}toRgbaString(){const[e,r,n]=this.toUint8RgbArray();return`rgba(${e},${r},${n},${this.alpha})`}toUint8RgbArray(e){const[r,n,i]=this._components;return e=e??[],e[0]=Math.round(r*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[r,n,i]=this._components;return e[0]=r,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,n,i,s]=tf.temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return r&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[r,n,i]=this._components;return this._components[0]=Math.round(r*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[r,n,i,s]=this._components;return e[0]=r,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let r,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,i,s=255]=e,r/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=tf.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Jn(e);o.isValid()&&({r,g:n,b:i,a:s}=o.rgba,r/=255,n/=255,i/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,r,n]=this._components;this._int=(e*255<<16)+(r*255<<8)+(n*255|0)}_clamp(e,r=0,n=1){return typeof e=="number"?Math.min(Math.max(e,r),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,r),n)}),e)}};La.shared=new La,La.temp=new La,La.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let He=La;function lX(t){return Ee("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),He.shared.setValue(t).toHex()}function cX(t){return Ee("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),He.shared.setValue(t).toNumber()}function uX(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[ge.NORMAL_NPM]=ge.NORMAL,t[ge.ADD_NPM]=ge.ADD,t[ge.SCREEN_NPM]=ge.SCREEN,e[ge.NORMAL]=ge.NORMAL_NPM,e[ge.ADD]=ge.ADD_NPM,e[ge.SCREEN]=ge.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const s2=uX();function o2(t,e){return s2[e?1:0][t]}function dX(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function a2(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function cp(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function NE(t){return!(t&t-1)&&!!t}function BE(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Sl(t,e,r){const n=t.length;let i;if(e>=n||r===0)return;r=e+r>n?n-e:r;const s=n-r;for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}function Os(t){return t===0?0:t<0?-1:1}let hX=0;function sa(){return++hX}const R0=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};R0.EMPTY=new R0(0,0,0,0);let UE=R0;const zE={},br=Object.create(null),Zr=Object.create(null);function fX(){let t;for(t in br)br[t].destroy();for(t in Zr)Zr[t].destroy()}function hy(){let t;for(t in br)delete br[t];for(t in Zr)delete Zr[t]}class pX{constructor(e,r,n){this._canvas=ee.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||ee.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function $E(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(t[i+3]!==0)return!1;return!0}function jE(t,e,r,n,i){const s=4*e;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function gX(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,r).data;let s=0,o=0,a=e-1,l=r-1;for(;o<r&&$E(i,e,o);)++o;if(o===r)return UE.EMPTY;for(;$E(i,e,l);)--l;for(;jE(i,e,s,o,l);)++s;for(;jE(i,e,a,o,l);)--a;return++a,++l,new UE(s,o,a,l)}function mX(t){const e=gX(t),{width:r,height:n}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:i}}function yX(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}function cs(t,e=1){const r=ee.RETINA_PREFIX?.exec(t);return r?parseFloat(r[1]):e}var Y=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(Y||{});const M0=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},VE=(t,e)=>M0(t).priority??e,ne={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(M0).forEach(e=>{e.type.forEach(r=>this._removeHandlers[r]?.(e))}),this},add(...t){return t.map(M0).forEach(e=>{e.type.forEach(r=>{const n=this._addHandlers,i=this._queue;n[r]?n[r]?.(e):(i[r]=i[r]||[],i[r]?.push(e))})}),this},handle(t,e,r){const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&(s[t]?.forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>VE(s,r)-VE(i,r)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class O0{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const vX=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function xX(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function bX(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=vX.replace(/%forloop%/gi,xX(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const fy=0,py=1,gy=2,my=3,yy=4,vy=5;class Ri{constructor(){this.data=0,this.blendMode=ge.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<fy)}set blend(e){!!(this.data&1<<fy)!==e&&(this.data^=1<<fy)}get offsets(){return!!(this.data&1<<py)}set offsets(e){!!(this.data&1<<py)!==e&&(this.data^=1<<py)}get culling(){return!!(this.data&1<<gy)}set culling(e){!!(this.data&1<<gy)!==e&&(this.data^=1<<gy)}get depthTest(){return!!(this.data&1<<my)}set depthTest(e){!!(this.data&1<<my)!==e&&(this.data^=1<<my)}get depthMask(){return!!(this.data&1<<vy)}set depthMask(e){!!(this.data&1<<vy)!==e&&(this.data^=1<<vy)}get clockwiseFrontFace(){return!!(this.data&1<<yy)}set clockwiseFrontFace(e){!!(this.data&1<<yy)!==e&&(this.data^=1<<yy)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==ge.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Ri;return e.depthTest=!1,e.blend=!0,e}}Ri.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const L0=[];function l2(t,e){if(!t)return null;let r="";if(typeof t=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(let n=L0.length-1;n>=0;--n){const i=L0[n];if(i.test&&i.test(t,r))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Dn{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,n,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let d=0,h=u.length;d<h;d++)u[d][c](e,r,n,i,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Dn.prototype,{dispatch:{value:Dn.prototype.emit},run:{value:Dn.prototype.emit}});class Qu{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Dn("setRealSize"),this.onUpdate=new Dn("update"),this.onError=new Dn("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class Ag extends Qu{constructor(e,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=r.unpackAlignment??4}upload(e,r,n){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Er.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const _X={scaleMode:qi.NEAREST,alphaMode:Er.NPM},D0=class Da extends so{constructor(e=null,r=null){super(),r=Object.assign({},Da.defaultOptions,r);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:u,type:d,target:h,resolution:f,resourceOptions:p}=r;e&&!(e instanceof Qu)&&(e=l2(e,p),e.internal=!0),this.resolution=f||ee.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=u,this.type=d,this.target=h,this.alphaMode=n,this.uid=sa(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,r){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this}setSize(e,r,n){return n=n||this.resolution,this.setRealSize(e*n,r*n,n)}setRealSize(e,r,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=NE(this.realWidth)&&NE(this.realHeight)}setResolution(e){const r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Zr[this.cacheId],delete br[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Da.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,r,n=ee.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=r?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${sa()}`}s=e._pixiId}let o=Zr[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Da(e,r),o.cacheId=s,Da.addToCache(o,s)),o}static fromBuffer(e,r,n,i){e=e||new Float32Array(r*n*4);const s=new Ag(e,{width:r,height:n,...i?.resourceOptions});let o,a;return e instanceof Float32Array?(o=W.RGBA,a=ce.FLOAT):e instanceof Int32Array?(o=W.RGBA_INTEGER,a=ce.INT):e instanceof Uint32Array?(o=W.RGBA_INTEGER,a=ce.UNSIGNED_INT):e instanceof Int16Array?(o=W.RGBA_INTEGER,a=ce.SHORT):e instanceof Uint16Array?(o=W.RGBA_INTEGER,a=ce.UNSIGNED_SHORT):e instanceof Int8Array?(o=W.RGBA,a=ce.BYTE):(o=W.RGBA,a=ce.UNSIGNED_BYTE),s.internal=!0,new Da(s,Object.assign({},_X,{type:a,format:o},i))}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Zr[r]&&Zr[r]!==e&&console.warn(`BaseTexture added to the cache with an id [${r}] that already had an entry`),Zr[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Zr[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Zr[e],r}}else if(e?.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)delete Zr[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}};D0.defaultOptions={mipmap:Pi.POW2,anisotropicLevel:0,scaleMode:qi.LINEAR,wrapMode:Vs.CLAMP,alphaMode:Er.UNPACK,target:bl.TEXTURE_2D,format:W.RGBA,type:ce.UNSIGNED_BYTE},D0._globalBatch=0;let be=D0;class F0{constructor(){this.texArray=null,this.blend=0,this.type=pi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let wX=0;class ut{constructor(e,r=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=wX++,this.disposeRunner=new Dn("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?bi.ELEMENT_ARRAY_BUFFER:bi.ARRAY_BUFFER}get index(){return this.type===bi.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new ut(e)}}class up{constructor(e,r=0,n=!1,i=ce.FLOAT,s,o,a,l=1){this.buffer=e,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,r,n,i,s){return new up(e,r,n,i,s)}}const SX={Float32Array,Uint32Array,Int32Array,Uint8Array};function EX(t,e){let r=0,n=0;const i={};for(let l=0;l<t.length;l++)n+=e[l],r+=t[l].length;const s=new ArrayBuffer(r*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],d=a2(u);i[d]||(i[d]=new SX[d](s)),o=i[d];for(let h=0;h<u.length;h++){const f=(h/c|0)*n+a,p=h%c;o[f+p]=u[h]}a+=c}return new Float32Array(s)}const GE={5126:4,5123:2,5121:1};let CX=0;const TX={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class qs{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=CX++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Dn("disposeGeometry"),this.refCount=0}addAttribute(e,r,n=0,i=!1,s,o,a,l=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof ut||(r instanceof Array&&(r=new Float32Array(r)),r=new ut(r));const c=e.split("|");if(c.length>1){for(let d=0;d<c.length;d++)this.addAttribute(c[d],r,n,i,s);return this}let u=this.buffers.indexOf(r);return u===-1&&(this.buffers.push(r),u=this.buffers.length-1),this.attributes[e]=new up(u,n,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ut||(e instanceof Array&&(e=new Uint16Array(e)),e=new ut(e)),e.type=bi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],n=new ut;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),r.push(s.size*GE[s.type]/4),s.buffer=0}for(n.data=EX(e,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new qs;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new ut(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];e.attributes[r]=new up(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=bi.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new qs,n=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new TX[a2(o.buffers[a].data)](i[a]),r.buffers[a]=new ut(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=bi.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let d=0;d<o.buffers.length;d++)if(o.buffers[d]!==o.indexBuffer){u=d;break}for(const d in o.attributes){const h=o.attributes[d];(h.buffer|0)===u&&(l+=h.size*GE[h.type]/4)}for(let d=0;d<e.length;d++){const h=e[d].indexBuffer.data;for(let f=0;f<h.length;f++)r.indexBuffer.data[f+c]+=a;a+=e[d].buffers[u].data.length/l,c+=h.length}}return r}}class c2 extends qs{constructor(e=!1){super(),this._buffer=new ut(null,e,!1),this._indexBuffer=new ut(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ce.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ce.FLOAT).addAttribute("aColor",this._buffer,4,!0,ce.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ce.FLOAT).addIndex(this._indexBuffer)}}const dp=Math.PI*2,PX=180/Math.PI,IX=Math.PI/180;var jt=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(jt||{});class Te{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Te(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}}Te.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const ah=[new Te,new Te,new Te,new Te];class _e{constructor(e=0,r=0,n=0,i=0){this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=jt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new _e(0,0,0,0)}clone(){return new _e(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const S=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=S)return!1;const P=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>P}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=ah[0].set(e.left,e.top),l=ah[1].set(e.left,e.bottom),c=ah[2].set(e.right,e.top),u=ah[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const d=Math.sign(r.a*r.d-r.b*r.c);if(d===0||(r.apply(a,a),r.apply(l,l),r.apply(c,c),r.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=n||Math.min(a.x,l.x,c.x,u.x)>=i||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const h=d*(l.y-a.y),f=d*(a.x-l.x),p=h*n+f*s,g=h*i+f*s,x=h*n+f*o,v=h*i+f*o;if(Math.max(p,g,x,v)<=h*a.x+f*a.y||Math.min(p,g,x,v)>=h*u.x+f*u.y)return!1;const y=d*(a.y-c.y),m=d*(c.x-a.x),_=y*n+m*s,C=y*i+m*s,E=y*n+m*o,T=y*i+m*o;return!(Math.max(_,C,E,T)<=y*a.x+m*a.y||Math.min(_,C,E,T)>=y*u.x+m*u.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}}_e.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class kg{constructor(e=0,r=0,n=0){this.x=e,this.y=r,this.radius=n,this.type=jt.CIRC}clone(){return new kg(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new _e(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}kg.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Rg{constructor(e=0,r=0,n=0,i=0){this.x=e,this.y=r,this.width=n,this.height=i,this.type=jt.ELIP}clone(){return new Rg(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new _e(this.x-this.width,this.y-this.height,this.width,this.height)}}Rg.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Wo{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=jt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new Wo(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],u=this.points[o*2+1];l>r!=u>r&&e<(c-a)*((r-l)/(u-l))+a&&(n=!n)}return n}}Wo.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class Mg{constructor(e=0,r=0,n=0,i=0,s=20){this.x=e,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=jt.RREC}clone(){return new Mg(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}}Mg.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Ne{constructor(e=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,i,s,o){return this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new Te;const n=e.x,i=e.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(e,r){r=r||new Te;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*r+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,r,n,i,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(n,r),c=Math.abs(a+l);return c<1e-5||Math.abs(dp-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*r+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ne;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Ne}static get TEMP_MATRIX(){return new Ne}}Ne.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const To=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Po=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Io=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ao=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],N0=[],u2=[],lh=Math.sign;function AX(){for(let t=0;t<16;t++){const e=[];N0.push(e);for(let r=0;r<16;r++){const n=lh(To[t]*To[r]+Io[t]*Po[r]),i=lh(Po[t]*To[r]+Ao[t]*Po[r]),s=lh(To[t]*Io[r]+Io[t]*Ao[r]),o=lh(Po[t]*Io[r]+Ao[t]*Ao[r]);for(let a=0;a<16;a++)if(To[a]===n&&Po[a]===i&&Io[a]===s&&Ao[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new Ne;e.set(To[t],Po[t],Io[t],Ao[t],0,0),u2.push(e)}}AX();const Ze={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>To[t],uY:t=>Po[t],vX:t=>Io[t],vY:t=>Ao[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>N0[t][e],sub:(t,e)=>N0[t][Ze.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Ze.S:Ze.N:Math.abs(e)*2<=Math.abs(t)?t>0?Ze.E:Ze.W:e>0?t>0?Ze.SE:Ze.SW:t>0?Ze.NE:Ze.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=u2[Ze.inv(e)];i.tx=r,i.ty=n,t.append(i)}};class gi{constructor(e,r,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new gi(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}gi.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const B0=class{constructor(){this.worldTransform=new Ne,this.localTransform=new Ne,this.position=new gi(this.onChange,this,0,0),this.scale=new gi(this.onChange,this,1,1),this.pivot=new gi(this.onChange,this,0,0),this.skew=new gi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};B0.IDENTITY=new B0;let Og=B0;Og.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var kX=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,RX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function WE(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function xy(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function d2(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return xy(2*e);case"bvec3":return xy(3*e);case"bvec4":return xy(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const El=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],MX={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},OX={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function LX(t,e){const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in t.uniforms){const i=e[n];if(!i){t.uniforms[n]?.group===!0&&(t.uniforms[n].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const s=t.uniforms[n];let o=!1;for(let a=0;a<El.length;a++)if(El[a].test(i,s)){r.push(El[a].code(n,s)),o=!0;break}if(!o){const a=(i.size===1&&!i.isArray?MX:OX)[i.type].replace("location",`ud["${n}"].location`);r.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const h2={};let ch=h2;function DX(){if(ch===h2||ch?.isContextLost()){const t=ee.ADAPTER.createCanvas();let e;ee.PREFER_ENV>=ga.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),ch=e}return ch}let uh;function FX(){if(!uh){uh=on.MEDIUM;const t=DX();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(uh=e.precision?on.HIGH:on.MEDIUM)}}return uh}function HE(t,e){const r=t.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),n=t.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{r[c-1]=`%c${r[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function NX(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||HE(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||HE(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const BX={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function f2(t){return BX[t]}let dh=null;const XE={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function p2(t,e){if(!dh){const r=Object.keys(XE);dh={};for(let n=0;n<r.length;++n){const i=r[n];dh[t[i]]=XE[i]}}return dh[e]}function YE(t,e,r){if(t.substring(0,9)!=="precision"){let n=e;return e===on.HIGH&&r!==on.HIGH&&(n=on.MEDIUM),`precision ${n} float;
${t}`}else if(r!==on.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let Rc;function UX(){if(typeof Rc=="boolean")return Rc;try{Rc=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Rc=!1}return Rc}let zX=0;const hh={},U0=class Fa{constructor(e,r,n="pixi-shader",i={}){this.extra={},this.id=zX++,this.vertexSrc=e||Fa.defaultVertexSrc,this.fragmentSrc=r||Fa.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),hh[n]?(hh[n]++,n+=`-${hh[n]}`):hh[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=YE(this.vertexSrc,Fa.defaultVertexPrecision,on.HIGH),this.fragmentSrc=YE(this.fragmentSrc,Fa.defaultFragmentPrecision,FX())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return RX}static get defaultFragmentSrc(){return kX}static from(e,r,n){const i=e+r;let s=zE[i];return s||(zE[i]=s=new Fa(e,r,n)),s}};U0.defaultVertexPrecision=on.HIGH,U0.defaultFragmentPrecision=Ki.apple.device?on.HIGH:on.MEDIUM;let Zi=U0,$X=0;class Fn{constructor(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=$X++,this.static=!!r,this.ubo=!!n,e instanceof ut?(this.buffer=e,this.buffer.type=bi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ut(new Float32Array(1)),this.buffer.type=bi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,n){if(!this.ubo)this.uniforms[e]=new Fn(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,n){return new Fn(e,r,n)}static uboFrom(e,r){return new Fn(e,r??!0,!0)}}class _i{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof Fn?this.uniformGroup=r:this.uniformGroup=new Fn(r):this.uniformGroup=new Fn({}),this.disposeRunner=new Dn("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,n){const i=Zi.from(e,r);return new _i(i,n)}}class jX{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=Fn.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Zi(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ne,default:this.defaultGroupCache[e]};return new _i(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class z0{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function VX(){return!Ki.apple.device}function GX(t){let e=!0;const r=ee.ADAPTER.getNavigator();if(Ki.tablet||Ki.phone){if(Ki.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(Ki.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}class Lg{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var WX=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,HX=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Xc=class _n extends Lg{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=c2,this.vertexSize=6,this.state=Ri.for2d(),this.size=_n.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??GX(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??VX(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Ee("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return HX}static get defaultFragmentTemplate(){return WX}setShaderGenerator({vertex:e=_n.defaultVertexSrc,fragment:r=_n.defaultFragmentTemplate}={}){this.shaderGenerator=new jX(e,r)}contextChange(){const e=this.renderer.gl;ee.PREFER_ENV===ga.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),_n.defaultMaxTextures),this.maxTextures=bX(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:r}=_n,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new F0);for(;r.length<i;)r.push(new z0);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:r}=this,n=_n._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++be._globalBatch,l=0,c=n[0],u=0;i.copyBoundTextures(s,r);for(let d=0;d<this._bufferSize;++d){const h=e[d];e[d]=null,h._batchEnabled!==a&&(c.count>=r&&(i.boundArray(c,s,a,r),this.buildDrawCalls(c,u,d),u=d,c=n[++l],++a),h._batchEnabled=a,h.touched=o,c.elements[c.count++]=h)}c.count>0&&(i.boundArray(c,s,a,r),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let d=0;d<s.length;d++)s[d]=null;be._globalBatch=a}buildDrawCalls(e,r,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=_n._drawCallPool;let c=this._dcIndex,u=this._aIndex,d=this._iIndex,h=l[c];h.start=this._iIndex,h.texArray=e;for(let f=r;f<n;++f){const p=i[f],g=p._texture.baseTexture,x=s2[g.alphaMode?1:0][p.blendMode];i[f]=null,r<f&&h.blend!==x&&(h.size=d-h.start,r=f,h=l[++c],h.texArray=e,h.start=d),this.packInterleavedGeometry(p,s,o,u,d),u+=p.vertexData.length/2*a,d+=p.indices.length,h.blend=x}r<n&&(h.size=d-h.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=d}bindAndClearTexArray(e){const r=this.renderer.texture;for(let n=0;n<e.count;n++)r.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:r,_indexBuffer:n}=this;_n.canUploadSameBuffer?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:r,state:n}=this.renderer,i=_n._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:u,blend:d}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=d,n.set(this.state),r.drawElements(l,c,r.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),_n.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const r=cp(Math.ceil(e/8)),n=BE(r),i=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new O0(i*this.vertexSize*4)),s}getIndexBuffer(e){const r=cp(Math.ceil(e/12)),n=BE(r),i=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,r,n,i,s){const{uint32View:o,float32View:a}=r,l=i/this.vertexSize,c=e.uvs,u=e.indices,d=e.vertexData,h=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=He.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let g=0;g<d.length;g+=2)a[i++]=d[g],a[i++]=d[g+1],a[i++]=c[g],a[i++]=c[g+1],o[i++]=p,a[i++]=h;for(let g=0;g<u.length;g++)n[s++]=l+u[g]}};Xc.defaultBatchSize=4096,Xc.extension={name:"batch",type:Y.RendererPlugin},Xc._drawCallPool=[],Xc._textureArrayPool=[];let ko=Xc;ne.add(ko);var XX=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,YX=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const $0=class Yc extends _i{constructor(e,r,n){const i=Zi.from(e||Yc.defaultVertexSrc,r||Yc.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=Yc.defaultResolution,this.multisample=Yc.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Ri}apply(e,r,n,i,s){e.applyFilter(this,r,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return YX}static get defaultFragmentSrc(){return XX}};$0.defaultResolution=1,$0.defaultMultisample=gt.NONE;let lr=$0;class hp{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new He(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=e,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}hp.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},hp.extension={type:[Y.RendererSystem,Y.CanvasRendererSystem],name:"background"};ne.add(hp);class g2{constructor(e){this.renderer=e,this.emptyRenderer=new Lg(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,r,n,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const u=s[c],d=u._batchLocation;if(d>=0&&d<i&&r[d]===u){o[c]=d;continue}for(;l<i;){const h=r[l];if(h&&h._batchEnabled===n&&h._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,r[l]=u;break}}}destroy(){this.renderer=null}}g2.extension={type:Y.RendererSystem,name:"batch"};ne.add(g2);let qE=0;class fp{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=qE++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=qE++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let n;if(ee.PREFER_ENV>=ga.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}fp.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},fp.extension={type:Y.RendererSystem,name:"context"};ne.add(fp);class j0{constructor(e,r){if(this.width=Math.round(e),this.height=Math.round(r),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Dn("disposeFramebuffer"),this.multisample=gt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new be(null,{scaleMode:qi.NEAREST,resolution:1,mipmap:Pi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new be(null,{scaleMode:qi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Pi.OFF,format:W.DEPTH_COMPONENT,type:ce.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!e||!r)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class m2 extends be{constructor(e={}){if(typeof e=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:r,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=gt.NONE),super(null,e),this.mipmap=Pi.OFF,this.valid=!0,this._clear=new He([0,0,0,0]),this.framebuffer=new j0(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class us extends Qu{constructor(e){const r=e,n=r.naturalWidth||r.videoWidth||r.displayWidth||r.width,i=r.naturalHeight||r.videoHeight||r.displayHeight||r.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,n){n===void 0&&!r.startsWith("data:")?e.crossOrigin=yX(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,r,n,i){const s=e.gl,o=r.realWidth,a=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Er.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class y2 extends us{constructor(e,r){if(r=r||{},typeof e=="string"){const n=new Image;us.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??ee.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Er.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class w_{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const i=r.width,s=r.height;if(n){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,c=e.y/s+a;n=Ze.add(n,Ze.NW),this.x0=l+o*Ze.uX(n),this.y0=c+a*Ze.uY(n),n=Ze.add(n,2),this.x1=l+o*Ze.uX(n),this.y1=c+a*Ze.uY(n),n=Ze.add(n,2),this.x2=l+o*Ze.uX(n),this.y2=c+a*Ze.uY(n),n=Ze.add(n,2),this.x3=l+o*Ze.uX(n),this.y3=c+a*Ze.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}w_.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const KE=new w_;function fh(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class re extends so{constructor(e,r,n,i,s,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new _e(0,0,1,1)),e instanceof re&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=KE,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Te(o.x,o.y):new Te(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r?.url&&br[r.url]&&re.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,re.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new re(this.baseTexture,!this.noFrame&&e,r,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===KE&&(this._uvs=new w_),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},n=ee.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof be){if(!e.cacheId){const a=r?.pixiIdPrefix||"pixiid";e.cacheId=`${a}-${sa()}`,be.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=r?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${sa()}`}s=e._pixiId}let o=br[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof be)?(r.resolution||(r.resolution=cs(e)),o=new re(new be(e,r)),o.baseTexture.cacheId=s,be.addToCache(o.baseTexture,s),re.addToCache(o,s)):!o&&e instanceof be&&(o=new re(e),re.addToCache(o,s)),o}static fromURL(e,r){const n=Object.assign({autoLoad:!1},r?.resourceOptions),i=re.from(e,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,r,n,i){return new re(be.fromBuffer(e,r,n,i))}static fromLoader(e,r,n,i){const s=new be(e,Object.assign({scaleMode:be.defaultOptions.scaleMode,resolution:cs(r)},i)),{resource:o}=s;o instanceof y2&&(o.url=r);const a=new re(s);return n||(n=r),be.addToCache(a.baseTexture,n),re.addToCache(a,n),n!==r&&(be.addToCache(a.baseTexture,r),re.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),br[r]&&br[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),br[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=br[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete br[e],r}}else if(e?.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)br[e.textureCacheIds[r]]===e&&delete br[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=e,o=r+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,u=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return re._EMPTY||(re._EMPTY=new re(new be),fh(re._EMPTY),fh(re._EMPTY.baseTexture)),re._EMPTY}static get WHITE(){if(!re._WHITE){const e=ee.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),re._WHITE=new re(be.from(e)),fh(re._WHITE),fh(re._WHITE.baseTexture)}return re._WHITE}}class ma extends re{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new ma(new m2(e))}}class v2{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,n=gt.NONE){const i=new m2(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new ma(i)}getOptimalTexture(e,r,n=1,i=gt.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),r=Math.max(Math.ceil(r*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=cp(e),r=cp(r),s=((e&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,r,n){const i=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||gt.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}v2.SCREEN_KEY=-1;class qX extends qs{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class x2 extends qs{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ut(this.vertices),this.uvBuffer=new ut(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/e.width,this.uvs[3]=i,this.uvs[4]=n+r.width/e.width,this.uvs[5]=i+r.height/e.height,this.uvs[6]=n,this.uvs[7]=i+r.height/e.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class KX{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=gt.NONE,this.sourceFrame=new _e,this.destinationFrame=new _e,this.bindingSourceFrame=new _e,this.bindingDestinationFrame=new _e,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ph=[new Te,new Te,new Te,new Te],by=new Ne;class b2{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new v2,this.statePool=[],this.quad=new qX,this.quadUv=new x2,this.tempRect=new _e,this.activeState={},this.globalUniforms=new Fn({outputFrame:new _e,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new KX,o=n.renderTexture;let a,l;if(o.current){const x=o.current;a=x.resolution,l=x.multisample}else a=n.resolution,l=n.multisample;let c=r[0].resolution||a,u=r[0].multisample??l,d=r[0].padding,h=r[0].autoFit,f=r[0].legacy??!0;for(let x=1;x<r.length;x++){const v=r[x];c=Math.min(c,v.resolution||a),u=Math.min(u,v.multisample??l),d=this.useMaxPadding?Math.max(d,v.padding):d+v.padding,h=h&&v.autoFit,f=f||(v.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=u,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(d);const p=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(by.copyFrom(n.projection.transform).invert(),p),h?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,u),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,g),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const c=i.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,ui.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let c=r.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,r.resolution);u.filterFrame=c.filterFrame;let d=0;for(d=0;d<n.length-1;++d){d===1&&r.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,r.resolution),u.filterFrame=c.filterFrame),n[d].apply(this,c,u,ui.CLEAR,r);const h=c;c=u,u=h}n[d].apply(this,c,l.renderTexture,ui.BLEND,r),d>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=ui.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===ui.CLEAR||r===ui.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(pi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(pi.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),a=r.worldTransform.copyTo(Ne.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,n=1,i=gt.NONE){return this.texturePool.getOptimalTexture(e,r,n,i)}getFilterTexture(e,r,n){if(typeof e=="number"){const s=e;e=r,r=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||gt.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const n=ph[0],i=ph[1],s=ph[2],o=ph[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),l=Math.min(n.y,i.y,s.y,o.y),c=Math.max(n.x,i.x,s.x,o.x),u=Math.max(n.y,i.y,s.y,o.y);r.x=a,r.y=l,r.width=c-a,r.height=u-l}roundFrame(e,r,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?by.copyFrom(s):by.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(r),this.transformAABB(s.invert(),e)}}}b2.extension={type:Y.RendererSystem,name:"filter"};ne.add(b2);class ZX{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=gt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const QX=new _e;class _2{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new j0(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new _e,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;ee.PREFER_ENV===ga.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>n,a=r.height>>n,l=o/r.width;this.setViewport(r.x*l,r.y*l,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,n,i){const s=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=n,s.height=i,this.gl.viewport(e,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,n,i,s=m0.COLOR|m0.DEPTH){const{gl:o}=this;o.clearColor(e,r,n,i),o.clear(s)}initFramebuffer(e){const{gl:r}=this,n=new ZX(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){r.bindRenderbuffer(r.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=r.DEPTH_STENCIL:e.depth&&e.stencil?o=r.DEPTH24_STENCIL8:e.depth?o=r.DEPTH_COMPONENT24:o=r.STENCIL_INDEX8,n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,o,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,r)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH_STENCIL):e.depth&&e.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH24_STENCIL8):e.depth?(l=n.DEPTH_ATTACHMENT,c=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,c=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,c,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,c,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let n=gt.NONE;if(e<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=e){n=r[i];break}return n===1&&(n=gt.NONE),n}blit(e,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new j0(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}r||(r=QX,r.width=i.width,r.height=i.height),n||(n=r);const c=r.width===n.width&&r.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=r.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,l,n,i):s.renderbufferStorage(s.RENDERBUFFER,l,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new _e}destroy(){this.renderer=null}}_2.extension={type:Y.RendererSystem,name:"framebuffer"};ne.add(_2);const _y={5126:4,5123:2,5121:1};class w2{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;ee.PREFER_ENV===ga.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>n.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(e,r,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];r.update(i)}}checkCompatibility(e,r){const n=e.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,r){const n=e.attributes,i=r.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const d=e.buffers,h=e.attributes,f={},p={};for(const g in d)f[g]=0,p[g]=0;for(const g in h)!h[g].size&&a.attributeData[g]?h[g].size=a.attributeData[g].size:h[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),f[h[g].buffer]+=h[g].size*_y[h[g].type];for(const g in h){const x=h[g],v=x.size;x.stride===void 0&&(f[x.buffer]===v*_y[x.type]?x.stride=0:x.stride=f[x.buffer]),x.start===void 0&&(x.start=p[x.buffer],p[x.buffer]+=v*_y[x.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(let g=0;g<d.length;g++){const x=d[g];o.bind(x),n&&x._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,i.bindVertexArray(null),o.unbind(bi.ARRAY_BUFFER),u}disposeGeometry(e,r){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let a=0;a<s.length;a++){const l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&o.dispose(s[a],r))}if(!r){for(const a in n)if(a[0]==="g"){const l=n[a];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)}activateVao(e,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const u=a[c],d=o[u.buffer],h=d._glBuffers[i];if(r.attributeData[c]){l!==h&&(s.bind(d),l=h);const f=r.attributeData[c].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)n.vertexAttribDivisor(f,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,r||o.indexBuffer.data.length,l,(n||0)*a,i||1):s.drawElements(e,r||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,r||o.getSize(),i||1):s.drawArrays(e,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}w2.extension={type:Y.RendererSystem,name:"geometry"};ne.add(w2);const ZE=new Ne;class S2{constructor(e,r){this._texture=e,this.mapCoord=new Ne,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&(ZE.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(ZE));const o=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(r._frame.x+l+c)/o.width,a[1]=(r._frame.y+l+c)/o.height,a[2]=(r._frame.x+r._frame.width-l+c)/o.width,a[3]=(r._frame.y+r._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var JX=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,eY=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class tY extends lr{constructor(e,r,n){let i=null;typeof e!="string"&&r===void 0&&n===void 0&&(i=e,e=void 0,r=void 0,n=void 0),super(e||eY,r||JX,n),this.maskSprite=i,this.maskMatrix=new Ne}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new S2(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,n,i))}}class rY{constructor(e=null){this.type=bt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=lr.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=bt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class E2{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new rY;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==bt.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case bt.SCISSOR:this.renderer.scissor.push(n);break;case bt.STENCIL:this.renderer.stencil.push(n);break;case bt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case bt.COLOR:this.pushColorMask(n);break}n.type===bt.SPRITE&&this.maskStack.push(n)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case bt.SCISSOR:this.renderer.scissor.pop(r);break;case bt.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case bt.SPRITE:this.popSpriteMask(r);break;case bt.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===bt.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=bt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=bt.SCISSOR:e.type=bt.STENCIL:e.type=bt.COLOR}pushSpriteMask(e){const{maskObject:r}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new tY])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=r;const s=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}E2.extension={type:Y.RendererSystem,name:"mask"};ne.add(E2);class C2{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const QE=new Ne,JE=[],T2=class rf extends C2{constructor(e){super(e),this.glConst=ee.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const r=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,JE.pop()??new _e);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),r&&o.fit(r),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:r,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:r}=e;if(!r.isFastRect||!r.isFastRect()||rf.isMatrixRotated(r.worldTransform)||rf.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,r,n,i,s){rf.isMatrixRotated(s)||(s=s?QE.copyFrom(s):QE.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:r}=this.renderer;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:r}=this.renderer;e&&JE.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)}};T2.extension={type:Y.RendererSystem,name:"scissor"};let nY=T2;ne.add(nY);class P2 extends C2{constructor(e){super(e),this.glConst=ee.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}P2.extension={type:Y.RendererSystem,name:"stencil"};ne.add(P2);class I2{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ee("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Ee("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Ee("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}I2.extension={type:[Y.RendererSystem,Y.CanvasRendererSystem],name:"_plugin"};ne.add(I2);class A2{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ne,this.transform=null}update(e,r,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(e){}destroy(){this.renderer=null}}A2.extension={type:Y.RendererSystem,name:"projection"};ne.add(A2);const iY=new Og,eC=new _e;class k2{constructor(e){this.renderer=e,this._tempMatrix=new Ne}generateTexture(e,r){const{region:n,...i}=r||{},s=n?.copyTo(eC)||e.getLocalBounds(eC,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=ma.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=iY,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}k2.extension={type:[Y.RendererSystem,Y.CanvasRendererSystem],name:"textureGenerator"};ne.add(k2);const yo=new _e,Mc=new _e;class R2{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new _e,this.destinationFrame=new _e,this.viewportFrame=new _e}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,n){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,r||(yo.width=e.frame.width,yo.height=e.frame.height,r=yo),n||(Mc.x=e.frame.x,Mc.y=e.frame.y,Mc.width=r.width,Mc.height=r.height,n=Mc),o=s.framebuffer):(a=i.resolution,r||(yo.width=i._view.screen.width,yo.height=i._view.screen.height,r=yo),n||(n=yo,n.width=r.width,n.height=r.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,r,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(e,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=He.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:u,height:d}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,d)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}R2.extension={type:Y.RendererSystem,name:"renderTexture"};ne.add(R2);class sY{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function oY(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=p2(e,s.type),a={type:o,name:s.name,size:f2(o),location:e.getAttribLocation(t,s.name)};r[s.name]=a}return r}function aY(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=p2(e,s.type);r[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:d2(l,s.size)}}return r}function lY(t,e){const r=WE(t,t.VERTEX_SHADER,e.vertexSrc),n=WE(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=e.extra?.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||NX(t,i,r,n),e.attributeData=oY(i,t),e.uniformData=aY(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const a=Object.keys(e.attributeData);a.sort((l,c)=>l>c?1:-1);for(let l=0;l<a.length;l++)e.attributeData[a[l]].location=l,t.bindAttribLocation(i,l,a[l]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);const o={};for(const a in e.uniformData){const l=e.uniformData[a];o[a]={location:t.getUniformLocation(i,a),value:d2(l.type,l.size)}}return new sY(i,o)}function cY(t,e,r,n,i){r.buffer.update(i)}const uY={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},M2={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function dY(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(r=M2[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function hY(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((n,i)=>n.index-i.index),r}function fY(t,e){if(!t.autoManage)return{size:0,syncFunc:cY};const r=hY(t.uniforms,e),{uboElements:n,size:i}=dY(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=t.uniforms[a.data.name],c=a.data.name;let u=!1;for(let d=0;d<El.length;d++){const h=El[d];if(h.codeUbo&&h.test(a.data,l)){s.push(`offset = ${a.offset/4};`,El[d].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const d=f2(a.data.type),h=Math.max(M2[a.data.type]/16,1),f=d/h,p=(4-f%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*h}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const d=uY[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${d};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let pY=0;const gh={textureCount:0,uboCount:0};class O2{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=pY++}systemCheck(){if(!UX())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(gh.textureCount=0,gh.uboCount=0,this.syncUniformGroup(e.uniformGroup,gh)),i}setUniforms(e){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,r){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))}syncUniforms(e,r,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=LX(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,gh,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(e,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=fY(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return r.uniformGroups[e.id]=a.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,n=e.program,i=lY(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}O2.extension={type:Y.RendererSystem,name:"shader"};ne.add(O2);class pp{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.4.2 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}pp.defaultOptions={hello:!1},pp.extension={type:[Y.RendererSystem,Y.CanvasRendererSystem],name:"startup"};ne.add(pp);function gY(t,e=[]){return e[ge.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.ADD]=[t.ONE,t.ONE],e[ge.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.NONE]=[0,0],e[ge.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[ge.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ge.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[ge.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[ge.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ge.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[ge.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[ge.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[ge.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[ge.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ge.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const mY=0,yY=1,vY=2,xY=3,bY=4,_Y=5,L2=class V0{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ge.NONE,this._blendEq=!1,this.map=[],this.map[mY]=this.setBlend,this.map[yY]=this.setOffset,this.map[vY]=this.setCullFace,this.map[xY]=this.setDepthTest,this.map[bY]=this.setFrontFace,this.map[_Y]=this.setDepthMask,this.checks=[],this.defaultState=new Ri,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=gY(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let r=this.stateId^e.data,n=0;for(;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e=e||this.defaultState;for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(V0.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(V0.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,r){const n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null}};L2.extension={type:Y.RendererSystem,name:"state"};let wY=L2;ne.add(wY);class SY extends so{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(i=>e.systems[i]),n=[...r,...Object.keys(e.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(r=>{this.runners[r]=new Dn(r)})}addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,r){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](r[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const qc=class nf{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=nf.defaultMaxIdle,this.checkCountMax=nf.defaultCheckCountMax,this.mode=nf.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==f_.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,r=e.managedTextures;let n=!1;for(let i=0;i<r.length;i++){const s=r[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),r[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<r.length;s++)r[s]!==null&&(r[i++]=r[s]);r.length=i}}unload(e){const r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};qc.defaultMode=f_.AUTO,qc.defaultMaxIdle=60*60,qc.defaultCheckCountMax=60*10,qc.extension={type:Y.RendererSystem,name:"textureGC"};let Ro=qc;ne.add(Ro);class wy{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ce.UNSIGNED_BYTE,this.internalFormat=W.RGBA,this.samplerType=0}}function EY(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:J.FLOAT,[t.RGBA]:J.FLOAT,[t.ALPHA]:J.FLOAT,[t.LUMINANCE]:J.FLOAT,[t.LUMINANCE_ALPHA]:J.FLOAT,[t.R8]:J.FLOAT,[t.R8_SNORM]:J.FLOAT,[t.RG8]:J.FLOAT,[t.RG8_SNORM]:J.FLOAT,[t.RGB8]:J.FLOAT,[t.RGB8_SNORM]:J.FLOAT,[t.RGB565]:J.FLOAT,[t.RGBA4]:J.FLOAT,[t.RGB5_A1]:J.FLOAT,[t.RGBA8]:J.FLOAT,[t.RGBA8_SNORM]:J.FLOAT,[t.RGB10_A2]:J.FLOAT,[t.RGB10_A2UI]:J.FLOAT,[t.SRGB8]:J.FLOAT,[t.SRGB8_ALPHA8]:J.FLOAT,[t.R16F]:J.FLOAT,[t.RG16F]:J.FLOAT,[t.RGB16F]:J.FLOAT,[t.RGBA16F]:J.FLOAT,[t.R32F]:J.FLOAT,[t.RG32F]:J.FLOAT,[t.RGB32F]:J.FLOAT,[t.RGBA32F]:J.FLOAT,[t.R11F_G11F_B10F]:J.FLOAT,[t.RGB9_E5]:J.FLOAT,[t.R8I]:J.INT,[t.R8UI]:J.UINT,[t.R16I]:J.INT,[t.R16UI]:J.UINT,[t.R32I]:J.INT,[t.R32UI]:J.UINT,[t.RG8I]:J.INT,[t.RG8UI]:J.UINT,[t.RG16I]:J.INT,[t.RG16UI]:J.UINT,[t.RG32I]:J.INT,[t.RG32UI]:J.UINT,[t.RGB8I]:J.INT,[t.RGB8UI]:J.UINT,[t.RGB16I]:J.INT,[t.RGB16UI]:J.UINT,[t.RGB32I]:J.INT,[t.RGB32UI]:J.UINT,[t.RGBA8I]:J.INT,[t.RGBA8UI]:J.UINT,[t.RGBA16I]:J.INT,[t.RGBA16UI]:J.UINT,[t.RGBA32I]:J.INT,[t.RGBA32UI]:J.UINT,[t.DEPTH_COMPONENT16]:J.FLOAT,[t.DEPTH_COMPONENT24]:J.FLOAT,[t.DEPTH_COMPONENT32F]:J.FLOAT,[t.DEPTH_STENCIL]:J.FLOAT,[t.DEPTH24_STENCIL8]:J.FLOAT,[t.DEPTH32F_STENCIL8]:J.FLOAT}:e={[t.RGB]:J.FLOAT,[t.RGBA]:J.FLOAT,[t.ALPHA]:J.FLOAT,[t.LUMINANCE]:J.FLOAT,[t.LUMINANCE_ALPHA]:J.FLOAT,[t.DEPTH_STENCIL]:J.FLOAT},e}function CY(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[ce.UNSIGNED_BYTE]:{[W.RGBA]:t.RGBA8,[W.RGB]:t.RGB8,[W.RG]:t.RG8,[W.RED]:t.R8,[W.RGBA_INTEGER]:t.RGBA8UI,[W.RGB_INTEGER]:t.RGB8UI,[W.RG_INTEGER]:t.RG8UI,[W.RED_INTEGER]:t.R8UI,[W.ALPHA]:t.ALPHA,[W.LUMINANCE]:t.LUMINANCE,[W.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ce.BYTE]:{[W.RGBA]:t.RGBA8_SNORM,[W.RGB]:t.RGB8_SNORM,[W.RG]:t.RG8_SNORM,[W.RED]:t.R8_SNORM,[W.RGBA_INTEGER]:t.RGBA8I,[W.RGB_INTEGER]:t.RGB8I,[W.RG_INTEGER]:t.RG8I,[W.RED_INTEGER]:t.R8I},[ce.UNSIGNED_SHORT]:{[W.RGBA_INTEGER]:t.RGBA16UI,[W.RGB_INTEGER]:t.RGB16UI,[W.RG_INTEGER]:t.RG16UI,[W.RED_INTEGER]:t.R16UI,[W.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[ce.SHORT]:{[W.RGBA_INTEGER]:t.RGBA16I,[W.RGB_INTEGER]:t.RGB16I,[W.RG_INTEGER]:t.RG16I,[W.RED_INTEGER]:t.R16I},[ce.UNSIGNED_INT]:{[W.RGBA_INTEGER]:t.RGBA32UI,[W.RGB_INTEGER]:t.RGB32UI,[W.RG_INTEGER]:t.RG32UI,[W.RED_INTEGER]:t.R32UI,[W.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[ce.INT]:{[W.RGBA_INTEGER]:t.RGBA32I,[W.RGB_INTEGER]:t.RGB32I,[W.RG_INTEGER]:t.RG32I,[W.RED_INTEGER]:t.R32I},[ce.FLOAT]:{[W.RGBA]:t.RGBA32F,[W.RGB]:t.RGB32F,[W.RG]:t.RG32F,[W.RED]:t.R32F,[W.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[ce.HALF_FLOAT]:{[W.RGBA]:t.RGBA16F,[W.RGB]:t.RGB16F,[W.RG]:t.RG16F,[W.RED]:t.R16F},[ce.UNSIGNED_SHORT_5_6_5]:{[W.RGB]:t.RGB565},[ce.UNSIGNED_SHORT_4_4_4_4]:{[W.RGBA]:t.RGBA4},[ce.UNSIGNED_SHORT_5_5_5_1]:{[W.RGBA]:t.RGB5_A1},[ce.UNSIGNED_INT_2_10_10_10_REV]:{[W.RGBA]:t.RGB10_A2,[W.RGBA_INTEGER]:t.RGB10_A2UI},[ce.UNSIGNED_INT_10F_11F_11F_REV]:{[W.RGB]:t.R11F_G11F_B10F},[ce.UNSIGNED_INT_5_9_9_9_REV]:{[W.RGB]:t.RGB9_E5},[ce.UNSIGNED_INT_24_8]:{[W.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[ce.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[W.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[ce.UNSIGNED_BYTE]:{[W.RGBA]:t.RGBA,[W.RGB]:t.RGB,[W.ALPHA]:t.ALPHA,[W.LUMINANCE]:t.LUMINANCE,[W.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ce.UNSIGNED_SHORT_5_6_5]:{[W.RGB]:t.RGB},[ce.UNSIGNED_SHORT_4_4_4_4]:{[W.RGBA]:t.RGBA},[ce.UNSIGNED_SHORT_5_5_5_1]:{[W.RGBA]:t.RGBA}},e}class D2{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new be,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=CY(e),this.samplerTypes=EY(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new wy(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new wy(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,r=0){const{gl:n}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==J.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new wy(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){r.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,r.samplerType=this.samplerTypes[r.internalFormat]??J.FLOAT,this.webGLVersion===2&&e.type===ce.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(e,r),e.resource?.upload(n,e,r))r.samplerType!==J.FLOAT&&(this.hasIntegerTextures=!0);else{const i=e.realWidth,s=e.realHeight,o=n.gl;(r.width!==i||r.height!==s||r.dirtyId<0)&&(r.width=i,r.height=s,o.texImage2D(e.target,0,r.internalFormat,i,s,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(e);i!==-1&&Sl(this.managedTextures,i,1)}}updateTextureStyle(e){const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Pi.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Vs.CLAMP:r.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const n=this.gl;if(r.mipmap&&e.mipmap!==Pi.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===qi.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===qi.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===qi.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===qi.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}D2.extension={type:Y.RendererSystem,name:"texture"};ne.add(D2);class F2{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();e._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,r){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&s.dispose(a,r))}n&&(r||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}F2.extension={type:Y.RendererSystem,name:"transformFeedback"};ne.add(F2);class gp{constructor(e){this.renderer=e}init(e){this.screen=new _e(0,0,e.width,e.height),this.element=e.view||ee.ADAPTER.createCanvas(),this.resolution=e.resolution||ee.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}gp.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},gp.extension={type:[Y.RendererSystem,Y.CanvasRendererSystem],name:"_view"};ne.add(gp);ee.PREFER_ENV=ga.WEBGL2;ee.STRICT_TEXTURE_CACHE=!1;ee.RENDER_OPTIONS={...fp.defaultOptions,...hp.defaultOptions,...gp.defaultOptions,...pp.defaultOptions};Object.defineProperties(ee,{WRAP_MODE:{get(){return be.defaultOptions.wrapMode},set(t){Ee("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),be.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return be.defaultOptions.scaleMode},set(t){Ee("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),be.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return be.defaultOptions.mipmap},set(t){Ee("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),be.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return be.defaultOptions.anisotropicLevel},set(t){Ee("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),be.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return Ee("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),lr.defaultResolution},set(t){lr.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return Ee("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),lr.defaultMultisample},set(t){lr.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return ko.defaultMaxTextures},set(t){Ee("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ko.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return ko.defaultBatchSize},set(t){Ee("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ko.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return ko.canUploadSameBuffer},set(t){Ee("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ko.canUploadSameBuffer=t}},GC_MODE:{get(){return Ro.defaultMode},set(t){Ee("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ro.defaultMode=t}},GC_MAX_IDLE:{get(){return Ro.defaultMaxIdle},set(t){Ee("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ro.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Ro.defaultCheckCountMax},set(t){Ee("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ro.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Zi.defaultVertexPrecision},set(t){Ee("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Zi.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Zi.defaultFragmentPrecision},set(t){Ee("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Zi.defaultFragmentPrecision=t}}});var oa=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(oa||{});class Sy{constructor(e,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=i}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const N2=class Or{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Sy(null,null,1/0),this.deltaMS=1/Or.targetFPMS,this.elapsedMS=1/Or.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,n=oa.NORMAL){return this._addListener(new Sy(e,r,n))}addOnce(e,r,n=oa.NORMAL){return this._addListener(new Sy(e,r,n,!0))}_addListener(e){let r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,r){let n=this._head.next;for(;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Or.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,Or.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!Or._shared){const e=Or._shared=new Or;e.autoStart=!0,e._protected=!0}return Or._shared}static get system(){if(!Or._system){const e=Or._system=new Or;e.autoStart=!0,e._protected=!0}return Or._system}};N2.targetFPMS=.06;let Cr=N2;Object.defineProperties(ee,{TARGET_FPMS:{get(){return Cr.targetFPMS},set(t){Ee("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Cr.targetFPMS=t}}});class B2{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,oa.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Cr.shared:new Cr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}B2.extension=Y.Application;ne.add(B2);const U2=[];ne.handleByList(Y.Renderer,U2);function TY(t){for(const e of U2)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var PY=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,IY=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const AY=PY,z2=IY;class $2{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=gt.HIGH?this.multisample=gt.HIGH:r>=gt.MEDIUM?this.multisample=gt.MEDIUM:r>=gt.LOW?this.multisample=gt.LOW:this.multisample=gt.NONE}destroy(){}}$2.extension={type:Y.RendererSystem,name:"_multisample"};ne.add($2);class kY{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class j2{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);r.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(e,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,r.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const s=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,s)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:n}=this;return e._glBuffers[r]=new kY(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}j2.extension={type:Y.RendererSystem,name:"buffer"};ne.add(j2);class V2{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;let i,s,o,a;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}V2.extension={type:Y.RendererSystem,name:"objectRenderer"};ne.add(V2);const sf=class G0 extends SY{constructor(e){super(),this.type=TM.WEBGL,e=Object.assign({},ee.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Fn({projectionMatrix:new Ne},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:G0.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in e&&(Ee("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=G0.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:Q9()}render(e,r){this.objectRenderer.render(e,r)}resize(e,r){this._view.resizeView(e,r)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ee("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ee("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ee("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ee("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Ee("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Ee("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Ee("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Ee("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,r){return this.textureGenerator.generateTexture(e,r)}};sf.extension={type:Y.Renderer,priority:1},sf.__plugins={},sf.__systems={};let S_=sf;ne.handleByMap(Y.RendererPlugin,S_.__plugins);ne.handleByMap(Y.RendererSystem,S_.__systems);ne.add(S_);class G2 extends Qu{constructor(e,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new be;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Qu?this.addResourceAt(e[n],n):this.addResourceAt(l2(e[n],r),n))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(e).then(()=>{const{realWidth:r,realHeight:n}=this.items[0];return this.resize(r,n),this.update(),Promise.resolve(this)}),this._load}}class RY extends G2{constructor(e,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=bl.TEXTURE_2D_ARRAY}upload(e,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let l=0;l<i;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,r.format,n.type,c.resource.source))}return!0}}class MY extends us{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const W2=class Kc extends G2{constructor(e,r){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=r||{};if(e&&e.length!==Kc.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<Kc.SIDES;a++)this.items[a].target=bl.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,r),s!==!1&&this.load()}bind(e){super.bind(e),e.target=bl.TEXTURE_CUBE_MAP}addBaseTextureAt(e,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error(`Index ${r} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=bl.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this}upload(e,r,n){const i=this.itemDirtyIds;for(let s=0;s<Kc.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<r.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Kc.SIDES}};W2.SIDES=6;let OY=W2;class sl extends us{constructor(e,r){r=r||{};let n,i,s;typeof e=="string"?(n=sl.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.ownsImageBitmap=r.ownsImageBitmap??s,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const n=await ee.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Er.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(e,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return sl._EMPTY=sl._EMPTY??ee.ADAPTER.createCanvas(0,0),sl._EMPTY}}const W0=class of extends us{constructor(e,r){r=r||{},super(ee.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},of.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;us.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=r=>{this._resolve&&(e.onerror=null,this.onError.emit(r))},e.onload=()=>{if(!this._resolve)return;const r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=r*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*r,s=this._overrideHeight||this._overrideWidth/r*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${sa()}`,o.getContext("2d").drawImage(e,0,0,r,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const r=of.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&of.SVG_XML.test(e)}};W0.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,W0.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let H0=W0;class LY extends us{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const X0=class Y0 extends us{constructor(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");r.autoLoad!==!1&&n.setAttribute("preload","auto"),r.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),r.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),r.loop===!0&&n.setAttribute("loop",""),r.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];us.crossOrigin(n,i,r.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),u=c.slice(c.lastIndexOf(".")+1);l=l||Y0.MIME_TYPES[u]||`video/${u}`}o.src=a,l&&(o.type=l),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=r.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),r.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const r=Cr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((r,n)=>{this.valid?r(this):(this._resolve=r,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const r=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!r&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Cr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Cr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Cr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Y0.TYPES.includes(r)}};X0.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],X0.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let H2=X0;L0.push(sl,y2,MY,H2,LY,H0,Ag,OY,RY);class mp{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?_e.EMPTY:(e=e||new _e(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:n,b:i,c:s,d:o,tx:a,ty:l}=e,c=n*r.x+s*r.y+a,u=i*r.x+o*r.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,r,n,i,s){this.addFrameMatrix(e.worldTransform,r,n,i,s)}addFrameMatrix(e,r,n,i,s){const o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,d=e.ty;let h=this.minX,f=this.minY,p=this.maxX,g=this.maxY,x=o*r+l*n+u,v=a*r+c*n+d;h=x<h?x:h,f=v<f?v:f,p=x>p?x:p,g=v>g?v:g,x=o*i+l*n+u,v=a*i+c*n+d,h=x<h?x:h,f=v<f?v:f,p=x>p?x:p,g=v>g?v:g,x=o*r+l*s+u,v=a*r+c*s+d,h=x<h?x:h,f=v<f?v:f,p=x>p?x:p,g=v>g?v:g,x=o*i+l*s+u,v=a*i+c*s+d,h=x<h?x:h,f=v<f?v:f,p=x>p?x:p,g=v>g?v:g,this.minX=h,this.minY=f,this.maxX=p,this.maxY=g}addVertexData(e,r,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=r;l<n;l+=2){const c=e[l],u=e[l+1];i=c<i?c:i,s=u<s?u:s,o=c>o?c:o,a=u>a?u:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,r,n,i){this.addVerticesMatrix(e.worldTransform,r,n,i)}addVerticesMatrix(e,r,n,i,s=0,o=s){const a=e.a,l=e.b,c=e.c,u=e.d,d=e.tx,h=e.ty;let f=this.minX,p=this.minY,g=this.maxX,x=this.maxY;for(let v=n;v<i;v+=2){const y=r[v],m=r[v+1],_=a*y+c*m+d,C=u*m+l*y+h;f=Math.min(f,_-s),g=Math.max(g,_+s),p=Math.min(p,C-o),x=Math.max(x,C+o)}this.minX=f,this.minY=p,this.maxX=g,this.maxY=x}addBounds(e){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,r){const n=e.minX>r.minX?e.minX:r.minX,i=e.minY>r.minY?e.minY:r.minY,s=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const n=e.minX>r.x?e.minX:r.x,i=e.minY>r.y?e.minY:r.y,s=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,n,i,s,o){e-=s,r-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class rt extends so{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Og,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new mp,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(rt.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new _e),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new _e),e=this._localBoundsRect),this._localBounds||(this._localBounds=new mp);const r=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=n?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,n,i){return r&&(e=r.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,r=0,n=1,i=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new DY),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*PX}set angle(e){this.transform.rotation=e*IX}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class DY extends rt{constructor(){super(...arguments),this.sortDirty=null}}rt.prototype.displayObjectUpdateTransform=rt.prototype.updateTransform;const FY=new Ne;function NY(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const X2=class q0 extends rt{constructor(){super(),this.children=[],this.sortableChildren=q0.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.addChild(e[r]);else{const r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]}addChildAt(e,r){if(r<0||r>this.children.length)throw new Error(`${e}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e}swapChildren(e,r){if(e===r)return;const n=this.getChildIndex(e),i=this.getChildIndex(r);this.children[n]=r,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){const r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(e,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Sl(this.children,n,1),this.children.splice(r,0,e),this.onChildrenChange(r)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.removeChild(e[r]);else{const r=e[0],n=this.children.indexOf(r);if(n===-1)return null;r.parent=null,r.transform._parentID=-1,Sl(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n)}return e[0]}removeChildAt(e){const r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,Sl(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r}removeChildren(e=0,r=this.children.length){const n=e,i=r,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let r=0,n=this.children.length;r<n;++r){const i=this.children[r];i._lastSortedIndex=r,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(NY),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,r=!1){const n=super.getLocalBounds(e);if(!r)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const r=e.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==q0.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=FY.copyFrom(i),i.prepend(s)):i=s),n&&r.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let r=0,n=this.children.length;r<n;++r)this.children[r].render(e)}}renderAdvanced(e){const r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let s=0;s<r.length;s++)r[s].enabled&&this._enabledFilters.push(r[s])}const i=r&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==bt.NONE));if(i&&e.batch.flush(),r&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,o=this.children.length;s<o;++s)this.children[s].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),r&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const r=typeof e=="boolean"?e:e?.children,n=this.removeChildren(0,this.children.length);if(r)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e}};X2.defaultSortableChildren=!1;let gn=X2;gn.prototype.containerUpdateTransform=gn.prototype.updateTransform;Object.defineProperties(ee,{SORTABLE_CHILDREN:{get(){return gn.defaultSortableChildren},set(t){Ee("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),gn.defaultSortableChildren=t}}});const Oc=new Te,BY=new Uint16Array([0,1,2,0,2,3]);class uc extends gn{constructor(e){super(),this._anchor=new gi(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new He(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ge.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||re.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=BY,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ee.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Os(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Os(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,c=this.vertexData,u=e.trim,d=e.orig,h=this._anchor;let f=0,p=0,g=0,x=0;if(u?(p=u.x-h._x*d.width,f=p+u.width,x=u.y-h._y*d.height,g=x+u.height):(p=-h._x*d.width,f=p+d.width,x=-h._y*d.height,g=x+d.height),c[0]=n*p+s*x+a,c[1]=o*x+i*p+l,c[2]=n*f+s*x+a,c[3]=o*x+i*f+l,c[4]=n*f+s*g+a,c[5]=o*g+i*f+l,c[6]=n*p+s*g+a,c[7]=o*g+i*p+l,this._roundPixels){const v=ee.RESOLUTION;for(let y=0;y<c.length;++y)c[y]=Math.round(c[y]*v)/v}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,d=s.ty,h=-i._x*n.width,f=h+n.width,p=-i._y*n.height,g=p+n.height;if(r[0]=o*h+l*p+u,r[1]=c*p+a*h+d,r[2]=o*f+l*p+u,r[3]=c*p+a*f+d,r[4]=o*f+l*g+u,r[5]=c*g+a*f+d,r[6]=o*h+l*g+u,r[7]=c*g+a*h+d,this._roundPixels){const x=ee.RESOLUTION;for(let v=0;v<r.length;++v)r[v]=Math.round(r[v]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new mp),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new _e),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Oc);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return Oc.x>=i&&Oc.x<i+r&&(s=-n*this.anchor.y,Oc.y>=s&&Oc.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,r){const n=e instanceof re?e:re.from(e,r);return new uc(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=Os(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=Os(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||re.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Y2=new Ne;rt.prototype._cacheAsBitmap=!1;rt.prototype._cacheData=null;rt.prototype._cacheAsBitmapResolution=null;rt.prototype._cacheAsBitmapMultisample=null;class UY{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(rt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new UY),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});rt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};rt.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(new _e,!0);if(this.filters?.length){const h=this.filters[0].padding;r.pad(h)}const n=this.cacheAsBitmapResolution||t.resolution;r.ceil(n),r.width=Math.max(r.width,1/n),r.height=Math.max(r.height,1/n);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=ma.create({width:r.width,height:r.height,resolution:n,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${sa()}`;this._cacheData.textureCacheId=c,be.addToCache(l.baseTexture,c),re.addToCache(l,c);const u=this.transform.localTransform.copyTo(Y2).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const d=new uc(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(r.x/r.width),d.anchor.y=-(r.y/r.height),d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};rt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};rt.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(new _e,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,i=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=ma.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${sa()}`;this._cacheData.textureCacheId=a,be.addToCache(o.baseTexture,a),re.addToCache(o,a);const l=Y2;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new uc(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};rt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};rt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};rt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,be.removeFromCache(this._cacheData.textureCacheId),re.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};rt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};rt.prototype.name=null;gn.prototype.getChildByName=function(t,e){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(let r=0,n=this.children.length;r<n;r++){const i=this.children[r];if(!i.getChildByName)continue;const s=i.getChildByName(t,!0);if(s)return s}return null};rt.prototype.getGlobalPosition=function(t=new Te,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var zY=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class $Y extends lr{constructor(e=1){super(AY,zY,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const jY={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},VY=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function GY(t){const e=jY[t],r=e.length;let n=VY,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=r&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}const WY=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function HY(t,e){const r=Math.ceil(t/2);let n=WY,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}class K0 extends lr{constructor(e,r=8,n=4,i=lr.defaultResolution,s=5){const o=HY(s,e),a=GY(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(e,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=r,l=s;this.state.blend=!1,e.applyFilter(this,a,l,ui.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,ui.BLIT),this.uniforms.uSampler=l;const u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class XY extends lr{constructor(e=8,r=4,n=lr.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new K0(!0,e,r,n,i),this.blurYFilter=new K0(!1,e,r,n,i),this.resolution=n,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,r,a,ui.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,r,n,i):this.blurXFilter.apply(e,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var YY=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Z0 extends lr{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(z2,YY,e),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,i,s]=He.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,c=o*(1-n)-a*i,u=o*(1-n)+a*i,d=o*(1-n)+a*i,h=n+o*(1-n),f=o*(1-n)-a*i,p=o*(1-n)-a*i,g=o*(1-n)+a*i,x=n+o*(1-n),v=[l,c,u,0,0,d,h,f,0,0,p,g,x,0,0,0,0,0,1,0];this._loadMatrix(v,r)}contrast(e,r){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(e=0,r){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,i,s){e=e||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=He.shared,[a,l,c]=o.setValue(n).toArray(),[u,d,h]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,c,e,0,u,d,h,r,0,a-u,l-d,c-h,0,0];this._loadMatrix(f,s)}night(e,r){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Z0.prototype.grayscale=Z0.prototype.greyscale;var qY=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,KY=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class ZY extends lr{constructor(e,r){const n=new Ne;e.renderable=!1,super(KY,qY,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,r==null&&(r=20),this.scale=new Te(r,r)}apply(e,r,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var QY=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,JY=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class eq extends lr{constructor(){super(JY,QY)}}var tq=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class rq extends lr{constructor(e=.5,r=Math.random()){super(z2,tq,{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const tC={AlphaFilter:$Y,BlurFilter:XY,BlurFilterPass:K0,ColorMatrixFilter:Z0,DisplacementFilter:ZY,FXAAFilter:eq,NoiseFilter:rq};Object.entries(tC).forEach(([t,e])=>{Object.defineProperty(tC,t,{get(){return Ee("7.1.0",`filters.${t} has moved to ${t}`),e}})});class nq{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Cr.system.add(this.tickerUpdate,this,oa.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Cr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Is=new nq;class bd{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=bd.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Te,this.page=new Te,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class yp extends bd{constructor(){super(...arguments),this.client=new Te,this.movement=new Te,this.offset=new Te,this.global=new Te,this.screen=new Te}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,n,i,s,o,a,l,c,u,d,h,f,p,g){throw new Error("Method not implemented.")}}class wn extends yp{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Cl extends yp{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Cl.DOM_DELTA_PIXEL=0,Cl.DOM_DELTA_LINE=1,Cl.DOM_DELTA_PAGE=2;const iq=2048,sq=new Te,Ey=new Te;class oq{constructor(e){this.dispatch=new so,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){Is.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,sq.set(e,r),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,r){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const r=[e];for(let n=0;n<iq&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Is.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let d=u.length-1;d>=0;d--){const h=u[d],f=this.hitTestMoveRecursive(h,this._isInteractive(r)?r:h.eventMode,n,i,s,o||s(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(r),c=e.isInteractive();return l&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,n)&&i(e,n)?c?[e]:[]:null}hitTestRecursive(e,r,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Is.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const u=l[c],d=this.hitTestRecursive(u,this._isInteractive(r)?r:u.eventMode,n,i,s);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const h=e.isInteractive();return(d.length>0||h)&&d.push(e),d}}}const o=this._isInteractive(r),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){if(e.hitArea&&(e.worldTransform.applyInverse(r,Ey),!e.hitArea.contains(Ey.x,Ey.y)))return!0;if(e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!n.containsPoint?.(r))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){r=r??e.type;const n=`on${r}`;e.currentTarget[n]?.(e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof wn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){if(!(e instanceof wn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==r.target){const l=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,l,s);if(this.dispatchEvent(c,"pointerout"),n&&this.dispatchEvent(c,"mouseout"),!r.composedPath().includes(s)){const u=this.createPointerEvent(e,"pointerleave",s);for(u.eventPhase=u.AT_TARGET;u.target&&!r.composedPath().includes(u.target);)u.currentTarget=u.target,this.notifyTarget(u),n&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(c)}if(s!==r.target){const l=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(r,l);this.dispatchEvent(c,"pointerover"),n&&this.dispatchEvent(c,"mouseover");let u=s?.parent;for(;u&&u!==this.rootTarget.parent&&u!==r.target;)u=u.parent;if(!u||u===this.rootTarget.parent){const d=this.clonePointerEvent(r,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==s&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=r.target?.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){if(!(e instanceof wn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof wn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof wn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:r});const l=i.clicksByButton[e.button];if(l.target===a.target&&r-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=r,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof wn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Cl)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let n=1;n<e.length&&e[n].parent===r;n++)r=e[n];return r}createPointerEvent(e,r,n){const i=this.allocateEvent(wn);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(e){const r=this.allocateEvent(Cl);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const n=this.allocateEvent(wn);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=r??n.type,n}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof wn&&r instanceof wn&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof yp&&r instanceof yp&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const n=e.currentTarget._events[r];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const aq=1,lq={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Q0=class J0{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new oq(null),Is.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new wn(null),this.rootWheelEvent=new Cl(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...J0.defaultEventFeatures},{set:(r,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),r[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,J0._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":r&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":r&&Object.assign(this.domElement.style,n);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=r.length;n<i;n++){const s=r[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Is.pointerMoved();const r=this.normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const n=r!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this.removeEvents(),this.domElement=e,Is.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Is.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Is.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,r,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(r-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,r.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=aq),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,r.push(n)}else r.push(e);return r}normalizeWheelEvent(e){const r=this.rootWheelEvent;return this.transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=lq[e.type]||e.type),e}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}};Q0.extension={name:"events",type:[Y.RendererSystem,Y.CanvasRendererSystem]},Q0.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let ex=Q0;ne.add(ex);function rC(t){return t==="dynamic"||t==="static"}const cq={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??rC(ex.defaultEventMode)},set interactive(t){Ee("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??ex.defaultEventMode},set eventMode(t){this._internalInteractive=rC(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof r=="object"?r.signal:void 0,s=typeof r=="object"?r.once===!0:!1,o=typeof e=="function"?void 0:e;t=n?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(t,a,o)}),s?l.once(t,a,o):l.on(t,a,o)},removeEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof bd))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};rt.mixin(cq);const uq={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};rt.mixin(uq);const dq=9,mh=100,hq=0,fq=0,nC=2,iC=1,pq=-1e3,gq=-1e3,mq=2;class q2{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ki.tablet||Ki.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${mh}px`,r.style.height=`${mh}px`,r.style.position="absolute",r.style.top=`${hq}px`,r.style.left=`${fq}px`,r.style.zIndex=nC.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${iC}px`,e.style.height=`${iC}px`,e.style.position="absolute",e.style.top=`${pq}px`,e.style.left=`${gq}px`,e.style.zIndex=mq.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const e=performance.now();if(Ki.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=i/o*l,u=s/a*l;let d=this.div;d.style.left=`${r}px`,d.style.top=`${n}px`,d.style.width=`${o}px`,d.style.height=`${a}px`;for(let h=0;h<this.children.length;h++){const f=this.children[h];if(f.renderId!==this.renderId)f._accessibleActive=!1,Sl(this.children,h,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,h--;else{d=f._accessibleDiv;let p=f.hitArea;const g=f.worldTransform;f.hitArea?(d.style.left=`${(g.tx+p.x*g.a)*c}px`,d.style.top=`${(g.ty+p.y*g.d)*u}px`,d.style.width=`${p.width*g.a*c}px`,d.style.height=`${p.height*g.d*u}px`):(p=f.getBounds(),this.capHitArea(p),d.style.left=`${p.x*c}px`,d.style.top=`${p.y*u}px`,d.style.width=`${p.width*c}px`,d.style.height=`${p.height*u}px`,d.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&d.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==d.title||f.tabIndex!==d.tabIndex)&&(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:n}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${mh}px`,r.style.height=`${mh}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=nC.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new bd(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===dq&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}q2.extension={name:"accessibility",type:[Y.RendererPlugin,Y.CanvasRendererPlugin]};ne.add(q2);const K2=class tx{constructor(e){this.stage=new gn,e=Object.assign({forceCanvas:!1},e),this.renderer=TY(e),tx._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,r){const n=tx._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};K2._plugins=[];let Z2=K2;ne.handleByList(Y.Application,Z2._plugins);class Q2{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Q2.extension=Y.Application;ne.add(Q2);const sC={loader:Y.LoadParser,resolver:Y.ResolveParser,cache:Y.CacheParser,detection:Y.DetectionParser};ne.handle(Y.Asset,t=>{const e=t.ref;Object.entries(sC).filter(([r])=>!!e[r]).forEach(([r,n])=>ne.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(sC).filter(r=>!!e[r]).forEach(r=>ne.remove(e[r]))});class yq{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function dc(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function ao(t,e){const r=t.split("?")[0],n=Ot.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const In=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||r?e(n):n):t),rx=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};function J2(t,e,r,n,i){const s=e[r];for(let o=0;o<s.length;o++){const a=s[o];r<e.length-1?J2(t.replace(n[r],a),e,r+1,n,i):i.push(t.replace(n[r],a))}}function vq(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),J2(t,i,0,r,n)}else n.push(t);return n}const vp=t=>!Array.isArray(t);class xq{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=In(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(r)){i=l.getCacheableAssets(n,r);break}}i||(i={},n.forEach(a=>{i[a]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==r&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),r instanceof re){const a=r;n.forEach(l=>{a.baseTexture!==re.EMPTY.baseTexture&&be.addToCache(a.baseTexture,l),re.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(n=>{this._cache.delete(n)}),r.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Do=new xq;class bq{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!s){for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];if(a.load&&a.test?.(e,r,this)){s=a;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,r,this),n.parser=s;for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];a.parse&&a.parse&&await a.testParse?.(i,r,this)&&(i=await a.parse(i,r,this)||i,n.parser=a)}return i})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=vp(e),o=In(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const u=Ot.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),i[c.src]=await this.promiseCache[u].promise,r&&r(++n/a)}catch(d){throw delete this.promiseCache[u],delete i[c.src],new Error(`[Loader.load] Failed to load ${u}.
${d}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const r=In(e,n=>({alias:[n],src:n})).map(async n=>{const i=Ot.toAbsolute(n.src),s=this.promiseCache[i];if(s){const o=await s.promise;delete this.promiseCache[i],s.parser?.unload?.(o,n,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var jn=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(jn||{});const _q=".json",wq="application/json",Sq={extension:{type:Y.LoadParser,priority:jn.Low},name:"loadJson",test(t){return dc(t,wq)||ao(t,_q)},async load(t){return await(await ee.ADAPTER.fetch(t)).json()}};ne.add(Sq);const Eq=".txt",Cq="text/plain",Tq={name:"loadTxt",extension:{type:Y.LoadParser,priority:jn.Low},test(t){return dc(t,Cq)||ao(t,Eq)},async load(t){return await(await ee.ADAPTER.fetch(t)).text()}};ne.add(Tq);const Pq=["normal","bold","100","200","300","400","500","600","700","800","900"],Iq=[".ttf",".otf",".woff",".woff2"],Aq=["font/ttf","font/otf","font/woff","font/woff2"],kq=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Rq(t){const e=Ot.extname(t),r=Ot.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=r.length>0;for(const s of r)if(!s.match(kq)){n=!1;break}let i=r.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const Mq=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Oq(t){return Mq.test(t)?t:encodeURI(t)}const Lq={extension:{type:Y.LoadParser,priority:jn.Low},name:"loadWebFont",test(t){return dc(t,Aq)||ao(t,Iq)},async load(t,e){const r=ee.ADAPTER.getFontFaceSet();if(r){const n=[],i=e.data?.family??Rq(t),s=e.data?.weights?.filter(a=>Pq.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){const l=s[a],c=new FontFace(i,`url(${Oq(t)})`,{...o,weight:l});await c.load(),r.add(c),n.push(c)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>ee.ADAPTER.getFontFaceSet().delete(e))}};ne.add(Lq);const Dq=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Tl=null,nx=class{constructor(){Tl||(Tl=URL.createObjectURL(new Blob([Dq],{type:"application/javascript"}))),this.worker=new Worker(Tl)}};nx.revokeObjectURL=function(){Tl&&(URL.revokeObjectURL(Tl),Tl=null)};const Fq=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Pl=null;class eO{constructor(){Pl||(Pl=URL.createObjectURL(new Blob([Fq],{type:"application/javascript"}))),this.worker=new Worker(Pl)}}eO.revokeObjectURL=function(){Pl&&(URL.revokeObjectURL(Pl),Pl=null)};let oC=0,Cy;class Nq{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new nx;r.addEventListener("message",n=>{r.terminate(),nx.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Cy===void 0&&(Cy=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Cy&&(this._createdWorkers++,e=new eO().worker,e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),n=r.id;this.resolveHash[oC]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:oC++,id:n})}}const aC=new Nq;function _d(t,e,r){t.resource.internal=!0;const n=new re(t),i=()=>{delete e.promiseCache[r],Do.has(r)&&Do.remove(r)};return n.baseTexture.once("destroyed",()=>{r in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const Bq=[".jpeg",".jpg",".png",".webp",".avif"],Uq=["image/jpeg","image/png","image/webp","image/avif"];async function zq(t){const e=await ee.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const Dg={name:"loadTextures",extension:{type:Y.LoadParser,priority:jn.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return dc(t,Uq)||ao(t,Bq)},async load(t,e,r){const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await aC.isImageBitmapSupported()?i=await aC.loadImageBitmap(t):i=await zq(t):i=await new Promise((a,l)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=t,c.complete?a(c):(c.onload=()=>a(c),c.onerror=u=>l(u))});const s={...e.data};s.resolution??(s.resolution=cs(t)),n&&s.resourceOptions?.ownsImageBitmap===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new be(i,s);return o.resource.src=t,_d(o,r,t)},unload(t){t.destroy(!0)}};ne.add(Dg);const $q=".svg",jq="image/svg+xml",Vq={extension:{type:Y.LoadParser,priority:jn.High},name:"loadSVG",test(t){return dc(t,jq)||ao(t,$q)},async testParse(t){return H0.test(t)},async parse(t,e,r){const n=new H0(t,e?.data?.resourceOptions);await n.load();const i=new be(n,{resolution:cs(t),...e?.data});return i.resource.src=e.src,_d(i,r,e.src)},async load(t,e){return(await ee.ADAPTER.fetch(t)).text()},unload:Dg.unload};ne.add(Vq);const Gq=[".mp4",".m4v",".webm",".ogv"],Wq=["video/mp4","video/webm","video/ogg"],Hq={name:"loadVideo",extension:{type:Y.LoadParser,priority:jn.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return dc(t,Wq)||ao(t,Gq)},async load(t,e,r){let n;const i=await(await ee.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(i);try{const o={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...e?.data?.resourceOptions,autoLoad:!0},a=new H2(s,o);await a.load();const l=new be(a,{alphaMode:await Z9(),resolution:cs(t),...e?.data});l.resource.src=t,n=_d(l,r,t),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(o){throw URL.revokeObjectURL(s),o}return n},unload(t){t.destroy(!0)}};ne.add(Hq);class Xq{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(e){const{alias:r,name:n,src:i,srcs:s}=e;return In(r||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>a?.src??a?.srcs??a):o?.src||o?.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];Array.isArray(r)?r.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);n.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));n.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(r).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof r[i]=="string")this.add({alias:s,src:r[i]});else if(Array.isArray(r[i]))this.add({alias:s,src:r[i]});else{const o=r[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}n.push(...s)}),this._bundles[e]=n}add(e,r,n,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Ee("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:r,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},In(o).forEach(l=>{const{src:c,srcs:u}=l;let{data:d,format:h,loadParser:f}=l;const p=In(c||u).map(v=>typeof v=="string"?vq(v):Array.isArray(v)?v:[v]),g=this.getAlias(l);Array.isArray(g)?g.forEach(a):a(g);const x=[];p.forEach(v=>{v.forEach(y=>{let m={};if(typeof y!="object"){m.src=y;for(let _=0;_<this._parsers.length;_++){const C=this._parsers[_];if(C.test(y)){m=C.parse(y);break}}}else d=y.data??d,h=y.format??h,f=y.loadParser??f,m={...m,...y};if(!g)throw new Error(`[Resolver] alias is undefined for this asset: ${m.src}`);m=this.buildResolvedAsset(m,{aliases:g,data:d,format:h,loadParser:f}),x.push(m)})}),g.forEach(v=>{this._assetMap[v]=x})})}resolveBundle(e){const r=vp(e);e=In(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(i,l)]=c}n[i]=a}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(e){const r=vp(e);e=In(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a?.priority.forEach(l=>{a.params[l].forEach(c=>{const u=s.filter(d=>d[l]?d[l]===c:!1);u.length&&(s=u)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}buildResolvedAsset(e,r){const{aliases:n,data:i,loadParser:s,format:o}=r;return(this._basePath||this._rootPath)&&(e.src=Ot.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??Ot.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class Yq{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Xq,this.loader=new bq,this.cache=Do,this._backgroundLoader=new yq(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const r=e.texturePreference?.resolution??1,n=typeof r=="number"?[r]:r,i=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,n,i,s){this.resolver.add(e,r,n,i,s)}async load(e,r){this._initialized||await this.init();const n=vp(e),i=In(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const c=()=>{r?.(++a/l)},u=o.map(d=>{const h=i[d];return l+=Object.keys(h).length,this._mapLoadToResolve(h,c).then(f=>{s[d]=f})});return await Promise.all(u),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Do.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=Do.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const c=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[i[l]]=c,Do.set(u,c)}),o}async unload(e){this._initialized||await this.init();const r=In(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=In(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{Do.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?r=await n.add(r):e.skipDetections||(r=await n.remove(r));return r=r.filter((n,i)=>r.indexOf(n)===i),r}get detections(){return this._detections}get preferWorkers(){return Dg.config.preferWorkers}set preferWorkers(e){Ee("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const yh=new Yq;ne.handleByList(Y.LoadParser,yh.loader.parsers).handleByList(Y.ResolveParser,yh.resolver.parsers).handleByList(Y.CacheParser,yh.cache.parsers).handleByList(Y.DetectionParser,yh.detections);const qq={extension:Y.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof re),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};ne.add(qq);async function tO(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const Kq={extension:{type:Y.DetectionParser,priority:1},test:async()=>tO("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};ne.add(Kq);const Zq={extension:{type:Y.DetectionParser,priority:0},test:async()=>tO("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};ne.add(Zq);const lC=["png","jpg","jpeg"],Qq={extension:{type:Y.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...lC],remove:async t=>t.filter(e=>!lC.includes(e))};ne.add(Qq);const Jq="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function E_(t){return Jq?!1:document.createElement("video").canPlayType(t)!==""}const eK={extension:{type:Y.DetectionParser,priority:0},test:async()=>E_("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};ne.add(eK);const tK={extension:{type:Y.DetectionParser,priority:0},test:async()=>E_("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};ne.add(tK);const rK={extension:{type:Y.DetectionParser,priority:0},test:async()=>E_("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};ne.add(rK);const nK={extension:Y.ResolveParser,test:Dg.test,parse:t=>({resolution:parseFloat(ee.RETINA_PREFIX.exec(t)?.[1]??"1"),format:Ot.extname(t).slice(1),src:t})};ne.add(nK);var Nt=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(Nt||{});const xp={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let ei,Na;function cC(){Na={bptc:ei.getExtension("EXT_texture_compression_bptc"),astc:ei.getExtension("WEBGL_compressed_texture_astc"),etc:ei.getExtension("WEBGL_compressed_texture_etc"),s3tc:ei.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ei.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:ei.getExtension("WEBGL_compressed_texture_pvrtc")||ei.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:ei.getExtension("WEBGL_compressed_texture_etc1"),atc:ei.getExtension("WEBGL_compressed_texture_atc")}}const iK={extension:{type:Y.DetectionParser,priority:2},test:async()=>{const t=ee.ADAPTER.createCanvas().getContext("webgl");return t?(ei=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{Na||cC();const e=[];for(const r in Na)Na[r]&&e.push(r);return[...e,...t]},remove:async t=>(Na||cC(),t.filter(e=>!(e in Na)))};ne.add(iK);class sK extends Ag{constructor(e,r={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,r),this.origin=n,this.buffer=i?new O0(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new O0(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Ho extends sK{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=Ho._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||Ho._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:u}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=Ho._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,r,n,i,s,o,a){const l=new Array(n);let c=e.byteOffset,u=o,d=a,h=u+i-1&~(i-1),f=d+s-1&~(s-1),p=h*f*xp[r];for(let g=0;g<n;g++)l[g]={levelID:g,levelWidth:n>1?u:h,levelHeight:n>1?d:f,levelBuffer:new Uint8Array(e.buffer,c,p)},c+=p,u=u>>1||1,d=d>>1||1,h=u+i-1&~(i-1),f=d+s-1&~(s-1),p=h*f*xp[r];return l}}const Ty=4,vh=124,oK=32,uC=20,aK=542327876,xh={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},lK={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},bh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},cK=1,uK=2,dK=4,hK=64,fK=512,pK=131072,gK=827611204,mK=861165636,yK=894720068,vK=808540228,xK=4,bK={[gK]:Nt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[mK]:Nt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[yK]:Nt.COMPRESSED_RGBA_S3TC_DXT5_EXT},_K={70:Nt.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Nt.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Nt.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Nt.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Nt.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Nt.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Nt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Nt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Nt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Nt.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Nt.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Nt.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Nt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function wK(t){const e=new Uint32Array(t);if(e[0]!==aK)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,vh/Uint32Array.BYTES_PER_ELEMENT),n=r[xh.HEIGHT],i=r[xh.WIDTH],s=r[xh.MIPMAP_COUNT],o=new Uint32Array(t,xh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,oK/Uint32Array.BYTES_PER_ELEMENT),a=o[cK];if(a&dK){const l=o[lK.FOURCC];if(l!==vK){const y=bK[l],m=Ty+vh,_=new Uint8Array(t,m);return[new Ho(_,{format:y,width:i,height:n,levels:s})]}const c=Ty+vh,u=new Uint32Array(e.buffer,c,uC/Uint32Array.BYTES_PER_ELEMENT),d=u[bh.DXGI_FORMAT],h=u[bh.RESOURCE_DIMENSION],f=u[bh.MISC_FLAG],p=u[bh.ARRAY_SIZE],g=_K[d];if(g===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(f===xK)throw new Error("DDSParser does not support cubemap textures");if(h===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,v=Ty+vh+uC;if(p===1)x.push(new Uint8Array(t,v));else{const y=xp[g];let m=0,_=i,C=n;for(let T=0;T<s;T++){const S=Math.max(1,_+3&-4),P=Math.max(1,C+3&-4),I=S*P*y;m+=I,_=_>>>1,C=C>>>1}let E=v;for(let T=0;T<p;T++)x.push(new Uint8Array(t,E,m)),E+=m}return x.map(y=>new Ho(y,{format:g,width:i,height:n,levels:s}))}throw a&hK?new Error("DDSParser does not support uncompressed texture data."):a&fK?new Error("DDSParser does not supported YUV uncompressed texture data."):a&pK?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&uK?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const dC=[171,75,84,88,32,49,49,187,13,10,26,10],SK=67305985,bn={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},ix=64,hC={[ce.UNSIGNED_BYTE]:1,[ce.UNSIGNED_SHORT]:2,[ce.INT]:4,[ce.UNSIGNED_INT]:4,[ce.FLOAT]:4,[ce.HALF_FLOAT]:8},EK={[W.RGBA]:4,[W.RGB]:3,[W.RG]:2,[W.RED]:1,[W.LUMINANCE]:1,[W.LUMINANCE_ALPHA]:2,[W.ALPHA]:1},CK={[ce.UNSIGNED_SHORT_4_4_4_4]:2,[ce.UNSIGNED_SHORT_5_5_5_1]:2,[ce.UNSIGNED_SHORT_5_6_5]:2};function TK(t,e,r=!1){const n=new DataView(e);if(!PK(t,n))return null;const i=n.getUint32(bn.ENDIANNESS,!0)===SK,s=n.getUint32(bn.GL_TYPE,i),o=n.getUint32(bn.GL_FORMAT,i),a=n.getUint32(bn.GL_INTERNAL_FORMAT,i),l=n.getUint32(bn.PIXEL_WIDTH,i),c=n.getUint32(bn.PIXEL_HEIGHT,i)||1,u=n.getUint32(bn.PIXEL_DEPTH,i)||1,d=n.getUint32(bn.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=n.getUint32(bn.NUMBER_OF_FACES,i),f=n.getUint32(bn.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(bn.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const g=4,x=4,v=l+3&-4,y=c+3&-4,m=new Array(d);let _=l*c;s===0&&(_=v*y);let C;if(s!==0?hC[s]?C=hC[s]*EK[o]:C=CK[s]:C=xp[a],C===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const E=r?AK(n,p,i):null;let T=_*C,S=l,P=c,I=v,M=y,k=ix+p;for(let R=0;R<f;R++){const O=n.getUint32(k,i);let V=k+4;for(let U=0;U<d;U++){let F=m[U];F||(F=m[U]=new Array(f)),F[R]={levelID:R,levelWidth:f>1||s!==0?S:I,levelHeight:f>1||s!==0?P:M,levelBuffer:new Uint8Array(e,V,T)},V+=T}k+=O+4,k=k%4!==0?k+4-k%4:k,S=S>>1||1,P=P>>1||1,I=S+g-1&-4,M=P+x-1&-4,T=I*M*C}return s!==0?{uncompressed:m.map(R=>{let O=R[0].levelBuffer,V=!1;return s===ce.FLOAT?O=new Float32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4):s===ce.UNSIGNED_INT?(V=!0,O=new Uint32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4)):s===ce.INT&&(V=!0,O=new Int32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4)),{resource:new Ag(O,{width:R[0].levelWidth,height:R[0].levelHeight}),type:s,format:V?IK(o):o}}),kvData:E}:{compressed:m.map(R=>new Ho(null,{format:a,width:l,height:c,levels:f,levelBuffers:R})),kvData:E}}function PK(t,e){for(let r=0;r<dC.length;r++)if(e.getUint8(r)!==dC[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function IK(t){switch(t){case W.RGBA:return W.RGBA_INTEGER;case W.RGB:return W.RGB_INTEGER;case W.RG:return W.RG_INTEGER;case W.RED:return W.RED_INTEGER;default:return t}}function AK(t,e,r){const n=new Map;let i=0;for(;i<e;){const s=t.getUint32(ix+i,r),o=ix+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),u=new DataView(t.buffer,o+l+1,s-l-1);n.set(c,u),i+=4+s+a}return n}const kK={extension:{type:Y.LoadParser,priority:jn.High},name:"loadDDS",test(t){return ao(t,".dds")},async load(t,e,r){const n=await(await ee.ADAPTER.fetch(t)).arrayBuffer(),i=wK(n).map(s=>{const o=new be(s,{mipmap:Pi.OFF,alphaMode:Er.NO_PREMULTIPLIED_ALPHA,resolution:cs(t),...e.data});return _d(o,r,t)});return i.length===1?i[0]:i},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};ne.add(kK);const RK={extension:{type:Y.LoadParser,priority:jn.High},name:"loadKTX",test(t){return ao(t,".ktx")},async load(t,e,r){const n=await(await ee.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=TK(t,n),a=i??s,l={mipmap:Pi.OFF,alphaMode:Er.NO_PREMULTIPLIED_ALPHA,resolution:cs(t),...e.data},c=a.map(u=>{a===s&&Object.assign(l,{type:u.type,format:u.format});const d=u.resource??u,h=new be(d,l);return h.ktxKeyValueData=o,_d(h,r,t)});return c.length===1?c[0]:c},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};ne.add(RK);const MK=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],OK={extension:Y.ResolveParser,test:t=>{const e=Ot.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{const e=t.split("."),r=e.pop();if(["ktx","dds"].includes(r)){const n=e.pop();if(MK.includes(n))return{resolution:parseFloat(ee.RETINA_PREFIX.exec(t)?.[1]??"1"),format:n,src:t}}return{resolution:parseFloat(ee.RETINA_PREFIX.exec(t)?.[1]??"1"),format:r,src:t}}};ne.add(OK);const _h=new _e,LK=4,rO=class Zc{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,r,n,i){const s=new Image;return s.src=await this.base64(e,r,n,i),s}async base64(e,r,n,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},r,n)});if(s.toDataURL!==void 0)return s.toDataURL(r,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:r,quality:n});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,r);o&&Zc._flipY(n,i,s),a&&Zc._unpremultiplyAlpha(n);const l=new pX(i,s,1),c=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,r);return o&&Zc._flipY(n,i,s),a&&Zc._unpremultiplyAlpha(n),n}_rawPixels(e,r){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof ma?a=e:(a=n.generateTexture(e,{region:r,resolution:n.resolution,multisample:n.multisample}),l=!0,r&&(_h.width=r.width,_h.height=r.height,r=_h)));const c=n.gl;if(a){if(i=a.baseTexture.resolution,r=r??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===W.RGBA,!l){n.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[n.CONTEXT_UID];f.blitFramebuffer&&n.framebuffer.bind(f.blitFramebuffer)}}else i=n.resolution,r||(r=_h,r.width=n.width/i,r.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const u=Math.max(Math.round(r.width*i),1),d=Math.max(Math.round(r.height*i),1),h=new Uint8Array(LK*u*d);return c.readPixels(Math.round(r.x*i),Math.round(r.y*i),u,d,c.RGBA,c.UNSIGNED_BYTE,h),l&&a?.destroy(!0),{pixels:h,width:u,height:d,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,r,n){const i=r<<2,s=n>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,c=(n-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const r=e.length;for(let n=0;n<r;n+=4){const i=e[n+3];if(i!==0){const s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};rO.extension={name:"extract",type:Y.RendererSystem};let DK=rO;ne.add(DK);const bp={build(t){const e=t.points;let r,n,i,s,o,a;if(t.type===jt.CIRC){const p=t.shape;r=p.x,n=p.y,o=a=p.radius,i=s=0}else if(t.type===jt.ELIP){const p=t.shape;r=p.x,n=p.y,o=p.width,a=p.height,i=s=0}else{const p=t.shape,g=p.width/2,x=p.height/2;r=p.x+g,n=p.y+x,o=a=Math.max(0,Math.min(p.radius,Math.min(g,x))),i=g-o,s=x-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,e[5]=e[7]=n-s;return}let u=0,d=l*4+(i?2:0)+2,h=d,f=c;{const p=i+o,g=s,x=r+p,v=r-p,y=n+g;if(e[u++]=x,e[u++]=y,e[--d]=y,e[--d]=v,s){const m=n-g;e[h++]=v,e[h++]=m,e[--f]=m,e[--f]=x}}for(let p=1;p<l;p++){const g=Math.PI/2*(p/l),x=i+Math.cos(g)*o,v=s+Math.sin(g)*a,y=r+x,m=r-x,_=n+v,C=n-v;e[u++]=y,e[u++]=_,e[--d]=_,e[--d]=m,e[h++]=m,e[h++]=C,e[--f]=C,e[--f]=y}{const p=i,g=s+a,x=r+p,v=r-p,y=n+g,m=n-g;e[u++]=x,e[u++]=y,e[--f]=m,e[--f]=x,i&&(e[u++]=v,e[u++]=y,e[--f]=m,e[--f]=v)}},triangulate(t,e){const r=t.points,n=e.points,i=e.indices;if(r.length===0)return;let s=n.length/2;const o=s;let a,l;if(t.type!==jt.RREC){const u=t.shape;a=u.x,l=u.y}else{const u=t.shape;a=u.x+u.width/2,l=u.y+u.height/2}const c=t.matrix;n.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),s++,n.push(r[0],r[1]);for(let u=2;u<r.length;u+=2)n.push(r[u],r[u+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function fC(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let i=0,s=t[r-2],o=t[r-1];i<r;i+=2){const a=t[i],l=t[i+1];n+=(a-s)*(l+o),s=a,o=l}if(!e&&n>0||e&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,a=r-s-1,l=s,c=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const nO={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,i=e.points,s=e.indices;if(r.length>=6){fC(r,!1);const o=[];for(let c=0;c<n.length;c++){const u=n[c];fC(u.points,!0),o.push(r.length/2),r=r.concat(u.points)}const a=zW(r,o,2);if(!a)return;const l=i.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<r.length;c++)i.push(r[c])}}},FK={build(t){const e=t.shape,r=e.x,n=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(t,e){const r=t.points,n=e.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},NK={build(t){bp.build(t)},triangulate(t,e){bp.triangulate(t,e)}};var Qr=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Qr||{}),Ls=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(Ls||{});const Xl={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class pC{static curveTo(e,r,n,i,s,o){const a=o[o.length-2],l=o[o.length-1]-r,c=a-e,u=i-r,d=n-e,h=Math.abs(l*d-c*u);if(h<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const f=l*l+c*c,p=u*u+d*d,g=l*u+c*d,x=s*Math.sqrt(f)/h,v=s*Math.sqrt(p)/h,y=x*g/f,m=v*g/p,_=x*d+v*c,C=x*u+v*l,E=c*(v+y),T=l*(v+y),S=d*(x+m),P=u*(x+m),I=Math.atan2(T-C,E-_),M=Math.atan2(P-C,S-_);return{cx:_+e,cy:C+r,radius:s,startAngle:I,endAngle:M,anticlockwise:c*u>d*l}}static arc(e,r,n,i,s,o,a,l,c){const u=a-o,d=Xl._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/dp)*40),h=u/(d*2),f=h*2,p=Math.cos(h),g=Math.sin(h),x=d-1,v=x%1/x;for(let y=0;y<=x;++y){const m=y+v*y,_=h+o+f*m,C=Math.cos(_),E=-Math.sin(_);c.push((p*C+g*E)*s+n,(p*-E+g*C)*s+i)}}}class BK{constructor(){this.reset()}begin(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class C_{static curveLength(e,r,n,i,s,o,a,l){let c=0,u=0,d=0,h=0,f=0,p=0,g=0,x=0,v=0,y=0,m=0,_=e,C=r;for(let E=1;E<=10;++E)u=E/10,d=u*u,h=d*u,f=1-u,p=f*f,g=p*f,x=g*e+3*p*u*n+3*f*d*s+h*a,v=g*r+3*p*u*i+3*f*d*o+h*l,y=_-x,m=C-v,_=x,C=v,c+=Math.sqrt(y*y+m*m);return c}static curveTo(e,r,n,i,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const u=Xl._segmentsCount(C_.curveLength(l,c,e,r,n,i,s,o));let d=0,h=0,f=0,p=0,g=0;a.push(l,c);for(let x=1,v=0;x<=u;++x)v=x/u,d=1-v,h=d*d,f=h*d,p=v*v,g=p*v,a.push(f*l+3*h*v*e+3*d*p*n+g*s,f*c+3*h*v*r+3*d*p*i+g*o)}}function gC(t,e,r,n,i,s,o,a){const l=t-r*i,c=e-n*i,u=t+r*s,d=e+n*s;let h,f;o?(h=n,f=-r):(h=-n,f=r);const p=l+h,g=c+f,x=u+h,v=d+f;return a.push(p,g,x,v),2}function vo(t,e,r,n,i,s,o,a){const l=r-t,c=n-e;let u=Math.atan2(l,c),d=Math.atan2(i-t,s-e);a&&u<d?u+=Math.PI*2:!a&&u>d&&(d+=Math.PI*2);let h=u;const f=d-u,p=Math.abs(f),g=Math.sqrt(l*l+c*c),x=(15*p*Math.sqrt(g)/Math.PI>>0)+1,v=f/x;if(h+=v,a){o.push(t,e,r,n);for(let y=1,m=h;y<x;y++,m+=v)o.push(t,e,t+Math.sin(m)*g,e+Math.cos(m)*g);o.push(t,e,i,s)}else{o.push(r,n,t,e);for(let y=1,m=h;y<x;y++,m+=v)o.push(t+Math.sin(m)*g,e+Math.cos(m)*g,t,e);o.push(i,s,t,e)}return x*2}function UK(t,e){const r=t.shape;let n=t.points||r.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=t.lineStyle,o=new Te(n[0],n[1]),a=new Te(n[n.length-2],n[n.length-1]),l=r.type!==jt.POLY||r.closeStroke,c=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){n=n.slice(),c&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const F=(o.x+a.x)*.5,L=(a.y+o.y)*.5;n.unshift(F,L),n.push(F,L)}const u=e.points,d=n.length/2;let h=n.length;const f=u.length/2,p=s.width/2,g=p*p,x=s.miterLimit*s.miterLimit;let v=n[0],y=n[1],m=n[2],_=n[3],C=0,E=0,T=-(y-_),S=v-m,P=0,I=0,M=Math.sqrt(T*T+S*S);T/=M,S/=M,T*=p,S*=p;const k=s.alignment,R=(1-k)*2,O=k*2;l||(s.cap===Ls.ROUND?h+=vo(v-T*(R-O)*.5,y-S*(R-O)*.5,v-T*R,y-S*R,v+T*O,y+S*O,u,!0)+2:s.cap===Ls.SQUARE&&(h+=gC(v,y,T,S,R,O,!0,u))),u.push(v-T*R,y-S*R,v+T*O,y+S*O);for(let F=1;F<d-1;++F){v=n[(F-1)*2],y=n[(F-1)*2+1],m=n[F*2],_=n[F*2+1],C=n[(F+1)*2],E=n[(F+1)*2+1],T=-(y-_),S=v-m,M=Math.sqrt(T*T+S*S),T/=M,S/=M,T*=p,S*=p,P=-(_-E),I=m-C,M=Math.sqrt(P*P+I*I),P/=M,I/=M,P*=p,I*=p;const L=m-v,B=y-_,A=m-C,N=E-_,z=L*A+B*N,q=B*A-N*L,ue=q<0;if(Math.abs(q)<.001*Math.abs(z)){u.push(m-T*R,_-S*R,m+T*O,_+S*O),z>=0&&(s.join===Qr.ROUND?h+=vo(m,_,m-T*R,_-S*R,m-P*R,_-I*R,u,!1)+4:h+=2,u.push(m-P*O,_-I*O,m+P*R,_+I*R));continue}const xe=(-T+v)*(-S+_)-(-T+m)*(-S+y),we=(-P+C)*(-I+_)-(-P+m)*(-I+E),Me=(L*we-A*xe)/q,$=(N*xe-B*we)/q,j=(Me-m)*(Me-m)+($-_)*($-_),le=m+(Me-m)*R,X=_+($-_)*R,oe=m-(Me-m)*O,he=_-($-_)*O,Ue=Math.min(L*L+B*B,A*A+N*N),ht=ue?R:O,nr=Ue+ht*ht*g,Mi=j<=nr;let Gn=s.join;if(Gn===Qr.MITER&&j/g>x&&(Gn=Qr.BEVEL),Mi)switch(Gn){case Qr.MITER:{u.push(le,X,oe,he);break}case Qr.BEVEL:{ue?u.push(le,X,m+T*O,_+S*O,le,X,m+P*O,_+I*O):u.push(m-T*R,_-S*R,oe,he,m-P*R,_-I*R,oe,he),h+=2;break}case Qr.ROUND:{ue?(u.push(le,X,m+T*O,_+S*O),h+=vo(m,_,m+T*O,_+S*O,m+P*O,_+I*O,u,!0)+4,u.push(le,X,m+P*O,_+I*O)):(u.push(m-T*R,_-S*R,oe,he),h+=vo(m,_,m-T*R,_-S*R,m-P*R,_-I*R,u,!1)+4,u.push(m-P*R,_-I*R,oe,he));break}}else{switch(u.push(m-T*R,_-S*R,m+T*O,_+S*O),Gn){case Qr.MITER:{ue?u.push(oe,he,oe,he):u.push(le,X,le,X),h+=2;break}case Qr.ROUND:{ue?h+=vo(m,_,m+T*O,_+S*O,m+P*O,_+I*O,u,!0)+2:h+=vo(m,_,m-T*R,_-S*R,m-P*R,_-I*R,u,!1)+2;break}}u.push(m-P*R,_-I*R,m+P*O,_+I*O),h+=2}}v=n[(d-2)*2],y=n[(d-2)*2+1],m=n[(d-1)*2],_=n[(d-1)*2+1],T=-(y-_),S=v-m,M=Math.sqrt(T*T+S*S),T/=M,S/=M,T*=p,S*=p,u.push(m-T*R,_-S*R,m+T*O,_+S*O),l||(s.cap===Ls.ROUND?h+=vo(m-T*(R-O)*.5,_-S*(R-O)*.5,m-T*R,_-S*R,m+T*O,_+S*O,u,!1)+2:s.cap===Ls.SQUARE&&(h+=gC(m,_,T,S,R,O,!1,u)));const V=e.indices,U=Xl.epsilon*Xl.epsilon;for(let F=f;F<h+f-2;++F)v=u[F*2],y=u[F*2+1],m=u[(F+1)*2],_=u[(F+1)*2+1],C=u[(F+2)*2],E=u[(F+2)*2+1],!(Math.abs(v*(_-E)+m*(E-y)+C*(y-_))<U)&&V.push(F,F+1,F+2)}function zK(t,e){let r=0;const n=t.shape,i=t.points||n.points,s=n.type!==jt.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,c=o.length/2;let u=c;for(o.push(i[0],i[1]),r=1;r<l;r++)o.push(i[r*2],i[r*2+1]),a.push(u,u+1),u++;s&&a.push(u,c)}function mC(t,e){t.lineStyle.native?zK(t,e):UK(t,e)}class T_{static curveLength(e,r,n,i,s,o){const a=e-2*n+s,l=r-2*i+o,c=2*n-2*e,u=2*i-2*r,d=4*(a*a+l*l),h=4*(a*c+l*u),f=c*c+u*u,p=2*Math.sqrt(d+h+f),g=Math.sqrt(d),x=2*d*g,v=2*Math.sqrt(f),y=h/g;return(x*p+g*h*(p-v)+(4*f*d-h*h)*Math.log((2*g+y+p)/(y+v)))/(4*x)}static curveTo(e,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],l=Xl._segmentsCount(T_.curveLength(o,a,e,r,n,i));let c=0,u=0;for(let d=1;d<=l;++d){const h=d/l;c=o+(e-o)*h,u=a+(r-a)*h,s.push(c+(e+(n-e)*h-c)*h,u+(r+(i-r)*h-u)*h)}}}const Py={[jt.POLY]:nO,[jt.CIRC]:bp,[jt.ELIP]:bp,[jt.RECT]:FK,[jt.RREC]:NK},yC=[],wh=[];class _p{constructor(e,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=e.type}clone(){return new _p(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Ia=new Te,iO=class sO extends c2{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new mp,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),wh.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r.reset(),yC.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,r=null,n=null,i=null){const s=new _p(e,r,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,r=null){if(!this.graphicsData.length)return null;const n=new _p(e,null,null,r),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const r=this.graphicsData;for(let n=0;n<r.length;++n){const i=r[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,Ia):Ia.copyFrom(e),i.shape.contains(Ia.x,Ia.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(Ia.x,Ia.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,r=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let l=this.shapeIndex;l<r.length;l++){this.shapeIndex++;const c=r[l],u=c.fillStyle,d=c.lineStyle;Py[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(u.visible||d.visible)&&this.processHoles(c.holes);for(let h=0;h<2;h++){const f=h===0?u:d;if(!f.visible)continue;const p=f.texture.baseTexture,g=this.indices.length,x=this.points.length/2;p.wrapMode=Vs.REPEAT,h===0?this.processFill(c):this.processLine(c);const v=this.points.length/2-x;v!==0&&(n&&!this._compareStyles(i,f)&&(n.end(g,x),n=null),n||(n=yC.pop()||new BK,n.begin(f,g,x),this.batches.push(n),i=f),this.addUvs(this.points,e,f.texture,x,v,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,r=this.graphicsData.length;e<r;e++){const n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let r=0,n=e.length;r<n;r++){const i=e[r];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<sO.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++be._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),wh.push(this.drawCalls[d]);this.drawCalls.length=0;const r=this.colors,n=this.textureIds;let i=wh.pop();i||(i=new F0,i.texArray=new z0),i.texArray.count=0,i.start=0,i.size=0,i.type=pi.TRIANGLES;let s=0,o=null,a=0,l=!1,c=pi.TRIANGLES,u=0;this.drawCalls.push(i);for(let d=0;d<this.batches.length;d++){const h=this.batches[d],f=8,p=h.style,g=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,c=l?pi.LINES:pi.TRIANGLES,o=null,s=f,e++),o!==g&&(o=g,g._batchEnabled!==e&&(s===f&&(e++,s=0,i.size>0&&(i=wh.pop(),i||(i=new F0,i.texArray=new z0),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),g.touched=1,g._batchEnabled=e,g._batchLocation=s,g.wrapMode=Vs.REPEAT,i.texArray.elements[i.texArray.count++]=g,s++)),i.size+=h.size,u+=h.size,a=g._batchLocation,this.addColors(r,p.color,p.alpha,h.attribSize,h.attribStart),this.addTextureIds(n,a,h.attribSize,h.attribStart)}be._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,r=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=r[c*2],o[l++]=r[c*2+1],a[l++]=n[c],o[l++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?nO.triangulate(e,this):Py[e.type].triangulate(e,this)}processLine(e){mC(e,this);for(let r=0;r<e.holes.length;r++)mC(e.holes[r],this)}processHoles(e){for(let r=0;r<e.length;r++){const n=e[r];Py[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,r){for(let n=0;n<e.length/2;n++){const i=e[n*2],s=e[n*2+1];e[n*2]=r.a*i+r.c*s+r.tx,e[n*2+1]=r.b*i+r.d*s+r.ty}}addColors(e,r,n,i,s=0){const o=He.shared.setValue(r).toLittleEndianNumber(),a=He.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,r,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=r}addUvs(e,r,n,i,s,o=null){let a=0;const l=r.length,c=n.frame;for(;a<s;){let d=e[(i+a)*2],h=e[(i+a)*2+1];if(o){const f=o.a*d+o.c*h+o.tx;h=o.b*d+o.d*h+o.ty,d=f}a++,r.push(d/c.width,h/c.height)}const u=n.baseTexture;(c.width<u.width||c.height<u.height)&&this.adjustUvs(r,n,l,s)}adjustUvs(e,r,n,i){const s=r.baseTexture,o=1e-6,a=n+i*2,l=r.frame,c=l.width/s.width,u=l.height/s.height;let d=l.x/l.width,h=l.y/l.height,f=Math.floor(e[n]+o),p=Math.floor(e[n+1]+o);for(let g=n+2;g<a;g+=2)f=Math.min(f,Math.floor(e[g]+o)),p=Math.min(p,Math.floor(e[g+1]+o));d-=f,h-=p;for(let g=n;g<a;g+=2)e[g]=(e[g]+d)*c,e[g+1]=(e[g+1]+h)*u}};iO.BATCHABLE_SIZE=100;let $K=iO;class Fg{constructor(){this.color=16777215,this.alpha=1,this.texture=re.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Fg;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=re.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class P_ extends Fg{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Ls.BUTT,this.join=Qr.MITER,this.miterLimit=10}clone(){const e=new P_;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Ls.BUTT,this.join=Qr.MITER,this.miterLimit=10}}const Iy={},sx=class af extends gn{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Fg,this._lineStyle=new P_,this._matrix=null,this._holeMode=!1,this.state=Ri.for2d(),this._geometry=e||new $K,this._geometry.refCount++,this._transformID=-1,this._tintColor=new He(16777215),this.blendMode=ge.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new af(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,r=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:r,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const r={width:0,texture:re.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Ls.BUTT,join:Qr.MITER,miterLimit:10};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new Wo,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new Wo,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this}lineTo(e,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==r)&&n.push(e,r),this}_initCurve(e=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)}quadraticCurveTo(e,r,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),T_.curveTo(e,r,n,i,s),this}bezierCurveTo(e,r,n,i,s,o){return this._initCurve(),C_.curveTo(e,r,n,i,s,o,this.currentPath.points),this}arcTo(e,r,n,i,s){this._initCurve(e,r);const o=this.currentPath.points,a=pC.curveTo(e,r,n,i,s,o);if(a){const{cx:l,cy:c,radius:u,startAngle:d,endAngle:h,anticlockwise:f}=a;this.arc(l,c,u,d,h,f)}return this}arc(e,r,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=dp:o&&i<=s&&(i+=dp),s-i===0)return this;const a=e+Math.cos(i)*n,l=r+Math.sin(i)*n,c=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const d=Math.abs(u[u.length-2]-a),h=Math.abs(u[u.length-1]-l);d<c&&h<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return pC.arc(a,l,e,r,n,i,s,o,u),this}beginFill(e=0,r){return this.beginTextureFill({texture:re.WHITE,color:e,alpha:r})}normalizeColor(e){const r=He.shared.setValue(e.color??0);e.color=r.toNumber(),e.alpha??(e.alpha=r.alpha)}beginTextureFill(e){const r={texture:re.WHITE,color:16777215,matrix:null};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,r,n,i){return this.drawShape(new _e(e,r,n,i))}drawRoundedRect(e,r,n,i,s){return this.drawShape(new Mg(e,r,n,i,s))}drawCircle(e,r,n){return this.drawShape(new kg(e,r,n))}drawEllipse(e,r,n,i){return this.drawShape(new Rg(e,r,n,i))}drawPolygon(...e){let r,n=!0;const i=e[0];i.points?(n=i.closeStroke,r=i.points):Array.isArray(e[0])?r=e[0]:r=e;const s=new Wo(r);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===jt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,r=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),u={vertexData:a,blendMode:r,indices:c,uvs:l,_batchRGB:He.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const i=this.batches[r];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const r=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=r.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,He.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(r),e.geometry.bind(n,r),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,r){const{texArray:n,type:i,size:s,start:o}=r,a=n.count;for(let l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let r=this.shader;const n=this.pluginName;if(!r){if(!Iy[n]){const{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ne,default:Fn.from({uSamplers:s},!0)},a=e.plugins[n]._shader.program;Iy[n]=new _i(a,o)}r=Iy[n]}return r}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:r,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,r,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,af._TEMP_POINT),this._geometry.containsPoint(af._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r._tintRGB=He.shared.setValue(this._tintColor).multiply(r._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,c=this._geometry.points,u=this.vertexData;let d=0;for(let h=0;h<c.length;h+=2){const f=c[h],p=c[h+1];u[d++]=n*f+s*p+a,u[d++]=o*p+i*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};sx.curves=Xl,sx._TEMP_POINT=new Te;let oO=sx;class jK{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Ay=new Te,vC=new Wo,aO=class lO extends gn{constructor(e,r,n,i=pi.TRIANGLES){super(),this.geometry=e,this.shader=r,this.state=n||Ri.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ee.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===pi.TRIANGLES&&r.length<lO.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,u=i.ty,d=this.vertexData;for(let h=0;h<d.length/2;h++){const f=r[h*2],p=r[h*2+1];d[h*2]=s*f+a*p+c,d[h*2+1]=o*f+l*p+u}if(this._roundPixels){const h=ee.RESOLUTION;for(let f=0;f<d.length;++f)d[f]=Math.round(d[f]*h)/h}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new jK(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Ay);const r=this.geometry.getBuffer("aVertexPosition").data,n=vC.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,c=i[a+1]*2,u=i[a+2]*2;if(n[0]=r[l],n[1]=r[l+1],n[2]=r[c],n[3]=r[c+1],n[4]=r[u],n[5]=r[u+1],vC.contains(Ay.x,Ay.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};aO.BATCHABLE_SIZE=100;let xC=aO;class VK extends qs{constructor(e,r,n){super();const i=new ut(e),s=new ut(r,!0),o=new ut(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,ce.FLOAT).addAttribute("aTextureCoord",s,2,!1,ce.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var GK=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,WK=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class bC extends _i{constructor(e,r){const n={uSampler:e,alpha:1,uTextureMatrix:Ne.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||Zi.from(WK,GK),n),this._colorDirty=!1,this.uvMatrix=new S2(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new He(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;He.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class _C{constructor(e,r,n){this.geometry=new qs,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ce.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new ut(dX(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new ut(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ut(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ce.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ce.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,r,n,s.type===ce.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,r,n,s.type===ce.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var HK=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,XK=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class cO extends Lg{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Ne,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ce.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=_i.from(XK,HK,{}),this.state=Ri.for2d()}render(e){const r=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=r[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=o2(e.blendMode,c),s.state.set(this.state);const u=s.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=He.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let h=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let g=o-f;g>i&&(g=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[p];x.uploadDynamic(r,f,g);const v=e._bufferUpdateIDs[p]||0;h=h||x._updateID<v,h&&(x._updateID=e._updateID,x.uploadStatic(r,f,g)),s.geometry.bind(x.geometry),u.drawElements(u.TRIANGLES,g*6,u.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)r.push(new _C(this.properties,s,i));return r}_generateOneMoreBuffer(e){const r=e._batchSize,n=e._properties;return new _C(this.properties,n,r)}uploadVertices(e,r,n,i,s,o){let a=0,l=0,c=0,u=0;for(let d=0;d<n;++d){const h=e[r+d],f=h._texture,p=h.scale.x,g=h.scale.y,x=f.trim,v=f.orig;x?(l=x.x-h.anchor.x*v.width,a=l+x.width,u=x.y-h.anchor.y*v.height,c=u+x.height):(a=v.width*(1-h.anchor.x),l=v.width*-h.anchor.x,c=v.height*(1-h.anchor.y),u=v.height*-h.anchor.y),i[o]=l*p,i[o+1]=u*g,i[o+s]=a*p,i[o+s+1]=u*g,i[o+s*2]=a*p,i[o+s*2+1]=c*g,i[o+s*3]=l*p,i[o+s*3+1]=c*g,o+=s*4}}uploadPosition(e,r,n,i,s,o){for(let a=0;a<n;a++){const l=e[r+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,r,n,i,s,o){for(let a=0;a<n;a++){const l=e[r+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,r,n,i,s,o){for(let a=0;a<n;++a){const l=e[r+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,r,n,i,s,o){for(let a=0;a<n;++a){const l=e[r+a],c=He.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}cO.extension={name:"particle",type:Y.RendererPlugin};ne.add(cO);var Ng=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(Ng||{});const Sh={willReadFrequently:!0},ti=class se{static get experimentalLetterSpacingSupported(){let e=se._experimentalLetterSpacingSupported;if(e!==void 0){const r=ee.ADAPTER.getCanvasRenderingContext2D().prototype;e=se._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,n,i,s,o,a,l,c){this.text=e,this.style=r,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,r,n,i=se._canvas){n=n??r.wordWrap;const s=r.toFontString(),o=se.measureFont(s);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const a=i.getContext("2d",Sh);a.font=s;const l=(n?se.wordWrap(e,r,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let u=0;for(let p=0;p<l.length;p++){const g=se._measureText(l[p],r.letterSpacing,a);c[p]=g,u=Math.max(u,g)}let d=u+r.strokeThickness;r.dropShadow&&(d+=r.dropShadowDistance);const h=r.lineHeight||o.fontSize+r.strokeThickness;let f=Math.max(h,o.fontSize+r.strokeThickness*2)+r.leading+(l.length-1)*(h+r.leading);return r.dropShadow&&(f+=r.dropShadowDistance),new se(e,r,d,f,l,c,h+r.leading,u,o)}static _measureText(e,r,n){let i=!1;se.experimentalLetterSpacingSupported&&(se.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=r:s+=(se.graphemeSegmenter(e).length-1)*r),s}static wordWrap(e,r,n=se._canvas){const i=n.getContext("2d",Sh);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=r,d=se.collapseSpaces(u),h=se.collapseNewlines(u);let f=!d;const p=r.wordWrapWidth+c,g=se.tokenize(e);for(let x=0;x<g.length;x++){let v=g[x];if(se.isNewline(v)){if(!h){a+=se.addLine(o),f=!d,o="",s=0;continue}v=" "}if(d){const m=se.isBreakingSpace(v),_=se.isBreakingSpace(o[o.length-1]);if(m&&_)continue}const y=se.getFromCache(v,c,l,i);if(y>p)if(o!==""&&(a+=se.addLine(o),o="",s=0),se.canBreakWords(v,r.breakWords)){const m=se.wordWrapSplit(v);for(let _=0;_<m.length;_++){let C=m[_],E=C,T=1;for(;m[_+T];){const P=m[_+T];if(!se.canBreakChars(E,P,v,_,r.breakWords))C+=P;else break;E=P,T++}_+=T-1;const S=se.getFromCache(C,c,l,i);S+s>p&&(a+=se.addLine(o),f=!1,o="",s=0),o+=C,s+=S}}else{o.length>0&&(a+=se.addLine(o),o="",s=0);const m=x===g.length-1;a+=se.addLine(v,!m),f=!1,o="",s=0}else y+s>p&&(f=!1,a+=se.addLine(o),o="",s=0),(o.length>0||!se.isBreakingSpace(v)||f)&&(o+=v,s+=y)}return a+=se.addLine(o,!1),a}static addLine(e,r=!0){return e=se.trimRight(e),e=r?`${e}
`:e,e}static getFromCache(e,r,n,i){let s=n[e];return typeof s!="number"&&(s=se._measureText(e,r,i)+r,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const n=e[r];if(!se.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:se._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:se._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const r=[];let n="";if(typeof e!="string")return r;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(se.isBreakingSpace(s,o)||se.isNewline(s)){n!==""&&(r.push(n),n=""),r.push(s);continue}n+=s}return n!==""&&r.push(n),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,n,i,s){return!0}static wordWrapSplit(e){return se.graphemeSegmenter(e)}static measureFont(e){if(se._fonts[e])return se._fonts[e];const r={ascent:0,descent:0,fontSize:0},n=se._canvas,i=se._context;i.font=e;const s=se.METRICS_STRING+se.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(se.BASELINE_SYMBOL).width);const l=Math.ceil(se.HEIGHT_MULTIPLIER*a);if(a=a*se.BASELINE_MULTIPLIER|0,o===0||l===0)return se._fonts[e]=r,r;n.width=o,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const c=i.getImageData(0,0,o,l).data,u=c.length,d=o*4;let h=0,f=0,p=!1;for(h=0;h<a;++h){for(let g=0;g<d;g+=4)if(c[f+g]!==255){p=!0;break}if(!p)f+=d;else break}for(r.ascent=a-h,f=u-d,p=!1,h=l;h>a;--h){for(let g=0;g<d;g+=4)if(c[f+g]!==255){p=!0;break}if(!p)f-=d;else break}return r.descent=h-a,r.fontSize=r.ascent+r.descent,se._fonts[e]=r,r}static clearMetrics(e=""){e?delete se._fonts[e]:se._fonts={}}static get _canvas(){if(!se.__canvas){let e;try{const r=new OffscreenCanvas(0,0);if(r.getContext("2d",Sh)?.measureText)return se.__canvas=r,r;e=ee.ADAPTER.createCanvas()}catch{e=ee.ADAPTER.createCanvas()}e.width=e.height=10,se.__canvas=e}return se.__canvas}static get _context(){return se.__context||(se.__context=se._canvas.getContext("2d",Sh)),se.__context}};ti.METRICS_STRING="|q",ti.BASELINE_SYMBOL="M",ti.BASELINE_MULTIPLIER=1.4,ti.HEIGHT_MULTIPLIER=2,ti.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})(),ti.experimentalLetterSpacing=!1,ti._fonts={},ti._newlines=[10,13],ti._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Cs=ti;const YK=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],uO=class Qc{constructor(e){this.styleID=0,this.reset(),Ry(this,e,e)}clone(){const e={};return Ry(e,this,Qc.defaultStyle),new Qc(e)}reset(){Ry(this,Qc.defaultStyle,Qc.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const r=ky(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const r=ky(e);this._fill!==r&&(this._fill=r,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){qK(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const r=ky(e);this._stroke!==r&&(this._stroke=r,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(let n=r.length-1;n>=0;n--){let i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!YK.includes(i)&&(i=`"${i}"`),r[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${r.join(",")}`}};uO.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ng.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ks=uO;function ky(t){const e=He.shared,r=n=>{const i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(t)?t.map(r):r(t)}function qK(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Ry(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}const KK={texture:!0,children:!1,baseTexture:!0},dO=class ox extends uc{constructor(e,r,n){let i=!1;n||(n=ee.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=re.from(n);s.orig=new _e,s.trim=new _e,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=ox.defaultResolution??ee.RESOLUTION,this._autoResolution=ox.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=r,this.localStyleID=-1}static get experimentalLetterSpacing(){return Cs.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Ee("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Cs.experimentalLetterSpacing=e}updateText(e){const r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,i=Cs.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,c=i.lineWidths,u=i.maxLineWidth,d=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;let h,f;const p=r.dropShadow?2:1;for(let g=0;g<p;++g){const x=r.dropShadow&&g===0,v=x?Math.ceil(Math.max(1,o)+r.padding*2):0,y=v*this._resolution;if(x){n.fillStyle="black",n.strokeStyle="black";const _=r.dropShadowColor,C=r.dropShadowBlur*this._resolution,E=r.dropShadowDistance*this._resolution;n.shadowColor=He.shared.setValue(_).setAlpha(r.dropShadowAlpha).toRgbaString(),n.shadowBlur=C,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*E,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*E+y}else n.fillStyle=this._generateFillStyle(r,a,i),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let m=(l-d.fontSize)/2;l-d.fontSize<0&&(m=0);for(let _=0;_<a.length;_++)h=r.strokeThickness/2,f=r.strokeThickness/2+_*l+d.ascent+m,r.align==="right"?h+=u-c[_]:r.align==="center"&&(h+=(u-c[_])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(a[_],h+r.padding,f+r.padding-v,!0),r.fill&&this.drawLetterSpacing(a[_],h+r.padding,f+r.padding-v)}this.updateTexture()}drawLetterSpacing(e,r,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(Cs.experimentalLetterSpacingSupported&&(Cs.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,r,n):this.context.fillText(e,r,n);return}let a=r;const l=Cs.graphemeSegmenter(e);let c=this.context.measureText(e).width,u=0;for(let d=0;d<l.length;++d){const h=l[d];i?this.context.strokeText(h,a,n):this.context.fillText(h,a,n);let f="";for(let p=d+1;p<l.length;++p)f+=l[p];u=this.context.measureText(f).width,a+=c-u+s,c=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=mX(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const r=this._texture,n=this._style,i=n.trim?0:n.padding,s=r.baseTexture;r.trim.width=r._frame.width=e.width/this._resolution,r.trim.height=r._frame.height=e.height/this._resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-i*2,r.orig.height=r._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),r.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,r){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,r)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,r,n){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,u=i.slice(),d=e.fillGradientStops.slice();if(!d.length){const h=u.length+1;for(let f=1;f<h;++f)d.push(f/h)}if(u.unshift(i[0]),d.unshift(0),u.push(i[i.length-1]),d.push(1),e.fillGradientType===Ng.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);const h=n.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<r.length;f++){const p=n.lineHeight*(f-1)+h,g=n.lineHeight*f;let x=g;f>0&&p>g&&(x=(g+p)/2);const v=g+h,y=n.lineHeight*(f+1);let m=v;f+1<r.length&&y<v&&(m=(v+y)/2);const _=(m-x)/c;for(let C=0;C<u.length;C++){let E=0;typeof d[C]=="number"?E=d[C]:E=C/u.length;let T=Math.min(1,Math.max(0,x/c+E*_));T=Number(T.toFixed(5)),s.addColorStop(T,u[C])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);const h=u.length+1;let f=1;for(let p=0;p<u.length;p++){let g;typeof d[p]=="number"?g=d[p]:g=f/h,s.addColorStop(g,u[p]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},KK,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const r=Os(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const r=Os(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Ks?this._style=e:this._style=new Ks(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};dO.defaultAutoResolution=!0;let hO=dO;class ZK{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function QK(t,e){let r=!1;if(t?._textures?.length){for(let n=0;n<t._textures.length;n++)if(t._textures[n]instanceof re){const i=t._textures[n].baseTexture;e.includes(i)||(e.push(i),r=!0)}}return r}function JK(t,e){if(t.baseTexture instanceof be){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function eZ(t,e){if(t._texture&&t._texture instanceof re){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function tZ(t,e){return e instanceof hO?(e.updateText(!0),!0):!1}function rZ(t,e){if(e instanceof Ks){const r=e.toFontString();return Cs.measureFont(r),!0}return!1}function nZ(t,e){if(t instanceof hO){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function iZ(t,e){return t instanceof Ks?(e.includes(t)||e.push(t),!0):!1}const fO=class pO{constructor(e){this.limiter=new ZK(pO.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(nZ),this.registerFindHook(iZ),this.registerFindHook(QK),this.registerFindHook(JK),this.registerFindHook(eZ),this.registerUploadHook(tZ),this.registerUploadHook(rZ)}upload(e){return new Promise(r=>{e&&this.add(e),this.queue.length?(this.completes.push(r),this.ticking||(this.ticking=!0,Cr.system.addOnce(this.tick,this,oa.UTILITY))):r()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let r=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Cr.system.addOnce(this.tick,this,oa.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let r=0,n=e.length;r<n;r++)e[r]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](e,this.queue);r++);if(e instanceof gn)for(let r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}destroy(){this.ticking&&Cr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};fO.uploadsPerFrame=4;let ax=fO;Object.defineProperties(ee,{UPLOADS_PER_FRAME:{get(){return ax.uploadsPerFrame},set(t){Ee("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),ax.uploadsPerFrame=t}}});function gO(t,e){return e instanceof be?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function sZ(t,e){if(!(e instanceof oO))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&gO(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function oZ(t,e){return t instanceof oO?(e.push(t),!0):!1}class mO extends ax{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(oZ),this.registerUploadHook(gO),this.registerUploadHook(sZ)}}mO.extension={name:"prepare",type:Y.RendererSystem};ne.add(mO);var aZ=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,lZ=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,cZ=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,wC=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,uZ=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Eh=new Ne;class yO extends Lg{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new x2,this.state=Ri.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=_i.from(wC,uZ,r),this.shader=e.context.webGLVersion>1?_i.from(lZ,aZ,r):_i.from(wC,cZ,r)}render(e){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,u=e.tileTransform.localTransform,d=e.uvMatrix;let h=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;h&&(l._glTextures[r.CONTEXT_UID]?h=l.wrapMode!==Vs.CLAMP:l.wrapMode===Vs.CLAMP&&(l.wrapMode=Vs.REPEAT));const f=h?this.simpleShader:this.shader,p=a.width,g=a.height,x=e._width,v=e._height;Eh.set(u.a*p/x,u.b*p/v,u.c*g/x,u.d*g/v,u.tx/x,u.ty/v),Eh.invert(),h?Eh.prepend(d.mapCoord):(f.uniforms.uMapCoord=d.mapCoord.toArray(!0),f.uniforms.uClampFrame=d.uClampFrame,f.uniforms.uClampOffset=d.uClampOffset),f.uniforms.uTransform=Eh.toArray(!0),f.uniforms.uColor=He.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,r.shader.bind(f),r.geometry.bind(n),this.state.blendMode=o2(e.blendMode,c),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}yO.extension={name:"tilingSprite",type:Y.RendererPlugin};ne.add(yO);const vO=class Jc{constructor(e,r,n){this.linkedSheets=[],(e instanceof be||e instanceof re)&&(e={texture:e,data:r,resolutionFilename:n});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof re?i:null,this.baseTexture=i instanceof be?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:r}=this.data.meta;let n=cs(e,null);return n===null&&(n=typeof r=="number"?r:parseFloat(r??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Jc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const n=Jc.BATCH_SIZE;for(;r-e<n&&r<this._frameKeys.length;){const i=this._frameKeys[r],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new _e(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new _e(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new _e(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new _e(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new re(this.baseTexture,a,u,l,s.rotated?2:0,s.anchor,s.borders),re.addToCache(this.textures[i],this.cachePrefix+i.toString())}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let n=0;n<e[r].length;n++){const i=e[r][n];this.animations[r].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Jc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Jc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};vO.BATCH_SIZE=1e3;let SC=vO;const dZ=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function xO(t,e,r){const n={};if(t.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!r){const i=Ot.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(n,xO([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return n}const hZ={extension:Y.Asset,cache:{test:t=>t instanceof SC,getCacheableAssets:(t,e)=>xO(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),n=e.pop();return r==="json"&&dZ.includes(n)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(ee.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:Y.LoadParser,priority:jn.Normal},async testParse(t,e){return Ot.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){const{texture:n,imageFilename:i,cachePrefix:s}=e?.data??{};let o=Ot.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(n&&n.baseTexture)a=n;else{const u=rx(o+(i??t.meta.image),e.src);a=(await r.load([u]))[u]}const l=new SC({texture:a.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await l.parse();const c=t?.meta?.related_multi_packs;if(Array.isArray(c)){const u=[];for(const h of c){if(typeof h!="string")continue;let f=o+h;e.data?.ignoreMultiPack||(f=rx(f,e.src),u.push(r.load({src:f,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(u);l.linkedSheets=d,d.forEach(h=>{h.linkedSheets=[l].concat(l.linkedSheets.filter(f=>f!==h))})}return l},unload(t){t.destroy(!0)}}};ne.add(hZ);class wp{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class lf{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],a=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const u=a[c].split("="),d=u[0],h=u[1].replace(/"/gm,""),f=parseFloat(h),p=isNaN(f)?h:f;l[d]=p}n[o].push(l)}const i=new wp;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class lx{static test(e){const r=e;return typeof e!="string"&&"getElementsByTagName"in e&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new wp,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<n.length;c++)r.info.push({face:n[c].getAttribute("face"),size:parseInt(n[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)r.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)r.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const u=o[c];r.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)r.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)r.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return r}}class cx{static test(e){return typeof e=="string"&&e.includes("<font>")?lx.test(ee.ADAPTER.parseXML(e)):!1}static parse(e){return lx.parse(ee.ADAPTER.parseXML(e))}}const My=[lf,lx,cx];function fZ(t){for(let e=0;e<My.length;e++)if(My[e].test(t))return My[e];return null}function pZ(t,e,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,u=t.width/n-l-c*2,d=t.height/n-l-c*2,h=o.slice(),f=r.fillGradientStops.slice();if(!f.length){const p=h.length+1;for(let g=1;g<p;++g)f.push(g/p)}if(h.unshift(o[0]),f.unshift(0),h.push(o[o.length-1]),f.push(1),r.fillGradientType===Ng.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,d+c);let p=0;const g=(s.fontProperties.fontSize+r.strokeThickness)/d;for(let x=0;x<i.length;x++){const v=s.lineHeight*x;for(let y=0;y<h.length;y++){let m=0;typeof f[y]=="number"?m=f[y]:m=y/h.length;const _=v/d+m*g;let C=Math.max(p,_);C=Math.min(C,1),a.addColorStop(C,h[y]),p=C}}}else{a=e.createLinearGradient(c,d/2,u+c,d/2);const p=h.length+1;let g=1;for(let x=0;x<h.length;x++){let v;typeof f[x]=="number"?v=f[x]:v=g/p,a.addColorStop(v,h[x]),g++}}return a}function gZ(t,e,r,n,i,s,o){const a=r.text,l=r.fontProperties;e.translate(n,i),e.scale(s,s);const c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=pZ(t,e,o,s,[a],r),e.strokeStyle=o.stroke,o.dropShadow){const d=o.dropShadowColor,h=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=He.shared.setValue(d).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=h,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,u+r.lineHeight-l.descent),o.fill&&e.fillText(a,c,u+r.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function cf(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function bO(t){return Array.from?Array.from(t):t.split("")}function mZ(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const i=t[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...bO(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const bs=class ri{constructor(e,r,n){const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=cs(o.file),c={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let u=0;u<e.page.length;u++){const{id:d,file:h}=e.page[u];c[d]=r instanceof Array?r[u]:r[h],a?.fieldType&&a.fieldType!=="none"&&(c[d].baseTexture.alphaMode=Er.NO_PREMULTIPLIED_ALPHA,c[d].baseTexture.mipmap=Pi.OFF)}for(let u=0;u<e.char.length;u++){const{id:d,page:h}=e.char[u];let{x:f,y:p,width:g,height:x,xoffset:v,yoffset:y,xadvance:m}=e.char[u];f/=l,p/=l,g/=l,x/=l,v/=l,y/=l,m/=l;const _=new _e(f+c[h].frame.x/l,p+c[h].frame.y/l,g,x);this.chars[d]={xOffset:v,yOffset:y,xAdvance:m,kerning:{},texture:new re(c[h].baseTexture,_),page:h}}for(let u=0;u<e.kerning.length;u++){let{first:d,second:h,amount:f}=e.kerning[u];d/=l,h/=l,f/=l,this.chars[h]&&(this.chars[h].kerning[d]=f)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,r,n){let i;if(e instanceof wp)i=e;else{const o=fZ(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}r instanceof re&&(r=[r]);const s=new ri(i,r,n);return ri.available[s.font]=s,s}static uninstall(e){const r=ri.available[e];if(!r)throw new Error(`No font found named '${e}'`);r.destroy(),delete ri.available[e]}static from(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...c}=Object.assign({},ri.defaultOptions,n),u=mZ(i),d=r instanceof Ks?r:new Ks(r),h=a,f=new wp;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let p=0,g=0,x,v,y,m=0;const _=[];for(let E=0;E<u.length;E++){x||(x=ee.ADAPTER.createCanvas(),x.width=a,x.height=l,v=x.getContext("2d"),y=new be(x,{resolution:o,...c}),_.push(new re(y)),f.page.push({id:_.length-1,file:""}));const T=u[E],S=Cs.measureText(T,d,!1,x),P=S.width,I=Math.ceil(S.height),M=Math.ceil((d.fontStyle==="italic"?2:1)*P);if(g>=l-I*o){if(g===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${T}')`);--E,x=null,v=null,y=null,g=0,p=0,m=0;continue}if(m=Math.max(I+S.fontProperties.descent,m),M*o+p>=h){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${T}')`);--E,g+=m*o,g=Math.ceil(g),p=0,m=0;continue}gZ(x,v,S,p,g,o,d);const k=cf(S.text);f.char.push({id:k,page:_.length-1,x:p/o,y:g/o,width:M,height:I,xoffset:0,yoffset:0,xadvance:P-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),p+=(M+2*s)*o,p=Math.ceil(p)}if(!n?.skipKerning)for(let E=0,T=u.length;E<T;E++){const S=u[E];for(let P=0;P<T;P++){const I=u[P],M=v.measureText(S).width,k=v.measureText(I).width,R=v.measureText(S+I).width-(M+k);R&&f.kerning.push({first:cf(S),second:cf(I),amount:R})}}const C=new ri(f,_,!0);return ri.available[e]!==void 0&&ri.uninstall(e),ri.available[e]=C,C}};bs.ALPHA=[["a","z"],["A","Z"]," "],bs.NUMERIC=[["0","9"]],bs.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],bs.ASCII=[[" ","~"]],bs.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:bs.ALPHANUMERIC},bs.available={};let _s=bs;var yZ=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,vZ=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const EC=[],CC=[],TC=[],xZ=class _O extends gn{constructor(e,r={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},_O.styleDefaults,r);if(!_s.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new He(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new gi(()=>{this.dirty=!0},this,0,0),this._roundPixels=ee.ROUND_PIXELS,this.dirty=!0,this._resolution=ee.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=_s.available[this._fontName],r=this.fontSize,n=r/e.size,i=new Te,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=bO(l),u=this._maxWidth*e.size/r,d=e.distanceFieldType==="none"?EC:CC;let h=null,f=0,p=0,g=0,x=-1,v=0,y=0,m=0,_=0;for(let M=0;M<c.length;M++){const k=c[M],R=cf(k);if(/(?:\s)/.test(k)&&(x=M,v=f,_++),k==="\r"||k===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++g,++y,i.x=0,i.y+=e.lineHeight,h=null,_=0;continue}const O=e.chars[R];if(!O)continue;h&&O.kerning[h]&&(i.x+=O.kerning[h]);const V=TC.pop()||{texture:re.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Te};V.texture=O.texture,V.line=g,V.charCode=R,V.position.x=Math.round(i.x+O.xOffset+this._letterSpacing/2),V.position.y=Math.round(i.y+O.yOffset),V.prevSpaces=_,s.push(V),f=V.position.x+Math.max(O.xAdvance-O.xOffset,O.texture.orig.width),i.x+=O.xAdvance+this._letterSpacing,m=Math.max(m,O.yOffset+O.texture.height),h=R,x!==-1&&u>0&&i.x>u&&(++y,Sl(s,1+x-y,1+M-x),M=x,x=-1,o.push(v),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,v),g++,i.x=0,i.y+=e.lineHeight,h=null,_=0)}const C=c[c.length-1];C!=="\r"&&C!==`
`&&(/(?:\s)/.test(C)&&(f=v),o.push(f),p=Math.max(p,f),a.push(-1));const E=[];for(let M=0;M<=g;M++){let k=0;this._align==="right"?k=p-o[M]:this._align==="center"?k=(p-o[M])/2:this._align==="justify"&&(k=a[M]<0?0:(p-o[M])/a[M]),E.push(k)}const T=s.length,S={},P=[],I=this._activePagesMeshData;d.push(...I);for(let M=0;M<T;M++){const k=s[M].texture,R=k.baseTexture.uid;if(!S[R]){let O=d.pop();if(!O){const U=new VK;let F,L;e.distanceFieldType==="none"?(F=new bC(re.EMPTY),L=ge.NORMAL):(F=new bC(re.EMPTY,{program:Zi.from(vZ,yZ),uniforms:{uFWidth:0}}),L=ge.NORMAL_NPM);const B=new xC(U,F);B.blendMode=L,O={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:B,vertices:null,uvs:null,indices:null}}O.index=0,O.indexCount=0,O.vertexCount=0,O.uvsCount=0,O.total=0;const{_textureCache:V}=this;V[R]=V[R]||new re(k.baseTexture),O.mesh.texture=V[R],O.mesh.tint=this._tintColor.value,P.push(O),S[R]=O}S[R].total++}for(let M=0;M<I.length;M++)P.includes(I[M])||this.removeChild(I[M].mesh);for(let M=0;M<P.length;M++)P[M].mesh.parent!==this&&this.addChild(P[M].mesh);this._activePagesMeshData=P;for(const M in S){const k=S[M],R=k.total;if(!(k.indices?.length>6*R)||k.vertices.length<xC.BATCHABLE_SIZE*2)k.vertices=new Float32Array(4*2*R),k.uvs=new Float32Array(4*2*R),k.indices=new Uint16Array(6*R);else{const O=k.total,V=k.vertices;for(let U=O*4*2;U<V.length;U++)V[U]=0}k.mesh.size=6*R}for(let M=0;M<T;M++){const k=s[M];let R=k.position.x+E[k.line]*(this._align==="justify"?k.prevSpaces:1);this._roundPixels&&(R=Math.round(R));const O=R*n,V=k.position.y*n,U=k.texture,F=S[U.baseTexture.uid],L=U.frame,B=U._uvs,A=F.index++;F.indices[A*6+0]=0+A*4,F.indices[A*6+1]=1+A*4,F.indices[A*6+2]=2+A*4,F.indices[A*6+3]=0+A*4,F.indices[A*6+4]=2+A*4,F.indices[A*6+5]=3+A*4,F.vertices[A*8+0]=O,F.vertices[A*8+1]=V,F.vertices[A*8+2]=O+L.width*n,F.vertices[A*8+3]=V,F.vertices[A*8+4]=O+L.width*n,F.vertices[A*8+5]=V+L.height*n,F.vertices[A*8+6]=O,F.vertices[A*8+7]=V+L.height*n,F.uvs[A*8+0]=B.x0,F.uvs[A*8+1]=B.y0,F.uvs[A*8+2]=B.x1,F.uvs[A*8+3]=B.y1,F.uvs[A*8+4]=B.x2,F.uvs[A*8+5]=B.y2,F.uvs[A*8+6]=B.x3,F.uvs[A*8+7]=B.y3}this._textWidth=p*n,this._textHeight=(i.y+e.lineHeight)*n;for(const M in S){const k=S[M];if(this.anchor.x!==0||this.anchor.y!==0){let U=0;const F=this._textWidth*this.anchor.x,L=this._textHeight*this.anchor.y;for(let B=0;B<k.total;B++)k.vertices[U++]-=F,k.vertices[U++]-=L,k.vertices[U++]-=F,k.vertices[U++]-=L,k.vertices[U++]-=F,k.vertices[U++]-=L,k.vertices[U++]-=F,k.vertices[U++]-=L}this._maxLineHeight=m*n;const R=k.mesh.geometry.getBuffer("aVertexPosition"),O=k.mesh.geometry.getBuffer("aTextureCoord"),V=k.mesh.geometry.getIndex();R.data=k.vertices,O.data=k.uvs,V.data=k.indices,R.update(),O.update(),V.update()}for(let M=0;M<s.length;M++)TC.push(s[M]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:r,distanceFieldType:n,size:i}=_s.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+l*l),d=(Math.abs(c)+Math.abs(u))/2,h=this.fontSize/i,f=e._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=d*r*h*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=_s.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!_s.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??_s.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:r}=this,n=_s.available[this._fontName].distanceFieldType==="none"?EC:CC;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>r[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=re.EMPTY});for(const i in r)r[i].destroy(),delete r[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};xZ.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const bZ=[".xml",".fnt"],_Z={extension:{type:Y.LoadParser,priority:jn.Normal},name:"loadBitmapFont",test(t){return bZ.includes(Ot.extname(t).toLowerCase())},async testParse(t){return lf.test(t)||cx.test(t)},async parse(t,e,r){const n=lf.test(t)?lf.parse(t):cx.parse(t),{src:i}=e,{page:s}=n,o=[];for(let c=0;c<s.length;++c){const u=s[c].file;let d=Ot.join(Ot.dirname(i),u);d=rx(d,i),o.push(d)}const a=await r.load(o),l=o.map(c=>a[c]);return _s.install(n,l,!0)},async load(t,e){return(await ee.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};ne.add(_Z);const ux=class Ba extends Ks{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Ba(Object.keys(Ba.defaultOptions).reduce((r,n)=>({...r,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Ba.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,r={}){const{availableFonts:n}=Ba;if(n[e]){const i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ee.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Ot.basename(e,Ot.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},r);n[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const r=e.filter(n=>!this._overrides.includes(n));r.length>0&&(this._overrides.push(...r),this.styleID++)}removeOverride(...e){const r=e.filter(n=>this._overrides.includes(n));r.length>0&&(this._overrides=this._overrides.filter(n=>!r.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,r)=>`${e}
            @font-face {
                font-family: "${r.family}";
                src: url('${r.dataSrc}');
                font-weight: ${r.weight};
                font-style: ${r.style};
                font-display: ${r.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=cX(e)),typeof e=="number"?lX(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const r=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&r<1&&(e+=(r*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Ba.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(r=>setTimeout(r,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=ee.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};ux.availableFonts={},ux.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Oy=ux;const Ch=class Ua extends uc{constructor(e="",r={}){super(re.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=re.from(n,{scaleMode:ee.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new _e,i.trim=new _e,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),u=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Ua.defaultMaxWidth,this.maxHeight=Ua.defaultMaxHeight,this._domElement=c,this._styleElement=u,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(u),this._foreignObject.appendChild(c),this._image=n,this._loadImage=new Image,this._autoResolution=Ua.defaultAutoResolution,this._resolution=Ua.defaultResolution??ee.RESOLUTION,this.text=e,this.style=r}measureText(e){const{text:r,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:r,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),r!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(i)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:l+n.padding*2,height:c+n.padding*2}}async updateText(e=!0){const{style:r,_image:n,_loadImage:i}=this;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await r.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:r,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=r;r.trim.width=r._frame.width=n.width/i,r.trim.height=r._frame.height=n.height/i,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-s*2,r.orig.height=r._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Ua.defaultDestroyOptions,e),super.destroy(e);const r=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=r,this._svgRoot?.remove(),this._svgRoot=r,this._domElement?.remove(),this._domElement=r,this._foreignObject?.remove(),this._foreignObject=r,this._styleElement?.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const r=Os(this.scale.x)||1;this.scale.x=r*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const r=Os(this.scale.y)||1;this.scale.y=r*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Oy?(this.ownsStyle=!1,this._style=e):e instanceof Ks?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Oy.from(e)):(this.ownsStyle=!0,this._style=new Oy(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Ch.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Ch.defaultMaxWidth=2024,Ch.defaultMaxHeight=2024,Ch.defaultAutoResolution=!0;var wZ=Object.defineProperty,xo=Math.pow,SZ=(t,e,r)=>e in t?wZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D=(t,e,r)=>(SZ(t,typeof e!="symbol"?e+"":e,r),r),Ke=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(c){i(c)}},o=l=>{try{a(r.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(t,e)).next())});const PC=2,IC=2;var Ju;(t=>{t.supportMoreMaskDivisions=!0,t.setOpacityFromMotion=!1})(Ju||(Ju={}));const EZ=0,AC=1,CZ=2,TZ=999,Yl={LOG_LEVEL_VERBOSE:EZ,LOG_LEVEL_WARNING:AC,LOG_LEVEL_ERROR:CZ,LOG_LEVEL_NONE:TZ,logLevel:AC,sound:!0,motionSync:!0,motionFadingDuration:500,idleMotionFadingDuration:2e3,expressionFadingDuration:500,preserveExpressionOnMotion:!0,cubism4:Ju},De={log(t,...e){},warn(t,...e){console.warn(`[${t}]`,...e)},error(t,...e){console.error(`[${t}]`,...e)}};function ql(t,e,r){return t<e?e:t>r?r:t}function PZ(t,e){return Math.random()*(e-t)+t}function Lc(t,e,r,n,i){const s=e[n];s!==null&&typeof s===t&&(r[i]=s)}function Dc(t,e,r,n,i){const s=e[n];Array.isArray(s)&&(r[i]=s.filter(o=>o!==null&&typeof o===t))}function IZ(t,e){e.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n))})})}function AZ(t){let e=t.lastIndexOf("/");return e!=-1&&(t=t.slice(0,e)),e=t.lastIndexOf("/"),e!==-1&&(t=t.slice(e+1)),t}function kZ(t,e){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}class I_ extends so{constructor(e,r){super(),D(this,"tag"),D(this,"settings"),D(this,"expressions",[]),D(this,"defaultExpression"),D(this,"currentExpression"),D(this,"reserveExpressionIndex",-1),D(this,"destroyed",!1),this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return Ke(this,null,function*(){if(!this.definitions[e]){De.warn(this.tag,`Undefined expression at [${e}]`);return}if(this.expressions[e]===null){De.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);return}if(this.expressions[e])return this.expressions[e];const r=yield this._loadExpression(e);return this.expressions[e]=r,r})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return Ke(this,null,function*(){if(this.definitions.length){const e=[];for(let r=0;r<this.definitions.length;r++)this.expressions[r]!==null&&this.expressions[r]!==this.currentExpression&&r!==this.reserveExpressionIndex&&e.push(r);if(e.length){const r=Math.floor(Math.random()*e.length);return this.setExpression(r)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return Ke(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const r=yield this.loadExpression(e);return!r||this.reserveExpressionIndex!==e?!1:(this.reserveExpressionIndex=-1,this.currentExpression=r,this._setExpression(r),!0)})}update(e,r){return this.isFinished()?!1:this.updateParameters(e,r)}destroy(){this.destroyed=!0,this.emit("destroy");const e=this;e.definitions=void 0,e.expressions=void 0}}const kC=.01,RZ=40/7.5,MZ=1/(.15*1e3);class OZ{constructor(){D(this,"targetX",0),D(this,"targetY",0),D(this,"x",0),D(this,"y",0),D(this,"vx",0),D(this,"vy",0)}focus(e,r,n=!1){this.targetX=ql(e,-1,1),this.targetY=ql(r,-1,1),n&&(this.x=this.targetX,this.y=this.targetY)}update(e){const r=this.targetX-this.x,n=this.targetY-this.y;if(Math.abs(r)<kC&&Math.abs(n)<kC)return;const i=Math.sqrt(xo(r,2)+xo(n,2)),s=RZ/(1e3/e);let o=s*(r/i)-this.vx,a=s*(n/i)-this.vy;const l=Math.sqrt(xo(o,2)+xo(a,2)),c=s*MZ*e;l>c&&(o*=c/l,a*=c/l),this.vx+=o,this.vy+=a;const u=Math.sqrt(xo(this.vx,2)+xo(this.vy,2)),d=.5*(Math.sqrt(xo(c,2)+8*c*i)-c);u>d&&(this.vx*=d/u,this.vy*=d/u),this.x+=this.vx,this.y+=this.vy}}class Bg{constructor(e){D(this,"json"),D(this,"name"),D(this,"url"),D(this,"pose"),D(this,"physics"),this.json=e;const r=e.url;if(typeof r!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=r,this.name=AZ(this.url)}resolveURL(e){return __.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let r=0;r<this.textures.length;r++)this.textures[r]=e(this.textures[r],`textures[${r}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(r=>(e.push(r),r)),e}validateFiles(e){const r=(s,o)=>{const a=this.resolveURL(s);if(!e.includes(a)){if(o)throw new Error(`File "${s}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(s=>r(s,!0)),this.getDefinedFiles().filter(s=>r(s,!1))}}var Il=(t=>(t[t.NONE=0]="NONE",t[t.IDLE=1]="IDLE",t[t.NORMAL=2]="NORMAL",t[t.FORCE=3]="FORCE",t))(Il||{});class LZ{constructor(){D(this,"tag"),D(this,"debug",!1),D(this,"currentPriority",0),D(this,"reservePriority",0),D(this,"currentGroup"),D(this,"currentIndex"),D(this,"reservedGroup"),D(this,"reservedIndex"),D(this,"reservedIdleGroup"),D(this,"reservedIdleIndex")}reserve(e,r,n){if(n<=0)return De.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&r===this.currentIndex)return De.log(this.tag,"Motion is already playing.",this.dump(e,r)),!1;if(e===this.reservedGroup&&r===this.reservedIndex||e===this.reservedIdleGroup&&r===this.reservedIdleIndex)return De.log(this.tag,"Motion is already reserved.",this.dump(e,r)),!1;if(n===1){if(this.currentPriority!==0)return De.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,r)),!1;if(this.reservedIdleGroup!==void 0)return De.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,r)),!1;this.setReservedIdle(e,r)}else{if(n<3){if(n<=this.currentPriority)return De.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,r)),!1;if(n<=this.reservePriority)return De.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,r)),!1}this.setReserved(e,r,n)}return!0}start(e,r,n,i){if(i===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return De.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(r,n)),!1}else{if(r!==this.reservedGroup||n!==this.reservedIndex)return De.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(r,n)),!1;this.setReserved(void 0,void 0,0)}return e?(this.setCurrent(r,n,i),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,r,n){this.currentPriority=n,this.currentGroup=e,this.currentIndex=r}setReserved(e,r,n){this.reservePriority=n,this.reservedGroup=e,this.reservedIndex=r}setReservedIdle(e,r){this.reservedIdleGroup=e,this.reservedIdleIndex=r}isActive(e,r){return e===this.currentGroup&&r===this.currentIndex||e===this.reservedGroup&&r===this.reservedIndex||e===this.reservedIdleGroup&&r===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!1}dump(e,r){if(this.debug){const n=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${e}", index = ${r}
`+n.map(i=>"["+i+"] "+this[i]).join(`
`)}return""}}const DZ="SoundManager",Al=.5;class Tt{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(r=>r.volume=this._volume)}static add(e,r,n,i){const s=new Audio(e);return s.volume=this._volume,s.preload="auto",s.crossOrigin=i,s.addEventListener("ended",()=>{this.dispose(s),r?.()}),s.addEventListener("error",o=>{this.dispose(s),De.warn(DZ,`Error occurred on "${e}"`,o.error),n?.(o.error)}),this.audios.push(s),s}static play(e){return new Promise((r,n)=>{var i;(i=e.play())==null||i.catch(s=>{e.dispatchEvent(new ErrorEvent("error",{error:s})),n(s)}),e.readyState===e.HAVE_ENOUGH_DATA?r():e.addEventListener("canplaythrough",r)})}static addContext(e){const r=new AudioContext;return this.contexts.push(r),r}static addAnalyzer(e,r){const n=r.createMediaElementSource(e),i=r.createAnalyser();return i.fftSize=256,i.minDecibels=-90,i.maxDecibels=-10,i.smoothingTimeConstant=.85,n.connect(i),i.connect(r.destination),this.analysers.push(i),i}static analyze(e){if(e!=null){const r=new Float32Array(e.fftSize);let n=0;e.getFloatTimeDomainData(r);for(const i of r)n+=i*i;return parseFloat(Math.sqrt(n/r.length*20).toFixed(1))}else return parseFloat(Math.random().toFixed(1))}static dispose(e){e.pause(),e.removeAttribute("src"),kZ(this.audios,e)}static destroy(){for(let e=this.contexts.length-1;e>=0;e--)this.contexts[e].close();for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}D(Tt,"audios",[]);D(Tt,"analysers",[]);D(Tt,"contexts",[]);D(Tt,"_volume",Al);var wO=(t=>(t.ALL="ALL",t.IDLE="IDLE",t.NONE="NONE",t))(wO||{});class Ug extends so{constructor(e,r){super(),D(this,"tag"),D(this,"settings"),D(this,"motionGroups",{}),D(this,"state",new LZ),D(this,"currentAudio"),D(this,"currentAnalyzer"),D(this,"currentContext"),D(this,"playing",!1),D(this,"destroyed",!1),this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e?.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const n of Object.keys(this.definitions))this.motionGroups[n]=[];let r;switch(e?.motionPreload){case"NONE":return;case"ALL":r=Object.keys(this.definitions);break;case"IDLE":default:r=[this.groups.idle];break}for(const n of r)if(this.definitions[n])for(let i=0;i<this.definitions[n].length;i++)this.loadMotion(n,i).then()}loadMotion(e,r){return Ke(this,null,function*(){var n;if(!((n=this.definitions[e])!=null&&n[r])){De.warn(this.tag,`Undefined motion at "${e}"[${r}]`);return}if(this.motionGroups[e][r]===null){De.warn(this.tag,`Cannot start motion at "${e}"[${r}] because it's already failed in loading.`);return}if(this.motionGroups[e][r])return this.motionGroups[e][r];const i=yield this._loadMotion(e,r);if(!this.destroyed)return this.motionGroups[e][r]=i??null,i})}_loadMotion(e,r){throw new Error("Not implemented.")}speak(e){return Ke(this,arguments,function*(r,{volume:n=Al,expression:i,resetExpression:s=!0,crossOrigin:o,onFinish:a,onError:l}={}){let c,u,d;if(this.currentAudio&&!this.currentAudio.ended)return!1;let h;const f=r&&r.startsWith("data:");if(console.log(a),r&&!f){const g=document.createElement("a");g.href=r,r=g.href,h=r}else h="data:audio/";const p=r;if(p)try{c=Tt.add(p,(g=this)=>{console.log("Audio finished playing"),a?.(),s&&i&&g.expressionManager&&g.expressionManager.resetExpression(),g.currentAudio=void 0},(g,x=this)=>{console.log("Error during audio playback:",g),l?.(g),s&&i&&x.expressionManager&&x.expressionManager.resetExpression(),x.currentAudio=void 0},o),this.currentAudio=c,Tt.volume=n,d=Tt.addContext(this.currentAudio),this.currentContext=d,u=Tt.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=u}catch(g){return De.warn(this.tag,"Failed to create audio",h,g),!1}if(c){let g=!0;if(yield Tt.play(c).catch(v=>{De.warn(this.tag,"Failed to play audio",c.src,v),g=!1}),!g)return!1}return this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),i&&this.expressionManager&&this.expressionManager.setExpression(i),this.playing=!0,!0})}startMotion(e,r){return Ke(this,arguments,function*(n,i,s=Il.NORMAL,{sound:o=void 0,volume:a=Al,expression:l=void 0,resetExpression:c=!0,crossOrigin:u,onFinish:d,onError:h}={}){var f;if(!this.state.reserve(n,i,s)||this.currentAudio&&!this.currentAudio.ended&&s!=Il.FORCE)return!1;const p=(f=this.definitions[n])==null?void 0:f[i];if(!p)return!1;this.currentAudio&&Tt.dispose(this.currentAudio);let g,x,v,y;const m=o&&o.startsWith("data:");if(o&&!m){const E=document.createElement("a");E.href=o,o=E.href,y=o}else y=this.getSoundFile(p),y&&(y=this.settings.resolveURL(y));const _=y;if(_)try{g=Tt.add(_,(E=this)=>{console.log("Audio finished playing"),d?.(),console.log(d),c&&l&&E.expressionManager&&E.expressionManager.resetExpression(),E.currentAudio=void 0},(E,T=this)=>{console.log("Error during audio playback:",E),h?.(E),c&&l&&T.expressionManager&&T.expressionManager.resetExpression(),T.currentAudio=void 0},u),this.currentAudio=g,Tt.volume=a,v=Tt.addContext(this.currentAudio),this.currentContext=v,x=Tt.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=x}catch(E){De.warn(this.tag,"Failed to create audio",y,E)}const C=yield this.loadMotion(n,i);return g&&(yield Tt.play(g).catch(T=>De.warn(this.tag,"Failed to play audio",g.src,T))),this.state.start(C,n,i,s)?(this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),De.log(this.tag,"Start motion:",this.getMotionName(p)),this.emit("motionStart",n,i,g),l&&this.expressionManager&&this.state.shouldOverrideExpression()&&this.expressionManager.setExpression(l),this.playing=!0,this._startMotion(C),!0):(g&&(Tt.dispose(g),this.currentAudio=void 0),!1)})}startRandomMotion(e,r){return Ke(this,arguments,function*(n,i,{sound:s,volume:o=Al,expression:a,resetExpression:l=!0,crossOrigin:c,onFinish:u,onError:d}={}){const h=this.definitions[n];if(h?.length){const f=[];for(let p=0;p<h.length;p++)this.motionGroups[n][p]!==null&&!this.state.isActive(n,p)&&f.push(p);if(f.length){const p=f[Math.floor(Math.random()*f.length)];return this.startMotion(n,p,i,{sound:s,volume:o,expression:a,resetExpression:l,crossOrigin:c,onFinish:u,onError:d})}}return!1})}stopSpeaking(){this.currentAudio&&(Tt.dispose(this.currentAudio),this.currentAudio=void 0)}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.stopSpeaking()}update(e,r){var n;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((n=this.expressionManager)==null||n.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,Il.IDLE)),this.updateParameters(e,r)}mouthSync(){return this.currentAnalyzer?Tt.analyze(this.currentAnalyzer):0}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy();const r=this;r.definitions=void 0,r.motionGroups=void 0}}const FZ={x:0,y:0,width:0,height:0};class SO extends so{constructor(){super(...arguments),D(this,"focusController",new OZ),D(this,"pose"),D(this,"physics"),D(this,"originalWidth",0),D(this,"originalHeight",0),D(this,"width",0),D(this,"height",0),D(this,"localTransform",new Ne),D(this,"drawingMatrix",new Ne),D(this,"hitAreas",{}),D(this,"textureFlipY",!1),D(this,"viewport",[0,0,0,0]),D(this,"destroyed",!1)}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,r=this.getSize();e.originalWidth=r[0],e.originalHeight=r[1];const n=Object.assign({width:PC,height:IC},this.getLayout());this.localTransform.scale(n.width/PC,n.height/IC),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const i=n.x!==void 0&&n.x-n.width/2||n.centerX!==void 0&&n.centerX||n.left!==void 0&&n.left-n.width/2||n.right!==void 0&&n.right+n.width/2||0,s=n.y!==void 0&&n.y-n.height/2||n.centerY!==void 0&&n.centerY||n.top!==void 0&&n.top-n.height/2||n.bottom!==void 0&&n.bottom+n.height/2||0;this.localTransform.translate(this.width*i,-this.height*s)}setupHitAreas(){const e=this.getHitAreaDefs().filter(r=>r.index>=0);for(const r of e)this.hitAreas[r.name]=r}hitTest(e,r){return Object.keys(this.hitAreas).filter(n=>this.isHit(n,e,r))}isHit(e,r,n){if(!this.hitAreas[e])return!1;const i=this.hitAreas[e].index,s=this.getDrawableBounds(i,FZ);return s.x<=r&&r<=s.x+s.width&&s.y<=n&&n<=s.y+s.height}getDrawableBounds(e,r){const n=this.getDrawableVertices(e);let i=n[0],s=n[0],o=n[1],a=n[1];for(let l=0;l<n.length;l+=2){const c=n[l],u=n[l+1];i=Math.min(c,i),s=Math.max(c,s),o=Math.min(u,o),a=Math.max(u,a)}return r??(r={}),r.x=i,r.y=o,r.width=s-i,r.height=a-o,r}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,r){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const NZ="XHRLoader";class RC extends Error{constructor(e,r,n,i=!1){super(e),this.url=r,this.status=n,this.aborted=i}}const ed=class vr{static createXHR(e,r,n,i,s){const o=new XMLHttpRequest;if(vr.allXhrSet.add(o),e){let a=vr.xhrMap.get(e);a?a.add(o):(a=new Set([o]),vr.xhrMap.set(e,a)),e.listeners("destroy").includes(vr.cancelXHRs)||e.once("destroy",vr.cancelXHRs)}return o.open("GET",r),o.responseType=n,o.onload=()=>{(o.status===200||o.status===0)&&o.response?i(o.response):o.onerror()},o.onerror=()=>{De.warn(NZ,`Failed to load resource as ${o.responseType} (Status ${o.status}): ${r}`),s(new RC("Network error.",r,o.status))},o.onabort=()=>s(new RC("Aborted.",r,o.status,!0)),o.onloadend=()=>{var a;vr.allXhrSet.delete(o),e&&((a=vr.xhrMap.get(e))==null||a.delete(o))},o}static cancelXHRs(){var e;(e=vr.xhrMap.get(this))==null||e.forEach(r=>{r.abort(),vr.allXhrSet.delete(r)}),vr.xhrMap.delete(this)}static release(){vr.allXhrSet.forEach(e=>e.abort()),vr.allXhrSet.clear(),vr.xhrMap=new WeakMap}};D(ed,"xhrMap",new WeakMap);D(ed,"allXhrSet",new Set);D(ed,"loader",(t,e)=>new Promise((r,n)=>{ed.createXHR(t.target,t.settings?t.settings.resolveURL(t.url):t.url,t.type,s=>{t.result=s,r()},n).send()}));let BZ=ed;function EO(t,e){let r=-1;return n(0);function n(i,s){if(s)return Promise.reject(s);if(i<=r)return Promise.reject(new Error("next() called multiple times"));r=i;const o=t[i];if(!o)return Promise.resolve();try{return Promise.resolve(o(e,n.bind(null,i+1)))}catch(a){return Promise.reject(a)}}}class Zs{static load(e){return EO(this.middlewares,e).then(()=>e.result)}}D(Zs,"middlewares",[BZ.loader]);function UZ(t,e={}){var r;const n={resourceOptions:{crossorigin:e.crossOrigin}};if(re.fromURL)return re.fromURL(t,n).catch(o=>{if(o instanceof Error)throw o;const a=new Error("Texture loading error");throw a.event=o,a});n.resourceOptions.autoLoad=!1;const i=re.from(t,n);if(i.baseTexture.valid)return Promise.resolve(i);const s=i.baseTexture.resource;return(r=s._live2d_load)!=null||(s._live2d_load=new Promise((o,a)=>{const l=c=>{s.source.removeEventListener("error",l);const u=new Error("Texture loading error");u.event=c,a(u)};s.source.addEventListener("error",l),s.load().then(()=>o(i)).catch(l)})),s._live2d_load}function zZ(){}const MC="Live2DFactory",CO=(t,e)=>Ke(void 0,null,function*(){if(typeof t.source=="string"){const r=yield Zs.load({url:t.source,type:"json",target:t.live2dModel});r.url=t.source,t.source=r,t.live2dModel.emit("settingsJSONLoaded",r)}return e()}),TO=(t,e)=>Ke(void 0,null,function*(){if(t.source instanceof Bg)return t.settings=t.source,e();if(typeof t.source=="object"){const r=Hr.findRuntime(t.source);if(r){const n=r.createModelSettings(t.source);return t.settings=n,t.live2dModel.emit("settingsLoaded",n),e()}}throw new TypeError("Unknown settings format.")}),PO=(t,e)=>{if(t.settings){const r=Hr.findRuntime(t.settings);if(r)return r.ready().then(e)}return e()},IO=(t,e)=>Ke(void 0,null,function*(){yield e();const r=t.internalModel;if(r){const n=t.settings,i=Hr.findRuntime(n);if(i){const s=[];n.pose&&s.push(Zs.load({settings:n,url:n.pose,type:"json",target:r}).then(o=>{r.pose=i.createPose(r.coreModel,o),t.live2dModel.emit("poseLoaded",r.pose)}).catch(o=>{t.live2dModel.emit("poseLoadError",o),De.warn(MC,"Failed to load pose.",o)})),n.physics&&s.push(Zs.load({settings:n,url:n.physics,type:"json",target:r}).then(o=>{r.physics=i.createPhysics(r.coreModel,o),t.live2dModel.emit("physicsLoaded",r.physics)}).catch(o=>{t.live2dModel.emit("physicsLoadError",o),De.warn(MC,"Failed to load physics.",o)})),s.length&&(yield Promise.all(s))}}}),AO=(t,e)=>Ke(void 0,null,function*(){if(t.settings){const r=t.live2dModel,n=Promise.all(t.settings.textures.map(i=>{const s=t.settings.resolveURL(i);return UZ(s,{crossOrigin:t.options.crossOrigin})}));if(n.catch(zZ),yield e(),t.internalModel)r.internalModel=t.internalModel,r.emit("modelLoaded",t.internalModel);else throw new TypeError("Missing internal model.");r.textures=yield n,r.emit("textureLoaded",r.textures)}else throw new TypeError("Missing settings.")}),kO=(t,e)=>Ke(void 0,null,function*(){const r=t.settings;if(r instanceof Bg){const n=Hr.findRuntime(r);if(!n)throw new TypeError("Unknown model settings.");const i=yield Zs.load({settings:r,url:r.moc,type:"arraybuffer",target:t.live2dModel});if(!n.isValidMoc(i))throw new Error("Invalid moc data");const s=n.createCoreModel(i);return t.internalModel=n.createInternalModel(s,r,t.options),e()}throw new TypeError("Missing settings.")}),sr=class za{static unzip(e,r){return Ke(this,null,function*(){const n=yield za.getFilePaths(e),i=[];for(const o of r.getDefinedFiles()){const a=decodeURI(__.resolve(r.url,o));n.includes(a)&&i.push(a)}const s=yield za.getFiles(e,i);for(let o=0;o<s.length;o++){const a=i[o],l=s[o];Object.defineProperty(l,"webkitRelativePath",{value:a})}return s})}static createSettings(e){return Ke(this,null,function*(){const n=(yield za.getFilePaths(e)).find(a=>a.endsWith("model.json")||a.endsWith("model3.json"));if(!n)throw new Error("Settings file not found");const i=yield za.readText(e,n);if(!i)throw new Error("Empty settings file: "+n);const s=JSON.parse(i);s.url=n;const o=za.live2dFactory.findRuntime(s);if(!o)throw new Error("Unknown settings JSON");return o.createModelSettings(s)})}static zipReader(e,r){return Ke(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(e){return Ke(this,null,function*(){throw new Error("Not implemented")})}static getFiles(e,r){return Ke(this,null,function*(){throw new Error("Not implemented")})}static readText(e,r){return Ke(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(e){}};D(sr,"live2dFactory");D(sr,"ZIP_PROTOCOL","zip://");D(sr,"uid",0);D(sr,"factory",(t,e)=>Ke(sr,null,function*(){const r=t.source;let n,i,s;if(typeof r=="string"&&(r.endsWith(".zip")||r.startsWith(sr.ZIP_PROTOCOL))?(r.startsWith(sr.ZIP_PROTOCOL)?n=r.slice(sr.ZIP_PROTOCOL.length):n=r,i=yield Zs.load({url:n,type:"blob",target:t.live2dModel})):Array.isArray(r)&&r.length===1&&r[0]instanceof File&&r[0].name.endsWith(".zip")&&(i=r[0],n=URL.createObjectURL(i),s=r.settings),i){if(!i.size)throw new Error("Empty zip file");const o=yield sr.zipReader(i,n);s||(s=yield sr.createSettings(o)),s._objectURL=sr.ZIP_PROTOCOL+sr.uid+"/"+s.url;const a=yield sr.unzip(o,s);a.settings=s,t.source=a,n.startsWith("blob:")&&t.live2dModel.once("modelLoaded",l=>{l.once("destroy",function(){URL.revokeObjectURL(n)})}),sr.releaseReader(o)}return e()}));let RO=sr;const En=class uf{static resolveURL(e,r){var n;const i=(n=uf.filesMap[e])==null?void 0:n[r];if(i===void 0)throw new Error("Cannot find this file from uploaded files: "+r);return i}static upload(e,r){return Ke(this,null,function*(){const n={};for(const i of r.getDefinedFiles()){const s=decodeURI(__.resolve(r.url,i)),o=e.find(a=>a.webkitRelativePath===s);o&&(n[i]=URL.createObjectURL(o))}uf.filesMap[r._objectURL]=n})}static createSettings(e){return Ke(this,null,function*(){const r=e.find(a=>a.name.endsWith("model.json")||a.name.endsWith("model3.json"));if(!r)throw new TypeError("Settings file not found");const n=yield uf.readText(r),i=JSON.parse(n);i.url=r.webkitRelativePath;const s=Hr.findRuntime(i);if(!s)throw new Error("Unknown settings JSON");const o=s.createModelSettings(i);return o._objectURL=URL.createObjectURL(r),o})}static readText(e){return Ke(this,null,function*(){return new Promise((r,n)=>{const i=new FileReader;i.onload=()=>r(i.result),i.onerror=n,i.readAsText(e,"utf8")})})}};D(En,"live2dFactory");D(En,"filesMap",{});D(En,"factory",(t,e)=>Ke(En,null,function*(){if(Array.isArray(t.source)&&t.source[0]instanceof File){const r=t.source;let n=r.settings;if(!n)n=yield En.createSettings(r);else if(!n._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');n.validateFiles(r.map(i=>encodeURI(i.webkitRelativePath))),yield En.upload(r,n),n.resolveURL=function(i){return En.resolveURL(this._objectURL,i)},t.source=n,t.live2dModel.once("modelLoaded",i=>{i.once("destroy",function(){const s=this.settings._objectURL;if(URL.revokeObjectURL(s),En.filesMap[s])for(const o of Object.values(En.filesMap[s]))URL.revokeObjectURL(o);delete En.filesMap[s]})})}return e()}));let MO=En;const Vn=class Ft{static registerRuntime(e){Ft.runtimes.push(e),Ft.runtimes.sort((r,n)=>n.version-r.version)}static findRuntime(e){for(const r of Ft.runtimes)if(r.test(e))return r}static setupLive2DModel(e,r,n){return Ke(this,null,function*(){const i=new Promise(a=>e.once("textureLoaded",a)),s=new Promise(a=>e.once("modelLoaded",a)),o=Promise.all([i,s]).then(()=>e.emit("ready"));yield EO(Ft.live2DModelMiddlewares,{live2dModel:e,source:r,options:n||{}}),yield o,e.emit("load")})}static loadMotion(e,r,n){var i,s;const o=a=>e.emit("motionLoadError",r,n,a);try{const a=(i=e.definitions[r])==null?void 0:i[n];if(!a)return Promise.resolve(void 0);e.listeners("destroy").includes(Ft.releaseTasks)||e.once("destroy",Ft.releaseTasks);let l=Ft.motionTasksMap.get(e);l||(l={},Ft.motionTasksMap.set(e,l));let c=l[r];c||(c=[],l[r]=c);const u=e.getMotionFile(a);return(s=c[n])!=null||(c[n]=Zs.load({url:u,settings:e.settings,type:e.motionDataType,target:e}).then(d=>{var h;const f=(h=Ft.motionTasksMap.get(e))==null?void 0:h[r];f&&delete f[n];const p=e.createMotion(d,r,a);return e.emit("motionLoaded",r,n,p),p}).catch(d=>{De.warn(e.tag,`Failed to load motion: ${u}
`,d),o(d)})),c[n]}catch(a){De.warn(e.tag,`Failed to load motion at "${r}"[${n}]
`,a),o(a)}return Promise.resolve(void 0)}static loadExpression(e,r){var n;const i=s=>e.emit("expressionLoadError",r,s);try{const s=e.definitions[r];if(!s)return Promise.resolve(void 0);e.listeners("destroy").includes(Ft.releaseTasks)||e.once("destroy",Ft.releaseTasks);let o=Ft.expressionTasksMap.get(e);o||(o=[],Ft.expressionTasksMap.set(e,o));const a=e.getExpressionFile(s);return(n=o[r])!=null||(o[r]=Zs.load({url:a,settings:e.settings,type:"json",target:e}).then(l=>{const c=Ft.expressionTasksMap.get(e);c&&delete c[r];const u=e.createExpression(l,s);return e.emit("expressionLoaded",r,u),u}).catch(l=>{De.warn(e.tag,`Failed to load expression: ${a}
`,l),i(l)})),o[r]}catch(s){De.warn(e.tag,`Failed to load expression at [${r}]
`,s),i(s)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof Ug?Ft.motionTasksMap.delete(this):Ft.expressionTasksMap.delete(this)}};D(Vn,"runtimes",[]);D(Vn,"urlToJSON",CO);D(Vn,"jsonToSettings",TO);D(Vn,"waitUntilReady",PO);D(Vn,"setupOptionals",IO);D(Vn,"setupEssentials",AO);D(Vn,"createInternalModel",kO);D(Vn,"live2DModelMiddlewares",[RO.factory,MO.factory,CO,TO,PO,IO,AO,kO]);D(Vn,"motionTasksMap",new WeakMap);D(Vn,"expressionTasksMap",new WeakMap);let Hr=Vn;Ug.prototype._loadMotion=function(t,e){return Hr.loadMotion(this,t,e)};I_.prototype._loadExpression=function(t){return Hr.loadExpression(this,t)};MO.live2dFactory=Hr;RO.live2dFactory=Hr;const OO=class dx{constructor(e,{autoUpdate:r=!0,autoHitTest:n=!0,autoFocus:i=!0,autoInteract:s,ticker:o}={}){D(this,"model"),D(this,"destroyed",!1),D(this,"_ticker"),D(this,"_autoUpdate",!1),D(this,"_autoHitTest",!1),D(this,"_autoFocus",!1),o||(dx.defaultTicker?o=dx.defaultTicker:typeof PIXI<"u"&&(o=PIXI.Ticker.shared)),s!==void 0&&(n=s,i=s,De.warn(e.tag,"options.autoInteract is deprecated since v0.5.0, use autoHitTest and autoFocus instead.")),this.model=e,this.ticker=o,this.autoUpdate=r,this.autoHitTest=n,this.autoFocus=i,(n||i)&&(this.model.eventMode="static")}get ticker(){return this._ticker}set ticker(e){var r;this._ticker&&this._ticker.remove(Th,this),this._ticker=e,this._autoUpdate&&((r=this._ticker)==null||r.add(Th,this))}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var r;this.destroyed||(e?this._ticker?(this._ticker.add(Th,this),this._autoUpdate=!0):De.warn(this.model.tag,"No Ticker to be used for automatic updates. Either set option.ticker when creating Live2DModel, or expose PIXI to global scope (window.PIXI = PIXI)."):((r=this._ticker)==null||r.remove(Th,this),this._autoUpdate=!1))}get autoHitTest(){return this._autoHitTest}set autoHitTest(e){e!==this.autoHitTest&&(e?this.model.on("pointertap",LC,this):this.model.off("pointertap",LC,this),this._autoHitTest=e)}get autoFocus(){return this._autoFocus}set autoFocus(e){e!==this.autoFocus&&(e?this.model.on("globalpointermove",DC,this):this.model.off("globalpointermove",DC,this),this._autoFocus=e)}get autoInteract(){return this._autoHitTest&&this._autoFocus}set autoInteract(e){this.autoHitTest=e,this.autoFocus=e}onTickerUpdate(){const e=this.ticker.deltaMS;this.model.update(e)}onTap(e){this.model.tap(e.global.x,e.global.y)}onPointerMove(e){this.model.focus(e.global.x,e.global.y)}destroy(){this.autoFocus=!1,this.autoHitTest=!1,this.autoUpdate=!1,this.ticker=void 0,this.destroyed=!0}};D(OO,"defaultTicker");let OC=OO;function Th(){this.onTickerUpdate()}function LC(t){this.onTap(t)}function DC(t){this.onPointerMove(t)}class $Z extends Og{}const Kr=new Te,jZ=new Ne;class VZ extends gn{constructor(e){super(),D(this,"tag","Live2DModel(uninitialized)"),D(this,"internalModel"),D(this,"textures",[]),D(this,"transform",new $Z),D(this,"anchor",new gi(this.onAnchorChange,this,0,0)),D(this,"glContextID",-1),D(this,"elapsedTime",0),D(this,"deltaTime",0),D(this,"automator"),this.automator=new OC(this,e),this.once("modelLoaded",()=>this.init(e))}static from(e,r){const n=new this(r);return Hr.setupLive2DModel(n,e,r).then(()=>n)}static fromSync(e,r){const n=new this(r);return Hr.setupLive2DModel(n,e,r).then(r?.onLoad).catch(r?.onError),n}static registerTicker(e){OC.defaultTicker=e.shared}init(e){this.tag=`Live2DModel(${this.internalModel.settings.name})`}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,r,n,{sound:i=void 0,volume:s=Al,expression:o=void 0,resetExpression:a=!0,crossOrigin:l,onFinish:c,onError:u}={}){return r===void 0?this.internalModel.motionManager.startRandomMotion(e,n,{sound:i,volume:s,expression:o,resetExpression:a,crossOrigin:l,onFinish:c,onError:u}):this.internalModel.motionManager.startMotion(e,r,n,{sound:i,volume:s,expression:o,resetExpression:a,crossOrigin:l,onFinish:c,onError:u})}stopMotions(){return this.internalModel.motionManager.stopAllMotions()}speak(e,{volume:r=Al,expression:n,resetExpression:i=!0,crossOrigin:s,onFinish:o,onError:a}={}){return this.internalModel.motionManager.speak(e,{volume:r,expression:n,resetExpression:i,crossOrigin:s,onFinish:o,onError:a})}stopSpeaking(){return this.internalModel.motionManager.stopSpeaking()}expression(e){return this.internalModel.motionManager.expressionManager?e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,r,n=!1){Kr.x=e,Kr.y=r,this.toModelPosition(Kr,Kr,!0);const i=Kr.x/this.internalModel.originalWidth*2-1,s=Kr.y/this.internalModel.originalHeight*2-1,o=Math.atan2(s,i);this.internalModel.focusController.focus(Math.cos(o),-Math.sin(o),n)}tap(e,r){const n=this.hitTest(e,r);n.length&&(De.log(this.tag,"Hit",n),this.emit("hit",n))}hitTest(e,r){return Kr.x=e,Kr.y=r,this.toModelPosition(Kr,Kr),this.internalModel.hitTest(Kr.x,Kr.y)}toModelPosition(e,r=e.clone(),n){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,r),this.internalModel.localTransform.applyInverse(r,r),r}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let r=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),r=!0);for(let s=0;s<this.textures.length;s++){const o=this.textures[s];o.valid&&((r||!o.baseTexture._glTextures[this.glContextID])&&(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(o.baseTexture,0)),this.internalModel.bindTexture(s,o.baseTexture._glTextures[this.glContextID].texture),o.baseTexture.touched=e.textureGC.count)}const n=e.framebuffer.viewport;this.internalModel.viewport=[n.x,n.y,n.width,n.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const i=jZ.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(i),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),e?.texture&&this.textures.forEach(r=>r.destroy(e.baseTexture)),this.automator.destroy(),this.internalModel.destroy(),super.destroy(e)}}if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const GZ=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(t,e){GZ.call(this,t,e),e.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class WZ extends AMotion{constructor(e){super(),D(this,"params",[]),this.setFadeIn(e.fade_in>0?e.fade_in:Yl.expressionFadingDuration),this.setFadeOut(e.fade_out>0?e.fade_out:Yl.expressionFadingDuration),Array.isArray(e.params)&&e.params.forEach(r=>{const n=r.calc||"add";if(n==="add"){const i=r.def||0;r.val-=i}else if(n==="mult"){const i=r.def||1;r.val/=i}this.params.push({calc:n,val:r.val,id:r.id})})}updateParamExe(e,r,n,i){this.params.forEach(s=>{e.setParamFloat(s.id,s.val*n)})}}class HZ extends I_{constructor(e,r){var n;super(e,r),D(this,"queueManager",new MotionQueueManager),D(this,"definitions"),this.definitions=(n=this.settings.expressions)!=null?n:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(r=>r.name===e)}getExpressionFile(e){return e.file}createExpression(e,r){return new WZ(e)}_setExpression(e){return this.queueManager.startMotion(e)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.updateParam(e)}}class XZ extends Ug{constructor(e,r){super(e,r),D(this,"definitions"),D(this,"groups",{idle:"idle"}),D(this,"motionDataType","arraybuffer"),D(this,"queueManager",new MotionQueueManager),D(this,"lipSyncIds"),D(this,"expressionManager"),this.definitions=this.settings.motions,this.init(r),this.lipSyncIds=["PARAM_MOUTH_OPEN_Y"]}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new HZ(this.settings,e))}isFinished(){return this.queueManager.isFinished()}createMotion(e,r,n){const i=Live2DMotion.loadMotion(e),s=r===this.groups.idle?Yl.idleMotionFadingDuration:Yl.motionFadingDuration;return i.setFadeIn(n.fade_in>0?n.fade_in:s),i.setFadeOut(n.fade_out>0?n.fade_out:s),i}getMotionFile(e){return e.file}getMotionName(e){return e.file}getSoundFile(e){return e.sound}_startMotion(e,r){return e.onFinishHandler=r,this.queueManager.stopAllMotions(),this.queueManager.startMotion(e)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.updateParam(e)}destroy(){super.destroy(),this.queueManager=void 0}}class YZ{constructor(e){D(this,"leftParam"),D(this,"rightParam"),D(this,"blinkInterval",4e3),D(this,"closingDuration",100),D(this,"closedDuration",50),D(this,"openingDuration",150),D(this,"eyeState",0),D(this,"eyeParamValue",1),D(this,"closedTimer",0),D(this,"nextBlinkTimeLeft",this.blinkInterval),this.coreModel=e,this.leftParam=e.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=e.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(e){this.eyeParamValue=ql(e,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(e){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=e,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+PZ(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+e/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=e,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+e/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const bo=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class qZ extends SO{constructor(e,r,n){super(),D(this,"settings"),D(this,"coreModel"),D(this,"motionManager"),D(this,"eyeBlink"),D(this,"eyeballXParamIndex"),D(this,"eyeballYParamIndex"),D(this,"angleXParamIndex"),D(this,"angleYParamIndex"),D(this,"angleZParamIndex"),D(this,"bodyAngleXParamIndex"),D(this,"breathParamIndex"),D(this,"textureFlipY",!0),D(this,"lipSync",!0),D(this,"drawDataCount",0),D(this,"disableCulling",!1),D(this,"hasDrawn",!1),this.coreModel=e,this.settings=r,this.motionManager=new XZ(r,n),this.eyeBlink=new YZ(e),this.eyeballXParamIndex=e.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=e.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=e.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=e.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=e.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=e.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=e.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:s,value:o})=>this.coreModel.setParamFloat(s,o)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:s,value:o})=>this.coreModel.setPartsOpacity(s,o)),this.coreModel.saveParam();const e=this.coreModel.getModelContext()._$aS;e?.length&&(this.drawDataCount=e.length);let r=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:s=>r=s,get:()=>this.disableCulling?!1:r});const n=this.coreModel.getModelContext().clipManager,i=n.setupClip;n.setupClip=(s,o)=>{i.call(n,s,o),o.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const e={};if(this.settings.layout)for(const[r,n]of Object.entries(this.settings.layout)){let i=r;r==="center_x"?i="centerX":r==="center_y"&&(i="centerY"),e[i]=n}return e}updateWebGLContext(e,r){const n=this.coreModel.drawParamWebGL;n.firstDraw=!0,n.setGL(e),n.glno=r;for(const[o,a]of Object.entries(n))a instanceof WebGLBuffer&&(n[o]=null);const i=this.coreModel.getModelContext().clipManager;i.curFrameNo=r;const s=e.getParameter(e.FRAMEBUFFER_BINDING);i.getMaskRenderTexture(),e.bindFramebuffer(e.FRAMEBUFFER,s)}bindTexture(e,r){this.coreModel.setTexture(e,r)}getHitAreaDefs(){var e;return((e=this.settings.hitAreas)==null?void 0:e.map(r=>({id:r.id,name:r.name,index:this.coreModel.getDrawDataIndex(r.id)})))||[]}getDrawableIDs(){const e=this.coreModel.getModelContext(),r=[];for(let n=0;n<this.drawDataCount;n++){const i=e.getDrawData(n);i&&r.push(i.getDrawDataID().id)}return r}getDrawableIndex(e){return this.coreModel.getDrawDataIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawDataIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);return this.coreModel.getTransformedPoints(e).slice()}hitTest(e,r){return this.hasDrawn||De.warn("Trying to hit-test a Cubism 2 model that has not been rendered yet. The result will always be empty since the draw data is not ready."),super.hitTest(e,r)}update(e,r){var n,i,s,o;super.update(e,r);const a=this.coreModel;this.emit("beforeMotionUpdate");const l=this.motionManager.update(this.coreModel,r);if(this.emit("afterMotionUpdate"),a.saveParam(),(n=this.motionManager.expressionManager)==null||n.update(a,r),l||(i=this.eyeBlink)==null||i.update(e),this.updateFocus(),this.updateNaturalMovements(e,r),this.lipSync&&this.motionManager.currentAudio){let c=this.motionManager.mouthSync(),u=0;const d=1,h=1.2,f=.7;c>0&&(u=.4),c=Math.pow(c,f),c=ql(c*h,u,d);for(let p=0;p<this.motionManager.lipSyncIds.length;++p)this.coreModel.setParamFloat(this.coreModel.getParamIndex(this.motionManager.lipSyncIds[p]),c)}(s=this.physics)==null||s.update(r),(o=this.pose)==null||o.update(e),this.emit("beforeModelUpdate"),a.update(),a.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(e,r){const n=r/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(n/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(n/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(n/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(n/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(n/3.2345))}draw(e){const r=this.disableCulling;e.getParameter(e.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const n=this.drawingMatrix;bo[0]=n.a,bo[1]=n.b,bo[4]=n.c,bo[5]=n.d,bo[12]=n.tx,bo[13]=n.ty,this.coreModel.setMatrix(bo),this.coreModel.draw(),this.hasDrawn=!0,this.disableCulling=r}destroy(){super.destroy(),this.coreModel=void 0}}class xu extends Bg{constructor(e){if(super(e),D(this,"moc"),D(this,"textures"),D(this,"layout"),D(this,"hitAreas"),D(this,"initParams"),D(this,"initOpacities"),D(this,"expressions"),D(this,"motions",{}),!xu.isValidJSON(e))throw new TypeError("Invalid JSON.");this.moc=e.model,Dc("string",e,this,"textures","textures"),this.copy(e)}static isValidJSON(e){var r;return!!e&&typeof e.model=="string"&&((r=e.textures)==null?void 0:r.length)>0&&e.textures.every(n=>typeof n=="string")}copy(e){Lc("string",e,this,"name","name"),Lc("string",e,this,"pose","pose"),Lc("string",e,this,"physics","physics"),Lc("object",e,this,"layout","layout"),Lc("object",e,this,"motions","motions"),Dc("object",e,this,"hit_areas","hitAreas"),Dc("object",e,this,"expressions","expressions"),Dc("object",e,this,"init_params","initParams"),Dc("object",e,this,"init_opacities","initOpacities")}replaceFiles(e){super.replaceFiles(e);for(const[r,n]of Object.entries(this.motions))for(let i=0;i<n.length;i++)n[i].file=e(n[i].file,`motions.${r}[${i}].file`),n[i].sound!==void 0&&(n[i].sound=e(n[i].sound,`motions.${r}[${i}].sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].file=e(this.expressions[r].file,`expressions[${r}].file`)}}const KZ={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},ZZ={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class QZ{constructor(e,r){D(this,"physicsHairs",[]),this.coreModel=e,r.physics_hair&&(this.physicsHairs=r.physics_hair.map(n=>{const i=new PhysicsHair;return i.setup(n.setup.length,n.setup.regist,n.setup.mass),n.src.forEach(({id:s,ptype:o,scale:a,weight:l})=>{const c=KZ[o];c&&i.addSrcParam(c,s,a,l)}),n.targets.forEach(({id:s,ptype:o,scale:a,weight:l})=>{const c=ZZ[o];c&&i.addTargetParam(c,s,a,l)}),i}))}update(e){this.physicsHairs.forEach(r=>r.update(this.coreModel,e))}}class FC{constructor(e){D(this,"paramIndex",-1),D(this,"partsIndex",-1),D(this,"link",[]),this.id=e}initIndex(e){this.paramIndex=e.getParamIndex("VISIBLE:"+this.id),this.partsIndex=e.getPartsDataIndex(PartsDataID.getID(this.id)),e.setParamFloat(this.paramIndex,1)}}class JZ{constructor(e,r){D(this,"opacityAnimDuration",500),D(this,"partsGroups",[]),this.coreModel=e,r.parts_visible&&(this.partsGroups=r.parts_visible.map(({group:n})=>n.map(({id:i,link:s})=>{const o=new FC(i);return s&&(o.link=s.map(a=>new FC(a))),o})),this.init())}init(){this.partsGroups.forEach(e=>{e.forEach(r=>{if(r.initIndex(this.coreModel),r.paramIndex>=0){const n=this.coreModel.getParamFloat(r.paramIndex)!==0;this.coreModel.setPartsOpacity(r.partsIndex,n?1:0),this.coreModel.setParamFloat(r.paramIndex,n?1:0),r.link.length>0&&r.link.forEach(i=>i.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(e,r){const n=this.coreModel,i=.5,s=.15;let o=1,a=e.findIndex(({paramIndex:l,partsIndex:c})=>c>=0&&n.getParamFloat(l)!==0);if(a>=0){const l=n.getPartsOpacity(e[a].partsIndex);o=ql(l+r/this.opacityAnimDuration,0,1)}else a=0,o=1;e.forEach(({partsIndex:l},c)=>{if(l>=0)if(a==c)n.setPartsOpacity(l,o);else{let u=n.getPartsOpacity(l),d;o<i?d=o*(i-1)/i+1:d=(1-o)*i/(1-i),(1-d)*(1-o)>s&&(d=1-s/(1-o)),u>d&&(u=d),n.setPartsOpacity(l,u)}})}copyOpacity(e){const r=this.coreModel;e.forEach(({partsIndex:n,link:i})=>{if(n>=0&&i){const s=r.getPartsOpacity(n);i.forEach(({partsIndex:o})=>{o>=0&&r.setPartsOpacity(o,s)})}})}update(e){this.partsGroups.forEach(r=>{this.normalizePartsOpacityGroup(r,e),this.copyOpacity(r)})}}Hr.registerRuntime({version:2,test(t){return t instanceof xu||xu.isValidJSON(t)},ready(){return Promise.resolve()},isValidMoc(t){if(t.byteLength<3)return!1;const e=new Int8Array(t,0,3);return String.fromCharCode(...e)==="moc"},createModelSettings(t){return new xu(t)},createCoreModel(t){const e=Live2DModelWebGL.loadModel(t),r=Live2D.getError();if(r)throw r;return e},createInternalModel(t,e,r){return new qZ(t,e,r)},createPose(t,e){return new JZ(t,e)},createPhysics(t,e){return new QZ(t,e)}});if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class fe{constructor(e,r){this.x=e||0,this.y=r||0}add(e){const r=new fe(0,0);return r.x=this.x+e.x,r.y=this.y+e.y,r}substract(e){const r=new fe(0,0);return r.x=this.x-e.x,r.y=this.y-e.y,r}multiply(e){const r=new fe(0,0);return r.x=this.x*e.x,r.y=this.y*e.y,r}multiplyByScaler(e){return this.multiply(new fe(e,e))}division(e){const r=new fe(0,0);return r.x=this.x/e.x,r.y=this.y/e.y,r}divisionByScalar(e){return this.division(new fe(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}}const LO=class df{static range(e,r,n){return e<r?e=r:e>n&&(e=n),e}static sin(e){return Math.sin(e)}static cos(e){return Math.cos(e)}static abs(e){return Math.abs(e)}static sqrt(e){return Math.sqrt(e)}static cbrt(e){if(e===0)return e;let r=e;const n=r<0;n&&(r=-r);let i;return r===1/0?i=1/0:(i=Math.exp(Math.log(r)/3),i=(r/(i*i)+2*i)/3),n?-i:i}static getEasingSine(e){return e<0?0:e>1?1:.5-.5*this.cos(e*Math.PI)}static max(e,r){return e>r?e:r}static min(e,r){return e>r?r:e}static degreesToRadian(e){return e/180*Math.PI}static radianToDegrees(e){return e*180/Math.PI}static directionToRadian(e,r){const n=Math.atan2(r.y,r.x),i=Math.atan2(e.y,e.x);let s=n-i;for(;s<-Math.PI;)s+=Math.PI*2;for(;s>Math.PI;)s-=Math.PI*2;return s}static directionToDegrees(e,r){const n=this.directionToRadian(e,r);let i=this.radianToDegrees(n);return r.x-e.x>0&&(i=-i),i}static radianToDirection(e){const r=new fe;return r.x=this.sin(e),r.y=this.cos(e),r}static quadraticEquation(e,r,n){return this.abs(e)<df.Epsilon?this.abs(r)<df.Epsilon?-n:-n/r:-(r+this.sqrt(r*r-4*e*n))/(2*e)}static cardanoAlgorithmForBezier(e,r,n,i){if(this.sqrt(e)<df.Epsilon)return this.range(this.quadraticEquation(r,n,i),0,1);const s=r/e,o=n/e,a=i/e,l=(3*o-s*s)/3,c=l/3,u=(2*s*s*s-9*s*o+27*a)/27,d=u/2,h=d*d+c*c*c,f=.5,p=f+.01;if(h<0){const m=-l/3,_=m*m*m,C=this.sqrt(_),E=-u/(2*C),T=this.range(E,-1,1),S=Math.acos(T),I=2*this.cbrt(C),M=I*this.cos(S/3)-s/3;if(this.abs(M-f)<p)return this.range(M,0,1);const k=I*this.cos((S+2*Math.PI)/3)-s/3;if(this.abs(k-f)<p)return this.range(k,0,1);const R=I*this.cos((S+4*Math.PI)/3)-s/3;return this.range(R,0,1)}if(h==0){let m;d<0?m=this.cbrt(-d):m=-this.cbrt(d);const _=2*m-s/3;if(this.abs(_-f)<p)return this.range(_,0,1);const C=-m-s/3;return this.range(C,0,1)}const g=this.sqrt(h),x=this.cbrt(g-d),v=this.cbrt(g+d),y=x-v-s/3;return this.range(y,0,1)}constructor(){}};LO.Epsilon=1e-5;let ke=LO;class ln{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,r,n){const i=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=4;for(let o=0;o<s;++o)for(let a=0;a<s;++a)for(let l=0;l<s;++l)i[a+o*4]+=e[l+o*4]*r[a+l*4];for(let o=0;o<16;++o)n[o]=i[o]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let r=0;r<16;++r)this._tr[r]=e[r]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,r){const n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1]);ln.multiply(n,this._tr,this._tr)}translate(e,r){this._tr[12]=e,this._tr[13]=r}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,r){const n=new Float32Array([e,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);ln.multiply(n,this._tr,this._tr)}scale(e,r){this._tr[0]=e,this._tr[5]=r}multiplyByMatrix(e){ln.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new ln;for(let r=0;r<this._tr.length;r++)e._tr[r]=this._tr[r];return e}}class A_{initialize(e){this._model=e}drawModel(){this.getModel()!=null&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,r,n,i){e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),n<0?n=0:n>1&&(n=1),i<0?i=0:i>1&&(i=1),this._modelColor.R=e,this._modelColor.G=r,this._modelColor.B=n,this._modelColor.A=i}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisotropy=e}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(e){this._useHighPrecisionMask=e}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._modelColor=new Nr,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new ln,this._mvpMatrix4x4.loadIdentity()}}var es=(t=>(t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",t))(es||{});class Nr{constructor(e=1,r=1,n=1,i=1){this.R=e,this.G=r,this.B=n,this.A=i}}let Qn=!1,Aa=!1,ka;const Ly={vertexOffset:0,vertexStep:2};class td{static startUp(e){if(Qn)return Fc("CubismFramework.startUp() is already done."),Qn;if(Live2DCubismCore._isStarted)return Qn=!0,!0;if(Live2DCubismCore._isStarted=!0,ka=e,ka&&Live2DCubismCore.Logging.csmSetLogFunction(ka.logFunction),Qn=!0,Qn){const r=Live2DCubismCore.Version.csmGetVersion(),n=(r&4278190080)>>24,i=(r&16711680)>>16,s=r&65535,o=r;Fc("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+n).slice(-2),("00"+i).slice(-2),("0000"+s).slice(-4),o)}return Fc("CubismFramework.startUp() is complete."),Qn}static cleanUp(){Qn=!1,Aa=!1,ka=void 0}static initialize(e=0){if(!Qn){zo("CubismFramework is not started.");return}if(Aa){zo("CubismFramework.initialize() skipped, already initialized.");return}Live2DCubismCore.Memory.initializeAmountOfMemory(e),Aa=!0,Fc("CubismFramework.initialize() is complete.")}static dispose(){if(!Qn){zo("CubismFramework is not started.");return}if(!Aa){zo("CubismFramework.dispose() skipped, not initialized.");return}A_.staticRelease(),Aa=!1,Fc("CubismFramework.dispose() is complete.")}static isStarted(){return Qn}static isInitialized(){return Aa}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return ka!=null?ka.loggingLevel:5}constructor(){}}var hc=(t=>(t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off",t))(hc||{});const ol=typeof process<"u"?()=>{}:t=>console.assert(t);function NC(t,...e){zg.print(hc.LogLevel_Debug,"[CSM][D]"+t+`
`,e)}function Fc(t,...e){zg.print(hc.LogLevel_Info,"[CSM][I]"+t+`
`,e)}function zo(t,...e){zg.print(hc.LogLevel_Warning,"[CSM][W]"+t+`
`,e)}function fi(t,...e){zg.print(hc.LogLevel_Error,"[CSM][E]"+t+`
`,e)}class zg{static print(e,r,n){if(e<td.getLoggingLevel())return;const i=td.coreLogFunction;if(!i)return;const s=r.replace(/{(\d+)}/g,(o,a)=>n[a]);i(s)}static dumpBytes(e,r,n){for(let i=0;i<n;i++)i%16==0&&i>0?this.print(e,`
`):i%8==0&&i>0&&this.print(e,"  "),this.print(e,"{0} ",[r[i]&255]);this.print(e,`
`)}constructor(){}}class DO{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(e,r,n){if(!r.isAvailable()||r.isFinished())return;if(!r.isStarted()){r.setIsStarted(!0),r.setStartTime(n-this._offsetSeconds),r.setFadeInStartTime(n);const a=this.getDuration();r.getEndTime()<0&&r.setEndTime(a<=0?-1:r.getStartTime()+a)}let i=this._weight;const s=this._fadeInSeconds==0?1:ke.getEasingSine((n-r.getFadeInStartTime())/this._fadeInSeconds),o=this._fadeOutSeconds==0||r.getEndTime()<0?1:ke.getEasingSine((r.getEndTime()-n)/this._fadeOutSeconds);i=i*s*o,r.setState(n,i),ol(0<=i&&i<=1),this.doUpdateParameters(e,n,i,r),r.getEndTime()>0&&r.getEndTime()<n&&r.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,r){return this._firedEventValues}setFinishedMotionHandler(e){this._onFinishedMotion=e}getFinishedMotionHandler(){return this._onFinishedMotion}isExistModelOpacity(){return!1}getModelOpacityIndex(){return-1}getModelOpacityId(e){}getModelOpacityValue(){return 1}}const BC=1;class k_ extends DO{static create(e){const r=new k_;return r.parse(e),r}doUpdateParameters(e,r,n,i){for(let s=0;s<this._parameters.length;++s){const o=this._parameters[s];switch(o.blendType){case 0:{e.addParameterValueById(o.parameterId,o.value,n);break}case 1:{e.multiplyParameterValueById(o.parameterId,o.value,n);break}case 2:{e.setParameterValueById(o.parameterId,o.value,n);break}}}}parse(e){this.setFadeInTime(e.FadeInTime!=null?e.FadeInTime:BC),this.setFadeOutTime(e.FadeOutTime!=null?e.FadeOutTime:BC);const r=(e.Parameters||[]).length;for(let n=0;n<r;++n){const i=e.Parameters[n],s=i.Id,o=i.Value;let a;!i.Blend||i.Blend==="Add"?a=0:i.Blend==="Multiply"?a=1:i.Blend==="Overwrite"?a=2:a=0;const l={parameterId:s,blendType:a,value:o};this._parameters.push(l)}}constructor(){super(),this._parameters=[]}}class eQ{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,r){const n=r+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||n<this._endTimeSeconds)&&(this._endTimeSeconds=n)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,r){this._stateTimeSeconds=e,this._stateWeight=r}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class FO{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let e=0;e<this._motions.length;++e)this._motions[e]&&this._motions[e].release();this._motions=void 0}startMotion(e,r,n){if(e==null)return tQ;let i;for(let s=0;s<this._motions.length;++s)i=this._motions[s],i?.setFadeOut(i._motion.getFadeOutTime());return i=new eQ,i._autoDelete=r,i._motion=e,this._motions.push(i),i._motionQueueEntryHandle}isFinished(){let e=0;for(;e<this._motions.length;){const r=this._motions[e];if(r==null){this._motions.splice(e,1);continue}if(r._motion==null){r.release(),this._motions.splice(e,1);continue}if(!r.isFinished())return!1;e++}return!0}isFinishedByHandle(e){for(let r=0;r<this._motions.length;r++){const n=this._motions[r];if(n!=null&&n._motionQueueEntryHandle==e&&!n.isFinished())return!1}return!0}stopAllMotions(){for(let e=0;e<this._motions.length;e++){const r=this._motions[e];r?.release()}this._motions=[]}getCubismMotionQueueEntry(e){return this._motions.find(r=>r!=null&&r._motionQueueEntryHandle==e)}setEventCallback(e,r=null){this._eventCallBack=e,this._eventCustomData=r}doUpdateMotion(e,r){let n=!1,i=0;for(;i<this._motions.length;){const s=this._motions[i];if(s==null){this._motions.splice(i,1);continue}const o=s._motion;if(o==null){s.release(),this._motions.splice(i,1);continue}o.updateParameters(e,s,r),n=!0;const a=o.getFiredEvent(s.getLastCheckEventSeconds()-s.getStartTime(),r-s.getStartTime());for(let l=0;l<a.length;++l)this._eventCallBack(this,a[l],this._eventCustomData);s.setLastCheckEventSeconds(r),s.isFinished()?(s.release(),this._motions.splice(i,1)):(s.isTriggeredFadeOut()&&s.startFadeOut(s.getFadeOutSeconds(),r),i++)}return n}}const tQ=-1;class rQ extends I_{constructor(e,r){var n;super(e,r),D(this,"queueManager",new FO),D(this,"definitions"),this.definitions=(n=e.expressions)!=null?n:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(r=>r.Name===e)}getExpressionFile(e){return e.File}createExpression(e,r){return k_.create(e)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.doUpdateMotion(e,r)}}var ni=(t=>(t[t.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",t[t.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",t[t.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",t))(ni||{}),si=(t=>(t[t.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",t[t.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",t[t.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",t[t.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",t))(si||{});class ws{constructor(e=0,r=0){this.time=e,this.value=r}}class nQ{constructor(){this.basePointIndex=0,this.segmentType=0}}class iQ{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class sQ{constructor(){this.fireTime=0,this.value=""}}class oQ{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class NO{constructor(e){this._json=e}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(e){return e==0?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(e){return this._json.Curves[e].Target}getMotionCurveId(e){return this._json.Curves[e].Id}getMotionCurveFadeInTime(e){return this._json.Curves[e].FadeInTime}getMotionCurveFadeOutTime(e){return this._json.Curves[e].FadeOutTime}getMotionCurveSegmentCount(e){return this._json.Curves[e].Segments.length}getMotionCurveSegment(e,r){return this._json.Curves[e].Segments[r]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(e){return this._json.UserData[e].Time}getEventValue(e){return this._json.UserData[e].Value}}var BO=(t=>(t[t.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",t))(BO||{});const aQ="EyeBlink",lQ="LipSync",cQ="Model",uQ="Parameter",dQ="PartOpacity",Ph="Opacity",hQ=!1;function rn(t,e,r){const n=new ws;return n.time=t.time+(e.time-t.time)*r,n.value=t.value+(e.value-t.value)*r,n}function fQ(t,e){let r=(e-t[0].time)/(t[1].time-t[0].time);return r<0&&(r=0),t[0].value+(t[1].value-t[0].value)*r}function pQ(t,e){let r=(e-t[0].time)/(t[3].time-t[0].time);r<0&&(r=0);const n=rn(t[0],t[1],r),i=rn(t[1],t[2],r),s=rn(t[2],t[3],r),o=rn(n,i,r),a=rn(i,s,r);return rn(o,a,r).value}function gQ(t,e){const r=e,n=t[0].time,i=t[3].time,s=t[1].time,o=t[2].time,a=i-3*o+3*s-n,l=3*o-6*s+3*n,c=3*s-3*n,u=n-r,d=ke.cardanoAlgorithmForBezier(a,l,c,u),h=rn(t[0],t[1],d),f=rn(t[1],t[2],d),p=rn(t[2],t[3],d),g=rn(h,f,d),x=rn(f,p,d);return rn(g,x,d).value}function mQ(t,e){return t[0].value}function yQ(t,e){return t[1].value}function Dy(t,e,r){const n=t.curves[e];let i=-1;const s=n.baseSegmentIndex+n.segmentCount;let o=0;for(let l=n.baseSegmentIndex;l<s;++l)if(o=t.segments[l].basePointIndex+(t.segments[l].segmentType==si.CubismMotionSegmentType_Bezier?3:1),t.points[o].time>r){i=l;break}if(i==-1)return t.points[o].value;const a=t.segments[i];return a.evaluate(t.points.slice(a.basePointIndex),r)}class R_ extends DO{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._modelOpacity=1}static create(e,r){const n=new R_;return n.parse(e),n._sourceFrameRate=n._motionData.fps,n._loopDurationSeconds=n._motionData.duration,n._onFinishedMotion=r,n}doUpdateParameters(e,r,n,i){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=aQ),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=lQ),this._modelCurveIdOpacity==null&&(this._modelCurveIdOpacity=Ph);let s=r-i.getStartTime();s<0&&(s=0);let o=Number.MAX_VALUE,a=Number.MAX_VALUE;const l=64;let c=0,u=0;this._eyeBlinkParameterIds.length>l&&NC("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>l&&NC("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const d=this._fadeInSeconds<=0?1:ke.getEasingSine((r-i.getFadeInStartTime())/this._fadeInSeconds),h=this._fadeOutSeconds<=0||i.getEndTime()<0?1:ke.getEasingSine((i.getEndTime()-r)/this._fadeOutSeconds);let f,p,g,x=s;if(this._isLoop)for(;x>this._motionData.duration;)x-=this._motionData.duration;const v=this._motionData.curves;for(p=0;p<this._motionData.curveCount&&v[p].type==ni.CubismMotionCurveTarget_Model;++p)f=Dy(this._motionData,p,x),v[p].id==this._modelCurveIdEyeBlink?a=f:v[p].id==this._modelCurveIdLipSync?o=f:v[p].id==this._modelCurveIdOpacity&&(this._modelOpacity=f,e.setModelOapcity(this.getModelOpacityValue()));for(;p<this._motionData.curveCount&&v[p].type==ni.CubismMotionCurveTarget_Parameter;++p){if(g=e.getParameterIndex(v[p].id),g==-1)continue;const y=e.getParameterValueByIndex(g);if(f=Dy(this._motionData,p,x),a!=Number.MAX_VALUE){for(let _=0;_<this._eyeBlinkParameterIds.length&&_<l;++_)if(this._eyeBlinkParameterIds[_]==v[p].id){f*=a,u|=1<<_;break}}if(o!=Number.MAX_VALUE){for(let _=0;_<this._lipSyncParameterIds.length&&_<l;++_)if(this._lipSyncParameterIds[_]==v[p].id){f+=o,c|=1<<_;break}}let m;if(v[p].fadeInTime<0&&v[p].fadeOutTime<0)m=y+(f-y)*n;else{let _,C;v[p].fadeInTime<0?_=d:_=v[p].fadeInTime==0?1:ke.getEasingSine((r-i.getFadeInStartTime())/v[p].fadeInTime),v[p].fadeOutTime<0?C=h:C=v[p].fadeOutTime==0||i.getEndTime()<0?1:ke.getEasingSine((i.getEndTime()-r)/v[p].fadeOutTime);const E=this._weight*_*C;m=y+(f-y)*E}e.setParameterValueByIndex(g,m,1)}{if(a!=Number.MAX_VALUE)for(let y=0;y<this._eyeBlinkParameterIds.length&&y<l;++y){const m=e.getParameterValueById(this._eyeBlinkParameterIds[y]);if(u>>y&1)continue;const _=m+(a-m)*n;e.setParameterValueById(this._eyeBlinkParameterIds[y],_)}if(o!=Number.MAX_VALUE)for(let y=0;y<this._lipSyncParameterIds.length&&y<l;++y){const m=e.getParameterValueById(this._lipSyncParameterIds[y]);if(c>>y&1)continue;const _=m+(o-m)*n;e.setParameterValueById(this._lipSyncParameterIds[y],_)}}for(;p<this._motionData.curveCount&&v[p].type==ni.CubismMotionCurveTarget_PartOpacity;++p)if(f=Dy(this._motionData,p,x),Ju.setOpacityFromMotion)e.setPartOpacityById(v[p].id,f);else{if(g=e.getParameterIndex(v[p].id),g==-1)continue;e.setParameterValueByIndex(g,f)}s>=this._motionData.duration&&(this._isLoop?(i.setStartTime(r),this._isLoopFadeIn&&i.setFadeInStartTime(r)):(this._onFinishedMotion&&this._onFinishedMotion(this),i.setIsFinished(!0))),this._lastWeight=n}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,r){const n=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==n[i].id){n[i].fadeInTime=r;return}}setParameterFadeOutTime(e,r){const n=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==n[i].id){n[i].fadeOutTime=r;return}}getParameterFadeInTime(e){const r=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(e==r[n].id)return r[n].fadeInTime;return-1}getParameterFadeOutTime(e){const r=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(e==r[n].id)return r[n].fadeOutTime;return-1}setEffectIds(e,r){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=r}release(){this._motionData=void 0}parse(e){this._motionData=new oQ;const r=new NO(e);this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount();const n=r.getEvaluationOptionFlag(BO.EvaluationOptionFlag_AreBeziersRistricted),i=r.getMotionFadeInTime(),s=r.getMotionFadeOutTime();i!==void 0?this._fadeInSeconds=i<0?1:i:this._fadeInSeconds=1,s!==void 0?this._fadeOutSeconds=s<0?1:s:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new iQ),this._motionData.segments=Array.from({length:r.getMotionTotalSegmentCount()}).map(()=>new nQ),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new sQ),this._motionData.points=[];let o=0,a=0;for(let l=0;l<this._motionData.curveCount;++l){const c=this._motionData.curves[l];switch(r.getMotionCurveTarget(l)){case cQ:c.type=ni.CubismMotionCurveTarget_Model;break;case uQ:c.type=ni.CubismMotionCurveTarget_Parameter;break;case dQ:c.type=ni.CubismMotionCurveTarget_PartOpacity;break;default:zo('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}c.id=r.getMotionCurveId(l),c.baseSegmentIndex=a;const u=r.getMotionCurveFadeInTime(l),d=r.getMotionCurveFadeOutTime(l);c.fadeInTime=u!==void 0?u:-1,c.fadeOutTime=d!==void 0?d:-1;for(let h=0;h<r.getMotionCurveSegmentCount(l);){switch(h==0?(this._motionData.segments[a].basePointIndex=o,this._motionData.points[o]=new ws(r.getMotionCurveSegment(l,h),r.getMotionCurveSegment(l,h+1)),o+=1,h+=2):this._motionData.segments[a].basePointIndex=o-1,r.getMotionCurveSegment(l,h)){case si.CubismMotionSegmentType_Linear:{this._motionData.segments[a].segmentType=si.CubismMotionSegmentType_Linear,this._motionData.segments[a].evaluate=fQ,this._motionData.points[o]=new ws(r.getMotionCurveSegment(l,h+1),r.getMotionCurveSegment(l,h+2)),o+=1,h+=3;break}case si.CubismMotionSegmentType_Bezier:{this._motionData.segments[a].segmentType=si.CubismMotionSegmentType_Bezier,n||hQ?this._motionData.segments[a].evaluate=pQ:this._motionData.segments[a].evaluate=gQ,this._motionData.points[o]=new ws(r.getMotionCurveSegment(l,h+1),r.getMotionCurveSegment(l,h+2)),this._motionData.points[o+1]=new ws(r.getMotionCurveSegment(l,h+3),r.getMotionCurveSegment(l,h+4)),this._motionData.points[o+2]=new ws(r.getMotionCurveSegment(l,h+5),r.getMotionCurveSegment(l,h+6)),o+=3,h+=7;break}case si.CubismMotionSegmentType_Stepped:{this._motionData.segments[a].segmentType=si.CubismMotionSegmentType_Stepped,this._motionData.segments[a].evaluate=mQ,this._motionData.points[o]=new ws(r.getMotionCurveSegment(l,h+1),r.getMotionCurveSegment(l,h+2)),o+=1,h+=3;break}case si.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[a].segmentType=si.CubismMotionSegmentType_InverseStepped,this._motionData.segments[a].evaluate=yQ,this._motionData.points[o]=new ws(r.getMotionCurveSegment(l,h+1),r.getMotionCurveSegment(l,h+2)),o+=1,h+=3;break}default:{ol(0);break}}++c.segmentCount,++a}this._motionData.curves.push(c)}for(let l=0;l<r.getEventCount();++l)this._motionData.events[l].fireTime=r.getEventTime(l),this._motionData.events[l].value=r.getEventValue(l);r.release()}getFiredEvent(e,r){this._firedEventValues.length=0;for(let n=0;n<this._motionData.eventCount;++n)this._motionData.events[n].fireTime>e&&this._motionData.events[n].fireTime<=r&&this._firedEventValues.push(this._motionData.events[n].value);return this._firedEventValues}isExistModelOpacity(){for(let e=0;e<this._motionData.curveCount;e++){const r=this._motionData.curves[e];if(r.type==ni.CubismMotionCurveTarget_Model&&r.id===Ph)return!0}return!1}getModelOpacityIndex(){if(this.isExistModelOpacity())for(let e=0;e<this._motionData.curveCount;e++){const r=this._motionData.curves[e];if(r.type==ni.CubismMotionCurveTarget_Model&&r.id===Ph)return e}return-1}getModelOpacityId(e){if(e!=-1){const r=this._motionData.curves[e];if(r.type==ni.CubismMotionCurveTarget_Model&&r.id===Ph)return r.id}}getModelOpacityValue(){return this._modelOpacity}}class vQ extends Ug{constructor(e,r){var n;super(e,r),D(this,"definitions"),D(this,"groups",{idle:"Idle"}),D(this,"motionDataType","json"),D(this,"queueManager",new FO),D(this,"expressionManager"),D(this,"eyeBlinkIds"),D(this,"lipSyncIds",["ParamMouthOpenY"]),this.definitions=(n=e.motions)!=null?n:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[];const i=e.getLipSyncParameters();i?.length&&(this.lipSyncIds=i),this.init(r)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new rQ(this.settings,e)),this.queueManager.setEventCallback((r,n,i)=>{this.emit("motion:"+n)})}isFinished(){return this.queueManager.isFinished()}_startMotion(e,r){return e.setFinishedMotionHandler(r),this.queueManager.stopAllMotions(),this.queueManager.startMotion(e,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,r,n){const i=R_.create(e),s=new NO(e),o=(r===this.groups.idle?Yl.idleMotionFadingDuration:Yl.motionFadingDuration)/1e3;return s.getMotionFadeInTime()===void 0&&i.setFadeInTime(n.FadeInTime>0?n.FadeInTime:o),s.getMotionFadeOutTime()===void 0&&i.setFadeOutTime(n.FadeOutTime>0?n.FadeOutTime:o),i.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),i}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,r){return this.queueManager.doUpdateMotion(e,r)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const xQ="ParamAngleX",bQ="ParamAngleY",_Q="ParamAngleZ",wQ="ParamEyeBallX",SQ="ParamEyeBallY",EQ="ParamMouthForm",CQ="ParamBodyAngleX",TQ="ParamBreath";class M_{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new M_}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,r){this._currentTime+=r;const n=this._currentTime*2*3.14159;for(let i=0;i<this._breathParameters.length;++i){const s=this._breathParameters[i];e.addParameterValueById(s.parameterId,s.offset+s.peak*Math.sin(n/s.cycle),s.weight)}}}class Nc{constructor(e,r,n,i,s){this.parameterId=e??void 0,this.offset=r??0,this.peak=n??0,this.cycle=i??0,this.weight=s??0}}const UO=class hx{static create(e){return new hx(e)}setBlinkingInterval(e){this._blinkingIntervalSeconds=e}setBlinkingSetting(e,r,n){this._closingSeconds=e,this._closedSeconds=r,this._openingSeconds=n}setParameterIds(e){this._parameterIds=e}getParameterIds(){return this._parameterIds}updateParameters(e,r){this._userTimeSeconds+=r;let n,i=0;switch(this._blinkingState){case 2:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,i>=1&&(i=1,this._blinkingState=3,this._stateStartTimeSeconds=this._userTimeSeconds),n=1-i;break;case 3:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,i>=1&&(this._blinkingState=4,this._stateStartTimeSeconds=this._userTimeSeconds),n=0;break;case 4:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,i>=1&&(i=1,this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming()),n=i;break;case 1:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=2,this._stateStartTimeSeconds=this._userTimeSeconds),n=1;break;case 0:default:this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming(),n=1;break}hx.CloseIfZero||(n=-n);for(let s=0;s<this._parameterIds.length;++s)e.setParameterValueById(this._parameterIds[s],n)}constructor(e){var r,n;this._blinkingState=0,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],e!=null&&(this._parameterIds=(n=(r=e.getEyeBlinkParameters())==null?void 0:r.slice())!=null?n:this._parameterIds)}determinNextBlinkingTiming(){const e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}};UO.CloseIfZero=!0;let PQ=UO;class fx{constructor(e=0,r=0,n=0,i=0){this.x=e,this.y=r,this.width=n,this.height=i}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,r){this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2}}const Ih=4,IQ=36,AQ=32,kQ=10;let _o,Gi,Sp;class UC{getChannelFlagAsColor(e){return this._channelColors[e]}getMaskRenderTexture(){if(this._maskTexture&&this._maskTexture.textures!=null)this._maskTexture.frameNo=this._currentFrameNo;else{this._maskRenderTextures=[],this._maskColorBuffers=[];const e=this._clippingMaskBufferSize;for(let r=0;r<this._renderTextureCount;r++)this._maskColorBuffers.push(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers[r]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.push(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures[r]),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers[r],0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Sp),this._maskTexture=new RQ(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,r){let n=Number.MAX_VALUE,i=Number.MAX_VALUE,s=Number.MIN_VALUE,o=Number.MIN_VALUE;const a=r._clippedDrawableIndexList.length;for(let l=0;l<a;l++){const c=r._clippedDrawableIndexList[l],u=e.getDrawableVertexCount(c),d=e.getDrawableVertices(c);let h=Number.MAX_VALUE,f=Number.MAX_VALUE,p=-Number.MAX_VALUE,g=-Number.MAX_VALUE;const x=u*Ly.vertexStep;for(let v=Ly.vertexOffset;v<x;v+=Ly.vertexStep){const y=d[v],m=d[v+1];y<h&&(h=y),y>p&&(p=y),m<f&&(f=m),m>g&&(g=m)}if(h!=Number.MAX_VALUE)if(h<n&&(n=h),f<i&&(i=f),p>s&&(s=p),g>o&&(o=g),n==Number.MAX_VALUE)r._allClippedDrawRect.x=0,r._allClippedDrawRect.y=0,r._allClippedDrawRect.width=0,r._allClippedDrawRect.height=0,r._isUsing=!1;else{r._isUsing=!0;const v=s-n,y=o-i;r._allClippedDrawRect.x=n,r._allClippedDrawRect.y=i,r._allClippedDrawRect.width=v,r._allClippedDrawRect.height=y}}}constructor(){this._currentMaskRenderTexture=null,this._currentFrameNo=0,this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new fx,this._tmpMatrix=new ln,this._tmpMatrixForMask=new ln,this._tmpMatrixForDraw=new ln;let e=new Nr;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.push(e),e=new Nr,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.push(e),e=new Nr,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.push(e),e=new Nr,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.push(e)}release(){var e;const r=this;for(let n=0;n<this._clippingContextListForMask.length;n++)this._clippingContextListForMask[n]&&((e=this._clippingContextListForMask[n])==null||e.release());if(r._clippingContextListForMask=void 0,r._clippingContextListForDraw=void 0,this._maskTexture){for(let n=0;n<this._maskTexture.textures.length;n++)this.gl.deleteFramebuffer(this._maskTexture.textures[n]);this._maskTexture=void 0}if(r._channelColors=void 0,this._maskColorBuffers)for(let n=0;n<this._maskColorBuffers.length;n++)this.gl.deleteTexture(this._maskColorBuffers[n]);this._maskColorBuffers=void 0,this._maskRenderTextures=void 0,this._clearedFrameBufferflags=void 0}initialize(e,r,n,i,s){s%1!=0&&(zo("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),s=~~s),s<1&&zo("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=s<1?1:s,this._clearedFrameBufferflags=[];for(let o=0;o<r;o++){if(i[o]<=0){this._clippingContextListForDraw.push(null);continue}let a=this.findSameClip(n[o],i[o]);a==null&&(a=new MQ(this,n[o],i[o]),this._clippingContextListForMask.push(a)),a.addClippedDrawable(o),this._clippingContextListForDraw.push(a)}}setupClippingContext(e,r){this._currentFrameNo++;let n=0;for(let i=0;i<this._clippingContextListForMask.length;i++){const s=this._clippingContextListForMask[i];this.calcClippedDrawTotalBounds(e,s),s._isUsing&&n++}if(n>0){this.setupLayoutBounds(r.isUsingHighPrecisionMask()?0:n),r.isUsingHighPrecisionMask()||(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture()[0],r.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._clearedFrameBufferflags||(this._clearedFrameBufferflags=[]);for(let i=0;i<this._renderTextureCount;i++)this._clearedFrameBufferflags[i]=!1;for(let i=0;i<this._clippingContextListForMask.length;i++){const s=this._clippingContextListForMask[i],o=s._allClippedDrawRect,a=s._layoutBounds,l=.05;let c=0,u=0;const d=this.getMaskRenderTexture()[s._bufferIndex];if(this._currentMaskRenderTexture!=d&&!r.isUsingHighPrecisionMask()&&(this._currentMaskRenderTexture=d,r.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),r.isUsingHighPrecisionMask()){const h=e.getPixelsPerUnit(),f=s.getClippingManager()._clippingMaskBufferSize,p=a.width*f,g=a.height*f;this._tmpBoundsOnModel.setRect(o),this._tmpBoundsOnModel.width*h>p?(this._tmpBoundsOnModel.expand(o.width*l,0),c=a.width/this._tmpBoundsOnModel.width):c=h/p,this._tmpBoundsOnModel.height*h>g?(this._tmpBoundsOnModel.expand(0,o.height*l),u=a.height/this._tmpBoundsOnModel.height):u=h/g}else this._tmpBoundsOnModel.setRect(o),this._tmpBoundsOnModel.expand(o.width*l,o.height*l),c=a.width/this._tmpBoundsOnModel.width,u=a.height/this._tmpBoundsOnModel.height;if(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(a.x,a.y),this._tmpMatrix.scaleRelative(c,u),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(a.x,a.y),this._tmpMatrix.scaleRelative(c,u),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),!r.isUsingHighPrecisionMask()){const h=s._clippingIdCount;for(let f=0;f<h;f++){const p=s._clippingIdList[f];e.getDrawableDynamicFlagVertexPositionsDidChange(p)&&(r.setIsCulling(e.getDrawableCulling(p)!=!1),this._clearedFrameBufferflags[s._bufferIndex]||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferflags[s._bufferIndex]=!0),r.setClippingContextBufferForMask(s),r.drawMesh(e.getDrawableTextureIndex(p),e.getDrawableVertexIndexCount(p),e.getDrawableVertexCount(p),e.getDrawableVertexIndices(p),e.getDrawableVertices(p),e.getDrawableVertexUvs(p),e.getMultiplyColor(p),e.getScreenColor(p),e.getDrawableOpacity(p),es.CubismBlendMode_Normal,!1))}}}r.isUsingHighPrecisionMask()||(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Sp),r.setClippingContextBufferForMask(null),this.gl.viewport(Gi[0],Gi[1],Gi[2],Gi[3]))}}findSameClip(e,r){for(let n=0;n<this._clippingContextListForMask.length;n++){const i=this._clippingContextListForMask[n],s=i._clippingIdCount;if(s!=r)continue;let o=0;for(let a=0;a<s;a++){const l=i._clippingIdList[a];for(let c=0;c<s;c++)if(e[c]==l){o++;break}}if(o==s)return i}return null}setupLayoutBounds(e){const r=this._renderTextureCount<=1?IQ:AQ*this._renderTextureCount;if(e<=0||e>r){e>r&&fi(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,e-r,this._renderTextureCount,e);for(let c=0;c<this._clippingContextListForMask.length;c++){const u=this._clippingContextListForMask[c];u._layoutChannelNo=0,u._layoutBounds.x=0,u._layoutBounds.y=0,u._layoutBounds.width=1,u._layoutBounds.height=1,u._bufferIndex=0}return}const n=this._renderTextureCount<=1?9:8;let i=e/this._renderTextureCount,s=e%this._renderTextureCount;i=~~i,s=~~s;let o=i/Ih,a=i%Ih;o=~~o,a=~~a;let l=0;for(let c=0;c<this._renderTextureCount;c++)for(let u=0;u<Ih;u++){let d=o+(u<a?1:0);const h=a+1>=Ih?0:a+1;if(d<n&&u==h&&(d+=c<s?1:0),d!=0)if(d==1){const f=this._clippingContextListForMask[l++];f._layoutChannelNo=u,f._layoutBounds.x=0,f._layoutBounds.y=0,f._layoutBounds.width=1,f._layoutBounds.height=1,f._bufferIndex=c}else if(d==2)for(let f=0;f<d;f++){let p=f%2;p=~~p;const g=this._clippingContextListForMask[l++];g._layoutChannelNo=u,g._layoutBounds.x=p*.5,g._layoutBounds.y=0,g._layoutBounds.width=.5,g._layoutBounds.height=1,g._bufferIndex=c}else if(d<=4)for(let f=0;f<d;f++){let p=f%2,g=f/2;p=~~p,g=~~g;const x=this._clippingContextListForMask[l++];x._layoutChannelNo=u,x._layoutBounds.x=p*.5,x._layoutBounds.y=g*.5,x._layoutBounds.width=.5,x._layoutBounds.height=.5,x._bufferIndex=c}else if(d<=n)for(let f=0;f<d;f++){let p=f%3,g=f/3;p=~~p,g=~~g;const x=this._clippingContextListForMask[l++];x._layoutChannelNo=u,x._layoutBounds.x=p/3,x._layoutBounds.y=g/3,x._layoutBounds.width=1/3,x._layoutBounds.height=1/3,x._bufferIndex=c}else if(Ju.supportMoreMaskDivisions&&d<=16)for(let f=0;f<d;f++){let p=f%4,g=f/4;p=~~p,g=~~g;const x=this._clippingContextListForMask[l++];x._layoutChannelNo=u,x._layoutBounds.x=p/4,x._layoutBounds.y=g/4,x._layoutBounds.width=1/4,x._layoutBounds.height=1/4,x._bufferIndex=c}else{fi(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,e-r,this._renderTextureCount,e);for(let f=0;f<d;f++){const p=this._clippingContextListForMask[l++];p._layoutChannelNo=0,p._layoutBounds.x=0,p._layoutBounds.y=0,p._layoutBounds.width=1,p._layoutBounds.height=1,p._bufferIndex=0}}}}getColorBuffer(){return this._maskColorBuffers}getClippingContextListForDraw(){return this._clippingContextListForDraw}getClippingMaskCount(){return this._clippingContextListForMask.length}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}getRenderTextureCount(){return this._renderTextureCount}}class RQ{constructor(e,r){this.frameNo=e,this.textures=r}}class MQ{constructor(e,r,n){this._isUsing=!1,this._owner=e,this._clippingIdList=r,this._clippingIdCount=n,this._allClippedDrawRect=new fx,this._layoutBounds=new fx,this._clippedDrawableIndexList=[],this._matrixForMask=new ln,this._matrixForDraw=new ln,this._bufferIndex=0}release(){const e=this;e._layoutBounds=void 0,e._allClippedDrawRect=void 0,e._clippedDrawableIndexList=void 0}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}}class OQ{setGlEnable(e,r){r?this.gl.enable(e):this.gl.disable(e)}setGlEnableVertexAttribArray(e,r){r?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e)}save(){if(this.gl==null){fi(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)}restore(){if(this.gl==null){fi(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])}setGl(e){this.gl=e}constructor(){this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}}class kl{static getInstance(){return _o==null&&(_o=new kl),_o}static deleteInstance(){_o&&(_o.release(),_o=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(e,r,n,i,s,o,a,l,c,u,d,h,f,p,g){f||fi("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let x,v,y,m;const _=e.getClippingContextBufferForMask();if(_!=null){const C=this._shaderSets[0];this.gl.useProgram(C.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(C.samplerTexture0Location,0),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(C.attributePositionLocation),this.gl.vertexAttribPointer(C.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(C.attributeTexCoordLocation),this.gl.vertexAttribPointer(C.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const E=_._layoutChannelNo,T=_.getClippingManager().getChannelFlagAsColor(E);this.gl.uniform4f(C.uniformChannelFlagLocation,T.R,T.G,T.B,T.A),this.gl.uniformMatrix4fv(C.uniformClipMatrixLocation,!1,_._matrixForMask.getArray());const S=_._layoutBounds;this.gl.uniform4f(C.uniformBaseColorLocation,S.x*2-1,S.y*2-1,S.getRight()*2-1,S.getBottom()*2-1),this.gl.uniform4f(C.uniformMultiplyColorLocation,d.R,d.G,d.B,d.A),this.gl.uniform4f(C.uniformScreenColorLocation,h.R,h.G,h.B,h.A),x=this.gl.ZERO,v=this.gl.ONE_MINUS_SRC_COLOR,y=this.gl.ZERO,m=this.gl.ONE_MINUS_SRC_ALPHA}else{const C=e.getClippingContextBufferForDraw(),T=C!=null?g?2:1:0;let S;switch(c){case es.CubismBlendMode_Normal:default:S=this._shaderSets[1+T],x=this.gl.ONE,v=this.gl.ONE_MINUS_SRC_ALPHA,y=this.gl.ONE,m=this.gl.ONE_MINUS_SRC_ALPHA;break;case es.CubismBlendMode_Additive:S=this._shaderSets[4+T],x=this.gl.ONE,v=this.gl.ONE,y=this.gl.ZERO,m=this.gl.ONE;break;case es.CubismBlendMode_Multiplicative:S=this._shaderSets[7+T],x=this.gl.DST_COLOR,v=this.gl.ONE_MINUS_SRC_ALPHA,y=this.gl.ZERO,m=this.gl.ONE;break}if(this.gl.useProgram(S.shaderProgram),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributePositionLocation),this.gl.vertexAttribPointer(S.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributeTexCoordLocation),this.gl.vertexAttribPointer(S.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),C!=null){this.gl.activeTexture(this.gl.TEXTURE1);const P=C.getClippingManager().getColorBuffer()[e.getClippingContextBufferForDraw()._bufferIndex];this.gl.bindTexture(this.gl.TEXTURE_2D,P),this.gl.uniform1i(S.samplerTexture1Location,1),this.gl.uniformMatrix4fv(S.uniformClipMatrixLocation,!1,C._matrixForDraw.getArray());const I=C._layoutChannelNo,M=C.getClippingManager().getChannelFlagAsColor(I);this.gl.uniform4f(S.uniformChannelFlagLocation,M.R,M.G,M.B,M.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(S.samplerTexture0Location,0),this.gl.uniformMatrix4fv(S.uniformMatrixLocation,!1,p.getArray()),this.gl.uniform4f(S.uniformBaseColorLocation,u.R,u.G,u.B,u.A),this.gl.uniform4f(S.uniformMultiplyColorLocation,d.R,d.G,d.B,d.A),this.gl.uniform4f(S.uniformScreenColorLocation,h.R,h.G,h.B,h.A)}a.index==null&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(x,v,y,m)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.length;e++)this.gl.deleteProgram(this._shaderSets[e].shaderProgram),this._shaderSets[e].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let e=0;e<kQ;e++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(LQ,DQ),this._shaderSets[1].shaderProgram=this.loadShaderProgram(FQ,NQ),this._shaderSets[2].shaderProgram=this.loadShaderProgram(zC,BQ),this._shaderSets[3].shaderProgram=this.loadShaderProgram(zC,UQ),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[0].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_multiplyColor"),this._shaderSets[0].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_screenColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[1].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_multiplyColor"),this._shaderSets[1].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_screenColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[2].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_multiplyColor"),this._shaderSets[2].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_screenColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[3].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_multiplyColor"),this._shaderSets[3].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_screenColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[4].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_multiplyColor"),this._shaderSets[4].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_screenColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[5].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_multiplyColor"),this._shaderSets[5].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_screenColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[6].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_multiplyColor"),this._shaderSets[6].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_screenColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[7].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_multiplyColor"),this._shaderSets[7].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_screenColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[8].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_multiplyColor"),this._shaderSets[8].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_screenColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor"),this._shaderSets[9].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_multiplyColor"),this._shaderSets[9].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_screenColor")}loadShaderProgram(e,r){const n=this.gl.createProgram(),i=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!i)return fi("Vertex shader compile error!"),0;const s=this.compileShaderSource(this.gl.FRAGMENT_SHADER,r);return s?(this.gl.attachShader(n,i),this.gl.attachShader(n,s),this.gl.linkProgram(n),this.gl.getProgramParameter(n,this.gl.LINK_STATUS)?(this.gl.deleteShader(i),this.gl.deleteShader(s),n):(fi("Failed to link program: {0}",n),this.gl.deleteShader(i),this.gl.deleteShader(s),n&&this.gl.deleteProgram(n),0)):(fi("Vertex shader compile error!"),0)}compileShaderSource(e,r){const n=r,i=this.gl.createShader(e);if(this.gl.shaderSource(i,n),this.gl.compileShader(i),!i){const o=this.gl.getShaderInfoLog(i);fi("Shader compile log: {0} ",o)}return this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.gl.deleteShader(i),null)}setGl(e){this.gl=e}}const LQ="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",DQ="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",FQ="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",zC="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",NQ="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",BQ="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",UQ="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}";class zO extends A_{initialize(e,r=1){e.isUsingMasking()&&(this._clippingManager=new UC,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts(),r));for(let n=e.getDrawableCount()-1;n>=0;n--)this._sortedDrawableIndexList[n]=0;super.initialize(e)}bindTexture(e,r){this._textures[e]=r}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){if(!this._model.isUsingMasking())return;const r=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=new UC,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts(),r)}getClippingMaskBufferSize(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}getRenderTextureCount(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._rendererProfile=new OQ,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}release(){var e,r,n;const i=this;this._clippingManager.release(),i._clippingManager=void 0,(e=this.gl)==null||e.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(r=this.gl)==null||r.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(n=this.gl)==null||n.deleteBuffer(this._bufferData.index),this._bufferData.index=null,i._bufferData=void 0,i._textures=void 0}doDrawModel(){if(this.gl==null){fi(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const e=this.getModel().getDrawableCount(),r=this.getModel().getDrawableRenderOrders();for(let n=0;n<e;++n){const i=r[n];this._sortedDrawableIndexList[i]=n}for(let n=0;n<e;++n){const i=this._sortedDrawableIndexList[n];if(!this.getModel().getDrawableDynamicFlagIsVisible(i))continue;const s=this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[i]:null;if(s!=null&&this.isUsingHighPrecisionMask()){s._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s.getClippingManager().getMaskRenderTexture()[s._bufferIndex]),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));{const o=s._clippingIdCount;for(let a=0;a<o;a++){const l=s._clippingIdList[a];this._model.getDrawableDynamicFlagVertexPositionsDidChange(l)&&(this.setIsCulling(this._model.getDrawableCulling(l)!=!1),this.setClippingContextBufferForMask(s),this.drawMesh(this.getModel().getDrawableTextureIndex(l),this.getModel().getDrawableVertexIndexCount(l),this.getModel().getDrawableVertexCount(l),this.getModel().getDrawableVertexIndices(l),this.getModel().getDrawableVertices(l),this.getModel().getDrawableVertexUvs(l),this.getModel().getMultiplyColor(l),this.getModel().getScreenColor(l),this.getModel().getDrawableOpacity(l),es.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Sp),this.setClippingContextBufferForMask(null),this.gl.viewport(Gi[0],Gi[1],Gi[2],Gi[3]),this.preDraw()}this.setClippingContextBufferForDraw(s),this.setIsCulling(this.getModel().getDrawableCulling(i)),this.drawMesh(this.getModel().getDrawableTextureIndex(i),this.getModel().getDrawableVertexIndexCount(i),this.getModel().getDrawableVertexCount(i),this.getModel().getDrawableVertexIndices(i),this.getModel().getDrawableVertices(i),this.getModel().getDrawableVertexUvs(i),this.getModel().getMultiplyColor(i),this.getModel().getScreenColor(i),this.getModel().getDrawableOpacity(i),this.getModel().getDrawableBlendMode(i),this.getModel().getDrawableInvertedMaskBit(i))}}drawMesh(e,r,n,i,s,o,a,l,c,u,d){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const h=this.getModelColor();this.getClippingContextBufferForMask()==null&&(h.A*=c,this.isPremultipliedAlpha()&&(h.R*=h.A,h.G*=h.A,h.B*=h.A));let f=null;this._textures[e]!=null&&(f=this._textures[e]),kl.getInstance().setupShaderProgram(this,f,n,s,i,o,this._bufferData,c,u,h,a,l,this.isPremultipliedAlpha(),this.getMvpMatrix(),d),this.gl.drawElements(this.gl.TRIANGLES,r,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}saveProfile(){this._rendererProfile.save()}restoreProfile(){this._rendererProfile.restore()}static doStaticRelease(){kl.deleteInstance()}setRenderState(e,r){Sp=e,Gi=r}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(const e of Object.entries(this._textures))this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager&&this._clippingManager.setGL(e),kl.getInstance().setGl(e),this._rendererProfile.setGl(e),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}}A_.staticRelease=()=>{zO.doStaticRelease()};const $C=new ln;class zQ extends SO{constructor(e,r,n){super(),D(this,"settings"),D(this,"coreModel"),D(this,"motionManager"),D(this,"lipSync",!0),D(this,"breath",M_.create()),D(this,"eyeBlink"),D(this,"userData"),D(this,"renderer",new zO),D(this,"idParamAngleX",xQ),D(this,"idParamAngleY",bQ),D(this,"idParamAngleZ",_Q),D(this,"idParamEyeBallX",wQ),D(this,"idParamEyeBallY",SQ),D(this,"idParamBodyAngleX",CQ),D(this,"idParamBreath",TQ),D(this,"idParamMouthForm",EQ),D(this,"pixelsPerUnit",1),D(this,"centeringTransform",new Ne),this.coreModel=e,this.settings=r,this.motionManager=new vQ(r,n),this.init()}init(){var e;super.init(),(e=this.settings.getEyeBlinkParameters())!=null&&e.length&&(this.eyeBlink=PQ.create(this.settings)),this.breath.setParameters([new Nc(this.idParamAngleX,0,15,6.5345,.5),new Nc(this.idParamAngleY,0,8,3.5345,.5),new Nc(this.idParamAngleZ,0,10,5.5345,.5),new Nc(this.idParamBodyAngleX,0,4,15.5345,.5),new Nc(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const e={};if(this.settings.layout)for(const[r,n]of Object.entries(this.settings.layout)){const i=r.charAt(0).toLowerCase()+r.slice(1);e[i]=n}return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,r){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=r,this.renderer._clippingManager._maskTexture=void 0,kl.getInstance()._shaderSets=[]}bindTexture(e,r){this.renderer.bindTexture(e,r)}getHitAreaDefs(){var e,r;return(r=(e=this.settings.hitAreas)==null?void 0:e.map(n=>({id:n.Id,name:n.Name,index:this.coreModel.getDrawableIndex(n.Id)})))!=null?r:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(e){return this.coreModel.getDrawableIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawableIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);const r=this.coreModel.getDrawableVertices(e).slice();for(let n=0;n<r.length;n+=2)r[n]=r[n]*this.pixelsPerUnit+this.originalWidth/2,r[n+1]=-r[n+1]*this.pixelsPerUnit+this.originalHeight/2;return r}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,r){var n,i,s,o;super.update(e,r),e/=1e3,r/=1e3;const a=this.coreModel;this.emit("beforeMotionUpdate");const l=this.motionManager.update(this.coreModel,r);if(this.emit("afterMotionUpdate"),a.saveParameters(),(n=this.motionManager.expressionManager)==null||n.update(a,r),l||(i=this.eyeBlink)==null||i.updateParameters(a,e),this.updateFocus(),this.updateNaturalMovements(e*1e3,r*1e3),this.lipSync&&this.motionManager.currentAudio){let c=this.motionManager.mouthSync(),u=0;const d=1,h=1.2;c>0&&(u=.4),c=ql(c*h,u,d);for(let f=0;f<this.motionManager.lipSyncIds.length;++f)a.addParameterValueById(this.motionManager.lipSyncIds[f],c,.8)}(s=this.physics)==null||s.evaluate(a,e),(o=this.pose)==null||o.updateParameters(a,e),this.emit("beforeModelUpdate"),a.update(),a.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateFacialEmotion(e){this.coreModel.addParameterValueById(this.idParamMouthForm,e)}updateNaturalMovements(e,r){var n;(n=this.breath)==null||n.updateParameters(this.coreModel,e/1e3)}draw(e){const r=this.drawingMatrix,n=$C.getArray();n[0]=r.a,n[1]=r.b,n[4]=-r.c,n[5]=-r.d,n[12]=r.tx,n[13]=r.ty,this.renderer.setMvpMatrix($C),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}class $O{constructor(e){this.groups=e.Groups,this.hitAreas=e.HitAreas,this.layout=e.Layout,this.moc=e.FileReferences.Moc,this.expressions=e.FileReferences.Expressions,this.motions=e.FileReferences.Motions,this.textures=e.FileReferences.Textures,this.physics=e.FileReferences.Physics,this.pose=e.FileReferences.Pose}getEyeBlinkParameters(){var e,r;return(r=(e=this.groups)==null?void 0:e.find(n=>n.Name==="EyeBlink"))==null?void 0:r.Ids}getLipSyncParameters(){var e,r;return(r=(e=this.groups)==null?void 0:e.find(n=>n.Name==="LipSync"))==null?void 0:r.Ids}}class Rl extends Bg{constructor(e){if(super(e),D(this,"moc"),D(this,"textures"),!Rl.isValidJSON(e))throw new TypeError("Invalid JSON.");Object.assign(this,new $O(e))}static isValidJSON(e){var r;return!!e?.FileReferences&&typeof e.FileReferences.Moc=="string"&&((r=e.FileReferences.Textures)==null?void 0:r.length)>0&&e.FileReferences.Textures.every(n=>typeof n=="string")}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(const[r,n]of Object.entries(this.motions))for(let i=0;i<n.length;i++)n[i].File=e(n[i].File,`motions.${r}[${i}].File`),n[i].Sound!==void 0&&(n[i].Sound=e(n[i].Sound,`motions.${r}[${i}].Sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].File=e(this.expressions[r].File,`expressions[${r}].File`)}}IZ(Rl,[$O]);let Ah,jC=20;function $Q(){return td.isStarted()?Promise.resolve():(Ah??(Ah=new Promise((t,e)=>{function r(){try{jQ(),t()}catch(n){if(jC--,jC<0){const i=new Error("Failed to start up Cubism 4 framework.");i.cause=n,e(i);return}setTimeout(r,10)}}r()})),Ah)}function jQ(t){t=Object.assign({logFunction:console.log,loggingLevel:hc.LogLevel_Verbose},t),td.startUp(t),td.initialize()}const VQ=.001,VC=.5;class O_{static create(e){const r=new O_;typeof e.FadeInTime=="number"&&(r._fadeTimeSeconds=e.FadeInTime,r._fadeTimeSeconds<=0&&(r._fadeTimeSeconds=VC));const n=e.Groups,i=n.length;for(let s=0;s<i;++s){const o=n[s],a=o.length;let l=0;for(let c=0;c<a;++c){const u=o[c],d=new Ep;d.partId=u.Id;const h=u.Link;if(h){const f=h.length;for(let p=0;p<f;++p){const g=new Ep;g.partId=h[p],d.link.push(g)}}r._partGroups.push(d),++l}r._partGroupCounts.push(l)}return r}updateParameters(e,r){e!=this._lastModel&&this.reset(e),this._lastModel=e,r<0&&(r=0);let n=0;for(let i=0;i<this._partGroupCounts.length;i++){const s=this._partGroupCounts[i];this.doFade(e,r,n,s),n+=s}this.copyPartOpacities(e)}reset(e){let r=0;for(let n=0;n<this._partGroupCounts.length;++n){const i=this._partGroupCounts[n];for(let s=r;s<r+i;++s){this._partGroups[s].initialize(e);const o=this._partGroups[s].partIndex,a=this._partGroups[s].parameterIndex;if(!(o<0)){e.setPartOpacityByIndex(o,s==r?1:0),e.setParameterValueByIndex(a,s==r?1:0);for(let l=0;l<this._partGroups[s].link.length;++l)this._partGroups[s].link[l].initialize(e)}}r+=i}}copyPartOpacities(e){for(let r=0;r<this._partGroups.length;++r){const n=this._partGroups[r];if(n.link.length==0)continue;const i=this._partGroups[r].partIndex,s=e.getPartOpacityByIndex(i);for(let o=0;o<n.link.length;++o){const l=n.link[o].partIndex;l<0||e.setPartOpacityByIndex(l,s)}}}doFade(e,r,n,i){let s=-1,o=1;const a=.5,l=.15;for(let c=n;c<n+i;++c){const u=this._partGroups[c].partIndex,d=this._partGroups[c].parameterIndex;if(e.getParameterValueByIndex(d)>VQ){if(s>=0)break;s=c,o=e.getPartOpacityByIndex(u),o+=r/this._fadeTimeSeconds,o>1&&(o=1)}}s<0&&(s=0,o=1);for(let c=n;c<n+i;++c){const u=this._partGroups[c].partIndex;if(s==c)e.setPartOpacityByIndex(u,o);else{let d=e.getPartOpacityByIndex(u),h;o<a?h=o*(a-1)/a+1:h=(1-o)*a/(1-a),(1-h)*(1-o)>l&&(h=1-l/(1-o)),d>h&&(d=h),e.setPartOpacityByIndex(u,d)}}}constructor(){this._fadeTimeSeconds=VC,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class Ep{constructor(e){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],e!=null&&this.assignment(e)}assignment(e){return this.partId=e.partId,this.link=e.link.map(r=>r.clone()),this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new Ep;return e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=this.link.map(r=>r.clone()),e}}class GC{constructor(e=!1,r=new Nr){this.isOverwritten=e,this.Color=r}}class WC{constructor(e=!1,r=new Nr){this.isOverwritten=e,this.Color=r}}class GQ{constructor(e=!1,r=!1){this.isOverwritten=e,this.isCulling=r}}class WQ{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getPixelsPerUnit(){return this._model==null?0:this._model.canvasinfo.PixelsPerUnit}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,r=this._savedParameters.length;for(let n=0;n<e;++n)n<r?this._savedParameters[n]=this._parameterValues[n]:this._savedParameters.push(this._parameterValues[n])}getMultiplyColor(e){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(e)?this._userMultiplyColors[e].Color:this.getDrawableMultiplyColor(e)}getScreenColor(e){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(e)?this._userScreenColors[e].Color:this.getDrawableScreenColor(e)}setMultiplyColorByTextureColor(e,r){this.setMultiplyColorByRGBA(e,r.R,r.G,r.B,r.A)}setMultiplyColorByRGBA(e,r,n,i,s=1){this._userMultiplyColors[e].Color.R=r,this._userMultiplyColors[e].Color.G=n,this._userMultiplyColors[e].Color.B=i,this._userMultiplyColors[e].Color.A=s}setScreenColorByTextureColor(e,r){this.setScreenColorByRGBA(e,r.R,r.G,r.B,r.A)}setScreenColorByRGBA(e,r,n,i,s=1){this._userScreenColors[e].Color.R=r,this._userScreenColors[e].Color.G=n,this._userScreenColors[e].Color.B=i,this._userScreenColors[e].Color.A=s}getPartMultiplyColor(e){return this._userPartMultiplyColors[e].Color}getPartScreenColor(e){return this._userPartScreenColors[e].Color}setPartColor(e,r,n,i,s,o,a){if(o[e].Color.R=r,o[e].Color.G=n,o[e].Color.B=i,o[e].Color.A=s,o[e].isOverwritten)for(let l=0;l<this._partChildDrawables[e].length;++l){const c=this._partChildDrawables[e][l];a[c].Color.R=r,a[c].Color.G=n,a[c].Color.B=i,a[c].Color.A=s}}setPartMultiplyColorByTextureColor(e,r){this.setPartMultiplyColorByRGBA(e,r.R,r.G,r.B,r.A)}setPartMultiplyColorByRGBA(e,r,n,i,s){this.setPartColor(e,r,n,i,s,this._userPartMultiplyColors,this._userMultiplyColors)}setPartScreenColorByTextureColor(e,r){this.setPartScreenColorByRGBA(e,r.R,r.G,r.B,r.A)}setPartScreenColorByRGBA(e,r,n,i,s){this.setPartColor(e,r,n,i,s,this._userPartScreenColors,this._userScreenColors)}getOverwriteFlagForModelMultiplyColors(){return this._isOverwrittenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return this._isOverwrittenModelScreenColors}setOverwriteFlagForModelMultiplyColors(e){this._isOverwrittenModelMultiplyColors=e}setOverwriteFlagForModelScreenColors(e){this._isOverwrittenModelScreenColors=e}getOverwriteFlagForDrawableMultiplyColors(e){return this._userMultiplyColors[e].isOverwritten}getOverwriteFlagForDrawableScreenColors(e){return this._userScreenColors[e].isOverwritten}setOverwriteFlagForDrawableMultiplyColors(e,r){this._userMultiplyColors[e].isOverwritten=r}setOverwriteFlagForDrawableScreenColors(e,r){this._userScreenColors[e].isOverwritten=r}getOverwriteColorForPartMultiplyColors(e){return this._userPartMultiplyColors[e].isOverwritten}getOverwriteColorForPartScreenColors(e){return this._userPartScreenColors[e].isOverwritten}setOverwriteColorForPartColors(e,r,n,i){n[e].isOverwritten=r;for(let s=0;s<this._partChildDrawables[e].length;++s){const o=this._partChildDrawables[e][s];i[o].isOverwritten=r,r&&(i[o].Color.R=n[e].Color.R,i[o].Color.G=n[e].Color.G,i[o].Color.B=n[e].Color.B,i[o].Color.A=n[e].Color.A)}}setOverwriteColorForPartMultiplyColors(e,r){this._userPartMultiplyColors[e].isOverwritten=r,this.setOverwriteColorForPartColors(e,r,this._userPartMultiplyColors,this._userMultiplyColors)}setOverwriteColorForPartScreenColors(e,r){this._userPartScreenColors[e].isOverwritten=r,this.setOverwriteColorForPartColors(e,r,this._userPartScreenColors,this._userScreenColors)}getDrawableCulling(e){if(this.getOverwriteFlagForModelCullings()||this.getOverwriteFlagForDrawableCullings(e))return this._userCullings[e].isCulling;const r=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(r[e])}setDrawableCulling(e,r){this._userCullings[e].isCulling=r}getOverwriteFlagForModelCullings(){return this._isOverwrittenCullings}setOverwriteFlagForModelCullings(e){this._isOverwrittenCullings=e}getOverwriteFlagForDrawableCullings(e){return this._userCullings[e].isOverwritten}setOverwriteFlagForDrawableCullings(e,r){this._userCullings[e].isOverwritten=r}getModelOapcity(){return this._modelOpacity}setModelOapcity(e){this._modelOpacity=e}getModel(){return this._model}getPartIndex(e){let r;const n=this._model.parts.count;for(r=0;r<n;++r)if(e==this._partIds[r])return r;return e in this._notExistPartId?this._notExistPartId[e]:(r=n+this._notExistPartId.length,this._notExistPartId[e]=r,this._notExistPartOpacities[r]=0,r)}getPartId(e){return this._model.parts.ids[e]}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,r){if(e in this._notExistPartOpacities){this._notExistPartOpacities[e]=r;return}ol(0<=e&&e<this.getPartCount()),this._partOpacities[e]=r}setPartOpacityById(e,r){const n=this.getPartIndex(e);n<0||this.setPartOpacityByIndex(n,r)}getPartOpacityByIndex(e){return e in this._notExistPartOpacities?this._notExistPartOpacities[e]:(ol(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){const r=this.getPartIndex(e);return r<0?0:this.getPartOpacityByIndex(r)}getParameterIndex(e){let r;const n=this._model.parameters.count;for(r=0;r<n;++r)if(e==this._parameterIds[r])return r;return e in this._notExistParameterId?this._notExistParameterId[e]:(r=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[e]=r,this._notExistParameterValues[r]=0,r)}getParameterCount(){return this._model.parameters.count}getParameterType(e){return this._model.parameters.types[e]}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return e in this._notExistParameterValues?this._notExistParameterValues[e]:(ol(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){const r=this.getParameterIndex(e);return this.getParameterValueByIndex(r)}setParameterValueByIndex(e,r,n=1){if(e in this._notExistParameterValues){this._notExistParameterValues[e]=n==1?r:this._notExistParameterValues[e]*(1-n)+r*n;return}ol(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<r&&(r=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>r&&(r=this._model.parameters.minimumValues[e]),this._parameterValues[e]=n==1?r:this._parameterValues[e]=this._parameterValues[e]*(1-n)+r*n}setParameterValueById(e,r,n=1){const i=this.getParameterIndex(e);this.setParameterValueByIndex(i,r,n)}addParameterValueByIndex(e,r,n=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+r*n)}addParameterValueById(e,r,n=1){const i=this.getParameterIndex(e);this.addParameterValueByIndex(i,r,n)}multiplyParameterValueById(e,r,n=1){const i=this.getParameterIndex(e);this.multiplyParameterValueByIndex(i,r,n)}multiplyParameterValueByIndex(e,r,n=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(r-1)*n))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(e){const r=this._model.drawables.count;for(let n=0;n<r;++n)if(this._drawableIds[n]==e)return n;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){return this._model.drawables.ids[e]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this.getDrawableTextureIndex(e)}getDrawableTextureIndex(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(r[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableMultiplyColor(e){const r=this._model.drawables.multiplyColors,n=e*4,i=new Nr;return i.R=r[n],i.G=r[n+1],i.B=r[n+2],i.A=r[n+3],i}getDrawableScreenColor(e){const r=this._model.drawables.screenColors,n=e*4,i=new Nr;return i.R=r[n],i.G=r[n+1],i.B=r[n+2],i.A=r[n+3],i}getDrawableParentPartIndex(e){return this._model.drawables.parentPartIndices[e]}getDrawableBlendMode(e){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(r[e])?es.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(r[e])?es.CubismBlendMode_Multiplicative:es.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(r[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(r[e])}getDrawableDynamicFlagVisibilityDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(r[e])}getDrawableDynamicFlagOpacityDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(r[e])}getDrawableDynamicFlagRenderOrderDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(r[e])}getDrawableDynamicFlagBlendColorDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(r[e])}loadParameters(){let e=this._model.parameters.count;const r=this._savedParameters.length;e>r&&(e=r);for(let n=0;n<e;++n)this._parameterValues[n]=this._savedParameters[n]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const r=this._model.parameters.ids,n=this._model.parameters.count;for(let i=0;i<n;++i)this._parameterIds.push(r[i])}const e=this._model.parts.count;{const r=this._model.parts.ids;for(let n=0;n<e;++n)this._partIds.push(r[n])}{const r=this._model.drawables.ids,n=this._model.drawables.count,i=new GQ(!1,!1);for(let s=0;s<e;++s){const o=new Nr(1,1,1,1),a=new Nr(0,0,0,1),l=new WC(!1,o),c=new WC(!1,a);this._userPartMultiplyColors.push(l),this._userPartScreenColors.push(c),this._partChildDrawables.push([])}for(let s=0;s<n;++s){const o=new Nr(1,1,1,1),a=new Nr(0,0,0,1),l=new GC(!1,o),c=new GC(!1,a);this._drawableIds.push(r[s]),this._userMultiplyColors.push(l),this._userScreenColors.push(c),this._userCullings.push(i);const u=this.getDrawableParentPartIndex(s);u>=0&&this._partChildDrawables[u].push(s)}}}constructor(e){this._model=e,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._isOverwrittenCullings=!1,this._modelOpacity=1,this._userMultiplyColors=[],this._userScreenColors=[],this._userCullings=[],this._userPartMultiplyColors=[],this._userPartScreenColors=[],this._partChildDrawables=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class L_{static create(e,r){if(r&&!this.hasMocConsistency(e))throw new Error("Inconsistent MOC3.");const n=Live2DCubismCore.Moc.fromArrayBuffer(e);if(n){const i=new L_(n);return i._mocVersion=Live2DCubismCore.Version.csmGetMocVersion(n,e),i}throw new Error("Failed to CubismMoc.create().")}createModel(){let e;const r=Live2DCubismCore.Model.fromMoc(this._moc);if(r)return e=new WQ(r),++this._modelCount,e;throw new Error("Unknown error")}deleteModel(e){e!=null&&--this._modelCount}constructor(e){this._moc=e,this._modelCount=0,this._mocVersion=0}release(){this._moc._release(),this._moc=void 0}getLatestMocVersion(){return Live2DCubismCore.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}static hasMocConsistency(e){return Live2DCubismCore.Moc.prototype.hasMocConsistency(e)===1}}var px=(t=>(t[t.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",t))(px||{}),Mo=(t=>(t[t.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",t[t.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",t[t.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",t))(Mo||{});class HQ{constructor(){this.initialPosition=new fe(0,0),this.position=new fe(0,0),this.lastPosition=new fe(0,0),this.lastGravity=new fe(0,0),this.force=new fe(0,0),this.velocity=new fe(0,0)}}class XQ{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class YQ{constructor(){this.source={}}}class qQ{constructor(){this.destination={},this.translationScale=new fe(0,0)}}class KQ{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new fe(0,0),this.wind=new fe(0,0),this.fps=0}}class ZQ{constructor(e){this._json=e}release(){this._json=void 0}getGravity(){const e=new fe(0,0);return e.x=this._json.Meta.EffectiveForces.Gravity.X,e.y=this._json.Meta.EffectiveForces.Gravity.Y,e}getWind(){const e=new fe(0,0);return e.x=this._json.Meta.EffectiveForces.Wind.X,e.y=this._json.Meta.EffectiveForces.Wind.Y,e}getFps(){return this._json.Meta.Fps||0}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Default}getNormalizationAngleMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Default}getInputCount(e){return this._json.PhysicsSettings[e].Input.length}getInputWeight(e,r){return this._json.PhysicsSettings[e].Input[r].Weight}getInputReflect(e,r){return this._json.PhysicsSettings[e].Input[r].Reflect}getInputType(e,r){return this._json.PhysicsSettings[e].Input[r].Type}getInputSourceId(e,r){return this._json.PhysicsSettings[e].Input[r].Source.Id}getOutputCount(e){return this._json.PhysicsSettings[e].Output.length}getOutputVertexIndex(e,r){return this._json.PhysicsSettings[e].Output[r].VertexIndex}getOutputAngleScale(e,r){return this._json.PhysicsSettings[e].Output[r].Scale}getOutputWeight(e,r){return this._json.PhysicsSettings[e].Output[r].Weight}getOutputDestinationId(e,r){return this._json.PhysicsSettings[e].Output[r].Destination.Id}getOutputType(e,r){return this._json.PhysicsSettings[e].Output[r].Type}getOutputReflect(e,r){return this._json.PhysicsSettings[e].Output[r].Reflect}getParticleCount(e){return this._json.PhysicsSettings[e].Vertices.length}getParticleMobility(e,r){return this._json.PhysicsSettings[e].Vertices[r].Mobility}getParticleDelay(e,r){return this._json.PhysicsSettings[e].Vertices[r].Delay}getParticleAcceleration(e,r){return this._json.PhysicsSettings[e].Vertices[r].Acceleration}getParticleRadius(e,r){return this._json.PhysicsSettings[e].Vertices[r].Radius}getParticlePosition(e,r){const n=new fe(0,0);return n.x=this._json.PhysicsSettings[e].Vertices[r].Position.X,n.y=this._json.PhysicsSettings[e].Vertices[r].Position.Y,n}}const HC="X",XC="Y",YC="Angle",QQ=5,gx=100,qC=.001,JQ=5;class D_{static create(e){const r=new D_;return r.parse(e),r._physicsRig.gravity.y=0,r}static delete(e){e?.release()}parse(e){this._physicsRig=new KQ;const r=new ZQ(e);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount(),this._physicsRig.fps=r.getFps(),this._currentRigOutputs=[],this._previousRigOutputs=[];let n=0,i=0,s=0;for(let o=0;o<this._physicsRig.subRigCount;++o){const a=new XQ;a.normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(o),a.normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(o),a.normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(o),a.normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(o),a.normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(o),a.normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(o),a.inputCount=r.getInputCount(o),a.baseInputIndex=n,n+=a.inputCount;for(let u=0;u<a.inputCount;++u){const d=new YQ;switch(d.sourceParameterIndex=-1,d.weight=r.getInputWeight(o,u),d.reflect=r.getInputReflect(o,u),r.getInputType(o,u)){case HC:d.type=Mo.CubismPhysicsSource_X,d.getNormalizedParameterValue=tJ;break;case XC:d.type=Mo.CubismPhysicsSource_Y,d.getNormalizedParameterValue=rJ;break;case YC:d.type=Mo.CubismPhysicsSource_Angle,d.getNormalizedParameterValue=nJ;break}d.source.targetType=px.CubismPhysicsTargetType_Parameter,d.source.id=r.getInputSourceId(o,u),this._physicsRig.inputs.push(d)}a.outputCount=r.getOutputCount(o),a.baseOutputIndex=i;const l=new KC,c=new KC;for(let u=0;u<a.outputCount;++u){l.outputs[u]=0,c.outputs[u]=0;let d=this._physicsRig.outputs[i+u];switch(d||(d=new qQ,this._physicsRig.outputs[i+u]=d),d.destinationParameterIndex=-1,d.vertexIndex=r.getOutputVertexIndex(o,u),d.angleScale=r.getOutputAngleScale(o,u),d.weight=r.getOutputWeight(o,u),d.destination.targetType=px.CubismPhysicsTargetType_Parameter,d.destination.id=r.getOutputDestinationId(o,u),r.getOutputType(o,u)){case HC:d.type=Mo.CubismPhysicsSource_X,d.getValue=iJ,d.getScale=cJ;break;case XC:d.type=Mo.CubismPhysicsSource_Y,d.getValue=sJ,d.getScale=uJ;break;case YC:d.type=Mo.CubismPhysicsSource_Angle,d.getValue=oJ,d.getScale=dJ;break}d.reflect=r.getOutputReflect(o,u)}this._currentRigOutputs.push(l),this._previousRigOutputs.push(c),i+=a.outputCount,a.particleCount=r.getParticleCount(o),a.baseParticleIndex=s,s+=a.particleCount;for(let u=0;u<a.particleCount;++u){const d=new HQ;d.mobility=r.getParticleMobility(o,u),d.delay=r.getParticleDelay(o,u),d.acceleration=r.getParticleAcceleration(o,u),d.radius=r.getParticleRadius(o,u),d.position=r.getParticlePosition(o,u),this._physicsRig.particles.push(d)}this._physicsRig.settings.push(a)}this.initialize(),r.release()}stabilization(e){var r,n,i,s;let o,a,l,c;const u=new fe;let d,h,f,p,g,x,v,y;g=e.getModel().parameters.values,x=e.getModel().parameters.maximumValues,v=e.getModel().parameters.minimumValues,y=e.getModel().parameters.defaultValues,((n=(r=this._parameterCaches)==null?void 0:r.length)!=null?n:0)<e.getParameterCount()&&(this._parameterCaches=new Float32Array(e.getParameterCount())),((s=(i=this._parameterInputCaches)==null?void 0:i.length)!=null?s:0)<e.getParameterCount()&&(this._parameterInputCaches=new Float32Array(e.getParameterCount()));for(let m=0;m<e.getParameterCount();++m)this._parameterCaches[m]=g[m],this._parameterInputCaches[m]=g[m];for(let m=0;m<this._physicsRig.subRigCount;++m){o={angle:0},u.x=0,u.y=0,d=this._physicsRig.settings[m],h=this._physicsRig.inputs.slice(d.baseInputIndex),f=this._physicsRig.outputs.slice(d.baseOutputIndex),p=this._physicsRig.particles.slice(d.baseParticleIndex);for(let _=0;_<d.inputCount;++_)a=h[_].weight/gx,h[_].sourceParameterIndex==-1&&(h[_].sourceParameterIndex=e.getParameterIndex(h[_].source.id)),h[_].getNormalizedParameterValue(u,o,g[h[_].sourceParameterIndex],v[h[_].sourceParameterIndex],x[h[_].sourceParameterIndex],y[h[_].sourceParameterIndex],d.normalizationPosition,d.normalizationAngle,h[_].reflect,a),this._parameterCaches[h[_].sourceParameterIndex]=g[h[_].sourceParameterIndex];l=ke.degreesToRadian(-o.angle),u.x=u.x*ke.cos(l)-u.y*ke.sin(l),u.y=u.x*ke.sin(l)+u.y*ke.cos(l),fJ(p,d.particleCount,u,o.angle,this._options.wind,qC*d.normalizationPosition.maximum);for(let _=0;_<d.outputCount;++_){const C=f[_].vertexIndex;if(f[_].destinationParameterIndex==-1&&(f[_].destinationParameterIndex=e.getParameterIndex(f[_].destination.id)),C<1||C>=d.particleCount)continue;let E=new fe;E=p[C].position.substract(p[C-1].position),c=f[_].getValue(E,p,C,f[_].reflect,this._options.gravity),this._currentRigOutputs[m].outputs[_]=c,this._previousRigOutputs[m].outputs[_]=c;const T=f[_].destinationParameterIndex,S=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(g.subarray(T))):g.slice(T);Fy(S,v[T],x[T],c,f[_]);for(let P=T,I=0;P<this._parameterCaches.length;P++,I++)g[P]=this._parameterCaches[P]=S[I]}}}evaluate(e,r){var n,i,s,o;let a,l,c,u;const d=new fe;let h,f,p,g;if(0>=r)return;let x,v,y,m,_;if(this._currentRemainTime+=r,this._currentRemainTime>JQ&&(this._currentRemainTime=0),x=e.getModel().parameters.values,v=e.getModel().parameters.maximumValues,y=e.getModel().parameters.minimumValues,m=e.getModel().parameters.defaultValues,((i=(n=this._parameterCaches)==null?void 0:n.length)!=null?i:0)<e.getParameterCount()&&(this._parameterCaches=new Float32Array(e.getParameterCount())),((o=(s=this._parameterInputCaches)==null?void 0:s.length)!=null?o:0)<e.getParameterCount()){this._parameterInputCaches=new Float32Array(e.getParameterCount());for(let E=0;E<e.getParameterCount();++E)this._parameterInputCaches[E]=x[E]}for(this._physicsRig.fps>0?_=1/this._physicsRig.fps:_=r;this._currentRemainTime>=_;){for(let T=0;T<this._physicsRig.subRigCount;++T){h=this._physicsRig.settings[T],p=this._physicsRig.outputs.slice(h.baseOutputIndex);for(let S=0;S<h.outputCount;++S)this._previousRigOutputs[T].outputs[S]=this._currentRigOutputs[T].outputs[S]}const E=_/this._currentRemainTime;for(let T=0;T<e.getParameterCount();++T)this._parameterCaches[T]=this._parameterInputCaches[T]*(1-E)+x[T]*E,this._parameterInputCaches[T]=this._parameterCaches[T];for(let T=0;T<this._physicsRig.subRigCount;++T){a={angle:0},d.x=0,d.y=0,h=this._physicsRig.settings[T],f=this._physicsRig.inputs.slice(h.baseInputIndex),p=this._physicsRig.outputs.slice(h.baseOutputIndex),g=this._physicsRig.particles.slice(h.baseParticleIndex);for(let S=0;S<h.inputCount;++S)l=f[S].weight/gx,f[S].sourceParameterIndex==-1&&(f[S].sourceParameterIndex=e.getParameterIndex(f[S].source.id)),f[S].getNormalizedParameterValue(d,a,this._parameterCaches[f[S].sourceParameterIndex],y[f[S].sourceParameterIndex],v[f[S].sourceParameterIndex],m[f[S].sourceParameterIndex],h.normalizationPosition,h.normalizationAngle,f[S].reflect,l);c=ke.degreesToRadian(-a.angle),d.x=d.x*ke.cos(c)-d.y*ke.sin(c),d.y=d.x*ke.sin(c)+d.y*ke.cos(c),hJ(g,h.particleCount,d,a.angle,this._options.wind,qC*h.normalizationPosition.maximum,_,QQ);for(let S=0;S<h.outputCount;++S){const P=p[S].vertexIndex;if(p[S].destinationParameterIndex==-1&&(p[S].destinationParameterIndex=e.getParameterIndex(p[S].destination.id)),P<1||P>=h.particleCount)continue;const I=new fe;I.x=g[P].position.x-g[P-1].position.x,I.y=g[P].position.y-g[P-1].position.y,u=p[S].getValue(I,g,P,p[S].reflect,this._options.gravity),this._currentRigOutputs[T].outputs[S]=u;const M=p[S].destinationParameterIndex,k=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(M))):this._parameterCaches.slice(M);Fy(k,y[M],v[M],u,p[S]);for(let R=M,O=0;R<this._parameterCaches.length;R++,O++)this._parameterCaches[R]=k[O]}}this._currentRemainTime-=_}const C=this._currentRemainTime/_;this.interpolate(e,C)}interpolate(e,r){let n,i,s,o,a;s=e.getModel().parameters.values,o=e.getModel().parameters.maximumValues,a=e.getModel().parameters.minimumValues;for(let l=0;l<this._physicsRig.subRigCount;++l){i=this._physicsRig.settings[l],n=this._physicsRig.outputs.slice(i.baseOutputIndex);for(let c=0;c<i.outputCount;++c){if(n[c].destinationParameterIndex==-1)continue;const u=n[c].destinationParameterIndex,d=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(s.subarray(u))):s.slice(u);Fy(d,a[u],o[u],this._previousRigOutputs[l].outputs[c]*(1-r)+this._currentRigOutputs[l].outputs[c]*r,n[c]);for(let h=u,f=0;h<s.length;h++,f++)s[h]=d[f]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._options=new eJ,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=[],this._previousRigOutputs=[],this._currentRemainTime=0}release(){this._physicsRig=void 0}initialize(){let e,r,n;for(let i=0;i<this._physicsRig.subRigCount;++i){r=this._physicsRig.settings[i],e=this._physicsRig.particles.slice(r.baseParticleIndex),e[0].initialPosition=new fe(0,0),e[0].lastPosition=new fe(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new fe(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new fe(0,0),e[0].force=new fe(0,0);for(let s=1;s<r.particleCount;++s)n=new fe(0,0),n.y=e[s].radius,e[s].initialPosition=new fe(e[s-1].initialPosition.x+n.x,e[s-1].initialPosition.y+n.y),e[s].position=new fe(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastPosition=new fe(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastGravity=new fe(0,-1),e[s].lastGravity.y*=-1,e[s].velocity=new fe(0,0),e[s].force=new fe(0,0)}}}class eJ{constructor(){this.gravity=new fe(0,0),this.wind=new fe(0,0)}}class KC{constructor(){this.outputs=[]}}function tJ(t,e,r,n,i,s,o,a,l,c){t.x+=F_(r,n,i,s,o.minimum,o.maximum,o.defalut,l)*c}function rJ(t,e,r,n,i,s,o,a,l,c){t.y+=F_(r,n,i,s,o.minimum,o.maximum,o.defalut,l)*c}function nJ(t,e,r,n,i,s,o,a,l,c){e.angle+=F_(r,n,i,s,a.minimum,a.maximum,a.defalut,l)*c}function iJ(t,e,r,n,i){let s=t.x;return n&&(s*=-1),s}function sJ(t,e,r,n,i){let s=t.y;return n&&(s*=-1),s}function oJ(t,e,r,n,i){let s;return r>=2?i=e[r-1].position.substract(e[r-2].position):i=i.multiplyByScaler(-1),s=ke.directionToRadian(i,t),n&&(s*=-1),s}function aJ(t,e){return Math.abs(Math.max(t,e)-Math.min(t,e))}function lJ(t,e){return Math.min(t,e)+aJ(t,e)/2}function cJ(t,e){return t.x}function uJ(t,e){return t.y}function dJ(t,e){return e}function hJ(t,e,r,n,i,s,o,a){let l,c,u,d,h=new fe(0,0),f=new fe(0,0),p=new fe(0,0),g=new fe(0,0);t[0].position=new fe(r.x,r.y),l=ke.degreesToRadian(n),d=ke.radianToDirection(l),d.normalize();for(let x=1;x<e;++x)t[x].force=d.multiplyByScaler(t[x].acceleration).add(i),t[x].lastPosition=new fe(t[x].position.x,t[x].position.y),c=t[x].delay*o*30,h=t[x].position.substract(t[x-1].position),u=ke.directionToRadian(t[x].lastGravity,d)/a,h.x=ke.cos(u)*h.x-h.y*ke.sin(u),h.y=ke.sin(u)*h.x+h.y*ke.cos(u),t[x].position=t[x-1].position.add(h),f=t[x].velocity.multiplyByScaler(c),p=t[x].force.multiplyByScaler(c).multiplyByScaler(c),t[x].position=t[x].position.add(f).add(p),g=t[x].position.substract(t[x-1].position),g.normalize(),t[x].position=t[x-1].position.add(g.multiplyByScaler(t[x].radius)),ke.abs(t[x].position.x)<s&&(t[x].position.x=0),c!=0&&(t[x].velocity=t[x].position.substract(t[x].lastPosition),t[x].velocity=t[x].velocity.divisionByScalar(c),t[x].velocity=t[x].velocity.multiplyByScaler(t[x].mobility)),t[x].force=new fe(0,0),t[x].lastGravity=new fe(d.x,d.y)}function fJ(t,e,r,n,i,s){let o,a,l=new fe(0,0);t[0].position=new fe(r.x,r.y),o=ke.degreesToRadian(n),a=ke.radianToDirection(o),a.normalize();for(let c=1;c<e;++c)t[c].force=a.multiplyByScaler(t[c].acceleration).add(i),t[c].lastPosition=new fe(t[c].position.x,t[c].position.y),t[c].velocity=new fe(0,0),l=t[c].force,l.normalize(),l=l.multiplyByScaler(t[c].radius),t[c].position=t[c-1].position.add(l),ke.abs(t[c].position.x)<s&&(t[c].position.x=0),t[c].force=new fe(0,0),t[c].lastGravity=new fe(a.x,a.y)}function Fy(t,e,r,n,i){let s,o,a;s=i.getScale(i.translationScale,i.angleScale),o=n*s,o<e?(o<i.valueBelowMinimum&&(i.valueBelowMinimum=o),o=e):o>r&&(o>i.valueExceededMaximum&&(i.valueExceededMaximum=o),o=r),a=i.weight/gx,a>=1||(o=t[0]*(1-a)+o*a),t[0]=o}function F_(t,e,r,n,i,s,o,a){let l=0;const c=ke.max(r,e);c<t&&(t=c);const u=ke.min(r,e);u>t&&(t=u);const d=ke.min(i,s),h=ke.max(i,s),f=o,p=lJ(u,c),g=t-p;switch(Math.sign(g)){case 1:{const x=h-f,v=c-p;v!=0&&(l=g*(x/v),l+=f);break}case-1:{const x=d-f,v=u-p;v!=0&&(l=g*(x/v),l+=f);break}case 0:{l=f;break}}return a?l:l*-1}Hr.registerRuntime({version:4,ready:$Q,test(t){return t instanceof Rl||Rl.isValidJSON(t)},isValidMoc(t){if(t.byteLength<4)return!1;const e=new Int8Array(t,0,4);return String.fromCharCode(...e)==="MOC3"},createModelSettings(t){return new Rl(t)},createCoreModel(t,e){const r=L_.create(t,!!e?.checkMocConsistency);try{const n=r.createModel();return n.__moc=r,n}catch(n){try{r.release()}catch{}throw n}},createInternalModel(t,e,r){const n=new zQ(t,e,r),i=t;return i.__moc&&(n.__moc=i.__moc,delete i.__moc,n.once("destroy",pJ)),n},createPhysics(t,e){return D_.create(e)},createPose(t,e){return O_.create(e)}});function pJ(){var t;(t=this.__moc)==null||t.release()}const gJ={currentModel:null},jO=w.createContext(null),mJ=w.memo(({children:t})=>{const[e,r]=w.useState(gJ.currentModel),n=w.useCallback(s=>{r(o=>o?Object.assign(o,s):null)},[]),i=w.useMemo(()=>({currentModel:e,setCurrentModel:r,updateModelState:n}),[e,n]);return b.jsx(jO.Provider,{value:i,children:t})});function N_(){const t=w.useContext(jO);if(!t)throw new Error("useLive2DModel must be used within a Live2DModelProvider");return t}const yJ=.01,VO=(t,e,r,n,i)=>{if(!t)return;const s=Number(n||0),o=Number(i||0),a=(e-t.width)/2+s,l=(r-t.height)/2+o;t.position.set(a,l)},vJ=(t,e)=>{const r=e>0?-.01:yJ,n=t.scale.x,i=n+r,o=n+(i-n)*.3;return t.scale.set(o),o},xJ=(t,e)=>{if(!t||e===void 0||e===null)return;const r=Number(window.devicePixelRatio||1);t.scale.set(Number(e)),t.filters&&t.filters.forEach(n=>{"resolution"in n&&Object.defineProperty(n,"resolution",{value:r})})},bJ=(t,e,r,n,i)=>{const{updateModelScale:s}=io(),o=w.useRef(null),a=w.useRef(null),l=w.useCallback(c=>{if(!r.current||!n?.scrollToResize)return;c.preventDefault();const u=vJ(r.current,c.deltaY);(!a.current||Math.abs(u-a.current)>1e-4)&&(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{s(u),a.current=u},500))},[r,n?.scrollToResize,s]);w.useEffect(()=>{const c=t.current?.querySelector("canvas");if(c)return c.addEventListener("wheel",l,{passive:!1}),()=>c.removeEventListener("wheel",l)},[l,t]),w.useEffect(()=>{const c=new ResizeObserver(()=>{if(r.current&&e.current){const{width:u,height:d}=i?{width:window.innerWidth,height:window.innerHeight}:{width:Math.max(0,t.current?.clientWidth||0),height:Math.max(0,t.current?.clientHeight||0)},h=Math.max(1,u),f=Math.max(1,d);e.current.renderer.resize(h,f),e.current.renderer.clear();try{const p=r.current.scale.x;r.current.scale.set(1);const g=Math.max(1,r.current.width),x=Math.max(1,r.current.height);r.current.scale.set(p);const v=Math.min(u/g,d/x),y=typeof n?.kScale=="number"?Math.min(n.kScale,v):v;Math.abs(y-p)>1e-6&&r.current.scale.set(y)}catch{}VO(r.current,u,d,n?.initialXshift,n?.initialYshift);try{const p=n||{},g=p?.autoCenterX!==!1,x=p?.autoCenterY===!0,v=r.current.getBounds(),y=v.x+v.width/2,m=v.y+v.height/2,_=u/2,C=d/2;if(g){const E=_-y;Number.isFinite(E)&&Math.abs(E)>.1&&(r.current.position.x+=E)}if(x){const E=C-m;Number.isFinite(E)&&Math.abs(E)>.1&&(r.current.position.y+=E)}}catch{}}});return t.current&&c.observe(t.current),()=>{c.disconnect()}},[r,t,i,e]),w.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[])},_J=({isPet:t,modelInfo:e})=>{const r=w.useRef(null),n=w.useRef(null),i=w.useRef(null),s=w.useRef(null),o=w.useRef(void 0),{setCurrentModel:a}=N_(),{setIsLoading:l}=io(),c=w.useRef(!1),{setAiState:u,status:d}=Ai(),[h,f]=w.useState(!1),{forceIgnoreMouse:p}=h_(),g=w.useCallback(()=>{i.current&&(i.current.removeAllListeners(),a(null),n.current&&(n.current.stage.removeChild(i.current),i.current.destroy({children:!0,texture:!0,baseTexture:!0}),hy(),i.current=null)),f(!1)},[a]),x=w.useCallback(()=>{n.current&&(i.current&&g(),n.current.stage.removeChildren(),hy(),n.current.renderer.clear(),n.current.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),fX(),n.current=null)},[g]);w.useEffect(()=>{if(!n.current&&r.current&&s.current){const E=Math.max(1,s.current.clientWidth||window.innerWidth),T=Math.max(1,s.current.clientHeight||window.innerHeight),S=new Z2({view:r.current,autoStart:!0,width:E,height:T,backgroundAlpha:0,antialias:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,powerPreference:"high-performance",resolution:window.devicePixelRatio||1,autoDensity:!0});S.ticker.add(()=>{S.renderer&&S.renderer.render(S.stage)});try{S.view.style.touchAction="none",S.view.style.pointerEvents="auto"}catch{}try{S.stage.eventMode="static",S.stage.interactive=!0,S.stage.interactiveChildren=!0,S.stage.hitArea=new _e(0,0,S.renderer.width,S.renderer.height)}catch{}n.current=S}return()=>{x()}},[x]);const v=w.useCallback(async E=>{!n.current||!e||(i.current&&(i.current.removeAllListeners(),n.current.stage.removeChild(i.current),i.current.destroy({children:!0,texture:!0,baseTexture:!0}),hy()),i.current=E,a(E),n.current.stage.addChild(E),E.eventMode="static",E.interactive=!0,E.cursor="grab",f(!0))},[a]),y=w.useCallback(()=>{if(!i.current)return;xJ(i.current,o.current);const{width:E,height:T}=t?{width:window.innerWidth,height:window.innerHeight}:s.current?.getBoundingClientRect()||{width:0,height:0};VO(i.current,E,T,e?.initialXshift,e?.initialYshift)},[e?.initialXshift,e?.initialYshift]),m=w.useCallback(async()=>{if(!(!e?.url||!n.current)&&!c.current)try{c.current=!0,l(!0),u("loading");const E=await VZ.from(e.url,{autoHitTest:!0,autoFocus:e.pointerInteractive??!1,autoUpdate:!0,ticker:Cr.shared,motionPreload:wO.IDLE,idleMotionGroup:e.idleMotionGroupName});await v(E)}catch(E){console.error("Failed to load Live2D model:",E),Qt.create({title:`Failed to load Live2D model: ${E}`,type:"error",duration:2e3})}finally{c.current=!1,l(!1),u("idle")}},[e?.url,e?.pointerInteractive,l,v]),_=w.useCallback(E=>{if(!E)return;if(E.removeAllListeners("pointerenter"),E.removeAllListeners("pointerleave"),E.removeAllListeners("rightdown"),E.removeAllListeners("pointerdown"),E.removeAllListeners("pointermove"),E.removeAllListeners("pointerup"),E.removeAllListeners("pointerupoutside"),p&&t){E.eventMode="none",E.cursor="default";return}E.eventMode="dynamic",E.cursor="pointer";try{const k=E.getLocalBounds();E.hitArea=new _e(k.x,k.y,k.width,k.height)}catch{}let T=!1,S=0,P=0,I=!1;const M=5;t&&(E.on("pointerenter",()=>{window.api?.updateComponentHover("live2d-model",!0)}),E.on("pointerleave",()=>{T||window.api?.updateComponentHover("live2d-model",!1)}),E.on("rightdown",k=>{k.data.originalEvent.preventDefault(),window.api.showContextMenu()})),E.on("pointerdown",k=>{try{k.stopPropagation?.()}catch{}(k?.button===0||k?.buttons===1||k?.data?.originalEvent?.button===0||k?.data?.originalEvent?.buttons===1||k?.pointerType==="touch"||k?.data?.originalEvent?.pointerType==="touch")&&(T=!0,I=!0,S=k.global.x-E.x,P=k.global.y-E.y,E.cursor="grabbing")}),E.on("pointermove",k=>{try{k.stopPropagation?.()}catch{}if(T){const R=k.global.x-S,O=k.global.y-P,V=R-E.x,U=O-E.y;Math.hypot(V,U)>M&&(I=!1),E.position.x=R,E.position.y=O}}),E.on("pointerup",k=>{try{k.stopPropagation?.()}catch{}T&&(T=!1,E.cursor="grab",I&&C(E,k.global.x,k.global.y))}),E.on("pointerupoutside",()=>{T=!1,E.cursor="grab"})},[t,p]),C=w.useCallback((E,T,S)=>{if(!e?.tapMotions)return;const P=E.toLocal(new Te(T,S));if(!E.hitTest(P.x,P.y).find(k=>{const R=e?.tapMotions?.[k];return R?(ZC(E,R),!0):!1})&&Object.keys(e.tapMotions).length>0){const k=wJ(e.tapMotions);ZC(E,k)}},[e?.tapMotions]);return w.useEffect(()=>{d==="idle"&&(e?.defaultEmotion?i.current?.internalModel.motionManager.expressionManager?.setExpression(e.defaultEmotion):i.current?.internalModel.motionManager.expressionManager?.resetExpression())},[i.current,d,e?.defaultEmotion]),w.useEffect(()=>(e?.url&&m(),()=>{g()}),[e?.url,e?.pointerInteractive,m,g]),w.useEffect(()=>{o.current=e?.kScale},[e?.kScale]),w.useEffect(()=>{y()},[h,y]),w.useEffect(()=>{i.current&&h&&_(i.current)},[h,_,p]),{canvasRef:r,appRef:n,modelRef:i,containerRef:s}},ZC=(t,e)=>{if(!e||Object.keys(e).length===0)return;const r=Object.values(e).reduce((i,s)=>i+s,0);let n=Math.random()*r;Object.entries(e).find(([i,s])=>{if(n-=s,n<=0){const o=Yi.hasTask()?Il.NORMAL:Il.FORCE;return t.motion(i,void 0,o),!0}return!1})},wJ=t=>{const e={};return Object.values(t).flatMap(r=>Object.entries(r)).reduce((r,[n,i])=>(r[n]||(r[n]={total:0,count:0}),r[n].total+=i,r[n].count+=1,r),e),Object.entries(e).reduce((r,[n,{total:i,count:s}])=>({...r,[n]:i/s}),{})},GO=w.createContext(null);function SJ({children:t}){const{messages:e,historyList:r,currentHistoryUid:n,fullResponse:i,setMessages:s,setHistoryList:o,setCurrentHistoryUid:a,setFullResponse:l,setForceNewMessage:c,appendHumanMessage:u,appendAIMessage:d,appendResponse:h,clearResponse:f}=ki(),p=(x,v)=>{o(y=>y.map(m=>m.uid===x?{...m,latest_message:v?{content:v.content,role:v.role,timestamp:v.timestamp}:null,timestamp:v?.timestamp||m.timestamp}:m))},g=w.useMemo(()=>({messages:e,historyList:r,currentHistoryUid:n,appendHumanMessage:u,appendAIMessage:d,setMessages:s,setHistoryList:o,setCurrentHistoryUid:a,updateHistoryList:p,fullResponse:i,setFullResponse:l,appendResponse:h,clearResponse:f,setForceNewMessage:c}),[e,r,n,u,d,p,i,h,f,c]);return b.jsx(GO.Provider,{value:g,children:t})}function Kl(){const t=w.useContext(GO);if(!t)throw new Error("useChatHistory must be used within a ChatHistoryProvider");return t}const ya=()=>{const{status:t,setAiState:e}=Ai(),{sendMessage:r}=fs(),{fullResponse:n,clearResponse:i}=Kl(),{currentModel:s}=N_(),{subtitleText:o,setSubtitleText:a}=ki();return{interrupt:(c=!0)=>{t!=="thinking"&&t!=="speaking"||(console.log("Interrupting conversation chain"),c&&r({type:"interrupt-signal",text:n}),e("interrupted"),Yi.clearQueue(),s?s.stopSpeaking():console.error("Live2D model is not initialized"),i(),o==="..."&&a(""),console.log("Interrupted!"))}}},WO=()=>{const{modelInfo:t}=io(),{status:e}=Ai(),{setSubtitleText:r}=ki(),n=Z(h=>h.backendSynthComplete),i=Z(h=>h.setBackendSynthComplete),{appendResponse:s,appendAIMessage:o}=Kl(),{currentModel:a}=N_(),{sendMessage:l}=fs(),c=w.useRef({aiState:e,currentModel:a,setSubtitleText:r,appendResponse:s,appendAIMessage:o,modelInfo:t});c.current={aiState:e,currentModel:a,setSubtitleText:r,appendResponse:s,appendAIMessage:o,modelInfo:t};const u=h=>new Promise(f=>{const{aiState:p,currentModel:g,setSubtitleText:x,appendResponse:v,appendAIMessage:y,modelInfo:m}=c.current;if(p==="interrupted"){console.error("Audio playback blocked. State:",p),f();return}const{audioBase64:_,displayText:C,expressions:E,forwarded:T}=h;if(C&&(v(C.text),y(C.text,C.name,C.avatar),_&&x(C.text),T||l({type:"audio-play-start",display_text:C,forwarded:!0})),!g){console.error("Model not initialized"),f();return}try{if(E?.[0]!==void 0){const I=E[0];let M=I;typeof I=="string"&&m?.emotionMap&&(M=m.emotionMap[I]),M!==void 0&&g.expression(M)}let S=!1;_?g.speak(`data:audio/wav;base64,${_}`,{onFinish:()=>{console.log("Voiceline is over"),S=!0,f()},onError:I=>{console.error("Audio playback error:",I),S=!0,f()}}):f();const P=()=>{S||setTimeout(P,100)};P()}catch(S){console.error("Speak function error:",S),Qt.create({title:`Speak function error: ${S}`,type:"error",duration:2e3}),f()}});return w.useEffect(()=>{let h=!0;return(async()=>{await Yi.waitForCompletion(),h&&n&&(l({type:"frontend-playback-complete"}),i(!1))})(),()=>{h=!1}},[n,l,i]),{addAudioTask:async h=>{const{aiState:f}=c.current;if(f==="interrupted"){console.log("Skipping audio task due to interrupted state");return}console.log(`Adding audio task ${h.displayText?.text} to queue`),Yi.addTask(()=>u(h))},appendResponse:s}},B_=w.memo(({isPet:t})=>{const{modelInfo:e,isLoading:r}=io(),{forceIgnoreMouse:n}=h_();xW({isPet:t});const{canvasRef:i,appRef:s,modelRef:o,containerRef:a}=_J({isPet:t,modelInfo:e});return bJ(a,s,o,e,t),ya(),WO(),w.useEffect(()=>(o.current&&(window.live2d={expression:l=>o.current?.expression(l),setExpression:l=>{l!==void 0&&o.current?.internalModel.motionManager.expressionManager?.setExpression(l)},setRandomExpression:()=>o.current?.internalModel.motionManager.expressionManager?.setRandomExpression(),getExpressions:()=>o.current?.internalModel.motionManager.expressionManager?.definitions.map(l=>l.name)}),()=>{delete window.live2d}),[o.current]),b.jsx("div",{ref:a,style:{width:t?"100vw":"100%",height:t?"100vh":"100%",overflow:"hidden",opacity:r?0:1,transition:"opacity 0.3s ease-in-out",background:"transparent",pointerEvents:t&&n?"none":"auto"},children:b.jsx("canvas",{id:"canvas",ref:i,style:{width:"100%",height:"100%",touchAction:"none",pointerEvents:t&&n?"none":"auto",display:"block"}})},e?.url||"live2d")});B_.displayName="Live2D";function EJ(){return b.jsx(yM,{children:b.jsxs(K,{...xl.canvas.container,children:[b.jsx(B_,{isPet:!1}),b.jsx(bM,{})]})})}var HO={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},QC=cn.createContext&&cn.createContext(HO),CJ=["attr","size","title"];function TJ(t,e){if(t==null)return{};var r=PJ(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function PJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Cp(){return Cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cp.apply(this,arguments)}function JC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JC(Object(r),!0).forEach(function(n){IJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IJ(t,e,r){return e=AJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AJ(t){var e=kJ(t,"string");return typeof e=="symbol"?e:e+""}function kJ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XO(t){return t&&t.map((e,r)=>cn.createElement(e.tag,Tp({key:r},e.attr),XO(e.child)))}function Ie(t){return e=>cn.createElement(RJ,Cp({attr:Tp({},t.attr)},e),XO(t.child))}function RJ(t){var e=r=>{var{attr:n,size:i,title:s}=t,o=TJ(t,CJ),a=i||r.size||"1em",l;return r.className&&(l=r.className),t.className&&(l=(l?l+" ":"")+t.className),cn.createElement("svg",Cp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:l,style:Tp(Tp({color:t.color||r.color},r.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&cn.createElement("title",null,s),t.children)};return QC!==void 0?cn.createElement(QC.Consumer,null,r=>e(r)):e(HO)}function MJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function OJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"14.31",y1:"8",x2:"20.05",y2:"17.94"},child:[]},{tag:"line",attr:{x1:"9.69",y1:"8",x2:"21.17",y2:"8"},child:[]},{tag:"line",attr:{x1:"7.38",y1:"12",x2:"13.12",y2:"2.06"},child:[]},{tag:"line",attr:{x1:"9.69",y1:"16",x2:"3.95",y2:"6.06"},child:[]},{tag:"line",attr:{x1:"14.31",y1:"16",x2:"2.83",y2:"16"},child:[]},{tag:"line",attr:{x1:"16.62",y1:"12",x2:"10.88",y2:"21.94"},child:[]}]})(t)}function LJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function DJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function FJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"7 13 12 18 17 13"},child:[]},{tag:"polyline",attr:{points:"7 6 12 11 17 6"},child:[]}]})(t)}function NJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function BJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(t)}function UJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(t)}function zJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(t)}function $J(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function jJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(t)}function VJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function GJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(t)}function WJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(t)}function YO(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"},child:[]},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"},child:[]},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"},child:[]}]})(t)}function HJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 14 10 14 10 20"},child:[]},{tag:"polyline",attr:{points:"20 10 14 10 14 4"},child:[]},{tag:"line",attr:{x1:"14",y1:"10",x2:"21",y2:"3"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(t)}function XJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function YJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"},child:[]},{tag:"path",attr:{d:"M13 13l6 6"},child:[]}]})(t)}function qJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"},child:[]},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"},child:[]}]})(t)}function eT(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(t)}function mx(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function KJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function ZJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 7 4 4 20 4 20 7"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"15",y2:"20"},child:[]},{tag:"line",attr:{x1:"12",y1:"4",x2:"12",y2:"20"},child:[]}]})(t)}function QJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function qO(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},child:[]},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"},child:[]}]})(t)}function KO(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},child:[]},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"},child:[]},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"},child:[]}]})(t)}function JJ(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12.55a11 11 0 0 1 14.08 0"},child:[]},{tag:"path",attr:{d:"M1.42 9a16 16 0 0 1 21.16 0"},child:[]},{tag:"path",attr:{d:"M8.53 16.11a6 6 0 0 1 6.95 0"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12.01",y2:"20"},child:[]}]})(t)}function U_(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function eee(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"11",y1:"8",x2:"11",y2:"14"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(t)}const tee=window.api!==void 0,ree=()=>typeof window<"u"&&/Mobi|Android/i.test(navigator.userAgent)?`${window.innerHeight}px`:tee?"calc(100vh - 30px)":"100vh",vs={appContainer:{width:"100vw",height:ree(),bg:"gray.900",color:"white",overflow:"hidden",position:"relative"},canvas:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},windowsTitleBar:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"30px",backgroundColor:"gray.800",paddingX:"10px",css:{"-webkit-app-region":"drag"}},macTitleBar:{display:"flex",alignItems:"center",justifyContent:"center",height:"30px",backgroundColor:"gray.800",css:{"-webkit-app-region":"drag","-webkit-user-select":"none"}},titleBarTitle:{fontSize:"sm",color:"whiteAlpha.800",textAlign:"center"},titleBarButtons:{display:"flex",gap:"1"},titleBarButton:{size:"sm",variant:"ghost",color:"whiteAlpha.800",css:{"-webkit-app-region":"no-drag"},_hover:{backgroundColor:"whiteAlpha.200"}},closeButton:{size:"sm",variant:"ghost",color:"whiteAlpha.800",css:{"-webkit-app-region":"no-drag"},_hover:{backgroundColor:"red.500"}}};function nee(){const[t,e]=w.useState(!1),[r,n]=w.useState(!1),i=window.electron?.process.platform==="darwin";w.useEffect(()=>{const l=(u,d)=>{e(d)},c=(u,d)=>{n(d)};return window.electron?.ipcRenderer.on("window-maximized-change",l),window.electron?.ipcRenderer.on("window-fullscreen-change",c),()=>{window.electron?.ipcRenderer.removeAllListeners("window-maximized-change"),window.electron?.ipcRenderer.removeAllListeners("window-fullscreen-change")}},[]);const s=()=>{r?window.electron?.ipcRenderer.send("window-unfullscreen"):window.electron?.ipcRenderer.send("window-maximize")},o=()=>r?"Exit Full Screen":t?"Restore":"Maximize",a=()=>r?b.jsx(FJ,{}):t?b.jsx(HJ,{}):b.jsx(WJ,{});return i?b.jsx(K,{...vs.macTitleBar,children:b.jsx(K,{...vs.titleBarTitle,children:"AI-PROJECT-X"})}):b.jsxs(K,{...vs.windowsTitleBar,children:[b.jsx(K,{...vs.titleBarTitle,children:"AI-PROJECT-X"}),b.jsxs(K,{...vs.titleBarButtons,children:[b.jsx(sn,{...vs.titleBarButton,onClick:()=>window.electron?.ipcRenderer.send("window-minimize"),"aria-label":"Minimize",children:b.jsx(XJ,{})}),b.jsx(sn,{...vs.titleBarButton,onClick:s,"aria-label":o(),children:a()}),b.jsx(sn,{...vs.closeButton,onClick:()=>window.electron?.ipcRenderer.send("window-close"),"aria-label":"Close",children:b.jsx(U_,{})})]})]})}function iee(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"},child:[]},{tag:"path",attr:{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"},child:[]}]})(t)}function see(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2"},child:[]},{tag:"path",attr:{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2"},child:[]},{tag:"path",attr:{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8"},child:[]},{tag:"path",attr:{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"},child:[]}]})(t)}function oee(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"2",x2:"22",y1:"2",y2:"22"},child:[]},{tag:"path",attr:{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"},child:[]},{tag:"path",attr:{d:"M5 10v2a7 7 0 0 0 12 5"},child:[]},{tag:"path",attr:{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33"},child:[]},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"19",y2:"22"},child:[]}]})(t)}function aee(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"},child:[]},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"19",y2:"22"},child:[]}]})(t)}function lee(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},child:[]},{tag:"path",attr:{d:"m21.854 2.147-10.94 10.939"},child:[]}]})(t)}function ZO(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(t)}function cee(){const[t,e]=w.useState(""),[r,n]=w.useState(!1),i=fs(),{status:s,setAiState:o}=Ai(),{interrupt:a}=ya(),{appendHumanMessage:l}=Kl(),{stopMic:c,autoStopMic:u}=pa(),{setSubtitleText:d}=ki(),h=v=>{e(v.target.value)},f=async()=>{!t.trim()||!i||((s==="thinking"||s==="speaking")&&a(),l(t.trim()),i.sendMessage({type:"text-input",text:t.trim()}),o("thinking"),d("..."),u&&c(),e(""))};return{inputText:t,setInputText:h,handleSend:f,handleKeyPress:v=>{r||v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),f())},handleCompositionStart:()=>n(!0),handleCompositionEnd:()=>n(!1)}}const uee=t=>t.replace(/\[[\w\s]*\]/g,"").trim();function dee(){const{inputText:t,setInputText:e,handleKeyPress:r,handleCompositionStart:n,handleCompositionEnd:i,handleSend:s}=cee(),{messages:o}=Kl(),{startMic:a,autoStartMicOn:l}=pa(),{handleMicToggle:c,micOn:u}=EM(),{status:d,setAiState:h}=Ai(),{interrupt:f}=ya(),p=o.filter(m=>m.role==="ai").slice(-1).map(m=>uee(m.content))[0],g=o.some(m=>m.role==="ai");return{inputValue:t,handleInputChange:m=>{e({target:{value:m.target.value}}),h("waiting")},handleKeyPress:m=>{r(m)},handleCompositionStart:n,handleCompositionEnd:i,handleInterrupt:()=>{f(),l&&a()},handleMicToggle:c,lastAIMessage:p,hasAIMessages:g,aiState:d,micOn:u,handleSend:s}}const Mr={container:{display:"flex",alignItems:"flex-end",justifyContent:"center",maxW:"fit-content",position:"absolute",bottom:"120px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,userSelect:"none",willChange:"transform",padding:0},box:{w:"400px",rounded:"xl",overflow:"hidden",boxShadow:"lg",bg:"blackAlpha.700",backdropFilter:"blur(8px)",css:{WebkitUserSelect:"none"}},messageStack:{p:"3",gap:1,alignItems:"stretch",justify:"flex-end"},messageText:{color:"white",fontSize:"sm",lineHeight:"1.5",transition:"all 0.3s"},statusBox:{bg:"blackAlpha.600",p:"3",borderTop:"1px",borderColor:"whiteAlpha.200"},statusText:{fontSize:"xs",color:"whiteAlpha.800",transition:"all 0.3s"},iconButton:{size:"xs",variant:"ghost",color:"whiteAlpha.800",_hover:{bg:"whiteAlpha.200"}},inputBox:{bg:"blackAlpha.600",borderTop:"1px",borderColor:"whiteAlpha.200"},input:{size:"sm",bg:"blackAlpha.500",color:"white",_placeholder:{color:"whiteAlpha.500"},borderColor:"whiteAlpha.300",_focus:{borderColor:"whiteAlpha.500",outline:"none"},flex:"1"},sendButton:{p:"1.5",bg:"blackAlpha.500",rounded:"lg",_hover:{bg:"blackAlpha.600"},transition:"colors",color:"whiteAlpha.800",size:"sm"},draggableContainer:t=>({cursor:t?"grabbing":"grab",transition:t?"none":"transform 0.1s ease",_active:{cursor:"grabbing"}}),closeButton:{position:"absolute",top:0,right:0,size:"2xs",minW:"6",height:"6",padding:0,variant:"ghost",color:"whiteAlpha.400",bg:"transparent",_hover:{bg:"blackAlpha.300",color:"whiteAlpha.800"},zIndex:10}};function hee({isPet:t=!1}){const{inputValue:e,handleInputChange:r,handleKeyPress:n,handleCompositionStart:i,handleCompositionEnd:s,handleInterrupt:o,handleMicToggle:a,handleSend:l,lastAIMessage:c,hasAIMessages:u,aiState:d,micOn:h}=dee(),{elementRef:f,isDragging:p,handleMouseDown:g,handleMouseEnter:x,handleMouseLeave:v}=vM({isPet:t,componentId:"input-subtitle"}),[y,m]=w.useState(!0),_=w.useCallback(()=>{t&&window.api?.updateComponentHover("input-subtitle",!1),m(!1)},[t]),C=()=>{m(!0)};return w.useEffect(()=>{if(t){const E=window.api?.onToggleInputSubtitle(()=>{y?_():C()});return()=>E?.()}return()=>{}},[_,t,y]),w.useEffect(()=>(window.inputSubtitle={open:C,close:_},()=>{delete window.inputSubtitle}),[t,_]),y?b.jsx(K,{ref:f,...Mr.container,...Mr.draggableContainer(p),onMouseDown:g,onMouseEnter:x,onMouseLeave:v,children:b.jsxs(K,{...Mr.box,children:[b.jsx(sn,{"aria-label":"Close subtitle",onClick:_,...Mr.closeButton,children:b.jsx(ZO,{size:12})}),u&&b.jsx(oi,{minH:c?"32px":"0px",...Mr.messageStack,children:c&&b.jsx(ze,{...Mr.messageText,children:c})}),b.jsx(K,{...Mr.statusBox,children:b.jsxs(pu,{align:"center",justify:"space-between",color:"whiteAlpha.700",children:[b.jsxs(pu,{align:"center",gap:"2",children:[b.jsx(iee,{size:16}),b.jsx(ze,{...Mr.statusText,children:d})]}),b.jsxs(pu,{gap:"2",children:[b.jsx(sn,{"aria-label":"Toggle microphone",onClick:a,...Mr.iconButton,children:h?b.jsx(aee,{size:16}):b.jsx(oee,{size:16})}),b.jsx(sn,{"aria-label":"Interrupt",onClick:o,...Mr.iconButton,children:b.jsx(see,{size:16})})]})]})}),b.jsx(K,{...Mr.inputBox,children:b.jsxs(no,{direction:"row",gap:"2",p:"2",children:[b.jsx(s_,{value:e,onChange:r,onKeyDown:n,onCompositionStart:i,onCompositionEnd:s,placeholder:"Type your message...",...Mr.input}),b.jsx(Zt,{onClick:l,...Mr.sendButton,children:b.jsx(lee,{size:16})})]})})]})}):null}const fee=window.api!==void 0,St={settingUI:{container:{width:"100%",height:"100%",p:0,gap:0,position:"relative",overflowY:"auto",css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{bg:"gray.200"},"&::-webkit-scrollbar-thumb":{bg:"gray.400"}}},header:{width:"100%",display:"flex",alignItems:"center",gap:2},title:{fontSize:"lg",fontWeight:"600",color:"gray.800"},tabs:{root:{width:"100%",variant:"plain",colorPalette:"purple"},content:{p:4,bg:"white"},trigger:{px:3,py:2,borderRadius:"md",fontSize:"sm",fontWeight:"500",color:"gray.700",bg:"transparent",border:"none",_selected:{color:"purple.600",bg:"purple.50"},_hover:{color:"purple.500",bg:"gray.50"}},list:{display:"flex",gap:1,justifyContent:"flex-start",width:"100%",borderBottom:"1px solid",borderColor:"gray.200",bg:"gray.50",p:2}},footer:{width:"100%",display:"flex",justifyContent:"flex-end",gap:2,p:4,borderTop:"1px solid",borderColor:"gray.200",bg:"gray.50"},drawerContent:{bg:"white",maxWidth:"450px",height:fee?"calc(100vh - 30px)":"100vh",border:"1px solid",borderColor:"gray.300",borderRadius:"md",overflow:"hidden"},drawerHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",position:"relative",px:4,py:3,bg:"white",borderBottom:"1px solid",borderColor:"gray.200"},drawerTitle:{color:"gray.800",fontSize:"lg",fontWeight:"600"},closeButton:{position:"absolute",right:2,top:2,color:"gray.700",_hover:{color:"gray.900"}}},general:{container:{align:"stretch",gap:4,p:0},field:{label:{color:"gray.700",fontWeight:"500"}},select:{root:{colorPalette:"purple",bg:"white"},trigger:{bg:"gray.50",borderColor:"gray.300",_focus:{borderColor:"purple.400"}}},input:{bg:"gray.50",borderColor:"gray.300",color:"gray.800",_placeholder:{color:"gray.500"},_focus:{bg:"white",borderColor:"purple.400",color:"gray.800"}},buttonGroup:{gap:2,width:"100%"},button:{width:"50%",variant:"outline",colorPalette:"purple"},fieldLabel:{fontSize:"sm",color:"gray.700",fontWeight:"500"}},common:{field:{orientation:"horizontal"},fieldLabel:{fontSize:"sm",color:"gray.700",fontWeight:"500",whiteSpace:"nowrap"},switch:{size:"md",colorPalette:"purple",variant:"solid"},numberInput:{root:{pattern:"[0-9]*\\.?[0-9]*",inputMode:"decimal"},input:{bg:"gray.50",borderColor:"gray.300",color:"gray.800",_placeholder:{color:"gray.500"},_focus:{bg:"white",borderColor:"purple.400",color:"gray.800"}}},container:{gap:4,maxW:"lg",css:{"--field-label-width":"120px"}},input:{bg:"gray.50",borderColor:"gray.300",color:"gray.800",_placeholder:{color:"gray.500"},_focus:{bg:"white",borderColor:"blue.400",color:"gray.800"}},select:{root:{colorPalette:"purple",bg:"white"},trigger:{bg:"gray.50",borderColor:"gray.300",color:"gray.800",_placeholder:{color:"gray.500"},_focus:{borderColor:"purple.400",bg:"white",color:"gray.800"}}}},live2d:{container:{gap:4,maxW:"lg",css:{"--field-label-width":"120px"}}}},pee=({bgUrlContext:t,confName:e,setConfName:r,baseUrl:n,wsUrl:i,onWsUrlChange:s,onBaseUrlChange:o,onSave:a,onCancel:l})=>{const{showSubtitle:c,setShowSubtitle:u}=ki(),{setUseCameraBackground:d}=t||{},{startBackgroundCamera:h,stopBackgroundCamera:f}=JR(),{configFiles:p,getFilenameByName:g}=lc(),{switchCharacter:x}=CM(),v=()=>{if(!t?.backgroundUrl)return[];const O=t.backgroundUrl.replace(n,"");return O.startsWith("/bg/")?[O]:[]},y={language:["en"],customBgUrl:t?.backgroundUrl?.includes("/bg/")?"":t?.backgroundUrl||"",selectedBgUrl:v(),backgroundUrl:t?.backgroundUrl||"",selectedCharacterPreset:[],useCameraBackground:t?.useCameraBackground||!1,wsUrl:i||nW,baseUrl:n||iW,showSubtitle:c},[m,_]=w.useState(y),[C,E]=w.useState(y),T=e;w.useEffect(()=>{u(m.showSubtitle);const R=m.customBgUrl||m.selectedBgUrl[0];if(R&&t){const O=R.startsWith("http")?R:`${n}${R}`;t.backgroundUrl!==O&&t.setBackgroundUrl(O)}m.wsUrl&&m.wsUrl!==i&&s(m.wsUrl),m.baseUrl&&m.baseUrl!==n&&o(m.baseUrl)},[m,i,n]),w.useEffect(()=>{if(e){const R={...m,selectedCharacterPreset:[e]};_(R),E(R)}},[e]),w.useEffect(()=>{if(!a||!l)return;const R=a(()=>{P()}),O=l(()=>{I()});return()=>{R?.(),O?.()}},[a,l]);const S=(R,O)=>{_(V=>({...V,[R]:O})),R==="wsUrl"&&s(O),R==="baseUrl"&&o(O)},P=()=>{E(m)},I=()=>{_(C),u(C.showSubtitle),t&&(t.setBackgroundUrl(C.backgroundUrl),t.setUseCameraBackground(C.useCameraBackground)),s(C.wsUrl),o(C.baseUrl),T&&r(T),C.useCameraBackground?h():f()};return{settings:m,handleSettingChange:S,handleSave:P,handleCancel:I,handleCameraToggle:async R=>{if(d)if(R)try{await h(),S("useCameraBackground",!0),d(!0)}catch(O){console.error("Failed to start camera:",O),S("useCameraBackground",!1),d(!1)}else f(),S("useCameraBackground",!1),d(!1)},handleCharacterPresetChange:R=>{const O=R[0],V=p.find(F=>F.filename===O),U=e?g(e):"";S("selectedCharacterPreset",R),U!==O&&V&&x(O)},showSubtitle:c,setShowSubtitle:u}},$g=w.forwardRef((t,e)=>{const{label:r,children:n,helperText:i,errorText:s,optionalText:o,...a}=t;return b.jsxs(P6,{ref:e,...a,children:[r&&b.jsxs(I6,{children:[r,b.jsx(R6,{fallback:o})]}),n,i&&b.jsx(A6,{children:i}),s&&b.jsx(k6,{children:s})]})}),gee=w.forwardRef((t,e)=>{const{inputProps:r,children:n,rootRef:i,trackLabel:s,thumbLabel:o,...a}=t;return b.jsxs(aG,{ref:i,...a,children:[b.jsx(fG,{ref:e,...r}),b.jsxs(cG,{children:[b.jsx(uG,{children:o&&b.jsx(hG,{fallback:o?.off,children:o?.on})}),s&&b.jsx(dG,{fallback:s.off,children:s.on})]}),n!=null&&b.jsx(lG,{children:n})]})}),QO=w.forwardRef((t,e)=>b.jsx(sn,{variant:"ghost","aria-label":"Close",ref:e,...t,children:t.children??b.jsx(ZO,{})})),mee=w.forwardRef((t,e)=>{const{children:r,clearable:n,...i}=t;return b.jsxs(tG,{...i,children:[b.jsx(G6,{ref:e,children:r}),b.jsxs(J6,{children:[n&&b.jsx(yee,{}),b.jsx(eG,{})]})]})}),yee=w.forwardRef((t,e)=>b.jsx(Y6,{asChild:!0,...t,ref:e,children:b.jsx(QO,{size:"xs",variant:"plain",focusVisibleRing:"inside",focusRingWidth:"2px",pointerEvents:"auto"})})),vee=w.forwardRef((t,e)=>{const{portalled:r=!0,portalRef:n,...i}=t;return b.jsx(o_,{disabled:!r,container:n,children:b.jsx(W6,{zIndex:10050,children:b.jsx(H6,{...i,ref:e,zIndex:10050})})})}),xee=w.forwardRef((t,e)=>{const{item:r,children:n,...i}=t;return b.jsxs(Z6,{item:r,...i,ref:e,children:[n,b.jsx(Q6,{})]},r.value)}),bee=w.forwardRef((t,e)=>{const{children:r,...n}=t;return b.jsx(X6,{...n,ref:e,children:b.jsx(rG,{children:i=>{const s=i.selectedItems;return s.length===0?t.placeholder:r?r(s):s.length===1?i.collection.stringifyItem(s[0]):`${s.length} selected`}})})}),_ee=w.forwardRef((t,e)=>b.jsx(V6,{...t,ref:e,positioning:{sameWidth:!0,...t.positioning},children:t.asChild?t.children:b.jsxs(b.Fragment,{children:[b.jsx(nG,{}),t.children]})}));w.forwardRef((t,e)=>{const{children:r,label:n,...i}=t;return b.jsxs(q6,{...i,ref:e,children:[b.jsx(K6,{children:n}),r]})});function tT({label:t,value:e,onChange:r,collection:n,placeholder:i}){return b.jsx($g,{...St.general.field,label:b.jsxs(lt,{gap:2,children:[b.jsxs(K,{children:[String(t).includes("")&&b.jsx(ar,{as:zJ,boxSize:4,color:"gray.700"}),String(t).includes("")&&b.jsx(ar,{as:QJ,boxSize:4,color:"gray.700"})]}),b.jsx(ze,{...St.general.field.label,children:t})]}),children:b.jsxs(_ee,{...St.general.select.root,collection:n,value:e,onValueChange:s=>r(s.value),children:[b.jsx(mee,{...St.general.select.trigger,style:{color:"#2D3748"},children:b.jsx(bee,{placeholder:i,style:{color:"#2D3748"}})}),b.jsx(vee,{children:n.items.map(s=>b.jsx(xee,{item:s,children:s.label},s.value))})]})})}function Wi({label:t,value:e,onChange:r,min:n,max:i,step:s,allowMouseWheel:o}){return b.jsx($g,{...St.common.field,label:b.jsxs(lt,{gap:2,children:[b.jsxs(K,{children:[String(t).includes("")&&b.jsx(ar,{as:LJ,boxSize:4,color:"gray.700"}),String(t).includes("")&&b.jsx(ar,{as:KO,boxSize:4,color:"gray.700"}),String(t).includes("")&&b.jsx(ar,{as:mx,boxSize:4,color:"gray.700"}),String(t).includes("")&&b.jsx(ar,{as:NJ,boxSize:4,color:"gray.700"})]}),b.jsx(ze,{...St.common.fieldLabel,children:t})]}),children:b.jsxs(F6,{...St.common.numberInput.root,value:e.toString(),onValueChange:a=>r(a.value),min:n,max:i,step:s,allowMouseWheel:o,children:[b.jsx(B6,{...St.common.numberInput.input,style:{color:"#2D3748"}}),b.jsxs(N6,{children:[b.jsx(U6,{}),b.jsx(z6,{})]})]})})}function wi({label:t,checked:e,onChange:r}){return b.jsx($g,{...St.common.field,label:b.jsxs(lt,{gap:2,children:[b.jsxs(K,{children:[String(t).includes("")&&b.jsx(ar,{as:DJ,boxSize:4,color:"gray.700"}),String(t).includes("")&&b.jsx(ar,{as:ZJ,boxSize:4,color:"gray.700"}),String(t).toLowerCase().includes("")&&b.jsx(ar,{as:YO,boxSize:4,color:"gray.700"}),String(t).includes("")&&b.jsx(ar,{as:YJ,boxSize:4,color:"gray.700"}),String(t).includes("")&&b.jsx(ar,{as:eee,boxSize:4,color:"gray.700"})]}),b.jsx(ze,{...St.common.fieldLabel,children:t})]}),children:b.jsx(gee,{...St.common.switch,checked:e,onCheckedChange:n=>r(n.checked)})})}function kh({label:t,value:e,onChange:r,placeholder:n}){return b.jsx($g,{...St.general.field,label:b.jsxs(lt,{gap:2,children:[b.jsxs(K,{children:[String(t).includes("WebSocket")&&b.jsx(ar,{as:JJ,boxSize:4,color:"gray.700"}),String(t).includes("URL")&&b.jsx(ar,{as:GJ,boxSize:4,color:"gray.700"}),String(t).includes("")&&b.jsx(ar,{as:jJ,boxSize:4,color:"gray.700"})]}),b.jsx(ze,{...St.general.field.label,children:t})]}),children:b.jsx(s_,{...St.general.input,placeholder:n,value:e,onChange:i=>r(i.target.value),style:{color:"#2D3748"}})})}const wee={enabled:!0,bgColor:"#000000",bgOpacity:.45,paddingX:14,paddingY:10,borderRadius:14,blur:0,maxWidth:"90%"},See=()=>{const{backgroundFiles:t}=d_()||{},{configFiles:e}=lc(),r=Tm({items:[{label:"English",value:"en"},{label:"",value:"zh"}]}),n=Tm({items:(Array.isArray(t)?t:[]).map(s=>{if(s&&typeof s=="object"){const a=s.name||s.filename||String(s),l=s.url||(s.filename?`/bg/${s.filename}`:`/bg/${a}`);return{label:String(a),value:l}}const o=String(s);return{label:o,value:`/bg/${o}`}})}),i=Tm({items:e.map(s=>({label:s.name,value:s.filename}))});return{languages:r,backgrounds:n,characterPresets:i}};function Eee({onSave:t,onCancel:e}){const r=d_(),{confName:n,setConfName:i}=lc(),s=Z(E=>E.updateAppConfig),o=Z(E=>E.config.appConfig?.subtitle),a=w.useMemo(()=>o??wee,[o]),{wsUrl:l,setWsUrl:c,baseUrl:u,setBaseUrl:d}=fs(),h=See(),{settings:f,handleSettingChange:p,handleCameraToggle:g,handleCharacterPresetChange:x,showSubtitle:v,setShowSubtitle:y}=pee({bgUrlContext:r,confName:n,setConfName:i,baseUrl:u,wsUrl:l,onWsUrlChange:c,onBaseUrlChange:d,onSave:t,onCancel:e}),m=!1,_=E=>s({subtitle:{...a,...E}}),C=(E,T,S,P)=>{if(T===""||T==null)return;const I=Number(T);if(Number.isNaN(I))return;let M=I;M=Math.max(S,M),typeof P=="number"&&(M=Math.min(P,M)),_({[E]:M})};return b.jsxs(no,{...St.common.container,children:[b.jsx(tT,{label:" / Language",value:f.language,onChange:E=>p("language",E),collection:h.languages,placeholder:" / Select language"}),b.jsx(wi,{label:"",checked:f.useCameraBackground,onChange:g}),b.jsx(wi,{label:"",checked:v,onChange:y}),b.jsx(wi,{label:"",checked:a.enabled??!0,onChange:E=>_({enabled:E})}),b.jsx(kh,{label:" (hex)",value:a.bgColor??"#000000",onChange:E=>_({bgColor:E}),placeholder:"#000000"}),b.jsx(Wi,{label:" (0~1)",value:String(a.bgOpacity??.45),onChange:E=>C("bgOpacity",E,0,1),min:0,max:1,step:.05}),b.jsx(kh,{label:" (hex)",value:a.textColor??"#ff8ac3",onChange:E=>_({textColor:E}),placeholder:"#ff8ac3"}),b.jsx(Wi,{label:"Padding(px)",value:String(a.paddingX??14),onChange:E=>C("paddingX",E,0,400),min:0,max:400,step:1}),b.jsx(Wi,{label:"Padding(px)",value:String(a.paddingY??10),onChange:E=>C("paddingY",E,0,400),min:0,max:400,step:1}),b.jsx(Wi,{label:"(px)",value:String(a.borderRadius??14),onChange:E=>C("borderRadius",E,0,200),min:0,max:200,step:1}),b.jsx(Wi,{label:"(blur px)",value:String(a.blur??0),onChange:E=>C("blur",E,0,50),min:0,max:50,step:1}),!f.useCameraBackground&&m,b.jsx(tT,{label:"",value:f.selectedCharacterPreset,onChange:x,collection:h.characterPresets,placeholder:n||""}),b.jsx(kh,{label:"WebSocket URL",value:f.wsUrl,onChange:E=>p("wsUrl",E),placeholder:"WebSocket URL"}),b.jsx(kh,{label:"URL",value:f.baseUrl,onChange:E=>p("baseUrl",E),placeholder:"URL"})]})}const Cee=()=>{const t=io(),e={url:"",kScale:.5,initialXshift:0,initialYshift:0,emotionMap:{},scrollToResize:!0},[r,n]=w.useState(t?.modelInfo||e),[i,s]=w.useState(t?.modelInfo||e);return w.useEffect(()=>{t?.modelInfo&&JSON.stringify(t.modelInfo)!==JSON.stringify(i)&&(s(t.modelInfo),n(t.modelInfo))},[t?.modelInfo]),w.useEffect(()=>{t&&r&&t.setModelInfo(r)},[r.pointerInteractive,r.scrollToResize,r.emotionMap]),{modelInfo:r,handleInputChange:(c,u)=>{n(d=>({...d,[c]:u}))},handleSave:()=>{t&&r&&s(r)},handleCancel:()=>{n(i),t&&i&&t.setModelInfo(i)}}};function Tee({onSave:t,onCancel:e}){const{modelInfo:r,handleInputChange:n,handleSave:i,handleCancel:s}=Cee();return w.useEffect(()=>{if(!t||!e)return;const o=t(i),a=e(s);return()=>{o?.(),a?.()}},[t,e]),b.jsxs(no,{...St.live2d.container,children:[b.jsx(wi,{label:"",checked:r.pointerInteractive??!1,onChange:o=>n("pointerInteractive",o)}),b.jsx(wi,{label:"",checked:r.scrollToResize??!0,onChange:o=>n("scrollToResize",o)})]})}const Pee=()=>{const{settings:t,updateSettings:e,autoStopMic:r,setAutoStopMic:n,autoStartMicOn:i,setAutoStartMicOn:s,autoStartMicOnConvEnd:o,setAutoStartMicOnConvEnd:a}=pa(),l=w.useRef(t),c=w.useRef(t),u=w.useRef(r),d=w.useRef(i),h=w.useRef(o),[f,p]=w.useState(r),[g,x]=w.useState(i),[v,y]=w.useState(o),[,m]=cn.useReducer(I=>I+1,0);w.useEffect(()=>{p(r),x(i),y(o)},[r,i,o]);const _=(I,M)=>{if(M===""||M==="-")l.current={...l.current,[I]:M};else{const k=Number(M);isNaN(k)||(l.current={...l.current,[I]:k})}m()},C=I=>{p(I),n(I)},E=I=>{x(I),s(I)},T=I=>{y(I),a(I)},S=()=>{e(l.current),c.current=l.current,u.current=f,d.current=g,h.current=v},P=()=>{l.current=c.current,p(u.current),x(d.current),n(u.current),s(d.current),y(h.current),a(h.current),m()};return{localSettings:l.current,autoStopMic:f,autoStartMicOn:g,autoStartMicOnConvEnd:v,setAutoStopMic:C,setAutoStartMicOn:E,setAutoStartMicOnConvEnd:T,handleInputChange:_,handleSave:S,handleCancel:P}};function Iee({onSave:t,onCancel:e}){const{localSettings:r,autoStopMic:n,autoStartMicOn:i,autoStartMicOnConvEnd:s,setAutoStopMic:o,setAutoStartMicOn:a,setAutoStartMicOnConvEnd:l,handleInputChange:c,handleSave:u,handleCancel:d}=Pee();return w.useEffect(()=>{if(!t||!e)return;const h=t(u),f=e(d);return()=>{h?.(),f?.()}},[t,e,u,d]),b.jsxs(no,{...St.common.container,children:[b.jsx(wi,{label:"AI",checked:n,onChange:o}),b.jsx(wi,{label:"",checked:s,onChange:l}),b.jsx(wi,{label:"AI",checked:i,onChange:a}),b.jsx(Wi,{label:"",value:r.positiveSpeechThreshold,onChange:h=>c("positiveSpeechThreshold",h),min:1,max:100}),b.jsx(Wi,{label:"",value:r.negativeSpeechThreshold,onChange:h=>c("negativeSpeechThreshold",h),min:0,max:100}),b.jsx(Wi,{label:"",value:r.redemptionFrames,onChange:h=>c("redemptionFrames",h),min:1,max:100})]})}function Aee(){return b.jsx(K,{children:"TTS Settings Content"})}function kee(){const{sendMessage:t}=fs();return{sendTriggerSignal:w.useCallback(async r=>{t({type:"ai-speak-signal",idle_time:r})},[t])}}const JO=w.createContext(null);function Ree({children:t}){const{allowProactiveSpeak:e,allowButtonTrigger:r,idleSecondsToSpeak:n,updateProactiveSettings:i}=Z8(),s={allowProactiveSpeak:e,allowButtonTrigger:r,idleSecondsToSpeak:n},{status:o}=Ai(),{sendTriggerSignal:a}=kee(),l=w.useRef(null),c=w.useRef(null),u=w.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null),c.current=null},[]),d=w.useCallback(()=>{u(),s.allowProactiveSpeak&&(c.current=Date.now(),l.current=setTimeout(()=>{const p=(Date.now()-c.current)/1e3;a(p)},s.idleSecondsToSpeak*1e3))},[s.allowProactiveSpeak,s.idleSecondsToSpeak]);w.useEffect(()=>{o==="idle"?d():u()},[o,d,u]),w.useEffect(()=>()=>{u()},[u]);const h=w.useCallback(p=>{i(p)},[i]),f=w.useMemo(()=>({settings:s,updateSettings:h}),[s,h]);return b.jsx(JO.Provider,{value:f,children:t})}const Mee=()=>{const t=w.useContext(JO);if(!t)throw new Error("useProactiveSpeak must be used within a ProactiveSpeakProvider");return t};function Oee({onSave:t,onCancel:e}={}){const{settings:r,updateSettings:n}=Mee(),[i,s]=w.useState({allowProactiveSpeak:r.allowProactiveSpeak,idleSecondsToSpeak:r.idleSecondsToSpeak,allowButtonTrigger:r.allowButtonTrigger}),[o,a]=w.useState({...r});w.useEffect(()=>{r&&(a(r),s(r))},[r]);const l=w.useCallback(f=>{s(p=>({...p,allowProactiveSpeak:f}))},[]),c=w.useCallback(f=>{s(p=>({...p,idleSecondsToSpeak:f}))},[]),u=w.useCallback(f=>{s(p=>({...p,allowButtonTrigger:f}))},[]),d=w.useCallback(()=>{n(i),a(i)},[n,i]),h=w.useCallback(()=>{s(o),n(o)},[o,n]);return w.useEffect(()=>{if(!t||!e)return;const f=t(d),p=e(h);return()=>{f?.(),p?.()}},[t,e,d,h]),{settings:i,handleAllowProactiveSpeakChange:l,handleIdleSecondsChange:c,handleAllowButtonTriggerChange:u}}function Lee({onSave:t,onCancel:e}){const{settings:r,handleAllowProactiveSpeakChange:n,handleIdleSecondsChange:i,handleAllowButtonTriggerChange:s}=Oee({onSave:t,onCancel:e});return b.jsxs(no,{...St.common.container,children:[b.jsx(wi,{label:"AI",checked:r.allowProactiveSpeak,onChange:n}),r.allowProactiveSpeak&&b.jsx(Wi,{label:"AI",value:r.idleSecondsToSpeak,onChange:o=>i(Number(o)),min:0,step:.1,allowMouseWheel:!0}),b.jsx(wi,{label:"AI",checked:r.allowButtonTrigger,onChange:s})]})}const rT=w.forwardRef((t,e)=>{const{title:r,children:n,icon:i,closable:s,onClose:o,startElement:a,endElement:l,...c}=t;return b.jsxs(f6,{ref:e,...c,children:[a||b.jsx(y6,{children:i}),n?b.jsxs(g6,{children:[b.jsx(p1,{children:r}),b.jsx(p6,{children:n})]}):b.jsx(p1,{flex:"1",children:r}),l,s&&b.jsx(QO,{size:"sm",pos:"relative",top:"-2",insetEnd:"-2",alignSelf:"flex-start",onClick:o})]})}),Dee=w.forwardRef((t,e)=>{const{loading:r,disabled:n,loadingText:i,children:s,...o}=t;return b.jsx(Zt,{disabled:r||n,ref:e,...o,children:r&&!i?b.jsxs(b.Fragment,{children:[b.jsx(n_,{display:"inline-flex",children:b.jsx(jl,{size:"inherit",color:"inherit"})}),b.jsx(Wc,{opacity:0,children:s})]}):r&&i?b.jsxs(b.Fragment,{children:[b.jsx(jl,{size:"inherit",color:"inherit"}),i]}):s})}),nT=w.forwardRef((t,e)=>{const{startElement:r,endElement:n,onClose:i,closable:s=!!i,children:o,...a}=t;return b.jsxs(EG,{ref:e,...a,children:[r&&b.jsx(PG,{children:r}),b.jsx(CG,{children:o}),n&&b.jsx(m1,{children:n}),s&&b.jsx(m1,{children:b.jsx(TG,{onClick:i})})]})}),iT=w.forwardRef((t,e)=>{const{showArrow:r,children:n,disabled:i,portalled:s,content:o,contentProps:a,portalRef:l,...c}=t;return i?n:b.jsxs(JG,{...c,children:[b.jsx(e8,{asChild:!0,children:n}),b.jsx(o_,{disabled:!s,container:l,children:b.jsx(t8,{children:b.jsxs(r8,{ref:e,...a,children:[r&&b.jsx(n8,{children:b.jsx(i8,{})}),o]})})})]})});var hf=(t=>(t.MUTED="muted",t.AUDIO="audio",t.AUDIO_VAD="audio_vad",t))(hf||{});const eL={audioMode:"audio_vad",autoSwitchNext:!0,cleanPlaybackExperience:!0,supportAnyLength:!0},Fee=({onSave:t,onCancel:e}={})=>{const[r,n]=np("advertisementAudioSettings",eL),[i,s]=w.useState(r),[o,a]=w.useState(r);w.useEffect(()=>{a(r),s(r)},[r]);const l=w.useCallback(f=>{s(p=>({...p,audioMode:f}))},[]),c=w.useCallback(()=>{n(i),a(i),console.log(" :",i)},[i,n]),u=w.useCallback(()=>{s(o),console.log(" :",o)},[o]);w.useEffect(()=>{if(!t||!e)return;const f=t(c),p=e(u);return()=>{f?.(),p?.()}},[t,e,c,u]);const d=i.audioMode!=="muted",h=i.audioMode==="audio_vad";return{settings:i,persistedSettings:r,originalSettings:o,isAudioEnabled:d,isVADEnabled:h,handleAudioModeChange:l,handleSave:c,handleCancel:u,isMutedMode:i.audioMode==="muted",isAudioMode:i.audioMode==="audio",isAudioVADMode:i.audioMode==="audio_vad"}},Nee=()=>{const[t]=np("advertisementAudioSettings",eL);return{settings:t,isAudioEnabled:t.audioMode!=="muted",isVADEnabled:t.audioMode==="audio_vad",audioMode:t.audioMode}};function Bee({onSave:t,onCancel:e}){const{handleAudioModeChange:r,isMutedMode:n,isAudioMode:i,isAudioVADMode:s}=Fee({onSave:t,onCancel:e}),[o,a]=w.useState("ads"),[l,c]=w.useState([]),[u,d]=w.useState([]),[h,f]=w.useState(!0),[p,g]=w.useState(!1),[x,v]=w.useState(0),[y,m]=w.useState(null),_=w.useRef(null),C=dM(),E=(A,N)=>{m({type:A,text:N}),setTimeout(()=>m(null),5e3)},T=async()=>{try{f(!0);const A=await fetch(`${C.baseUrl}/api/ads`);if(!A.ok)throw new Error(`HTTP ${A.status}`);const N=await A.json();console.log(" :",N),c(N.advertisements||[])}catch(A){console.error(" :",A),E("error",`: ${String(A)}`),c([])}finally{f(!1)}},S=async A=>{if(confirm(` "${A}" `))try{const N=await fetch(`${C.baseUrl}/api/ads/${encodeURIComponent(A)}`,{method:"DELETE"});if(!N.ok){const q=await N.json();throw new Error(q.error||`HTTP ${N.status}`)}const z=await N.json();console.log(" :",z),E("success",z.message),await T(),window.dispatchEvent(new CustomEvent("advertisementListChanged",{detail:{action:"delete",filename:A}}))}catch(N){console.error(" :",N),E("error",`: ${String(N)}`)}},P=async A=>{const N=new FormData;N.append("file",A);try{g(!0),v(0);const z=setInterval(()=>{v(xe=>Math.min(xe+10,90))},200),q=await fetch(`${C.baseUrl}/api/ads/upload`,{method:"POST",body:N});if(clearInterval(z),v(100),!q.ok){const xe=await q.json();throw new Error(xe.error||`HTTP ${q.status}`)}const ue=await q.json();console.log(" :",ue),E("success",ue.message),await T(),window.dispatchEvent(new CustomEvent("advertisementListChanged",{detail:{action:"upload",filename:ue.file_info?.filename}}))}catch(z){console.error(" :",z),E("error",`: ${String(z)}`)}finally{g(!1),v(0)}},I=A=>{const N=A.target.files?.[0];if(N){if(!["video/mp4","video/avi","video/mov","video/webm","video/x-msvideo"].includes(N.type)){E("error"," MP4AVIMOV  WebM ");return}const q=o==="ads"?500*1024*1024:1024*1024*1024,ue=o==="ads"?"500MB":"1GB";if(N.size>q){E("error",` ${ue}: ${(N.size/(1024*1024)).toFixed(1)}MB`);return}o==="ads"?P(N):F(N)}_.current&&(_.current.value="")},M=A=>{A.preventDefault()},k=A=>{A.preventDefault();const z=Array.from(A.dataTransfer.files).find(q=>q.type.startsWith("video/"));z?o==="ads"?P(z):F(z):E("error","")},R=A=>{const N=eW(A.filename);window.open(N,"_blank")},O=A=>A<1024*1024?`${(A/1024).toFixed(1)} KB`:`${(A/(1024*1024)).toFixed(1)} MB`,V=async()=>{try{f(!0);const A=await fetch(`${C.baseUrl}/api/videos`);if(!A.ok)throw new Error(`HTTP ${A.status}`);const N=await A.json();console.log(" :",N),d(N.videos||[])}catch(A){console.error(" :",A),E("error",`: ${String(A)}`),d([])}finally{f(!1)}},U=async A=>{if(confirm(` "${A}" `))try{const N=await fetch(`${C.baseUrl}/api/videos/${encodeURIComponent(A)}`,{method:"DELETE"});if(!N.ok){const q=await N.json();throw new Error(q.error||`HTTP ${N.status}`)}const z=await N.json();console.log(" :",z),E("success",z.message),await V(),window.dispatchEvent(new CustomEvent("laundryVideoListChanged",{detail:{action:"delete",filename:A}}))}catch(N){console.error(" :",N),E("error",`: ${String(N)}`)}},F=async A=>{const N=new FormData;N.append("file",A);try{g(!0),v(0);const z=setInterval(()=>{v(xe=>Math.min(xe+10,90))},200),q=await fetch(`${C.baseUrl}/api/videos/upload`,{method:"POST",body:N});if(clearInterval(z),v(100),!q.ok){const xe=await q.json();throw new Error(xe.error||`HTTP ${q.status}`)}const ue=await q.json();console.log(" :",ue),E("success",ue.message),await V(),window.dispatchEvent(new CustomEvent("laundryVideoListChanged",{detail:{action:"upload",filename:ue.file_info?.filename}}))}catch(z){console.error(" :",z),E("error",`: ${String(z)}`)}finally{g(!1),v(0)}},L=A=>{const N=tW(A.filename);window.open(N,"_blank")},B=()=>o==="ads"?l:u;return w.useEffect(()=>{o==="ads"?T():V()},[o]),w.useEffect(()=>{T()},[]),b.jsxs(K,{...St.common.container,children:[b.jsxs(lt,{mb:6,gap:2,width:"full",children:[b.jsx(Zt,{variant:o==="ads"?"solid":"ghost",colorPalette:"blue",onClick:()=>a("ads"),size:"md",borderRadius:"lg",flex:1,fontWeight:"500",children:" "}),b.jsx(Zt,{variant:o==="videos"?"solid":"ghost",colorPalette:"blue",onClick:()=>a("videos"),size:"md",borderRadius:"lg",flex:1,fontWeight:"500",children:" "})]}),o==="ads"&&b.jsxs(K,{mb:4,p:4,borderWidth:1,borderRadius:"md",bg:"blue.50",borderColor:"blue.200",children:[b.jsx(el,{size:"md",mb:3,color:"blue.700",fontWeight:"600",children:" "}),b.jsxs(oi,{align:"stretch",gap:4,children:[b.jsxs(K,{children:[b.jsx(ze,{fontWeight:"bold",mb:2,children:""}),b.jsxs(lt,{children:[b.jsx(Zt,{size:"sm",variant:n?"solid":"outline",colorScheme:"gray",title:" - ",onClick:()=>r(hf.MUTED),children:" "}),b.jsx(Zt,{size:"sm",variant:s?"solid":"outline",colorScheme:"blue",title:" + VAD",onClick:()=>r(hf.AUDIO_VAD),children:" +VAD"}),b.jsx(Zt,{size:"sm",variant:i?"solid":"outline",colorScheme:"blue",title:" - ",onClick:()=>r(hf.AUDIO),children:" "})]}),b.jsxs(ze,{fontSize:"sm",color:"gray.800",mt:2,children:[" ",b.jsx("br",{})," ",b.jsx("br",{})," +VAD"]})]}),b.jsxs(K,{children:[b.jsx(ze,{fontWeight:"bold",mb:2,children:""}),b.jsxs(oi,{align:"start",gap:2,children:[b.jsx(ze,{fontSize:"sm",color:"green.600",children:" "}),b.jsx(ze,{fontSize:"sm",color:"green.600",children:" "}),b.jsx(ze,{fontSize:"sm",color:"gray.800",children:" "})]})]}),b.jsx(K,{p:3,bg:"white",borderRadius:"md",border:"1px solid",borderColor:"gray.200",children:b.jsx(ze,{fontSize:"sm",color:"gray.800",children:" "})})]})]}),y&&b.jsx(K,{mb:4,children:b.jsx(rT,{status:y.type,title:y.type==="error"?"":y.type==="success"?"":"",children:y.text})}),b.jsxs(K,{mb:4,p:4,borderWidth:1,borderRadius:"md",borderColor:"gray.200",children:[b.jsxs(el,{size:"md",mb:4,color:"gray.700",fontWeight:"600",children:[" ",o==="ads"?"":"",""]}),b.jsxs(K,{border:"2px dashed",borderColor:"gray.300",borderRadius:"md",p:6,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.400",bg:"blue.50"},onDragOver:M,onDrop:k,onClick:()=>_.current?.click(),children:[b.jsx(s_,{ref:_,type:"file",accept:"video/*",onChange:I,display:"none"}),p?b.jsxs(oi,{children:[b.jsx(jl,{size:"lg",color:"blue.500"}),b.jsx(ze,{fontWeight:"bold",children:"..."}),b.jsx(K,{width:"200px",height:"8px",bg:"gray.200",borderRadius:"md",children:b.jsx(K,{width:`${x}%`,height:"100%",bg:"blue.500",borderRadius:"md",transition:"width 0.3s"})}),b.jsxs(ze,{fontSize:"sm",color:"gray.800",children:[x,"%"]})]}):b.jsxs(oi,{children:[b.jsx(ze,{fontSize:"3xl",children:""}),b.jsx(ze,{fontWeight:"bold",children:""}),b.jsx(ze,{fontSize:"sm",color:"gray.800",children:": MP4, AVI, MOV, WebM | : 500MB"})]})]})]}),b.jsxs(K,{p:4,borderWidth:1,borderRadius:"md",borderColor:"gray.200",children:[b.jsxs(lt,{mb:4,children:[b.jsxs(el,{size:"md",children:[" ",o==="ads"?"":"",""]}),b.jsx(DR,{}),b.jsx(Dee,{size:"sm",onClick:()=>{o==="ads"?T():V()},loading:h,variant:"outline",children:" "})]}),h?b.jsx(pu,{justify:"center",p:8,children:b.jsx(jl,{size:"lg"})}):B().length===0?b.jsxs(rT,{status:"info",title:`${o==="ads"?"":""}`,children:["",o==="ads"?"":""]}):b.jsx(oi,{align:"stretch",children:B().map(A=>b.jsx(K,{p:4,borderWidth:1,borderRadius:"md",borderColor:"gray.300",bg:"white",children:b.jsxs(lt,{children:[b.jsxs(K,{flex:1,children:[b.jsxs(lt,{mb:2,children:[b.jsx(ze,{fontWeight:"bold",fontSize:"lg",color:"gray.800",children:A.name}),b.jsx(nT,{variant:"subtle",color:"gray.700",bg:"gray.100",children:A.format}),A.machine_id&&b.jsxs(nT,{colorScheme:"green",variant:"subtle",children:[" ",A.machine_id]})]}),b.jsxs(ze,{fontSize:"sm",color:"gray.800",mb:1,children:[": ",A.filename]}),b.jsxs(ze,{fontSize:"sm",color:"gray.800",children:[": ",O(A.size_bytes)]})]}),b.jsxs(lt,{children:[b.jsx(iT,{content:"",children:b.jsx(Zt,{size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>{o==="ads"?R(A):L(A)},children:""})}),b.jsx(iT,{content:"",children:b.jsx(Zt,{size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>{o==="ads"?S(A.filename):U(A.filename)},children:""})})]})]})},A.id))})]}),B().length>0&&b.jsxs(K,{mt:4,p:4,borderWidth:1,borderRadius:"md",children:[b.jsx(el,{size:"sm",mb:3,children:" "}),b.jsxs(lt,{children:[b.jsxs(oi,{children:[b.jsx(ze,{fontSize:"2xl",fontWeight:"bold",color:"blue.500",children:B().length}),b.jsx(ze,{fontSize:"sm",color:"gray.800",children:""})]}),b.jsx(K,{mx:8,height:"50px",borderLeft:"1px solid",borderColor:"gray.300"}),b.jsxs(oi,{children:[b.jsxs(ze,{fontSize:"2xl",fontWeight:"bold",color:"green.500",children:[(B().reduce((A,N)=>A+N.size_bytes,0)/(1024*1024)).toFixed(1),"MB"]}),b.jsx(ze,{fontSize:"sm",color:"gray.800",children:""})]})]})]})]})}function Uee(){return b.jsx(K,{children:"About Settings Content"})}const zee=({isOpen:t,onClose:e,useViewportBounds:r=!1})=>{const[n,i]=w.useState("general"),[s,o]=w.useState([]),[a,l]=w.useState([]),[c,u]=w.useState(!0),d=w.useRef(null);w.useEffect(()=>{const x=v=>{v.key==="Escape"&&t&&e()};return t&&document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[t,e]),w.useEffect(()=>{const x=d.current;if(!x)return;const v=new ResizeObserver(y=>{for(const m of y){const _=m.contentRect.width;u(_<768)}});return v.observe(x),u(x.getBoundingClientRect().width<768),()=>v.disconnect()},[d]);const h=w.useCallback(x=>(o(v=>[...v,x]),()=>{o(v=>v.filter(y=>y!==x))}),[]),f=w.useCallback(x=>(l(v=>[...v,x]),()=>{l(v=>v.filter(y=>y!==x))}),[]),p=w.useCallback(()=>{s.forEach(x=>x())},[s]),g=w.useCallback(()=>{a.forEach(x=>x())},[a]);return t?b.jsx(K,{position:r?"absolute":"fixed",top:0,left:0,right:0,bottom:0,bg:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",zIndex:9999,display:"flex",alignItems:r?"stretch":"center",justifyContent:r?"stretch":"center",overflow:r?"hidden":"auto",children:b.jsxs(K,{bg:{base:"rgba(255,255,255,0.92)",md:"rgba(255,255,255,0.86)"},borderRadius:r?0:{base:0,md:"xl"},width:r?"100%":{base:"100vw",md:"90vw"},height:r?"100%":{base:"100vh",md:"90vh"},maxWidth:r?"100%":{base:"100vw",md:"1200px"},border:r?"none":{base:"none",md:"1px solid"},borderColor:{base:"transparent",md:"whiteAlpha.400"},overflow:"auto",position:"relative",boxShadow:r?"none":{base:"none",md:"xl"},minW:"0",minH:"0",display:"flex",flexDirection:"column",ref:d,backdropFilter:"saturate(180%) blur(14px)",children:[b.jsxs(pu,{p:c?"3":"4",bg:c?"whiteAlpha.700":"whiteAlpha.500",align:"center",justify:"space-between",borderBottom:"1px solid",borderColor:"whiteAlpha.600",position:"sticky",top:0,zIndex:1,backdropFilter:"saturate(160%) blur(8px)",children:[b.jsx(el,{size:"lg",color:"gray.800",children:" "}),b.jsxs(lt,{gap:2,children:[b.jsxs(ze,{fontSize:"xs",color:"gray.700",children:[b.jsx(D6,{children:"Esc"})," "]}),b.jsx(sn,{size:"sm",variant:"ghost",onClick:e,color:"gray.700",_hover:{color:"gray.800"},children:b.jsx(U_,{})})]})]}),b.jsx(bG,{value:n,onValueChange:x=>i(x.value),h:"100%",children:b.jsxs(eB,{templateColumns:c?"1fr":"220px 1fr",h:"100%",minW:"0",minH:"0",flex:"1 1 auto",children:[b.jsx(K,{bg:"gray.100",p:"3",borderRight:c?"none":"1px solid",borderBottom:c?"1px solid":"none",borderColor:"gray.200",overflowY:c?"visible":"auto",overflowX:c?"auto":"visible",children:b.jsxs(wG,{display:"flex",flexDirection:c?"row":"column",flexWrap:c?"wrap":"nowrap",gap:2,children:[b.jsx(go,{value:"general",children:b.jsxs(lt,{as:"span",gap:2,align:"center",children:[b.jsx(KJ,{}),b.jsx("span",{children:""})]})}),b.jsx(go,{value:"live2d",children:b.jsxs(lt,{as:"span",gap:2,align:"center",children:[b.jsx(OJ,{}),b.jsx("span",{children:"Live2D"})]})}),b.jsx(go,{value:"asr",children:b.jsxs(lt,{as:"span",gap:2,align:"center",children:[b.jsx(YO,{}),b.jsx("span",{children:""})]})}),b.jsx(go,{value:"tts",children:b.jsxs(lt,{as:"span",gap:2,align:"center",children:[b.jsx(qO,{}),b.jsx("span",{children:""})]})}),b.jsx(go,{value:"agent",children:b.jsxs(lt,{as:"span",gap:2,align:"center",children:[b.jsx(BJ,{}),b.jsx("span",{children:""})]})}),b.jsx(go,{value:"media",children:b.jsxs(lt,{as:"span",gap:2,align:"center",children:[b.jsx(UJ,{}),b.jsx("span",{children:""})]})}),b.jsx(go,{value:"about",children:b.jsxs(lt,{as:"span",gap:2,align:"center",children:[b.jsx(VJ,{}),b.jsx("span",{children:""})]})})]})}),b.jsxs(K,{p:{base:3,md:4},overflow:"auto",minW:"0",minH:"0",children:[b.jsxs(_G,{children:[b.jsx(mo,{value:"general",children:b.jsx(Eee,{onSave:h,onCancel:f})}),b.jsx(mo,{value:"live2d",children:b.jsx(Tee,{onSave:h,onCancel:f})}),b.jsx(mo,{value:"asr",children:b.jsx(Iee,{onSave:h,onCancel:f})}),b.jsx(mo,{value:"tts",children:b.jsx(Aee,{})}),b.jsx(mo,{value:"agent",children:b.jsx(Lee,{onSave:h,onCancel:f})}),b.jsx(mo,{value:"media",children:b.jsx(Bee,{onSave:h,onCancel:f})}),b.jsx(mo,{value:"about",children:b.jsx(Uee,{})})]}),b.jsxs(lt,{mt:"4",justify:"flex-end",children:[b.jsx(Zt,{variant:"outline",colorPalette:"gray",onClick:g,children:""}),b.jsx(Zt,{colorPalette:"purple",onClick:p,children:""})]})]})]})})]})}):null},$ee=(t,e=!0)=>{const r=w.useCallback(n=>{if(!e)return;const i=[];n.ctrlKey&&i.push("ctrl"),n.altKey&&i.push("alt"),n.shiftKey&&i.push("shift"),n.metaKey&&i.push("meta");const s=n.key.toLowerCase(),o=i.length>0?`${i.join("+")}+${s}`:s;console.log(`Key pressed: ${n.key}, shortcutKey: ${o}, available shortcuts:`,Object.keys(t));const a=t[o];a&&(console.log(`Executing handler for: ${o}`),n.preventDefault(),n.stopPropagation(),a())},[t,e]);w.useEffect(()=>{if(e)return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[r,e])},jee=(t,e,r)=>{const n=w.useCallback(()=>{if(console.log("Toggle fullscreen requested"),typeof window<"u"&&window.api)try{console.log("Calling Electron toggleFullscreen API"),window.api.toggleFullscreen();return}catch(c){console.error("Error calling Electron toggleFullscreen:",c)}const o=document,a=document.documentElement,l=o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement;try{if(l){const c=document.exitFullscreen||o.webkitExitFullscreen||o.mozCancelFullScreen||o.msExitFullscreen;c&&c.call(document)}else{const c=a.requestFullscreen||a.webkitRequestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen;c&&c.call(a,{navigationUI:"hide"}).catch?.(()=>{})}}catch(c){console.error("DOM fullscreen toggle failed:",c)}},[]),i={"ctrl+ ":t,"ctrl+m":t,f11:n,"ctrl+g":n};r&&(i.escape=e),$ee(i,!0)},Vee=({src:t,title:e="",autoPlay:r=!0,autoClose:n=!0,onClose:i,onEnded:s})=>{const o=w.useRef(null),[a,l]=w.useState(!1),[c,u]=w.useState(!1),[d,h]=w.useState(!0),[f]=w.useState(!0);w.useEffect(()=>{const v=o.current;if(!v)return;const y=()=>{r&&(v.play().catch(P=>{console.error("VideoPlayer: Autoplay failed:",P)}),l(!0))},m=()=>{l(!0)},_=()=>{l(!1)},C=()=>{l(!1),s&&s(),n&&setTimeout(()=>{i&&i()},3e3)},E=P=>{console.error("VideoPlayer: Video error occurred:",P),console.error("VideoPlayer: Video error details:",v.error),console.error("VideoPlayer: Current src:",v.src)},T=()=>{},S=()=>{};return v.addEventListener("loadstart",T),v.addEventListener("loadeddata",y),v.addEventListener("canplay",S),v.addEventListener("play",m),v.addEventListener("pause",_),v.addEventListener("ended",C),v.addEventListener("error",E),()=>{v.removeEventListener("loadstart",T),v.removeEventListener("loadeddata",y),v.removeEventListener("canplay",S),v.removeEventListener("play",m),v.removeEventListener("pause",_),v.removeEventListener("ended",C),v.removeEventListener("error",E)}},[t,r,n,i,s]);const p=()=>{const v=o.current;v&&(a?v.pause():v.play().catch(y=>{console.error("VideoPlayer: Play failed:",y)}))},g=()=>{const v=o.current;v&&(v.muted=!v.muted,u(v.muted))},x=()=>{i&&i()};return w.useEffect(()=>{let v;const y=()=>{h(!0),clearTimeout(v),v=setTimeout(()=>{a&&h(!1)},3e3)},m=()=>y(),_=()=>{a&&h(!1)};return f&&(document.addEventListener("mousemove",m),document.addEventListener("mouseleave",_),y()),()=>{clearTimeout(v),document.removeEventListener("mousemove",m),document.removeEventListener("mouseleave",_)}},[a,f]),b.jsx(K,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",bg:"transparent",zIndex:"10",display:"flex",alignItems:"center",justifyContent:"center",children:b.jsxs(K,{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:[b.jsx("video",{ref:o,src:t,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},controls:!1,playsInline:!0}),d&&b.jsxs(K,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none",children:[b.jsxs(K,{position:"absolute",top:"0",left:"0",right:"0",height:"60px",bg:"linear-gradient(to bottom, rgba(0,0,0,0.7), transparent)",display:"flex",alignItems:"center",justifyContent:"space-between",px:"20px",pointerEvents:"auto",children:[b.jsx(K,{color:"white",fontSize:"lg",fontWeight:"bold",children:e}),b.jsx(sn,{"aria-label":"",variant:"ghost",colorScheme:"whiteAlpha",size:"lg",onClick:x,children:b.jsx(U_,{})})]}),!a&&b.jsx(K,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"auto",children:b.jsx(sn,{"aria-label":"",size:"xl",variant:"solid",colorScheme:"whiteAlpha",bg:"rgba(255,255,255,0.9)",color:"black",fontSize:"60px",width:"120px",height:"120px",borderRadius:"50%",onClick:p,children:b.jsx(eT,{})})}),b.jsx(K,{position:"absolute",bottom:"0",left:"0",right:"0",height:"80px",bg:"linear-gradient(to top, rgba(0,0,0,0.7), transparent)",display:"flex",alignItems:"center",justifyContent:"center",px:"20px",pointerEvents:"auto",children:b.jsxs(K,{display:"flex",alignItems:"center",gap:"4",children:[b.jsx(sn,{"aria-label":a?"":"",variant:"ghost",colorScheme:"whiteAlpha",size:"lg",onClick:p,children:a?b.jsx(qJ,{}):b.jsx(eT,{})}),b.jsx(sn,{"aria-label":c?"":"",variant:"ghost",colorScheme:"whiteAlpha",size:"lg",onClick:g,children:c?b.jsx(KO,{}):b.jsx(qO,{})}),b.jsx(Zt,{variant:"solid",colorScheme:"blue",size:"md",onClick:x,ml:"4",children:""})]})})]}),b.jsx(K,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",cursor:"pointer",onClick:p,pointerEvents:d?"none":"auto"})]})})},sT=w.memo(({isVisible:t,onRequestAdvertisements:e,enableAudioWithVAD:r=!0,defaultAudioEnabled:n=!0,fitMode:i="fill"})=>{const[s,o]=w.useState([]),[a,l]=w.useState(0),[c,u]=w.useState(!0),[d,h]=w.useState({isPlaying:!1,volume:0,averageAmplitude:0,peakAmplitude:0}),[f,p]=w.useState(!1),[g]=w.useState(n),x=w.useRef(null),v=w.useRef(null),y=w.useRef([]),{startMic:m}=pa(),_=w.useRef(m);w.useEffect(()=>{_.current=m},[m]);const{sendMessage:C,wsState:E,baseUrl:T}=fs(),[S,P]=w.useState(!1);w.useEffect(()=>{const U=xr.onMessage(F=>{if(F.type==="full-text"&&F.text==="Connection established"&&(console.log(" AdCarousel: WebSocket"),P(!0)),F.type==="mcp-tool-response"&&(F.tool_name==="get_advertisement_playlist"||F.tool_name==="refresh_advertisements")){if(console.log(" MCP:",F),F.error){console.error(" AdCarousel: MCP:",F.error),u(!1);return}try{if(F.result&&Array.isArray(F.result)&&F.result.length>0){const L=F.result[0];if(L.is_error){console.error(" AdCarousel: :",L.content),o([]),u(!1);return}const B=L.content;console.log(" :",B);const A=typeof B=="string"?JSON.parse(B):B;if(F.tool_name==="refresh_advertisements"){console.log(" :",A.message||"");return}if(A&&A.playlist&&Array.isArray(A.playlist)){const N=A.playlist.map((z,q)=>({id:`ad_${q+1}`,name:z.name||z.filename?.replace(/\.[^/.]+$/,"")||`Advertisement ${q+1}`,filename:z.filename,url_path:z.url_path,size_mb:z.size_mb||0,format:z.format||".mp4"}));if(o(N),a>=N.length){const z=Math.max(0,N.length-1);console.log(` AdCarousel:  ${a} -> ${z}`),l(z)}console.log(` AdCarousel:  ${N.length} `)}else console.warn(" AdCarousel: "),o([]),l(0)}else console.warn(" AdCarousel: MCP - result"),o([]),l(0)}catch(L){console.error(" AdCarousel: :",L),o([]),l(0)}u(!1)}});return()=>U.unsubscribe()},[]);const I=w.useCallback(async()=>{try{console.log(" AdCarousel: ...");const U={type:"mcp-tool-call",tool_name:"refresh_advertisements",arguments:{}};console.log(" :",U),C(U);const F=window.setTimeout(()=>{const B={type:"mcp-tool-call",tool_name:"get_advertisement_playlist",arguments:{}};console.log(" :",B),C(B)},500);y.current.push(F);const L=window.setTimeout(()=>{c&&(console.error(" "),u(!1))},8e3);y.current.push(L)}catch(U){console.error(" :",U),u(!1)}},[C,c]);w.useEffect(()=>{if(s.length===0)l(0);else if(a>=s.length){const U=s.length-1;console.log(` AdCarousel:  ${a} -> ${U}`),l(U)}},[s.length,a]),w.useEffect(()=>{t&&S&&(s.length===0?(console.log(" AdCarousel: ..."),setTimeout(()=>{I()},500)):f&&(console.log(" AdCarousel: ..."),I(),p(!1)))},[t,S,s.length,f]),w.useEffect(()=>{const U=F=>{const{action:L,filename:B,trigger:A}=F.detail||{};console.log(` AdCarousel:  - ${L}: ${B||"()"}`),A&&console.log(` : ${A}`),L==="upload"||L==="delete"?t&&S?(console.log(" AdCarousel: ..."),I()):(console.log(" AdCarousel: "),p(!0)):L==="refresh_on_show"&&console.log(" AdCarousel: ")};return window.addEventListener("advertisementListChanged",U),()=>{window.removeEventListener("advertisementListChanged",U)}},[t,S,I]),w.useEffect(()=>(v.current&&(clearInterval(v.current),v.current=null),()=>{v.current&&clearInterval(v.current)}),[t,s.length,a]);const M=w.useMemo(()=>s[a],[s,a]);w.useEffect(()=>{const U=x.current;if(!U||!t||s.length===0||!M)return;console.log(` AdCarousel:  ${M.name} (: ${a})`);let F=M.url_path;F.startsWith("/")&&(F=T+F),console.log(` URL: ${F}`);const L=()=>{console.log(" AdCarousel: "),g?(console.log(" "),r&&(console.log("+ VAD"),zi.startMonitoring(U)),U.muted=!1,U.play().then(()=>{console.log(" "),r&&C({type:"adaptive-vad-control",action:"start",volume:.5})}).catch(z=>{console.warn("fallback:",z),U.muted=!0,U.play().catch(q=>{console.error(":",q)})})):(console.log(" "),U.muted=!0,U.play().catch(z=>{console.error(":",z)}))},B=()=>{console.log(" AdCarousel: ")},A=()=>{console.error(" AdCarousel: ")},N=()=>{U.removeEventListener("canplay",L),U.removeEventListener("loadeddata",B),U.removeEventListener("error",A)};return U.src=F,U.load(),U.addEventListener("canplay",L,{once:!0}),U.addEventListener("loadeddata",B,{once:!0}),U.addEventListener("error",A,{once:!0}),N},[t,a,s,g,r,C,T]),w.useEffect(()=>{if(console.log(" AdCarousel VAD:",{isVisible:t,isAudioMode:g,enableAudioWithVAD:r,hasVideo:!!x.current}),!t)return;const U=x.current;U&&(g&&r&&(zi.startMonitoring(U),C({type:"adaptive-vad-control",action:"start",volume:.5})),_.current().catch(F=>{console.error(" AdCarousel: VAD:",F),console.error("Stack:",F?.stack)}))},[t,g,r,C]);const k=w.useRef(d);w.useEffect(()=>{k.current=d},[d]);const R=w.useRef(C);w.useEffect(()=>{R.current=C},[C]),w.useEffect(()=>{if(g&&r){const U=F=>{h(F),F.isPlaying!==k.current.isPlaying&&R.current({type:"adaptive-vad-control",action:F.isPlaying?"adjust":"reset",volume:F.volume})};return zi.addCallback(U),console.log(" AdCarousel: "),()=>{zi.removeCallback(U),console.log(" AdCarousel: ")}}},[g,r]),w.useEffect(()=>()=>{console.log(" AdCarousel: "),y.current.forEach(U=>clearTimeout(U)),y.current=[],g&&r&&(zi.stopMonitoring(),C({type:"adaptive-vad-control",action:"stop"}),zi.dispose().catch(()=>{}))},[g,r,C]);const O=w.useCallback(()=>{if(console.log(" AdCarousel: "),console.log(` : ${a}/${s.length}, :${t}`),g&&r&&zi.stopMonitoring(),s.length===1){console.log(" AdCarousel: ");const U=x.current;U&&(U.currentTime=0,U.play().catch(F=>{console.error(":",F)}))}else{const U=(a+1)%s.length;U===0&&console.log(" AdCarousel: "),console.log(` AdCarousel:  ${a} -> ${U}`),l(U)}},[a,s.length,t,g,r]),V=U=>{const F=U.currentTarget;console.error(":",F.src,F.error)};return t?b.jsxs("div",{className:"ad-carousel-overlay",style:{pointerEvents:"none"},children:[c?b.jsxs("div",{className:"ad-loading",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"..."})]}):s.length===0?b.jsx("div",{className:"ad-empty",children:b.jsxs("div",{className:"empty-placeholder",children:[b.jsx("h2",{children:" "}),b.jsx("p",{children:""}),b.jsx("p",{children:"ads/ "}),b.jsx("small",{children:": MP4, AVI, MOV, WebM, MKV"})]})}):b.jsx("div",{className:"ad-player-container",style:{pointerEvents:"none"},children:b.jsx("video",{ref:x,className:"ad-video",crossOrigin:"anonymous",autoPlay:!0,loop:!1,onEnded:O,onError:V,onLoadStart:void 0,onCanPlay:void 0,onPlay:void 0,onPause:void 0,onTimeUpdate:void 0,style:{objectFit:i,backgroundColor:"#000",pointerEvents:"none"},controls:!1,children:""})}),b.jsx("style",{children:`
        .ad-carousel-overlay {
          position: absolute;
          inset: 0;
          width: 100%;
          height: 100%;
          background: transparent; /*  #viewport  */
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .ad-loading {
          text-align: center;
          color: white;
        }

        .loading-spinner {
          width: 50px;
          height: 50px;
          border: 3px solid rgba(255, 255, 255, 0.3);
          border-top: 3px solid white;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 20px;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        .ad-empty {
          text-align: center;
          color: white;
          padding: 40px;
        }

        .empty-placeholder h2 {
          margin-bottom: 20px;
          font-size: 2em;
        }

        .empty-placeholder p {
          margin: 10px 0;
          font-size: 1.2em;
        }

        .empty-placeholder small {
          opacity: 0.7;
          font-size: 0.9em;
        }

        .ad-player-container {
          position: relative;
          width: 100%;
          height: 100%;
          background: #000; /*  contain/scale-down  */
        }

        .ad-video {
          width: 100%;
          height: 100%;
          object-fit: initial; /*  style  fit  */
        }

        /*   -  */


      `})]}):null});class Gee extends w.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,r){console.error(" React Error Boundary:",e),console.error(" :",r),this.setState({error:e,errorInfo:r}),this.props.onError&&this.props.onError(e,r),this.reportError(e,r)}reportError(e,r){const n={message:e.message,stack:e.stack,componentStack:r.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};try{console.warn(" :",n)}catch(i){console.error(" :",i)}}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleRefresh=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?this.props.fallback?this.props.fallback:b.jsx(K,{minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bg:"gray.50",p:8,children:b.jsxs(oi,{spacing:6,maxW:"md",textAlign:"center",children:[b.jsx(K,{color:"red.500",fontSize:"5xl",children:b.jsx(MJ,{})}),b.jsxs(oi,{spacing:3,children:[b.jsx(el,{size:"lg",color:"gray.800",children:""}),b.jsx(ze,{color:"gray.600",fontSize:"md",children:""})]}),b.jsxs(lt,{spacing:4,children:[b.jsx(Zt,{leftIcon:b.jsx(mx,{}),colorScheme:"blue",onClick:this.handleReset,size:"md",children:""}),b.jsx(Zt,{leftIcon:b.jsx(mx,{}),variant:"outline",onClick:this.handleRefresh,size:"md",children:""}),b.jsx(Zt,{leftIcon:b.jsx($J,{}),variant:"ghost",onClick:this.handleGoHome,size:"md",children:""})]}),!1]})}):this.props.children}}const tL=w.createContext(null);function Wee({children:t}){const e=Z(u=>u.chat.selfUid),r=Z(u=>u.chat.groupMembers),n=Z(u=>u.chat.isOwner),i=Z(u=>u.updateChatState),s=w.useCallback(u=>{i({selfUid:u})},[i]),o=w.useCallback(u=>{i({groupMembers:u})},[i]),a=w.useCallback(u=>{i({isOwner:u})},[i]),l=w.useCallback(()=>{i({groupMembers:[],isOwner:!1})},[i]),c=w.useMemo(()=>r?.includes(e)?[e,...(r||[]).filter(u=>u!==e)]:r||[],[r,e]);return b.jsx(tL.Provider,{value:{selfUid:e,groupMembers:r,isOwner:n,setSelfUid:s,setGroupMembers:o,setIsOwner:a,sortedGroupMembers:c,resetGroupState:l},children:t})}function Hee(){const t=w.useContext(tL);if(!t)throw new Error("useGroup must be used within a GroupProvider");return t}const Xee=w.memo(({children:t})=>{const[e,r]=w.useState("CLOSED"),{wsUrl:n,baseUrl:i,updateNetworkConfig:s}=K8(),o=w.useRef(i),{status:a,setAiState:l}=Ai(),c=Z(H=>H.setBackendSynthComplete),{setModelInfo:u}=io(),{setSubtitleText:d}=ki(),{clearResponse:h,setForceNewMessage:f}=Kl(),{addAudioTask:p}=WO(),{setConfName:g,setConfUid:x,setConfigFiles:v}=lc(),[y,m]=w.useState({}),{setSelfUid:_,setGroupMembers:C,setIsOwner:E}=Hee(),{startMic:T,stopMic:S,autoStartMicOnConvEnd:P}=pa(),I=w.useRef(P),{interrupt:M}=ya(),{setCurrentVideo:k,setAvailableMachines:R,isLaundryMode:O,setIsLaundryMode:V,isVideoPlaying:U,setShowAdvertisements:F,setBackgroundFiles:L}=rp(),{setCurrentHistoryUid:B,setMessages:A,setHistoryList:N,appendHumanMessage:z}=Kl(),q=w.useRef(a),ue=w.useRef(U),xe=w.useRef(O),we=w.useRef(T),Me=w.useRef(S),$=w.useRef(l),j=w.useRef(d),le=w.useRef(v),X=w.useRef(_),oe=w.useRef(C),he=w.useRef(E),Ue=w.useRef(p),ht=w.useRef(c),nr=w.useRef(h),Mi=w.useRef(B),Gn=w.useRef(A),va=w.useRef(N),wd=w.useRef(z),fc=w.useRef(k),pc=w.useRef(R),Oi=w.useRef(F),jg=w.useRef(L);w.useEffect(()=>{q.current=a},[a]),w.useEffect(()=>{ue.current=U},[U]),w.useEffect(()=>{xe.current=O},[O]),w.useEffect(()=>{we.current=T},[T]),w.useEffect(()=>{Me.current=S},[S]),w.useEffect(()=>{$.current=l},[l]),w.useEffect(()=>{j.current=d},[d]),w.useEffect(()=>{le.current=v},[v]),w.useEffect(()=>{X.current=_},[_]),w.useEffect(()=>{oe.current=C},[C]),w.useEffect(()=>{he.current=E},[E]),w.useEffect(()=>{Ue.current=p},[p]),w.useEffect(()=>{ht.current=c},[c]),w.useEffect(()=>{nr.current=h},[h]),w.useEffect(()=>{Mi.current=B},[B]),w.useEffect(()=>{Gn.current=A},[A]),w.useEffect(()=>{va.current=N},[N]),w.useEffect(()=>{wd.current=z},[z]),w.useEffect(()=>{fc.current=k},[k]),w.useEffect(()=>{pc.current=R},[R]),w.useEffect(()=>{Oi.current=F},[F]),w.useEffect(()=>{jg.current=L},[L]),w.useEffect(()=>{I.current=P},[P]),w.useEffect(()=>{o.current=i},[i]),w.useEffect(()=>{(y.confUid||y.modelInfo)&&(y.confUid&&(console.log(" Setting confUid:",y.confUid),x(y.confUid)),y.confUid&&y.modelInfo&&(console.log(" Setting modelInfo with confUid:",y.confUid),u(y.modelInfo,y.confUid)),m({}))},[y,u,x]);const rL=w.useCallback(H=>{switch(H){case"start-mic":console.log("Starting microphone..."),we.current();break;case"stop-mic":console.log("Stopping microphone..."),Me.current();break;case"conversation-chain-start":$.current("thinking"),j.current("..."),Yi.clearQueue(),nr.current();break;case"conversation-chain-end":Yi.addTask(()=>new Promise(lo=>{$.current(co=>co==="thinking"||co==="speaking"?"idle":co),console.log("  autoStartMicOnConvEnd:",I.current),I.current?(console.log(" "),we.current()):console.log(" autoStartMicOnConvEnd  false"),lo()}));break;default:console.warn("Unknown control command:",H)}},[]),z_=w.useCallback(H=>{switch(console.log("Received message from server:",H),H.type){case"control":H.text&&rL(H.text);break;case"set-model-and-conf":if($.current("loading"),H.conf_name&&g(H.conf_name),H.client_uid&&X.current(H.client_uid),H.model_info&&!H.model_info.url.startsWith("http")){const mn=o.current+H.model_info.url;H.model_info.url=mn}H.conf_uid&&H.model_info?(console.log(" Pending Live2D model with confUid:",H.conf_uid),m({confUid:H.conf_uid,modelInfo:H.model_info}),Qt.create({title:"Loading model...",type:"info",duration:1200})):H.conf_uid?m({confUid:H.conf_uid}):H.model_info&&(console.warn(" Received model_info without conf_uid"),m({modelInfo:H.model_info})),$.current("idle");break;case"full-text":H.text&&(j.current(H.text),H.text==="Connection established"&&(ue.current||Oi.current(!0)));break;case"config-files":H.configs&&le.current(H.configs);break;case"config-switched":$.current("idle"),j.current(""),Qt.create({title:H.conf_name?`Character switched: ${H.conf_name}`:"Character switched",type:"success",duration:2e3}),xr.sendMessage({type:"fetch-history-list"}),xr.sendMessage({type:"create-new-history"});break;case"background-files":H.files&&jg.current&&jg.current(H.files);break;case"laundry-video-response":if(H.video_path){O||V(!0),Oi.current(!1);const mn=H.machine_id?`${H.machine_id}`:"";let Wn=H.video_path;Wn.startsWith("/")&&(Wn=o.current+Wn),console.log(` URL: ${Wn}`),Yi.clearQueue(),fc.current(Wn,mn)}break;case"laundry-machines-list":O&&H.machines&&pc.current(H.machines);break;case"wake-word-state":const{action:lo,matched_word:co,language:$_,advertisement_control:j_}=H;if(lo==="wake_up"?console.log(` : "${co}" (${$_}) - `):lo==="sleep"?console.log(` : "${co}" (${$_}) - `):lo==="ignored"&&console.log(` : "${co}"`),j_){const{should_show_ads:mn,control_action:Wn,trigger_reason:Sd}=j_;Wn==="start_ads"?(console.log(` :  (: ${Sd})`),Oi.current(!0),console.log(" "),console.log("  AI :",q.current),console.log(" :",Sd),Sd==="ignored"?(console.log("  VAD for  (ignored )"),we.current().catch(Vg=>{console.error(" VAD:",Vg)})):q.current==="idle"?(console.log("  VAD for  (AI idle)"),we.current().catch(Vg=>{console.error(" VAD:",Vg)})):console.log(" AI  VAD")):Wn==="stop_ads"&&(console.log(` :  (: ${Sd})`),Oi.current(!1)),console.log(` : ${mn?"":""}`)}break;case"audio":q.current==="interrupted"||q.current==="listening"||ue.current?console.log("Audio playback intercepted. Sentence:",H.display_text?.text):(console.log("actions",H.actions),Ue.current({audioBase64:H.audio||"",volumes:H.volumes||[],sliceLength:H.slice_length||0,displayText:H.display_text||null,expressions:H.actions?.expressions||null,forwarded:H.forwarded||!1}));break;case"history-data":H.messages&&Gn.current(H.messages),Qt.create({title:"History loaded",type:"success",duration:2e3});break;case"new-history-created":if($.current("idle"),j.current(""),H.history_uid){Mi.current(H.history_uid),Gn.current([]);const mn={uid:H.history_uid,latest_message:null,timestamp:new Date().toISOString()};va.current(Wn=>[mn,...Wn]),Qt.create({title:"New chat history created",type:"success",duration:2e3})}break;case"history-deleted":Qt.create({title:H.success?"History deleted successfully":"Failed to delete history",type:H.success?"success":"error",duration:2e3});break;case"history-list":H.histories&&(va.current(H.histories),H.histories.length>0&&Mi.current(H.histories[0].uid));break;case"user-input-transcription":console.log("user-input-transcription: ",H.text),H.text&&wd.current(H.text);break;case"error":Qt.create({title:H.message,type:"error",duration:2e3});break;case"group-update":console.log("Received group-update:",H.members),H.members&&oe.current(H.members),H.is_owner!==void 0&&he.current(H.is_owner);break;case"group-operation-result":Qt.create({title:H.message,type:H.success?"success":"error",duration:2e3});break;case"backend-synth-complete":ht.current(!0);break;case"conversation-chain-end":Yi.hasTask()||($.current(mn=>mn==="thinking"||mn==="speaking"?"idle":mn),console.log("  autoStartMicOnConvEnd ():",I.current),I.current?(console.log(" "),we.current()):console.log(" autoStartMicOnConvEnd  false"));break;case"force-new-message":f(!0);break;case"interrupt-signal":M(!1);break;case"mcp-tool-response":console.log(" MCP:",H.tool_name);break;case"adaptive-vad-response":H.success?console.log(` VAD '${H.action}' `):console.warn(` VAD: ${H.error}`);break;default:console.warn("Unknown message type:",H.type)}},[]);w.useEffect(()=>(console.log(" WebSocketHandler: WebSocket",n),xr.connect(n),()=>{console.log(" WebSocketHandler: WebSocket"),xr.disconnect()}),[n]),w.useEffect(()=>{console.log(" WebSocketHandler: ");const H=xr.onStateChange(r),lo=xr.onMessage(z_);return()=>{console.log(" WebSocketHandler: "),H.unsubscribe(),lo.unsubscribe()}},[z_]);const nL=w.useMemo(()=>({sendMessage:xr.sendMessage.bind(xr),wsState:e,reconnect:()=>xr.connect(n),wsUrl:n,setWsUrl:H=>{s({wsUrl:H}),xr.connect(H)},baseUrl:i,setBaseUrl:H=>{s({baseUrl:H})}}),[e,n,i,s]);return b.jsx(gM.Provider,{value:nL,children:t})}),Yee=({children:t})=>{const e=(r,n)=>{console.error(" React:",r,n),Hc.handleError({type:"unknown",message:r.message,originalError:r,context:"React Component Tree",timestamp:Date.now(),recoverable:!1})};return b.jsx(Gee,{onError:e,children:b.jsxs(UN,{value:i6,children:[b.jsx(a8,{}),t]})})},qee=({children:t})=>b.jsx(b.Fragment,{children:t}),Kee=({children:t})=>b.jsx(b.Fragment,{children:t}),Zee=({children:t})=>b.jsx(Yee,{children:b.jsx(qee,{children:b.jsx(Kee,{children:b.jsx(mJ,{children:b.jsx(c8,{children:b.jsx(pW,{children:b.jsx(lW,{children:b.jsx(SJ,{children:b.jsx(Ree,{children:b.jsx(cW,{children:b.jsx(yW,{children:b.jsx(sW,{children:b.jsx(Wee,{children:b.jsx(Xee,{children:t})})})})})})})})})})})})})});function Qee(){const[t,e]=w.useState("window"),[r,n]=w.useState(!1),[i,s]=w.useState(!1),o=window.api!==void 0,{currentVideo:a,videoTitle:l,setCurrentVideo:c}=rp(),{showAdvertisements:u}=rp(),{isAudioEnabled:d,isVADEnabled:h}=Nee(),f=()=>n(!0),p=()=>n(!1);jee(f,p,r),w.useEffect(()=>{if(o&&window.api?.onFullscreenChange)return window.api.onFullscreenChange(R=>{s(R)})},[o]),w.useEffect(()=>{if(o){const k=(R,O)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("renderer-ready-for-mode-change",O)})})};return window.electron.ipcRenderer.on("pre-mode-changed",k),()=>{try{window.electron.ipcRenderer.removeListener("pre-mode-changed",k)}catch{}}}return()=>{}},[o]),w.useEffect(()=>{if(o){const k=(R,O)=>{e(O),requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("mode-change-rendered")})})};return window.electron.ipcRenderer.on("mode-changed",k),()=>{try{window.electron.ipcRenderer.removeListener("mode-changed",k)}catch{}}}return()=>{}},[o]),w.useEffect(()=>{const k=()=>{const R=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${R}px`)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const g=()=>i?"100vh":o?"calc(100vh - 30px)":"100vh",x=(k,R)=>{const O=new URLSearchParams(location.search).get(k),V=O?Number(O):NaN;return Number.isFinite(V)?V:R},v=k=>(new URLSearchParams(location.search).get(k)??"")==="1",[y,m]=w.useState(()=>({x:Math.round(x("cx",0)),y:Math.round(x("cy",0)),w:Math.round(x("cw",window.innerWidth)),h:Math.round(x("ch",window.innerHeight))})),[_,C]=w.useState(v("vpdebug")),[E,T]=w.useState(null),S=(k,R,O)=>Math.max(R,Math.min(O,k)),P=50,I=k=>{m(k);try{const R=new URLSearchParams(location.search);R.set("cx",String(k.x)),R.set("cy",String(k.y)),R.set("cw",String(k.w)),R.set("ch",String(k.h)),_&&R.set("vpdebug","1");const O=`${location.pathname}?${R.toString()}${location.hash}`;history.replaceState(null,"",O)}catch{}};w.useEffect(()=>{_&&console.log("[Viewport:init]",{search:location.search,devicePixelRatio:window.devicePixelRatio,innerWidth:window.innerWidth,innerHeight:window.innerHeight,viewport:y})},[]),w.useEffect(()=>{const k=()=>{m(O=>({x:O.x,y:O.y,w:Math.round(x("cw",window.innerWidth)),h:Math.round(x("ch",window.innerHeight))})),_&&console.log("[Viewport:resize]",{innerWidth:window.innerWidth,innerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio})},R=()=>{m({x:Math.round(x("cx",0)),y:Math.round(x("cy",0)),w:Math.round(x("cw",window.innerWidth)),h:Math.round(x("ch",window.innerHeight))}),C(v("vpdebug")),_&&console.log("[Viewport:navigation]",{search:location.search,viewport:{x:Math.round(x("cx",0)),y:Math.round(x("cy",0)),w:Math.round(x("cw",window.innerWidth)),h:Math.round(x("ch",window.innerHeight))}})};return window.addEventListener("resize",k),window.addEventListener("hashchange",R),window.addEventListener("popstate",R),()=>{window.removeEventListener("resize",k),window.removeEventListener("hashchange",R),window.removeEventListener("popstate",R)}},[]),w.useEffect(()=>{_&&console.log("[Viewport:apply]",y)},[y,_]),w.useEffect(()=>{if(!E)return;const k=O=>{const V=O.clientX-E.startX,U=O.clientY-E.startY,F=window.innerWidth,L=window.innerHeight;let{x:B,y:A,w:N,h:z}=E.startV;switch(E.mode){case"move":B=S(B+V,0,F-N),A=S(A+U,0,L-z);break;case"e":N=S(N+V,P,F-B);break;case"s":z=S(z+U,P,L-A);break;case"w":B=S(B+V,0,B+N-P),N=S(E.startV.w-(B-E.startV.x),P,F-B);break;case"n":A=S(A+U,0,A+z-P),z=S(E.startV.h-(A-E.startV.y),P,L-A);break;case"se":N=S(N+V,P,F-B),z=S(z+U,P,L-A);break;case"ne":A=S(A+U,0,A+z-P),z=S(E.startV.h-(A-E.startV.y),P,L-A),N=S(N+V,P,F-B);break;case"sw":B=S(B+V,0,B+N-P),N=S(E.startV.w-(B-E.startV.x),P,F-B),z=S(z+U,P,L-A);break;case"nw":B=S(B+V,0,B+N-P),A=S(A+U,0,A+z-P),N=S(E.startV.w-(B-E.startV.x),P,F-B),z=S(E.startV.h-(A-E.startV.y),P,L-A);break}I({x:Math.round(B),y:Math.round(A),w:Math.round(N),h:Math.round(z)})},R=()=>T(null);return window.addEventListener("mousemove",k),window.addEventListener("mouseup",R),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",R)}},[E,_]);const M=k=>R=>{R.preventDefault(),R.stopPropagation(),T({mode:k,startX:R.clientX,startY:R.clientY,startV:y})};return b.jsx(b.Fragment,{children:t==="window"?b.jsxs(b.Fragment,{children:[o&&!i&&b.jsx(nee,{}),b.jsxs(K,{width:"100vw",height:g(),bg:"gray.900",color:"white",overflow:"hidden",position:"relative",children:[b.jsxs(K,{id:"viewport",position:"absolute",left:`${y.x}px`,top:`${y.y}px`,width:`${y.w}px`,height:`${y.h}px`,overflow:"hidden",bg:"transparent",border:_?"2px solid #0ff":"none",children:[!u&&!a&&b.jsx(EJ,{}),a&&b.jsx(Vee,{src:a,title:l,autoPlay:!0,autoClose:!0,onClose:()=>c(null),onEnded:()=>{console.log("")}}),b.jsx(sT,{isVisible:u,enableAudioWithVAD:h,defaultAudioEnabled:d,onRequestAdvertisements:()=>{console.log("...")}}),_&&b.jsx(K,{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"move",bg:"transparent",zIndex:1e3,onMouseDown:M("move")}),_&&b.jsxs(b.Fragment,{children:[b.jsx(K,{position:"absolute",left:"0",top:"0",width:"14px",height:"14px",bg:"#0ff",zIndex:1001,cursor:"nwse-resize",onMouseDown:M("nw")}),b.jsx(K,{position:"absolute",right:"0",top:"0",width:"14px",height:"14px",bg:"#0ff",zIndex:1001,cursor:"nesw-resize",onMouseDown:M("ne")}),b.jsx(K,{position:"absolute",left:"0",bottom:"0",width:"14px",height:"14px",bg:"#0ff",zIndex:1001,cursor:"nesw-resize",onMouseDown:M("sw")}),b.jsx(K,{position:"absolute",right:"0",bottom:"0",width:"14px",height:"14px",bg:"#0ff",zIndex:1001,cursor:"nwse-resize",onMouseDown:M("se")}),b.jsx(K,{position:"absolute",left:"0",top:"50%",width:"12px",height:"24px",bg:"#0ff",transform:"translateY(-50%)",zIndex:1001,cursor:"ew-resize",onMouseDown:M("w")}),b.jsx(K,{position:"absolute",right:"0",top:"50%",width:"12px",height:"24px",bg:"#0ff",transform:"translateY(-50%)",zIndex:1001,cursor:"ew-resize",onMouseDown:M("e")}),b.jsx(K,{position:"absolute",top:"0",left:"50%",width:"24px",height:"12px",bg:"#0ff",transform:"translateX(-50%)",zIndex:1001,cursor:"ns-resize",onMouseDown:M("n")}),b.jsx(K,{position:"absolute",bottom:"0",left:"50%",width:"24px",height:"12px",bg:"#0ff",transform:"translateX(-50%)",zIndex:1001,cursor:"ns-resize",onMouseDown:M("s")})]})]}),b.jsx(K,{position:"absolute",left:`${y.x}px`,top:`${y.y}px`,width:`${y.w}px`,height:`${y.h}px`,pointerEvents:r?"auto":"none",zIndex:1002,overflow:"hidden",children:b.jsx(zee,{isOpen:r,onClose:p,useViewportBounds:!0})})]})]}):b.jsxs(b.Fragment,{children:[b.jsx(K,{width:"100vw",height:g(),position:"relative",overflow:"hidden",bg:"transparent",children:b.jsxs(K,{id:"viewport",position:"absolute",left:`${y.x}px`,top:`${y.y}px`,width:`${y.w}px`,height:`${y.h}px`,overflow:"hidden",border:_?"2px solid #0ff":"none",onMouseDown:_?M("move"):void 0,children:[!u&&!a&&b.jsx(B_,{isPet:t==="pet"}),b.jsx(sT,{isVisible:u,enableAudioWithVAD:h,defaultAudioEnabled:d,onRequestAdvertisements:()=>{console.log("...")}}),_&&b.jsx(K,{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"move",bg:"transparent",zIndex:1e3,onMouseDown:M("move")}),_&&b.jsxs(b.Fragment,{children:[b.jsx(K,{position:"absolute",left:"0",top:"0",width:"10px",height:"10px",bg:"#0ff",cursor:"nwse-resize",onMouseDown:M("nw")}),b.jsx(K,{position:"absolute",right:"0",top:"0",width:"10px",height:"10px",bg:"#0ff",cursor:"nesw-resize",onMouseDown:M("ne")}),b.jsx(K,{position:"absolute",left:"0",bottom:"0",width:"10px",height:"10px",bg:"#0ff",cursor:"nesw-resize",onMouseDown:M("sw")}),b.jsx(K,{position:"absolute",right:"0",bottom:"0",width:"10px",height:"10px",bg:"#0ff",cursor:"nwse-resize",onMouseDown:M("se")}),b.jsx(K,{position:"absolute",left:"0",top:"50%",width:"10px",height:"20px",bg:"#0ff",transform:"translateY(-50%)",cursor:"ew-resize",onMouseDown:M("w")}),b.jsx(K,{position:"absolute",right:"0",top:"50%",width:"10px",height:"20px",bg:"#0ff",transform:"translateY(-50%)",cursor:"ew-resize",onMouseDown:M("e")}),b.jsx(K,{position:"absolute",top:"0",left:"50%",width:"20px",height:"10px",bg:"#0ff",transform:"translateX(-50%)",cursor:"ns-resize",onMouseDown:M("n")}),b.jsx(K,{position:"absolute",bottom:"0",left:"50%",width:"20px",height:"10px",bg:"#0ff",transform:"translateX(-50%)",cursor:"ns-resize",onMouseDown:M("s")})]})]})}),t==="pet"&&!u&&!a&&b.jsx(hee,{isPet:t==="pet"})]})})}function Jee(){return b.jsx(Zee,{children:b.jsx(Qee,{})})}const ete=console.warn;console.warn=(...t)=>{typeof t[0]=="string"&&t[0].includes("onnxruntime")||ete.apply(console,t)};typeof window<"u"&&xI(document.getElementById("root")).render(b.jsx(Jee,{}));export{oL as a,sL as c,yx as g};
